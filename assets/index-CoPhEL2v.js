(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function yd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hy={},sf={},rT;function FN(){if(rT)return sf;rT=1,sf.byteLength=l,sf.toByteArray=f,sf.fromByteArray=_;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(v){var w=v.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=v.indexOf("=");R===-1&&(R=w);var D=R===w?0:4-R%4;return[R,D]}function l(v){var w=a(v),R=w[0],D=w[1];return(R+D)*3/4-D}function h(v,w,R){return(w+R)*3/4-R}function f(v){var w,R=a(v),D=R[0],V=R[1],W=new t(h(v,D,V)),G=0,te=V>0?D-4:D,Y;for(Y=0;Y<te;Y+=4)w=e[v.charCodeAt(Y)]<<18|e[v.charCodeAt(Y+1)]<<12|e[v.charCodeAt(Y+2)]<<6|e[v.charCodeAt(Y+3)],W[G++]=w>>16&255,W[G++]=w>>8&255,W[G++]=w&255;return V===2&&(w=e[v.charCodeAt(Y)]<<2|e[v.charCodeAt(Y+1)]>>4,W[G++]=w&255),V===1&&(w=e[v.charCodeAt(Y)]<<10|e[v.charCodeAt(Y+1)]<<4|e[v.charCodeAt(Y+2)]>>2,W[G++]=w>>8&255,W[G++]=w&255),W}function p(v){return n[v>>18&63]+n[v>>12&63]+n[v>>6&63]+n[v&63]}function y(v,w,R){for(var D,V=[],W=w;W<R;W+=3)D=(v[W]<<16&16711680)+(v[W+1]<<8&65280)+(v[W+2]&255),V.push(p(D));return V.join("")}function _(v){for(var w,R=v.length,D=R%3,V=[],W=16383,G=0,te=R-D;G<te;G+=W)V.push(y(v,G,G+W>te?te:G+W));return D===1?(w=v[R-1],V.push(n[w>>2]+n[w<<4&63]+"==")):D===2&&(w=(v[R-2]<<8)+v[R-1],V.push(n[w>>10]+n[w>>4&63]+n[w<<2&63]+"=")),V.join("")}return sf}var l0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var iT;function VN(){return iT||(iT=1,l0.read=function(n,e,t,r,i){var s,a,l=i*8-r-1,h=(1<<l)-1,f=h>>1,p=-7,y=t?i-1:0,_=t?-1:1,v=n[e+y];for(y+=_,s=v&(1<<-p)-1,v>>=-p,p+=l;p>0;s=s*256+n[e+y],y+=_,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=r;p>0;a=a*256+n[e+y],y+=_,p-=8);if(s===0)s=1-f;else{if(s===h)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-f}return(v?-1:1)*a*Math.pow(2,s-r)},l0.write=function(n,e,t,r,i,s){var a,l,h,f=s*8-i-1,p=(1<<f)-1,y=p>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,w=r?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+y>=1?e+=_/h:e+=_*Math.pow(2,1-y),e*h>=2&&(a++,h/=2),a+y>=p?(l=0,a=p):a+y>=1?(l=(e*h-1)*Math.pow(2,i),a=a+y):(l=e*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;n[t+v]=l&255,v+=w,l/=256,i-=8);for(a=a<<i|l,f+=i;f>0;n[t+v]=a&255,v+=w,a/=256,f-=8);n[t+v-w]|=R*128}),l0}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var sT;function UN(){return sT||(sT=1,function(n){const e=FN(),t=VN(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const A=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(A,x),A.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(A){if(A>i)throw new RangeError('The value "'+A+'" is invalid for option "size"');const x=new Uint8Array(A);return Object.setPrototypeOf(x,l.prototype),x}function l(A,x,k){if(typeof A=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(A)}return h(A,x,k)}l.poolSize=8192;function h(A,x,k){if(typeof A=="string")return _(A,x);if(ArrayBuffer.isView(A))return w(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(Vn(A,ArrayBuffer)||A&&Vn(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vn(A,SharedArrayBuffer)||A&&Vn(A.buffer,SharedArrayBuffer)))return R(A,x,k);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=A.valueOf&&A.valueOf();if(L!=null&&L!==A)return l.from(L,x,k);const K=D(A);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return l.from(A[Symbol.toPrimitive]("string"),x,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}l.from=function(A,x,k){return h(A,x,k)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function p(A,x,k){return f(A),A<=0?a(A):x!==void 0?typeof k=="string"?a(A).fill(x,k):a(A).fill(x):a(A)}l.alloc=function(A,x,k){return p(A,x,k)};function y(A){return f(A),a(A<0?0:V(A)|0)}l.allocUnsafe=function(A){return y(A)},l.allocUnsafeSlow=function(A){return y(A)};function _(A,x){if((typeof x!="string"||x==="")&&(x="utf8"),!l.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const k=G(A,x)|0;let L=a(k);const K=L.write(A,x);return K!==k&&(L=L.slice(0,K)),L}function v(A){const x=A.length<0?0:V(A.length)|0,k=a(x);for(let L=0;L<x;L+=1)k[L]=A[L]&255;return k}function w(A){if(Vn(A,Uint8Array)){const x=new Uint8Array(A);return R(x.buffer,x.byteOffset,x.byteLength)}return v(A)}function R(A,x,k){if(x<0||A.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<x+(k||0))throw new RangeError('"length" is outside of buffer bounds');let L;return x===void 0&&k===void 0?L=new Uint8Array(A):k===void 0?L=new Uint8Array(A,x):L=new Uint8Array(A,x,k),Object.setPrototypeOf(L,l.prototype),L}function D(A){if(l.isBuffer(A)){const x=V(A.length)|0,k=a(x);return k.length===0||A.copy(k,0,0,x),k}if(A.length!==void 0)return typeof A.length!="number"||di(A.length)?a(0):v(A);if(A.type==="Buffer"&&Array.isArray(A.data))return v(A.data)}function V(A){if(A>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return A|0}function W(A){return+A!=A&&(A=0),l.alloc(+A)}l.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==l.prototype},l.compare=function(x,k){if(Vn(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),Vn(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(x)||!l.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===k)return 0;let L=x.length,K=k.length;for(let re=0,ae=Math.min(L,K);re<ae;++re)if(x[re]!==k[re]){L=x[re],K=k[re];break}return L<K?-1:K<L?1:0},l.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(x,k){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return l.alloc(0);let L;if(k===void 0)for(k=0,L=0;L<x.length;++L)k+=x[L].length;const K=l.allocUnsafe(k);let re=0;for(L=0;L<x.length;++L){let ae=x[L];if(Vn(ae,Uint8Array))re+ae.length>K.length?(l.isBuffer(ae)||(ae=l.from(ae)),ae.copy(K,re)):Uint8Array.prototype.set.call(K,ae,re);else if(l.isBuffer(ae))ae.copy(K,re);else throw new TypeError('"list" argument must be an Array of Buffers');re+=ae.length}return K};function G(A,x){if(l.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||Vn(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const k=A.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&k===0)return 0;let K=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Vr(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Er(A).length;default:if(K)return L?-1:Vr(A).length;x=(""+x).toLowerCase(),K=!0}}l.byteLength=G;function te(A,x,k){let L=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,x>>>=0,k<=x))return"";for(A||(A="utf8");;)switch(A){case"hex":return Ke(this,x,k);case"utf8":case"utf-8":return xe(this,x,k);case"ascii":return we(this,x,k);case"latin1":case"binary":return ke(this,x,k);case"base64":return P(this,x,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,x,k);default:if(L)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),L=!0}}l.prototype._isBuffer=!0;function Y(A,x,k){const L=A[x];A[x]=A[k],A[k]=L}l.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<x;k+=2)Y(this,k,k+1);return this},l.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<x;k+=4)Y(this,k,k+3),Y(this,k+1,k+2);return this},l.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<x;k+=8)Y(this,k,k+7),Y(this,k+1,k+6),Y(this,k+2,k+5),Y(this,k+3,k+4);return this},l.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?xe(this,0,x):te.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(x){if(!l.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:l.compare(this,x)===0},l.prototype.inspect=function(){let x="";const k=n.INSPECT_MAX_BYTES;return x=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(x+=" ... "),"<Buffer "+x+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(x,k,L,K,re){if(Vn(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),!l.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(k===void 0&&(k=0),L===void 0&&(L=x?x.length:0),K===void 0&&(K=0),re===void 0&&(re=this.length),k<0||L>x.length||K<0||re>this.length)throw new RangeError("out of range index");if(K>=re&&k>=L)return 0;if(K>=re)return-1;if(k>=L)return 1;if(k>>>=0,L>>>=0,K>>>=0,re>>>=0,this===x)return 0;let ae=re-K,Re=L-k;const ut=Math.min(ae,Re),Ue=this.slice(K,re),He=x.slice(k,L);for(let Ye=0;Ye<ut;++Ye)if(Ue[Ye]!==He[Ye]){ae=Ue[Ye],Re=He[Ye];break}return ae<Re?-1:Re<ae?1:0};function $(A,x,k,L,K){if(A.length===0)return-1;if(typeof k=="string"?(L=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,di(k)&&(k=K?0:A.length-1),k<0&&(k=A.length+k),k>=A.length){if(K)return-1;k=A.length-1}else if(k<0)if(K)k=0;else return-1;if(typeof x=="string"&&(x=l.from(x,L)),l.isBuffer(x))return x.length===0?-1:U(A,x,k,L,K);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(A,x,k):Uint8Array.prototype.lastIndexOf.call(A,x,k):U(A,[x],k,L,K);throw new TypeError("val must be string, number or Buffer")}function U(A,x,k,L,K){let re=1,ae=A.length,Re=x.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(A.length<2||x.length<2)return-1;re=2,ae/=2,Re/=2,k/=2}function ut(He,Ye){return re===1?He[Ye]:He.readUInt16BE(Ye*re)}let Ue;if(K){let He=-1;for(Ue=k;Ue<ae;Ue++)if(ut(A,Ue)===ut(x,He===-1?0:Ue-He)){if(He===-1&&(He=Ue),Ue-He+1===Re)return He*re}else He!==-1&&(Ue-=Ue-He),He=-1}else for(k+Re>ae&&(k=ae-Re),Ue=k;Ue>=0;Ue--){let He=!0;for(let Ye=0;Ye<Re;Ye++)if(ut(A,Ue+Ye)!==ut(x,Ye)){He=!1;break}if(He)return Ue}return-1}l.prototype.includes=function(x,k,L){return this.indexOf(x,k,L)!==-1},l.prototype.indexOf=function(x,k,L){return $(this,x,k,L,!0)},l.prototype.lastIndexOf=function(x,k,L){return $(this,x,k,L,!1)};function I(A,x,k,L){k=Number(k)||0;const K=A.length-k;L?(L=Number(L),L>K&&(L=K)):L=K;const re=x.length;L>re/2&&(L=re/2);let ae;for(ae=0;ae<L;++ae){const Re=parseInt(x.substr(ae*2,2),16);if(di(Re))return ae;A[k+ae]=Re}return ae}function N(A,x,k,L){return wr(Vr(x,A.length-k),A,k,L)}function F(A,x,k,L){return wr(Li(x),A,k,L)}function j(A,x,k,L){return wr(Er(x),A,k,L)}function H(A,x,k,L){return wr(fi(x,A.length-k),A,k,L)}l.prototype.write=function(x,k,L,K){if(k===void 0)K="utf8",L=this.length,k=0;else if(L===void 0&&typeof k=="string")K=k,L=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(L)?(L=L>>>0,K===void 0&&(K="utf8")):(K=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const re=this.length-k;if((L===void 0||L>re)&&(L=re),x.length>0&&(L<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let ae=!1;for(;;)switch(K){case"hex":return I(this,x,k,L);case"utf8":case"utf-8":return N(this,x,k,L);case"ascii":case"latin1":case"binary":return F(this,x,k,L);case"base64":return j(this,x,k,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,x,k,L);default:if(ae)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ae=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(A,x,k){return x===0&&k===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(x,k))}function xe(A,x,k){k=Math.min(A.length,k);const L=[];let K=x;for(;K<k;){const re=A[K];let ae=null,Re=re>239?4:re>223?3:re>191?2:1;if(K+Re<=k){let ut,Ue,He,Ye;switch(Re){case 1:re<128&&(ae=re);break;case 2:ut=A[K+1],(ut&192)===128&&(Ye=(re&31)<<6|ut&63,Ye>127&&(ae=Ye));break;case 3:ut=A[K+1],Ue=A[K+2],(ut&192)===128&&(Ue&192)===128&&(Ye=(re&15)<<12|(ut&63)<<6|Ue&63,Ye>2047&&(Ye<55296||Ye>57343)&&(ae=Ye));break;case 4:ut=A[K+1],Ue=A[K+2],He=A[K+3],(ut&192)===128&&(Ue&192)===128&&(He&192)===128&&(Ye=(re&15)<<18|(ut&63)<<12|(Ue&63)<<6|He&63,Ye>65535&&Ye<1114112&&(ae=Ye))}}ae===null?(ae=65533,Re=1):ae>65535&&(ae-=65536,L.push(ae>>>10&1023|55296),ae=56320|ae&1023),L.push(ae),K+=Re}return pe(L)}const Ee=4096;function pe(A){const x=A.length;if(x<=Ee)return String.fromCharCode.apply(String,A);let k="",L=0;for(;L<x;)k+=String.fromCharCode.apply(String,A.slice(L,L+=Ee));return k}function we(A,x,k){let L="";k=Math.min(A.length,k);for(let K=x;K<k;++K)L+=String.fromCharCode(A[K]&127);return L}function ke(A,x,k){let L="";k=Math.min(A.length,k);for(let K=x;K<k;++K)L+=String.fromCharCode(A[K]);return L}function Ke(A,x,k){const L=A.length;(!x||x<0)&&(x=0),(!k||k<0||k>L)&&(k=L);let K="";for(let re=x;re<k;++re)K+=mn[A[re]];return K}function C(A,x,k){const L=A.slice(x,k);let K="";for(let re=0;re<L.length-1;re+=2)K+=String.fromCharCode(L[re]+L[re+1]*256);return K}l.prototype.slice=function(x,k){const L=this.length;x=~~x,k=k===void 0?L:~~k,x<0?(x+=L,x<0&&(x=0)):x>L&&(x=L),k<0?(k+=L,k<0&&(k=0)):k>L&&(k=L),k<x&&(k=x);const K=this.subarray(x,k);return Object.setPrototypeOf(K,l.prototype),K};function ue(A,x,k){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+x>k)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(x,k,L){x=x>>>0,k=k>>>0,L||ue(x,k,this.length);let K=this[x],re=1,ae=0;for(;++ae<k&&(re*=256);)K+=this[x+ae]*re;return K},l.prototype.readUintBE=l.prototype.readUIntBE=function(x,k,L){x=x>>>0,k=k>>>0,L||ue(x,k,this.length);let K=this[x+--k],re=1;for(;k>0&&(re*=256);)K+=this[x+--k]*re;return K},l.prototype.readUint8=l.prototype.readUInt8=function(x,k){return x=x>>>0,k||ue(x,1,this.length),this[x]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(x,k){return x=x>>>0,k||ue(x,2,this.length),this[x]|this[x+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(x,k){return x=x>>>0,k||ue(x,2,this.length),this[x]<<8|this[x+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},l.prototype.readBigUInt64LE=Yn(function(x){x=x>>>0,Qt(x,"offset");const k=this[x],L=this[x+7];(k===void 0||L===void 0)&&Fn(x,this.length-8);const K=k+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,re=this[++x]+this[++x]*2**8+this[++x]*2**16+L*2**24;return BigInt(K)+(BigInt(re)<<BigInt(32))}),l.prototype.readBigUInt64BE=Yn(function(x){x=x>>>0,Qt(x,"offset");const k=this[x],L=this[x+7];(k===void 0||L===void 0)&&Fn(x,this.length-8);const K=k*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],re=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+L;return(BigInt(K)<<BigInt(32))+BigInt(re)}),l.prototype.readIntLE=function(x,k,L){x=x>>>0,k=k>>>0,L||ue(x,k,this.length);let K=this[x],re=1,ae=0;for(;++ae<k&&(re*=256);)K+=this[x+ae]*re;return re*=128,K>=re&&(K-=Math.pow(2,8*k)),K},l.prototype.readIntBE=function(x,k,L){x=x>>>0,k=k>>>0,L||ue(x,k,this.length);let K=k,re=1,ae=this[x+--K];for(;K>0&&(re*=256);)ae+=this[x+--K]*re;return re*=128,ae>=re&&(ae-=Math.pow(2,8*k)),ae},l.prototype.readInt8=function(x,k){return x=x>>>0,k||ue(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},l.prototype.readInt16LE=function(x,k){x=x>>>0,k||ue(x,2,this.length);const L=this[x]|this[x+1]<<8;return L&32768?L|4294901760:L},l.prototype.readInt16BE=function(x,k){x=x>>>0,k||ue(x,2,this.length);const L=this[x+1]|this[x]<<8;return L&32768?L|4294901760:L},l.prototype.readInt32LE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},l.prototype.readInt32BE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},l.prototype.readBigInt64LE=Yn(function(x){x=x>>>0,Qt(x,"offset");const k=this[x],L=this[x+7];(k===void 0||L===void 0)&&Fn(x,this.length-8);const K=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(L<<24);return(BigInt(K)<<BigInt(32))+BigInt(k+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),l.prototype.readBigInt64BE=Yn(function(x){x=x>>>0,Qt(x,"offset");const k=this[x],L=this[x+7];(k===void 0||L===void 0)&&Fn(x,this.length-8);const K=(k<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(K)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+L)}),l.prototype.readFloatLE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),t.read(this,x,!0,23,4)},l.prototype.readFloatBE=function(x,k){return x=x>>>0,k||ue(x,4,this.length),t.read(this,x,!1,23,4)},l.prototype.readDoubleLE=function(x,k){return x=x>>>0,k||ue(x,8,this.length),t.read(this,x,!0,52,8)},l.prototype.readDoubleBE=function(x,k){return x=x>>>0,k||ue(x,8,this.length),t.read(this,x,!1,52,8)};function be(A,x,k,L,K,re){if(!l.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>K||x<re)throw new RangeError('"value" argument is out of bounds');if(k+L>A.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(x,k,L,K){if(x=+x,k=k>>>0,L=L>>>0,!K){const Re=Math.pow(2,8*L)-1;be(this,x,k,L,Re,0)}let re=1,ae=0;for(this[k]=x&255;++ae<L&&(re*=256);)this[k+ae]=x/re&255;return k+L},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(x,k,L,K){if(x=+x,k=k>>>0,L=L>>>0,!K){const Re=Math.pow(2,8*L)-1;be(this,x,k,L,Re,0)}let re=L-1,ae=1;for(this[k+re]=x&255;--re>=0&&(ae*=256);)this[k+re]=x/ae&255;return k+L},l.prototype.writeUint8=l.prototype.writeUInt8=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,1,255,0),this[k]=x&255,k+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,2,65535,0),this[k]=x&255,this[k+1]=x>>>8,k+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,2,65535,0),this[k]=x>>>8,this[k+1]=x&255,k+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,4,4294967295,0),this[k+3]=x>>>24,this[k+2]=x>>>16,this[k+1]=x>>>8,this[k]=x&255,k+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,4,4294967295,0),this[k]=x>>>24,this[k+1]=x>>>16,this[k+2]=x>>>8,this[k+3]=x&255,k+4};function B(A,x,k,L,K){ar(x,L,K,A,k,7);let re=Number(x&BigInt(4294967295));A[k++]=re,re=re>>8,A[k++]=re,re=re>>8,A[k++]=re,re=re>>8,A[k++]=re;let ae=Number(x>>BigInt(32)&BigInt(4294967295));return A[k++]=ae,ae=ae>>8,A[k++]=ae,ae=ae>>8,A[k++]=ae,ae=ae>>8,A[k++]=ae,k}function _e(A,x,k,L,K){ar(x,L,K,A,k,7);let re=Number(x&BigInt(4294967295));A[k+7]=re,re=re>>8,A[k+6]=re,re=re>>8,A[k+5]=re,re=re>>8,A[k+4]=re;let ae=Number(x>>BigInt(32)&BigInt(4294967295));return A[k+3]=ae,ae=ae>>8,A[k+2]=ae,ae=ae>>8,A[k+1]=ae,ae=ae>>8,A[k]=ae,k+8}l.prototype.writeBigUInt64LE=Yn(function(x,k=0){return B(this,x,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Yn(function(x,k=0){return _e(this,x,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(x,k,L,K){if(x=+x,k=k>>>0,!K){const ut=Math.pow(2,8*L-1);be(this,x,k,L,ut-1,-ut)}let re=0,ae=1,Re=0;for(this[k]=x&255;++re<L&&(ae*=256);)x<0&&Re===0&&this[k+re-1]!==0&&(Re=1),this[k+re]=(x/ae>>0)-Re&255;return k+L},l.prototype.writeIntBE=function(x,k,L,K){if(x=+x,k=k>>>0,!K){const ut=Math.pow(2,8*L-1);be(this,x,k,L,ut-1,-ut)}let re=L-1,ae=1,Re=0;for(this[k+re]=x&255;--re>=0&&(ae*=256);)x<0&&Re===0&&this[k+re+1]!==0&&(Re=1),this[k+re]=(x/ae>>0)-Re&255;return k+L},l.prototype.writeInt8=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,1,127,-128),x<0&&(x=255+x+1),this[k]=x&255,k+1},l.prototype.writeInt16LE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,2,32767,-32768),this[k]=x&255,this[k+1]=x>>>8,k+2},l.prototype.writeInt16BE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,2,32767,-32768),this[k]=x>>>8,this[k+1]=x&255,k+2},l.prototype.writeInt32LE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,4,2147483647,-2147483648),this[k]=x&255,this[k+1]=x>>>8,this[k+2]=x>>>16,this[k+3]=x>>>24,k+4},l.prototype.writeInt32BE=function(x,k,L){return x=+x,k=k>>>0,L||be(this,x,k,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[k]=x>>>24,this[k+1]=x>>>16,this[k+2]=x>>>8,this[k+3]=x&255,k+4},l.prototype.writeBigInt64LE=Yn(function(x,k=0){return B(this,x,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Yn(function(x,k=0){return _e(this,x,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(A,x,k,L,K,re){if(k+L>A.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Ae(A,x,k,L,K){return x=+x,k=k>>>0,K||Pe(A,x,k,4),t.write(A,x,k,L,23,4),k+4}l.prototype.writeFloatLE=function(x,k,L){return Ae(this,x,k,!0,L)},l.prototype.writeFloatBE=function(x,k,L){return Ae(this,x,k,!1,L)};function Ve(A,x,k,L,K){return x=+x,k=k>>>0,K||Pe(A,x,k,8),t.write(A,x,k,L,52,8),k+8}l.prototype.writeDoubleLE=function(x,k,L){return Ve(this,x,k,!0,L)},l.prototype.writeDoubleBE=function(x,k,L){return Ve(this,x,k,!1,L)},l.prototype.copy=function(x,k,L,K){if(!l.isBuffer(x))throw new TypeError("argument should be a Buffer");if(L||(L=0),!K&&K!==0&&(K=this.length),k>=x.length&&(k=x.length),k||(k=0),K>0&&K<L&&(K=L),K===L||x.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),x.length-k<K-L&&(K=x.length-k+L);const re=K-L;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,L,K):Uint8Array.prototype.set.call(x,this.subarray(L,K),k),re},l.prototype.fill=function(x,k,L,K){if(typeof x=="string"){if(typeof k=="string"?(K=k,k=0,L=this.length):typeof L=="string"&&(K=L,L=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!l.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(x.length===1){const ae=x.charCodeAt(0);(K==="utf8"&&ae<128||K==="latin1")&&(x=ae)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(k<0||this.length<k||this.length<L)throw new RangeError("Out of range index");if(L<=k)return this;k=k>>>0,L=L===void 0?this.length:L>>>0,x||(x=0);let re;if(typeof x=="number")for(re=k;re<L;++re)this[re]=x;else{const ae=l.isBuffer(x)?x:l.from(x,K),Re=ae.length;if(Re===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(re=0;re<L-k;++re)this[re+k]=ae[re%Re]}return this};const Ne={};function Je(A,x,k){Ne[A]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}Je("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Je("ERR_INVALID_ARG_TYPE",function(A,x){return`The "${A}" argument must be of type number. Received type ${typeof x}`},TypeError),Je("ERR_OUT_OF_RANGE",function(A,x,k){let L=`The value of "${A}" is out of range.`,K=k;return Number.isInteger(k)&&Math.abs(k)>2**32?K=Xe(String(k)):typeof k=="bigint"&&(K=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(K=Xe(K)),K+="n"),L+=` It must be ${x}. Received ${K}`,L},RangeError);function Xe(A){let x="",k=A.length;const L=A[0]==="-"?1:0;for(;k>=L+4;k-=3)x=`_${A.slice(k-3,k)}${x}`;return`${A.slice(0,k)}${x}`}function jt(A,x,k){Qt(x,"offset"),(A[x]===void 0||A[x+k]===void 0)&&Fn(x,A.length-(k+1))}function ar(A,x,k,L,K,re){if(A>k||A<x){const ae=typeof x=="bigint"?"n":"";let Re;throw x===0||x===BigInt(0)?Re=`>= 0${ae} and < 2${ae} ** ${(re+1)*8}${ae}`:Re=`>= -(2${ae} ** ${(re+1)*8-1}${ae}) and < 2 ** ${(re+1)*8-1}${ae}`,new Ne.ERR_OUT_OF_RANGE("value",Re,A)}jt(L,K,re)}function Qt(A,x){if(typeof A!="number")throw new Ne.ERR_INVALID_ARG_TYPE(x,"number",A)}function Fn(A,x,k){throw Math.floor(A)!==A?(Qt(A,k),new Ne.ERR_OUT_OF_RANGE("offset","an integer",A)):x<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,A)}const xr=/[^+/0-9A-Za-z-_]/g;function ur(A){if(A=A.split("=")[0],A=A.trim().replace(xr,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function Vr(A,x){x=x||1/0;let k;const L=A.length;let K=null;const re=[];for(let ae=0;ae<L;++ae){if(k=A.charCodeAt(ae),k>55295&&k<57344){if(!K){if(k>56319){(x-=3)>-1&&re.push(239,191,189);continue}else if(ae+1===L){(x-=3)>-1&&re.push(239,191,189);continue}K=k;continue}if(k<56320){(x-=3)>-1&&re.push(239,191,189),K=k;continue}k=(K-55296<<10|k-56320)+65536}else K&&(x-=3)>-1&&re.push(239,191,189);if(K=null,k<128){if((x-=1)<0)break;re.push(k)}else if(k<2048){if((x-=2)<0)break;re.push(k>>6|192,k&63|128)}else if(k<65536){if((x-=3)<0)break;re.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((x-=4)<0)break;re.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return re}function Li(A){const x=[];for(let k=0;k<A.length;++k)x.push(A.charCodeAt(k)&255);return x}function fi(A,x){let k,L,K;const re=[];for(let ae=0;ae<A.length&&!((x-=2)<0);++ae)k=A.charCodeAt(ae),L=k>>8,K=k%256,re.push(K),re.push(L);return re}function Er(A){return e.toByteArray(ur(A))}function wr(A,x,k,L){let K;for(K=0;K<L&&!(K+k>=x.length||K>=A.length);++K)x[K+k]=A[K];return K}function Vn(A,x){return A instanceof x||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===x.name}function di(A){return A!==A}const mn=function(){const A="0123456789abcdef",x=new Array(256);for(let k=0;k<16;++k){const L=k*16;for(let K=0;K<16;++K)x[L+K]=A[k]+A[K]}return x}();function Yn(A){return typeof BigInt>"u"?se:A}function se(){throw new Error("BigInt not supported")}}(Hy)),Hy}var zN=UN(),$y={exports:{}},oT;function jN(){if(oT)return $y.exports;oT=1;var n=$y.exports={},e,t;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?t=clearTimeout:t=i}catch{t=i}})();function s(R){if(e===setTimeout)return setTimeout(R,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(R,0);try{return e(R,0)}catch{try{return e.call(null,R,0)}catch{return e.call(this,R,0)}}}function a(R){if(t===clearTimeout)return clearTimeout(R);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(R);try{return t(R)}catch{try{return t.call(null,R)}catch{return t.call(this,R)}}}var l=[],h=!1,f,p=-1;function y(){!h||!f||(h=!1,f.length?l=f.concat(l):p=-1,l.length&&_())}function _(){if(!h){var R=s(y);h=!0;for(var D=l.length;D;){for(f=l,l=[];++p<D;)f&&f[p].run();p=-1,D=l.length}f=null,h=!1,a(R)}}n.nextTick=function(R){var D=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)D[V-1]=arguments[V];l.push(new v(R,D)),l.length===1&&!h&&s(_)};function v(R,D){this.fun=R,this.array=D}v.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function w(){}return n.on=w,n.addListener=w,n.once=w,n.off=w,n.removeListener=w,n.removeAllListeners=w,n.emit=w,n.prependListener=w,n.prependOnceListener=w,n.listeners=function(R){return[]},n.binding=function(R){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(R){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},$y.exports}var qN=jN();const HN=yd(qN);window.Buffer=zN.Buffer;window.process=HN;var Gy={exports:{}},of={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function $N(){if(aT)return of;aT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return of.Fragment=e,of.jsx=t,of.jsxs=t,of}var uT;function GN(){return uT||(uT=1,Gy.exports=$N()),Gy.exports}var z=GN(),Ky={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function KN(){if(lT)return Ze;lT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function _(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,R={};function D(C,ue,be){this.props=C,this.context=ue,this.refs=R,this.updater=be||v}D.prototype.isReactComponent={},D.prototype.setState=function(C,ue){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,ue,"setState")},D.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function V(){}V.prototype=D.prototype;function W(C,ue,be){this.props=C,this.context=ue,this.refs=R,this.updater=be||v}var G=W.prototype=new V;G.constructor=W,w(G,D.prototype),G.isPureReactComponent=!0;var te=Array.isArray,Y={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function U(C,ue,be,B,_e,Pe){return be=Pe.ref,{$$typeof:n,type:C,key:ue,ref:be!==void 0?be:null,props:Pe}}function I(C,ue){return U(C.type,ue,void 0,void 0,void 0,C.props)}function N(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function F(C){var ue={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(be){return ue[be]})}var j=/\/+/g;function H(C,ue){return typeof C=="object"&&C!==null&&C.key!=null?F(""+C.key):ue.toString(36)}function P(){}function xe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(P,P):(C.status="pending",C.then(function(ue){C.status==="pending"&&(C.status="fulfilled",C.value=ue)},function(ue){C.status==="pending"&&(C.status="rejected",C.reason=ue)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Ee(C,ue,be,B,_e){var Pe=typeof C;(Pe==="undefined"||Pe==="boolean")&&(C=null);var Ae=!1;if(C===null)Ae=!0;else switch(Pe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(C.$$typeof){case n:case e:Ae=!0;break;case p:return Ae=C._init,Ee(Ae(C._payload),ue,be,B,_e)}}if(Ae)return _e=_e(C),Ae=B===""?"."+H(C,0):B,te(_e)?(be="",Ae!=null&&(be=Ae.replace(j,"$&/")+"/"),Ee(_e,ue,be,"",function(Je){return Je})):_e!=null&&(N(_e)&&(_e=I(_e,be+(_e.key==null||C&&C.key===_e.key?"":(""+_e.key).replace(j,"$&/")+"/")+Ae)),ue.push(_e)),1;Ae=0;var Ve=B===""?".":B+":";if(te(C))for(var Ne=0;Ne<C.length;Ne++)B=C[Ne],Pe=Ve+H(B,Ne),Ae+=Ee(B,ue,be,Pe,_e);else if(Ne=_(C),typeof Ne=="function")for(C=Ne.call(C),Ne=0;!(B=C.next()).done;)B=B.value,Pe=Ve+H(B,Ne++),Ae+=Ee(B,ue,be,Pe,_e);else if(Pe==="object"){if(typeof C.then=="function")return Ee(xe(C),ue,be,B,_e);throw ue=String(C),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function pe(C,ue,be){if(C==null)return C;var B=[],_e=0;return Ee(C,B,"","",function(Pe){return ue.call(be,Pe,_e++)}),B}function we(C){if(C._status===-1){var ue=C._result;ue=ue(),ue.then(function(be){(C._status===0||C._status===-1)&&(C._status=1,C._result=be)},function(be){(C._status===0||C._status===-1)&&(C._status=2,C._result=be)}),C._status===-1&&(C._status=0,C._result=ue)}if(C._status===1)return C._result.default;throw C._result}var ke=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Ke(){}return Ze.Children={map:pe,forEach:function(C,ue,be){pe(C,function(){ue.apply(this,arguments)},be)},count:function(C){var ue=0;return pe(C,function(){ue++}),ue},toArray:function(C){return pe(C,function(ue){return ue})||[]},only:function(C){if(!N(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ze.Component=D,Ze.Fragment=t,Ze.Profiler=i,Ze.PureComponent=W,Ze.StrictMode=r,Ze.Suspense=h,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ze.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ze.cache=function(C){return function(){return C.apply(null,arguments)}},Ze.cloneElement=function(C,ue,be){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var B=w({},C.props),_e=C.key,Pe=void 0;if(ue!=null)for(Ae in ue.ref!==void 0&&(Pe=void 0),ue.key!==void 0&&(_e=""+ue.key),ue)!$.call(ue,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ue.ref===void 0||(B[Ae]=ue[Ae]);var Ae=arguments.length-2;if(Ae===1)B.children=be;else if(1<Ae){for(var Ve=Array(Ae),Ne=0;Ne<Ae;Ne++)Ve[Ne]=arguments[Ne+2];B.children=Ve}return U(C.type,_e,void 0,void 0,Pe,B)},Ze.createContext=function(C){return C={$$typeof:a,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:s,_context:C},C},Ze.createElement=function(C,ue,be){var B,_e={},Pe=null;if(ue!=null)for(B in ue.key!==void 0&&(Pe=""+ue.key),ue)$.call(ue,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(_e[B]=ue[B]);var Ae=arguments.length-2;if(Ae===1)_e.children=be;else if(1<Ae){for(var Ve=Array(Ae),Ne=0;Ne<Ae;Ne++)Ve[Ne]=arguments[Ne+2];_e.children=Ve}if(C&&C.defaultProps)for(B in Ae=C.defaultProps,Ae)_e[B]===void 0&&(_e[B]=Ae[B]);return U(C,Pe,void 0,void 0,null,_e)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(C){return{$$typeof:l,render:C}},Ze.isValidElement=N,Ze.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:we}},Ze.memo=function(C,ue){return{$$typeof:f,type:C,compare:ue===void 0?null:ue}},Ze.startTransition=function(C){var ue=Y.T,be={};Y.T=be;try{var B=C(),_e=Y.S;_e!==null&&_e(be,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Ke,ke)}catch(Pe){ke(Pe)}finally{Y.T=ue}},Ze.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ze.use=function(C){return Y.H.use(C)},Ze.useActionState=function(C,ue,be){return Y.H.useActionState(C,ue,be)},Ze.useCallback=function(C,ue){return Y.H.useCallback(C,ue)},Ze.useContext=function(C){return Y.H.useContext(C)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(C,ue){return Y.H.useDeferredValue(C,ue)},Ze.useEffect=function(C,ue){return Y.H.useEffect(C,ue)},Ze.useId=function(){return Y.H.useId()},Ze.useImperativeHandle=function(C,ue,be){return Y.H.useImperativeHandle(C,ue,be)},Ze.useInsertionEffect=function(C,ue){return Y.H.useInsertionEffect(C,ue)},Ze.useLayoutEffect=function(C,ue){return Y.H.useLayoutEffect(C,ue)},Ze.useMemo=function(C,ue){return Y.H.useMemo(C,ue)},Ze.useOptimistic=function(C,ue){return Y.H.useOptimistic(C,ue)},Ze.useReducer=function(C,ue,be){return Y.H.useReducer(C,ue,be)},Ze.useRef=function(C){return Y.H.useRef(C)},Ze.useState=function(C){return Y.H.useState(C)},Ze.useSyncExternalStore=function(C,ue,be){return Y.H.useSyncExternalStore(C,ue,be)},Ze.useTransition=function(){return Y.H.useTransition()},Ze.version="19.0.0",Ze}var cT;function pv(){return cT||(cT=1,Ky.exports=KN()),Ky.exports}var Q=pv();const mv=yd(Q);var Wy={exports:{}},af={},Qy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function WN(){return hT||(hT=1,function(n){function e(pe,we){var ke=pe.length;pe.push(we);e:for(;0<ke;){var Ke=ke-1>>>1,C=pe[Ke];if(0<i(C,we))pe[Ke]=we,pe[ke]=C,ke=Ke;else break e}}function t(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var we=pe[0],ke=pe.pop();if(ke!==we){pe[0]=ke;e:for(var Ke=0,C=pe.length,ue=C>>>1;Ke<ue;){var be=2*(Ke+1)-1,B=pe[be],_e=be+1,Pe=pe[_e];if(0>i(B,ke))_e<C&&0>i(Pe,B)?(pe[Ke]=Pe,pe[_e]=ke,Ke=_e):(pe[Ke]=B,pe[be]=ke,Ke=be);else if(_e<C&&0>i(Pe,ke))pe[Ke]=Pe,pe[_e]=ke,Ke=_e;else break e}}return we}function i(pe,we){var ke=pe.sortIndex-we.sortIndex;return ke!==0?ke:pe.id-we.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var h=[],f=[],p=1,y=null,_=3,v=!1,w=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function G(pe){for(var we=t(f);we!==null;){if(we.callback===null)r(f);else if(we.startTime<=pe)r(f),we.sortIndex=we.expirationTime,e(h,we);else break;we=t(f)}}function te(pe){if(R=!1,G(pe),!w)if(t(h)!==null)w=!0,xe();else{var we=t(f);we!==null&&Ee(te,we.startTime-pe)}}var Y=!1,$=-1,U=5,I=-1;function N(){return!(n.unstable_now()-I<U)}function F(){if(Y){var pe=n.unstable_now();I=pe;var we=!0;try{e:{w=!1,R&&(R=!1,V($),$=-1),v=!0;var ke=_;try{t:{for(G(pe),y=t(h);y!==null&&!(y.expirationTime>pe&&N());){var Ke=y.callback;if(typeof Ke=="function"){y.callback=null,_=y.priorityLevel;var C=Ke(y.expirationTime<=pe);if(pe=n.unstable_now(),typeof C=="function"){y.callback=C,G(pe),we=!0;break t}y===t(h)&&r(h),G(pe)}else r(h);y=t(h)}if(y!==null)we=!0;else{var ue=t(f);ue!==null&&Ee(te,ue.startTime-pe),we=!1}}break e}finally{y=null,_=ke,v=!1}we=void 0}}finally{we?j():Y=!1}}}var j;if(typeof W=="function")j=function(){W(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,P=H.port2;H.port1.onmessage=F,j=function(){P.postMessage(null)}}else j=function(){D(F,0)};function xe(){Y||(Y=!0,j())}function Ee(pe,we){$=D(function(){pe(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(pe){pe.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,xe())},n.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<pe?Math.floor(1e3/pe):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(pe){switch(_){case 1:case 2:case 3:var we=3;break;default:we=_}var ke=_;_=we;try{return pe()}finally{_=ke}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(pe,we){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var ke=_;_=pe;try{return we()}finally{_=ke}},n.unstable_scheduleCallback=function(pe,we,ke){var Ke=n.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Ke+ke:Ke):ke=Ke,pe){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ke+C,pe={id:p++,callback:we,priorityLevel:pe,startTime:ke,expirationTime:C,sortIndex:-1},ke>Ke?(pe.sortIndex=ke,e(f,pe),t(h)===null&&pe===t(f)&&(R?(V($),$=-1):R=!0,Ee(te,ke-Ke))):(pe.sortIndex=C,e(h,pe),w||v||(w=!0,xe())),pe},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(pe){var we=_;return function(){var ke=_;_=we;try{return pe.apply(this,arguments)}finally{_=ke}}}}(Yy)),Yy}var fT;function QN(){return fT||(fT=1,Qy.exports=WN()),Qy.exports}var Xy={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function YN(){if(dT)return zn;dT=1;var n=pv();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(h,f,null,p)},zn.flushSync=function(h){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,h)return h()}finally{a.T=f,r.p=p,r.d.f()}},zn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},zn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},zn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=l(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:v}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},zn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=l(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},zn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=l(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},zn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=l(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},zn.requestFormReset=function(h){r.d.r(h)},zn.unstable_batchedUpdates=function(h,f){return h(f)},zn.useFormState=function(h,f,p){return a.H.useFormState(h,f,p)},zn.useFormStatus=function(){return a.H.useHostTransitionStatus()},zn.version="19.0.0",zn}var pT;function XN(){if(pT)return Xy.exports;pT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xy.exports=YN(),Xy.exports}var mT;function ZN(){if(mT)return af;mT=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=QN(),e=pv(),t=XN();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var s=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),te=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var U=Symbol.for("react.client.reference");function I(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===U?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case h:return"Fragment";case l:return"Portal";case p:return"Profiler";case f:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case v:return(o.displayName||"Context")+".Provider";case _:return(o._context.displayName||"Context")+".Consumer";case w:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case V:return u=o.displayName||null,u!==null?u:I(o.type)||"Memo";case W:u=o._payload,o=o._init;try{return I(o(u))}catch{}}return null}var N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.assign,j,H;function P(o){if(j===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);j=u&&u[1]||"",H=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+o+H}var xe=!1;function Ee(o,u){if(!o||xe)return"";xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(u){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ie=le}Reflect.construct(o,[],me)}else{try{me.call()}catch(le){ie=le}o.call(me.prototype)}}else{try{throw Error()}catch(le){ie=le}(me=o())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ie&&typeof le.stack=="string")return[le.stack,ie.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],M=b[1];if(S&&M){var q=S.split(`
`),Z=M.split(`
`);for(g=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;if(d===q.length||g===Z.length)for(d=q.length-1,g=Z.length-1;1<=d&&0<=g&&q[d]!==Z[g];)g--;for(;1<=d&&0<=g;d--,g--)if(q[d]!==Z[g]){if(d!==1||g!==1)do if(d--,g--,0>g||q[d]!==Z[g]){var ce=`
`+q[d].replace(" at new "," at ");return o.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",o.displayName)),ce}while(1<=d&&0<=g);break}}}finally{xe=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?P(c):""}function pe(o){switch(o.tag){case 26:case 27:case 5:return P(o.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return o=Ee(o.type,!1),o;case 11:return o=Ee(o.type.render,!1),o;case 1:return o=Ee(o.type,!0),o;default:return""}}function we(o){try{var u="";do u+=pe(o),o=o.return;while(o);return u}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ke(o){var u=o,c=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(c=u.return),o=u.return;while(o)}return u.tag===3?c:null}function Ke(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function C(o){if(ke(o)!==o)throw Error(r(188))}function ue(o){var u=o.alternate;if(!u){if(u=ke(o),u===null)throw Error(r(188));return u!==o?null:o}for(var c=o,d=u;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return C(g),o;if(b===d)return C(g),u;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=g,d=b;else{for(var S=!1,M=g.child;M;){if(M===c){S=!0,c=g,d=b;break}if(M===d){S=!0,d=g,c=b;break}M=M.sibling}if(!S){for(M=b.child;M;){if(M===c){S=!0,c=b,d=g;break}if(M===d){S=!0,d=b,c=g;break}M=M.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:u}function be(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=be(o),u!==null)return u;o=o.sibling}return null}var B=Array.isArray,_e=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},Ae=[],Ve=-1;function Ne(o){return{current:o}}function Je(o){0>Ve||(o.current=Ae[Ve],Ae[Ve]=null,Ve--)}function Xe(o,u){Ve++,Ae[Ve]=o.current,o.current=u}var jt=Ne(null),ar=Ne(null),Qt=Ne(null),Fn=Ne(null);function xr(o,u){switch(Xe(Qt,u),Xe(ar,o),Xe(jt,null),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?N2(u):0;break;default:if(o=o===8?u.parentNode:u,u=o.tagName,o=o.namespaceURI)o=N2(o),u=M2(o,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Je(jt),Xe(jt,u)}function ur(){Je(jt),Je(ar),Je(Qt)}function Vr(o){o.memoizedState!==null&&Xe(Fn,o);var u=jt.current,c=M2(u,o.type);u!==c&&(Xe(ar,o),Xe(jt,c))}function Li(o){ar.current===o&&(Je(jt),Je(ar)),Fn.current===o&&(Je(Fn),Jh._currentValue=Pe)}var fi=Object.prototype.hasOwnProperty,Er=n.unstable_scheduleCallback,wr=n.unstable_cancelCallback,Vn=n.unstable_shouldYield,di=n.unstable_requestPaint,mn=n.unstable_now,Yn=n.unstable_getCurrentPriorityLevel,se=n.unstable_ImmediatePriority,A=n.unstable_UserBlockingPriority,x=n.unstable_NormalPriority,k=n.unstable_LowPriority,L=n.unstable_IdlePriority,K=n.log,re=n.unstable_setDisableYieldValue,ae=null,Re=null;function ut(o){if(Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(ae,o,void 0,(o.current.flags&128)===128)}catch{}}function Ue(o){if(typeof K=="function"&&re(o),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(ae,o)}catch{}}var He=Math.clz32?Math.clz32:$d,Ye=Math.log,Hd=Math.LN2;function $d(o){return o>>>=0,o===0?32:31-(Ye(o)/Hd|0)|0}var Pi=128,mo=4194304;function pi(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ur(o,u){var c=o.pendingLanes;if(c===0)return 0;var d=0,g=o.suspendedLanes,b=o.pingedLanes,S=o.warmLanes;o=o.finishedLanes!==0;var M=c&134217727;return M!==0?(c=M&~g,c!==0?d=pi(c):(b&=M,b!==0?d=pi(b):o||(S=M&~S,S!==0&&(d=pi(S))))):(M=c&~g,M!==0?d=pi(M):b!==0?d=pi(b):o||(S=c&~S,S!==0&&(d=pi(S)))),d===0?0:u!==0&&u!==d&&(u&g)===0&&(g=d&-d,S=u&-u,g>=S||g===32&&(S&4194176)!==0)?u:d}function go(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function al(o,u){switch(o){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(){var o=Pi;return Pi<<=1,(Pi&4194176)===0&&(Pi=128),o}function yo(){var o=mo;return mo<<=1,(mo&62914560)===0&&(mo=4194304),o}function ul(o){for(var u=[],c=0;31>c;c++)u.push(o);return u}function Yt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Gd(o,u,c,d,g,b){var S=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var M=o.entanglements,q=o.expirationTimes,Z=o.hiddenUpdates;for(c=S&~c;0<c;){var ce=31-He(c),me=1<<ce;M[ce]=0,q[ce]=-1;var ie=Z[ce];if(ie!==null)for(Z[ce]=null,ce=0;ce<ie.length;ce++){var le=ie[ce];le!==null&&(le.lane&=-536870913)}c&=~me}d!==0&&bo(o,d,0),b!==0&&g===0&&o.tag!==0&&(o.suspendedLanes|=b&~(S&~u))}function bo(o,u,c){o.pendingLanes|=u,o.suspendedLanes&=~u;var d=31-He(u);o.entangledLanes|=u,o.entanglements[d]=o.entanglements[d]|1073741824|c&4194218}function _o(o,u){var c=o.entangledLanes|=u;for(o=o.entanglements;c;){var d=31-He(c),g=1<<d;g&u|o[d]&u&&(o[d]|=u),c&=~g}}function Kd(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Wd(){var o=_e.p;return o!==0?o:(o=window.event,o===void 0?32:X2(o.type))}function vo(o,u){var c=_e.p;try{return _e.p=o,u()}finally{_e.p=c}}var Bi=Math.random().toString(36).slice(2),gn="__reactFiber$"+Bi,an="__reactProps$"+Bi,ws="__reactContainer$"+Bi,$a="__reactEvents$"+Bi,ll="__reactListeners$"+Bi,Fi="__reactHandles$"+Bi,sh="__reactResources$"+Bi,xo="__reactMarker$"+Bi;function Ga(o){delete o[gn],delete o[an],delete o[$a],delete o[ll],delete o[Fi]}function mi(o){var u=o[gn];if(u)return u;for(var c=o.parentNode;c;){if(u=c[ws]||c[gn]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(o=P2(o);o!==null;){if(c=o[gn])return c;o=P2(o)}return u}o=c,c=o.parentNode}return null}function ks(o){if(o=o[gn]||o[ws]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function Eo(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function wo(o){var u=o[sh];return u||(u=o[sh]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Pt(o){o[xo]=!0}var oh=new Set,cl={};function kr(o,u){lr(o,u),lr(o+"Capture",u)}function lr(o,u){for(cl[o]=u,o=0;o<u.length;o++)oh.add(u[o])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ah={},uh={};function Qd(o){return fi.call(uh,o)?!0:fi.call(ah,o)?!1:Wg.test(o)?uh[o]=!0:(ah[o]=!0,!1)}function ko(o,u,c){if(Qd(u))if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var d=u.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+c)}}function To(o,u,c){if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+c)}}function zr(o,u,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(u,c,""+d)}}function Xn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Yd(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Qg(o){var u=Yd(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),d=""+o[u];if(!o.hasOwnProperty(u)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,b.call(this,S)}}),Object.defineProperty(o,u,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ka(o){o._valueTracker||(o._valueTracker=Qg(o))}function lh(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var c=u.getValue(),d="";return o&&(d=Yd(o)?o.checked?"true":"false":o.value),o=d,o!==c?(u.setValue(o),!0):!1}function hl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ts=/[\n"\\]/g;function qt(o){return o.replace(Ts,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function So(o,u,c,d,g,b,S,M){o.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?o.type=S:o.removeAttribute("type"),u!=null?S==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Xn(u)):o.value!==""+Xn(u)&&(o.value=""+Xn(u)):S!=="submit"&&S!=="reset"||o.removeAttribute("value"),u!=null?fl(o,S,Xn(u)):c!=null?fl(o,S,Xn(c)):d!=null&&o.removeAttribute("value"),g==null&&b!=null&&(o.defaultChecked=!!b),g!=null&&(o.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?o.name=""+Xn(M):o.removeAttribute("name")}function Wa(o,u,c,d,g,b,S,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),u!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||u!=null))return;c=c!=null?""+Xn(c):"",u=u!=null?""+Xn(u):c,M||u===o.value||(o.value=u),o.defaultValue=u}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=M?o.checked:!!d,o.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.name=S)}function fl(o,u,c){u==="number"&&hl(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function mt(o,u,c,d){if(o=o.options,u){u={};for(var g=0;g<c.length;g++)u["$"+c[g]]=!0;for(c=0;c<o.length;c++)g=u.hasOwnProperty("$"+o[c].value),o[c].selected!==g&&(o[c].selected=g),g&&d&&(o[c].defaultSelected=!0)}else{for(c=""+Xn(c),u=null,g=0;g<o.length;g++){if(o[g].value===c){o[g].selected=!0,d&&(o[g].defaultSelected=!0);return}u!==null||o[g].disabled||(u=o[g])}u!==null&&(u.selected=!0)}}function Qa(o,u,c){if(u!=null&&(u=""+Xn(u),u!==o.value&&(o.value=u),c==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=c!=null?""+Xn(c):""}function Ao(o,u,c,d){if(u==null){if(d!=null){if(c!=null)throw Error(r(92));if(B(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),u=c}c=Xn(u),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d)}function jr(o,u){if(u){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=u;return}}o.textContent=u}var Yg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ch(o,u,c){var d=u.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":d?o.setProperty(u,c):typeof c!="number"||c===0||Yg.has(u)?u==="float"?o.cssFloat=c:o[u]=(""+c).trim():o[u]=c+"px"}function Xd(o,u,c){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||u!=null&&u.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var g in u)d=u[g],u.hasOwnProperty(g)&&c[g]!==d&&ch(o,g,d)}else for(var b in u)u.hasOwnProperty(b)&&ch(o,b,u[b])}function hh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vi(o){return Zg.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var qr=null;function dl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ss=null,As=null;function Cs(o){var u=ks(o);if(u&&(o=u.stateNode)){var c=o[an]||null;e:switch(o=u.stateNode,u.type){case"input":if(So(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),u=c.name,c.type==="radio"&&u!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qt(""+u)+'"][type="radio"]'),u=0;u<c.length;u++){var d=c[u];if(d!==o&&d.form===o.form){var g=d[an]||null;if(!g)throw Error(r(90));So(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(u=0;u<c.length;u++)d=c[u],d.form===o.form&&lh(d)}break e;case"textarea":Qa(o,c.value,c.defaultValue);break e;case"select":u=c.value,u!=null&&mt(o,!!c.multiple,u,!1)}}}var fh=!1;function Zd(o,u,c){if(fh)return o(u,c);fh=!0;try{var d=o(u);return d}finally{if(fh=!1,(Ss!==null||As!==null)&&(qp(),Ss&&(u=Ss,o=As,As=Ss=null,Cs(u),o)))for(u=0;u<o.length;u++)Cs(o[u])}}function Ya(o,u){var c=o.stateNode;if(c===null)return null;var d=c[an]||null;if(d===null)return null;c=d[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,u,typeof c));return c}var Hr=!1;if(Tr)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{Hr=!1}var Ui=null,Co=null,Rs=null;function dh(){if(Rs)return Rs;var o,u=Co,c=u.length,d,g="value"in Ui?Ui.value:Ui.textContent,b=g.length;for(o=0;o<c&&u[o]===g[o];o++);var S=c-o;for(d=1;d<=S&&u[c-d]===g[b-d];d++);return Rs=g.slice(o,1<d?1-d:void 0)}function zi(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ji(){return!0}function ph(){return!1}function yn(o){function u(c,d,g,b,S){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(c=o[M],this[M]=c?c(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ji:ph,this.isPropagationStopped=ph,this}return F(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),u}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=yn(Et),Za=F({},Et,{view:0,detail:0}),Jd=yn(Za),ml,gl,qi,Ja=F({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==qi&&(qi&&o.type==="mousemove"?(ml=o.screenX-qi.screenX,gl=o.screenY-qi.screenY):gl=ml=0,qi=o),ml)},movementY:function(o){return"movementY"in o?o.movementY:gl}}),$r=yn(Ja),ep=F({},Ja,{dataTransfer:0}),Jg=yn(ep),eu=F({},Za,{relatedTarget:0}),yl=yn(eu),mh=F({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),bl=yn(mh),tp=F({},Et,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_l=yn(tp),e1=F({},Et,{data:0}),gh=yn(e1),tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yh(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=rp[o])?!!u[o]:!1}function nu(){return yh}var ip=F({},Za,{key:function(o){if(o.key){var u=tu[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=zi(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?np[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(o){return o.type==="keypress"?zi(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zi(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),vl=yn(ip),sp=F({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bh=yn(sp),Is=F({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),op=yn(Is),ap=F({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=yn(ap),lp=F({},Ja,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),xl=yn(lp),Zn=F({},Et,{newState:0,oldState:0}),cp=yn(Zn),hp=[9,13,27,32],Hi=Tr&&"CompositionEvent"in window,m=null;Tr&&"documentMode"in document&&(m=document.documentMode);var E=Tr&&"TextEvent"in window&&!m,T=Tr&&(!Hi||m&&8<m&&11>=m),O=" ",ee=!1;function oe(o,u){switch(o){case"keyup":return hp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var lt=!1;function un(o,u){switch(o){case"compositionend":return ve(u);case"keypress":return u.which!==32?null:(ee=!0,O);case"textInput":return o=u.data,o===O&&ee?null:o;default:return null}}function ct(o,u){if(lt)return o==="compositionend"||!Hi&&oe(o,u)?(o=dh(),Rs=Co=Ui=null,lt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return T&&u.locale!=="ko"?null:u.data;default:return null}}var bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!bn[o.type]:u==="textarea"}function Ds(o,u,c,d){Ss?As?As.push(d):As=[d]:Ss=d,u=Wp(u,"onChange"),0<u.length&&(c=new pl("onChange","change",null,c,d),o.push({event:c,listeners:u}))}var Sn=null,$i=null;function _h(o){A2(o,0)}function fp(o){var u=Eo(o);if(lh(u))return o}function nw(o,u){if(o==="change")return u}var rw=!1;if(Tr){var t1;if(Tr){var n1="oninput"in document;if(!n1){var iw=document.createElement("div");iw.setAttribute("oninput","return;"),n1=typeof iw.oninput=="function"}t1=n1}else t1=!1;rw=t1&&(!document.documentMode||9<document.documentMode)}function sw(){Sn&&(Sn.detachEvent("onpropertychange",ow),$i=Sn=null)}function ow(o){if(o.propertyName==="value"&&fp($i)){var u=[];Ds(u,$i,o,dl(o)),Zd(_h,u)}}function pD(o,u,c){o==="focusin"?(sw(),Sn=u,$i=c,Sn.attachEvent("onpropertychange",ow)):o==="focusout"&&sw()}function mD(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return fp($i)}function gD(o,u){if(o==="click")return fp(u)}function yD(o,u){if(o==="input"||o==="change")return fp(u)}function bD(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Sr=typeof Object.is=="function"?Object.is:bD;function vh(o,u){if(Sr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var c=Object.keys(o),d=Object.keys(u);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!fi.call(u,g)||!Sr(o[g],u[g]))return!1}return!0}function aw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function uw(o,u){var c=aw(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=u&&d>=u)return{node:c,offset:u-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=aw(c)}}function lw(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?lw(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function cw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=hl(o.document);u instanceof o.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)o=u.contentWindow;else break;u=hl(o.document)}return u}function r1(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function _D(o,u){var c=cw(u);u=o.focusedElem;var d=o.selectionRange;if(c!==u&&u&&u.ownerDocument&&lw(u.ownerDocument.documentElement,u)){if(d!==null&&r1(u)){if(o=d.start,c=d.end,c===void 0&&(c=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(c,u.value.length);else if(c=(o=u.ownerDocument||document)&&o.defaultView||window,c.getSelection){c=c.getSelection();var g=u.textContent.length,b=Math.min(d.start,g);d=d.end===void 0?b:Math.min(d.end,g),!c.extend&&b>d&&(g=d,d=b,b=g),g=uw(u,b);var S=uw(u,d);g&&S&&(c.rangeCount!==1||c.anchorNode!==g.node||c.anchorOffset!==g.offset||c.focusNode!==S.node||c.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),c.removeAllRanges(),b>d?(c.addRange(o),c.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),c.addRange(o)))}}for(o=[],c=u;c=c.parentNode;)c.nodeType===1&&o.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)c=o[u],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var vD=Tr&&"documentMode"in document&&11>=document.documentMode,El=null,i1=null,xh=null,s1=!1;function hw(o,u,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;s1||El==null||El!==hl(d)||(d=El,"selectionStart"in d&&r1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xh&&vh(xh,d)||(xh=d,d=Wp(i1,"onSelect"),0<d.length&&(u=new pl("onSelect","select",null,u,c),o.push({event:u,listeners:d}),u.target=El)))}function ru(o,u){var c={};return c[o.toLowerCase()]=u.toLowerCase(),c["Webkit"+o]="webkit"+u,c["Moz"+o]="moz"+u,c}var wl={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionrun:ru("Transition","TransitionRun"),transitionstart:ru("Transition","TransitionStart"),transitioncancel:ru("Transition","TransitionCancel"),transitionend:ru("Transition","TransitionEnd")},o1={},fw={};Tr&&(fw=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function iu(o){if(o1[o])return o1[o];if(!wl[o])return o;var u=wl[o],c;for(c in u)if(u.hasOwnProperty(c)&&c in fw)return o1[o]=u[c];return o}var dw=iu("animationend"),pw=iu("animationiteration"),mw=iu("animationstart"),xD=iu("transitionrun"),ED=iu("transitionstart"),wD=iu("transitioncancel"),gw=iu("transitionend"),yw=new Map,bw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function gi(o,u){yw.set(o,u),kr(u,[o])}var Gr=[],kl=0,a1=0;function dp(){for(var o=kl,u=a1=kl=0;u<o;){var c=Gr[u];Gr[u++]=null;var d=Gr[u];Gr[u++]=null;var g=Gr[u];Gr[u++]=null;var b=Gr[u];if(Gr[u++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}b!==0&&_w(c,g,b)}}function pp(o,u,c,d){Gr[kl++]=o,Gr[kl++]=u,Gr[kl++]=c,Gr[kl++]=d,a1|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function u1(o,u,c,d){return pp(o,u,c,d),mp(o)}function Ro(o,u){return pp(o,null,null,u),mp(o)}function _w(o,u,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=o.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(g=!0)),o=b,b=b.return;g&&u!==null&&o.tag===3&&(b=o.stateNode,g=31-He(c),b=b.hiddenUpdates,o=b[g],o===null?b[g]=[u]:o.push(u),u.lane=c|536870912)}function mp(o){if(50<Gh)throw Gh=0,py=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Tl={},vw=new WeakMap;function Kr(o,u){if(typeof o=="object"&&o!==null){var c=vw.get(o);return c!==void 0?c:(u={value:o,source:u,stack:we(u)},vw.set(o,u),u)}return{value:o,source:u,stack:we(u)}}var Sl=[],Al=0,gp=null,yp=0,Wr=[],Qr=0,su=null,Ns=1,Ms="";function ou(o,u){Sl[Al++]=yp,Sl[Al++]=gp,gp=o,yp=u}function xw(o,u,c){Wr[Qr++]=Ns,Wr[Qr++]=Ms,Wr[Qr++]=su,su=o;var d=Ns;o=Ms;var g=32-He(d)-1;d&=~(1<<g),c+=1;var b=32-He(u)+g;if(30<b){var S=g-g%5;b=(d&(1<<S)-1).toString(32),d>>=S,g-=S,Ns=1<<32-He(u)+g|c<<g|d,Ms=b+o}else Ns=1<<b|c<<g|d,Ms=o}function l1(o){o.return!==null&&(ou(o,1),xw(o,1,0))}function c1(o){for(;o===gp;)gp=Sl[--Al],Sl[Al]=null,yp=Sl[--Al],Sl[Al]=null;for(;o===su;)su=Wr[--Qr],Wr[Qr]=null,Ms=Wr[--Qr],Wr[Qr]=null,Ns=Wr[--Qr],Wr[Qr]=null}var Jn=null,An=null,gt=!1,yi=null,Gi=!1,h1=Error(r(519));function au(o){var u=Error(r(418,""));throw kh(Kr(u,o)),h1}function Ew(o){var u=o.stateNode,c=o.type,d=o.memoizedProps;switch(u[gn]=o,u[an]=d,c){case"dialog":ot("cancel",u),ot("close",u);break;case"iframe":case"object":case"embed":ot("load",u);break;case"video":case"audio":for(c=0;c<Wh.length;c++)ot(Wh[c],u);break;case"source":ot("error",u);break;case"img":case"image":case"link":ot("error",u),ot("load",u);break;case"details":ot("toggle",u);break;case"input":ot("invalid",u),Wa(u,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ka(u);break;case"select":ot("invalid",u);break;case"textarea":ot("invalid",u),Ao(u,d.value,d.defaultValue,d.children),Ka(u)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||u.textContent===""+c||d.suppressHydrationWarning===!0||D2(u.textContent,c)?(d.popover!=null&&(ot("beforetoggle",u),ot("toggle",u)),d.onScroll!=null&&ot("scroll",u),d.onScrollEnd!=null&&ot("scrollend",u),d.onClick!=null&&(u.onclick=Qp),u=!0):u=!1,u||au(o)}function ww(o){for(Jn=o.return;Jn;)switch(Jn.tag){case 3:case 27:Gi=!0;return;case 5:case 13:Gi=!1;return;default:Jn=Jn.return}}function Eh(o){if(o!==Jn)return!1;if(!gt)return ww(o),gt=!0,!1;var u=!1,c;if((c=o.tag!==3&&o.tag!==27)&&((c=o.tag===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Dy(o.type,o.memoizedProps)),c=!c),c&&(u=!0),u&&An&&au(o),ww(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(c=o.data,c==="/$"){if(u===0){An=_i(o.nextSibling);break e}u--}else c!=="$"&&c!=="$!"&&c!=="$?"||u++;o=o.nextSibling}An=null}}else An=Jn?_i(o.stateNode.nextSibling):null;return!0}function wh(){An=Jn=null,gt=!1}function kh(o){yi===null?yi=[o]:yi.push(o)}var Th=Error(r(460)),kw=Error(r(474)),f1={then:function(){}};function Tw(o){return o=o.status,o==="fulfilled"||o==="rejected"}function bp(){}function Sw(o,u,c){switch(c=o[c],c===void 0?o.push(u):c!==u&&(u.then(bp,bp),u=c),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,o===Th?Error(r(483)):o;default:if(typeof u.status=="string")u.then(bp,bp);else{if(o=Rt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(d){if(u.status==="pending"){var g=u;g.status="fulfilled",g.value=d}},function(d){if(u.status==="pending"){var g=u;g.status="rejected",g.reason=d}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,o===Th?Error(r(483)):o}throw Sh=u,Th}}var Sh=null;function Aw(){if(Sh===null)throw Error(r(459));var o=Sh;return Sh=null,o}var Cl=null,Ah=0;function _p(o){var u=Ah;return Ah+=1,Cl===null&&(Cl=[]),Sw(Cl,o,u)}function Ch(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function vp(o,u){throw u.$$typeof===s?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Cw(o){var u=o._init;return u(o._payload)}function Rw(o){function u(J,X){if(o){var ne=J.deletions;ne===null?(J.deletions=[X],J.flags|=16):ne.push(X)}}function c(J,X){if(!o)return null;for(;X!==null;)u(J,X),X=X.sibling;return null}function d(J){for(var X=new Map;J!==null;)J.key!==null?X.set(J.key,J):X.set(J.index,J),J=J.sibling;return X}function g(J,X){return J=zo(J,X),J.index=0,J.sibling=null,J}function b(J,X,ne){return J.index=ne,o?(ne=J.alternate,ne!==null?(ne=ne.index,ne<X?(J.flags|=33554434,X):ne):(J.flags|=33554434,X)):(J.flags|=1048576,X)}function S(J){return o&&J.alternate===null&&(J.flags|=33554434),J}function M(J,X,ne,fe){return X===null||X.tag!==6?(X=oy(ne,J.mode,fe),X.return=J,X):(X=g(X,ne),X.return=J,X)}function q(J,X,ne,fe){var Ce=ne.type;return Ce===h?ce(J,X,ne.props.children,fe,ne.key):X!==null&&(X.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===W&&Cw(Ce)===X.type)?(X=g(X,ne.props),Ch(X,ne),X.return=J,X):(X=Fp(ne.type,ne.key,ne.props,null,J.mode,fe),Ch(X,ne),X.return=J,X)}function Z(J,X,ne,fe){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=ay(ne,J.mode,fe),X.return=J,X):(X=g(X,ne.children||[]),X.return=J,X)}function ce(J,X,ne,fe,Ce){return X===null||X.tag!==7?(X=yu(ne,J.mode,fe,Ce),X.return=J,X):(X=g(X,ne),X.return=J,X)}function me(J,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=oy(""+X,J.mode,ne),X.return=J,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case a:return ne=Fp(X.type,X.key,X.props,null,J.mode,ne),Ch(ne,X),ne.return=J,ne;case l:return X=ay(X,J.mode,ne),X.return=J,X;case W:var fe=X._init;return X=fe(X._payload),me(J,X,ne)}if(B(X)||$(X))return X=yu(X,J.mode,ne,null),X.return=J,X;if(typeof X.then=="function")return me(J,_p(X),ne);if(X.$$typeof===v)return me(J,Lp(J,X),ne);vp(J,X)}return null}function ie(J,X,ne,fe){var Ce=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ce!==null?null:M(J,X,""+ne,fe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case a:return ne.key===Ce?q(J,X,ne,fe):null;case l:return ne.key===Ce?Z(J,X,ne,fe):null;case W:return Ce=ne._init,ne=Ce(ne._payload),ie(J,X,ne,fe)}if(B(ne)||$(ne))return Ce!==null?null:ce(J,X,ne,fe,null);if(typeof ne.then=="function")return ie(J,X,_p(ne),fe);if(ne.$$typeof===v)return ie(J,X,Lp(J,ne),fe);vp(J,ne)}return null}function le(J,X,ne,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return J=J.get(ne)||null,M(X,J,""+fe,Ce);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case a:return J=J.get(fe.key===null?ne:fe.key)||null,q(X,J,fe,Ce);case l:return J=J.get(fe.key===null?ne:fe.key)||null,Z(X,J,fe,Ce);case W:var tt=fe._init;return fe=tt(fe._payload),le(J,X,ne,fe,Ce)}if(B(fe)||$(fe))return J=J.get(ne)||null,ce(X,J,fe,Ce,null);if(typeof fe.then=="function")return le(J,X,ne,_p(fe),Ce);if(fe.$$typeof===v)return le(J,X,ne,Lp(X,fe),Ce);vp(X,fe)}return null}function Ie(J,X,ne,fe){for(var Ce=null,tt=null,Le=X,Fe=X=0,xn=null;Le!==null&&Fe<ne.length;Fe++){Le.index>Fe?(xn=Le,Le=null):xn=Le.sibling;var yt=ie(J,Le,ne[Fe],fe);if(yt===null){Le===null&&(Le=xn);break}o&&Le&&yt.alternate===null&&u(J,Le),X=b(yt,X,Fe),tt===null?Ce=yt:tt.sibling=yt,tt=yt,Le=xn}if(Fe===ne.length)return c(J,Le),gt&&ou(J,Fe),Ce;if(Le===null){for(;Fe<ne.length;Fe++)Le=me(J,ne[Fe],fe),Le!==null&&(X=b(Le,X,Fe),tt===null?Ce=Le:tt.sibling=Le,tt=Le);return gt&&ou(J,Fe),Ce}for(Le=d(Le);Fe<ne.length;Fe++)xn=le(Le,J,Fe,ne[Fe],fe),xn!==null&&(o&&xn.alternate!==null&&Le.delete(xn.key===null?Fe:xn.key),X=b(xn,X,Fe),tt===null?Ce=xn:tt.sibling=xn,tt=xn);return o&&Le.forEach(function(Wo){return u(J,Wo)}),gt&&ou(J,Fe),Ce}function We(J,X,ne,fe){if(ne==null)throw Error(r(151));for(var Ce=null,tt=null,Le=X,Fe=X=0,xn=null,yt=ne.next();Le!==null&&!yt.done;Fe++,yt=ne.next()){Le.index>Fe?(xn=Le,Le=null):xn=Le.sibling;var Wo=ie(J,Le,yt.value,fe);if(Wo===null){Le===null&&(Le=xn);break}o&&Le&&Wo.alternate===null&&u(J,Le),X=b(Wo,X,Fe),tt===null?Ce=Wo:tt.sibling=Wo,tt=Wo,Le=xn}if(yt.done)return c(J,Le),gt&&ou(J,Fe),Ce;if(Le===null){for(;!yt.done;Fe++,yt=ne.next())yt=me(J,yt.value,fe),yt!==null&&(X=b(yt,X,Fe),tt===null?Ce=yt:tt.sibling=yt,tt=yt);return gt&&ou(J,Fe),Ce}for(Le=d(Le);!yt.done;Fe++,yt=ne.next())yt=le(Le,J,Fe,yt.value,fe),yt!==null&&(o&&yt.alternate!==null&&Le.delete(yt.key===null?Fe:yt.key),X=b(yt,X,Fe),tt===null?Ce=yt:tt.sibling=yt,tt=yt);return o&&Le.forEach(function(BN){return u(J,BN)}),gt&&ou(J,Fe),Ce}function Gt(J,X,ne,fe){if(typeof ne=="object"&&ne!==null&&ne.type===h&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case a:e:{for(var Ce=ne.key;X!==null;){if(X.key===Ce){if(Ce=ne.type,Ce===h){if(X.tag===7){c(J,X.sibling),fe=g(X,ne.props.children),fe.return=J,J=fe;break e}}else if(X.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===W&&Cw(Ce)===X.type){c(J,X.sibling),fe=g(X,ne.props),Ch(fe,ne),fe.return=J,J=fe;break e}c(J,X);break}else u(J,X);X=X.sibling}ne.type===h?(fe=yu(ne.props.children,J.mode,fe,ne.key),fe.return=J,J=fe):(fe=Fp(ne.type,ne.key,ne.props,null,J.mode,fe),Ch(fe,ne),fe.return=J,J=fe)}return S(J);case l:e:{for(Ce=ne.key;X!==null;){if(X.key===Ce)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){c(J,X.sibling),fe=g(X,ne.children||[]),fe.return=J,J=fe;break e}else{c(J,X);break}else u(J,X);X=X.sibling}fe=ay(ne,J.mode,fe),fe.return=J,J=fe}return S(J);case W:return Ce=ne._init,ne=Ce(ne._payload),Gt(J,X,ne,fe)}if(B(ne))return Ie(J,X,ne,fe);if($(ne)){if(Ce=$(ne),typeof Ce!="function")throw Error(r(150));return ne=Ce.call(ne),We(J,X,ne,fe)}if(typeof ne.then=="function")return Gt(J,X,_p(ne),fe);if(ne.$$typeof===v)return Gt(J,X,Lp(J,ne),fe);vp(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,X!==null&&X.tag===6?(c(J,X.sibling),fe=g(X,ne),fe.return=J,J=fe):(c(J,X),fe=oy(ne,J.mode,fe),fe.return=J,J=fe),S(J)):c(J,X)}return function(J,X,ne,fe){try{Ah=0;var Ce=Gt(J,X,ne,fe);return Cl=null,Ce}catch(Le){if(Le===Th)throw Le;var tt=Jr(29,Le,null,J.mode);return tt.lanes=fe,tt.return=J,tt}finally{}}}var uu=Rw(!0),Iw=Rw(!1),Rl=Ne(null),xp=Ne(0);function Dw(o,u){o=Hs,Xe(xp,o),Xe(Rl,u),Hs=o|u.baseLanes}function d1(){Xe(xp,Hs),Xe(Rl,Rl.current)}function p1(){Hs=xp.current,Je(Rl),Je(xp)}var Yr=Ne(null),Ki=null;function Io(o){var u=o.alternate;Xe(cn,cn.current&1),Xe(Yr,o),Ki===null&&(u===null||Rl.current!==null||u.memoizedState!==null)&&(Ki=o)}function Nw(o){if(o.tag===22){if(Xe(cn,cn.current),Xe(Yr,o),Ki===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Ki=o)}}else Do()}function Do(){Xe(cn,cn.current),Xe(Yr,Yr.current)}function Os(o){Je(Yr),Ki===o&&(Ki=null),Je(cn)}var cn=Ne(0);function Ep(o){for(var u=o;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var kD=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){u.aborted=!0,o.forEach(function(c){return c()})}},TD=n.unstable_scheduleCallback,SD=n.unstable_NormalPriority,hn={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m1(){return{controller:new kD,data:new Map,refCount:0}}function Rh(o){o.refCount--,o.refCount===0&&TD(SD,function(){o.controller.abort()})}var Ih=null,g1=0,Il=0,Dl=null;function AD(o,u){if(Ih===null){var c=Ih=[];g1=0,Il=Ey(),Dl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return g1++,u.then(Mw,Mw),u}function Mw(){if(--g1===0&&Ih!==null){Dl!==null&&(Dl.status="fulfilled");var o=Ih;Ih=null,Il=0,Dl=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function CD(o,u){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return o.then(function(){d.status="fulfilled",d.value=u;for(var g=0;g<c.length;g++)(0,c[g])(u)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var Ow=N.S;N.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&AD(o,u),Ow!==null&&Ow(o,u)};var lu=Ne(null);function y1(){var o=lu.current;return o!==null?o:Rt.pooledCache}function wp(o,u){u===null?Xe(lu,lu.current):Xe(lu,u.pool)}function Lw(){var o=y1();return o===null?null:{parent:hn._currentValue,pool:o}}var No=0,et=null,Tt=null,Jt=null,kp=!1,Nl=!1,cu=!1,Tp=0,Dh=0,Ml=null,RD=0;function Xt(){throw Error(r(321))}function b1(o,u){if(u===null)return!1;for(var c=0;c<u.length&&c<o.length;c++)if(!Sr(o[c],u[c]))return!1;return!0}function _1(o,u,c,d,g,b){return No=b,et=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,N.H=o===null||o.memoizedState===null?hu:Mo,cu=!1,b=c(d,g),cu=!1,Nl&&(b=Bw(u,c,d,g)),Pw(o),b}function Pw(o){N.H=Wi;var u=Tt!==null&&Tt.next!==null;if(No=0,Jt=Tt=et=null,kp=!1,Dh=0,Ml=null,u)throw Error(r(300));o===null||_n||(o=o.dependencies,o!==null&&Op(o)&&(_n=!0))}function Bw(o,u,c,d){et=o;var g=0;do{if(Nl&&(Ml=null),Dh=0,Nl=!1,25<=g)throw Error(r(301));if(g+=1,Jt=Tt=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}N.H=fu,b=u(c,d)}while(Nl);return b}function ID(){var o=N.H,u=o.useState()[0];return u=typeof u.then=="function"?Nh(u):u,o=o.useState()[0],(Tt!==null?Tt.memoizedState:null)!==o&&(et.flags|=1024),u}function v1(){var o=Tp!==0;return Tp=0,o}function x1(o,u,c){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~c}function E1(o){if(kp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}kp=!1}No=0,Jt=Tt=et=null,Nl=!1,Dh=Tp=0,Ml=null}function cr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?et.memoizedState=Jt=o:Jt=Jt.next=o,Jt}function en(){if(Tt===null){var o=et.alternate;o=o!==null?o.memoizedState:null}else o=Tt.next;var u=Jt===null?et.memoizedState:Jt.next;if(u!==null)Jt=u,Tt=o;else{if(o===null)throw et.alternate===null?Error(r(467)):Error(r(310));Tt=o,o={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Jt===null?et.memoizedState=Jt=o:Jt=Jt.next=o}return Jt}var Sp;Sp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Nh(o){var u=Dh;return Dh+=1,Ml===null&&(Ml=[]),o=Sw(Ml,o,u),u=et,(Jt===null?u.memoizedState:Jt.next)===null&&(u=u.alternate,N.H=u===null||u.memoizedState===null?hu:Mo),o}function Ap(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Nh(o);if(o.$$typeof===v)return Un(o)}throw Error(r(438,String(o)))}function w1(o){var u=null,c=et.updateQueue;if(c!==null&&(u=c.memoCache),u==null){var d=et.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(u={data:d.data.map(function(g){return g.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),c===null&&(c=Sp(),et.updateQueue=c),c.memoCache=u,c=u.data[u.index],c===void 0)for(c=u.data[u.index]=Array(o),d=0;d<o;d++)c[d]=te;return u.index++,c}function Ls(o,u){return typeof u=="function"?u(o):u}function Cp(o){var u=en();return k1(u,Tt,o)}function k1(o,u,c){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=o.baseQueue,b=d.pending;if(b!==null){if(g!==null){var S=g.next;g.next=b.next,b.next=S}u.baseQueue=g=b,d.pending=null}if(b=o.baseState,g===null)o.memoizedState=b;else{u=g.next;var M=S=null,q=null,Z=u,ce=!1;do{var me=Z.lane&-536870913;if(me!==Z.lane?(ht&me)===me:(No&me)===me){var ie=Z.revertLane;if(ie===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),me===Il&&(ce=!0);else if((No&ie)===ie){Z=Z.next,ie===Il&&(ce=!0);continue}else me={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(M=q=me,S=b):q=q.next=me,et.lanes|=ie,jo|=ie;me=Z.action,cu&&c(b,me),b=Z.hasEagerState?Z.eagerState:c(b,me)}else ie={lane:me,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(M=q=ie,S=b):q=q.next=ie,et.lanes|=me,jo|=me;Z=Z.next}while(Z!==null&&Z!==u);if(q===null?S=b:q.next=M,!Sr(b,o.memoizedState)&&(_n=!0,ce&&(c=Dl,c!==null)))throw c;o.memoizedState=b,o.baseState=S,o.baseQueue=q,d.lastRenderedState=b}return g===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function T1(o){var u=en(),c=u.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=c.dispatch,g=c.pending,b=u.memoizedState;if(g!==null){c.pending=null;var S=g=g.next;do b=o(b,S.action),S=S.next;while(S!==g);Sr(b,u.memoizedState)||(_n=!0),u.memoizedState=b,u.baseQueue===null&&(u.baseState=b),c.lastRenderedState=b}return[b,d]}function Fw(o,u,c){var d=et,g=en(),b=gt;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=u();var S=!Sr((Tt||g).memoizedState,c);if(S&&(g.memoizedState=c,_n=!0),g=g.queue,C1(zw.bind(null,d,g,o),[o]),g.getSnapshot!==u||S||Jt!==null&&Jt.memoizedState.tag&1){if(d.flags|=2048,Ol(9,Uw.bind(null,d,g,c,u),{destroy:void 0},null),Rt===null)throw Error(r(349));b||(No&60)!==0||Vw(d,u,c)}return c}function Vw(o,u,c){o.flags|=16384,o={getSnapshot:u,value:c},u=et.updateQueue,u===null?(u=Sp(),et.updateQueue=u,u.stores=[o]):(c=u.stores,c===null?u.stores=[o]:c.push(o))}function Uw(o,u,c,d){u.value=c,u.getSnapshot=d,jw(u)&&qw(o)}function zw(o,u,c){return c(function(){jw(u)&&qw(o)})}function jw(o){var u=o.getSnapshot;o=o.value;try{var c=u();return!Sr(o,c)}catch{return!0}}function qw(o){var u=Ro(o,2);u!==null&&er(u,o,2)}function S1(o){var u=cr();if(typeof o=="function"){var c=o;if(o=c(),cu){Ue(!0);try{c()}finally{Ue(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:o},u}function Hw(o,u,c,d){return o.baseState=c,k1(o,Tt,typeof d=="function"?d:Ls)}function DD(o,u,c,d,g){if(Dp(o))throw Error(r(485));if(o=u.action,o!==null){var b={payload:g,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};N.T!==null?c(!0):b.isTransition=!1,d(b),c=u.pending,c===null?(b.next=u.pending=b,$w(u,b)):(b.next=c.next,u.pending=c.next=b)}}function $w(o,u){var c=u.action,d=u.payload,g=o.state;if(u.isTransition){var b=N.T,S={};N.T=S;try{var M=c(g,d),q=N.S;q!==null&&q(S,M),Gw(o,u,M)}catch(Z){A1(o,u,Z)}finally{N.T=b}}else try{b=c(g,d),Gw(o,u,b)}catch(Z){A1(o,u,Z)}}function Gw(o,u,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Kw(o,u,d)},function(d){return A1(o,u,d)}):Kw(o,u,c)}function Kw(o,u,c){u.status="fulfilled",u.value=c,Ww(u),o.state=c,u=o.pending,u!==null&&(c=u.next,c===u?o.pending=null:(c=c.next,u.next=c,$w(o,c)))}function A1(o,u,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do u.status="rejected",u.reason=c,Ww(u),u=u.next;while(u!==d)}o.action=null}function Ww(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Qw(o,u){return u}function Yw(o,u){if(gt){var c=Rt.formState;if(c!==null){e:{var d=et;if(gt){if(An){t:{for(var g=An,b=Gi;g.nodeType!==8;){if(!b){g=null;break t}if(g=_i(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){An=_i(g.nextSibling),d=g.data==="F!";break e}}au(d)}d=!1}d&&(u=c[0])}}return c=cr(),c.memoizedState=c.baseState=u,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qw,lastRenderedState:u},c.queue=d,c=pk.bind(null,et,d),d.dispatch=c,d=S1(!1),b=M1.bind(null,et,!1,d.queue),d=cr(),g={state:u,dispatch:null,action:o,pending:null},d.queue=g,c=DD.bind(null,et,g,b,c),g.dispatch=c,d.memoizedState=o,[u,c,!1]}function Xw(o){var u=en();return Zw(u,Tt,o)}function Zw(o,u,c){u=k1(o,u,Qw)[0],o=Cp(Ls)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Nh(u):u;var d=en(),g=d.queue,b=g.dispatch;return c!==d.memoizedState&&(et.flags|=2048,Ol(9,ND.bind(null,g,c),{destroy:void 0},null)),[u,b,o]}function ND(o,u){o.action=u}function Jw(o){var u=en(),c=Tt;if(c!==null)return Zw(u,c,o);en(),u=u.memoizedState,c=en();var d=c.queue.dispatch;return c.memoizedState=o,[u,d,!1]}function Ol(o,u,c,d){return o={tag:o,create:u,inst:c,deps:d,next:null},u=et.updateQueue,u===null&&(u=Sp(),et.updateQueue=u),c=u.lastEffect,c===null?u.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,u.lastEffect=o),o}function ek(){return en().memoizedState}function Rp(o,u,c,d){var g=cr();et.flags|=o,g.memoizedState=Ol(1|u,c,{destroy:void 0},d===void 0?null:d)}function Ip(o,u,c,d){var g=en();d=d===void 0?null:d;var b=g.memoizedState.inst;Tt!==null&&d!==null&&b1(d,Tt.memoizedState.deps)?g.memoizedState=Ol(u,c,b,d):(et.flags|=o,g.memoizedState=Ol(1|u,c,b,d))}function tk(o,u){Rp(8390656,8,o,u)}function C1(o,u){Ip(2048,8,o,u)}function nk(o,u){return Ip(4,2,o,u)}function rk(o,u){return Ip(4,4,o,u)}function ik(o,u){if(typeof u=="function"){o=o();var c=u(o);return function(){typeof c=="function"?c():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function sk(o,u,c){c=c!=null?c.concat([o]):null,Ip(4,4,ik.bind(null,u,o),c)}function R1(){}function ok(o,u){var c=en();u=u===void 0?null:u;var d=c.memoizedState;return u!==null&&b1(u,d[1])?d[0]:(c.memoizedState=[o,u],o)}function ak(o,u){var c=en();u=u===void 0?null:u;var d=c.memoizedState;if(u!==null&&b1(u,d[1]))return d[0];if(d=o(),cu){Ue(!0);try{o()}finally{Ue(!1)}}return c.memoizedState=[d,u],d}function I1(o,u,c){return c===void 0||(No&1073741824)!==0?o.memoizedState=u:(o.memoizedState=c,o=l2(),et.lanes|=o,jo|=o,c)}function uk(o,u,c,d){return Sr(c,u)?c:Rl.current!==null?(o=I1(o,c,d),Sr(o,u)||(_n=!0),o):(No&42)===0?(_n=!0,o.memoizedState=c):(o=l2(),et.lanes|=o,jo|=o,u)}function lk(o,u,c,d,g){var b=_e.p;_e.p=b!==0&&8>b?b:8;var S=N.T,M={};N.T=M,M1(o,!1,u,c);try{var q=g(),Z=N.S;if(Z!==null&&Z(M,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ce=CD(q,d);Mh(o,u,ce,Ir(o))}else Mh(o,u,d,Ir(o))}catch(me){Mh(o,u,{then:function(){},status:"rejected",reason:me},Ir())}finally{_e.p=b,N.T=S}}function MD(){}function D1(o,u,c,d){if(o.tag!==5)throw Error(r(476));var g=ck(o).queue;lk(o,g,u,Pe,c===null?MD:function(){return hk(o),c(d)})}function ck(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:Pe},next:null};var c={};return u.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:c},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function hk(o){var u=ck(o).next.queue;Mh(o,u,{},Ir())}function N1(){return Un(Jh)}function fk(){return en().memoizedState}function dk(){return en().memoizedState}function OD(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var c=Ir();o=Po(c);var d=Bo(u,o,c);d!==null&&(er(d,u,c),Ph(d,u,c)),u={cache:m1()},o.payload=u;return}u=u.return}}function LD(o,u,c){var d=Ir();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Dp(o)?mk(u,c):(c=u1(o,u,c,d),c!==null&&(er(c,o,d),gk(c,u,d)))}function pk(o,u,c){var d=Ir();Mh(o,u,c,d)}function Mh(o,u,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dp(o))mk(u,g);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=u.lastRenderedReducer,b!==null))try{var S=u.lastRenderedState,M=b(S,c);if(g.hasEagerState=!0,g.eagerState=M,Sr(M,S))return pp(o,u,g,0),Rt===null&&dp(),!1}catch{}finally{}if(c=u1(o,u,g,d),c!==null)return er(c,o,d),gk(c,u,d),!0}return!1}function M1(o,u,c,d){if(d={lane:2,revertLane:Ey(),action:d,hasEagerState:!1,eagerState:null,next:null},Dp(o)){if(u)throw Error(r(479))}else u=u1(o,c,d,2),u!==null&&er(u,o,2)}function Dp(o){var u=o.alternate;return o===et||u!==null&&u===et}function mk(o,u){Nl=kp=!0;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}function gk(o,u,c){if((c&4194176)!==0){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,_o(o,c)}}var Wi={readContext:Un,use:Ap,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt};Wi.useCacheRefresh=Xt,Wi.useMemoCache=Xt,Wi.useHostTransitionStatus=Xt,Wi.useFormState=Xt,Wi.useActionState=Xt,Wi.useOptimistic=Xt;var hu={readContext:Un,use:Ap,useCallback:function(o,u){return cr().memoizedState=[o,u===void 0?null:u],o},useContext:Un,useEffect:tk,useImperativeHandle:function(o,u,c){c=c!=null?c.concat([o]):null,Rp(4194308,4,ik.bind(null,u,o),c)},useLayoutEffect:function(o,u){return Rp(4194308,4,o,u)},useInsertionEffect:function(o,u){Rp(4,2,o,u)},useMemo:function(o,u){var c=cr();u=u===void 0?null:u;var d=o();if(cu){Ue(!0);try{o()}finally{Ue(!1)}}return c.memoizedState=[d,u],d},useReducer:function(o,u,c){var d=cr();if(c!==void 0){var g=c(u);if(cu){Ue(!0);try{c(u)}finally{Ue(!1)}}}else g=u;return d.memoizedState=d.baseState=g,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:g},d.queue=o,o=o.dispatch=LD.bind(null,et,o),[d.memoizedState,o]},useRef:function(o){var u=cr();return o={current:o},u.memoizedState=o},useState:function(o){o=S1(o);var u=o.queue,c=pk.bind(null,et,u);return u.dispatch=c,[o.memoizedState,c]},useDebugValue:R1,useDeferredValue:function(o,u){var c=cr();return I1(c,o,u)},useTransition:function(){var o=S1(!1);return o=lk.bind(null,et,o.queue,!0,!1),cr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,c){var d=et,g=cr();if(gt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=u(),Rt===null)throw Error(r(349));(ht&60)!==0||Vw(d,u,c)}g.memoizedState=c;var b={value:c,getSnapshot:u};return g.queue=b,tk(zw.bind(null,d,b,o),[o]),d.flags|=2048,Ol(9,Uw.bind(null,d,b,c,u),{destroy:void 0},null),c},useId:function(){var o=cr(),u=Rt.identifierPrefix;if(gt){var c=Ms,d=Ns;c=(d&~(1<<32-He(d)-1)).toString(32)+c,u=":"+u+"R"+c,c=Tp++,0<c&&(u+="H"+c.toString(32)),u+=":"}else c=RD++,u=":"+u+"r"+c.toString(32)+":";return o.memoizedState=u},useCacheRefresh:function(){return cr().memoizedState=OD.bind(null,et)}};hu.useMemoCache=w1,hu.useHostTransitionStatus=N1,hu.useFormState=Yw,hu.useActionState=Yw,hu.useOptimistic=function(o){var u=cr();u.memoizedState=u.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=c,u=M1.bind(null,et,!0,c),c.dispatch=u,[o,u]};var Mo={readContext:Un,use:Ap,useCallback:ok,useContext:Un,useEffect:C1,useImperativeHandle:sk,useInsertionEffect:nk,useLayoutEffect:rk,useMemo:ak,useReducer:Cp,useRef:ek,useState:function(){return Cp(Ls)},useDebugValue:R1,useDeferredValue:function(o,u){var c=en();return uk(c,Tt.memoizedState,o,u)},useTransition:function(){var o=Cp(Ls)[0],u=en().memoizedState;return[typeof o=="boolean"?o:Nh(o),u]},useSyncExternalStore:Fw,useId:fk};Mo.useCacheRefresh=dk,Mo.useMemoCache=w1,Mo.useHostTransitionStatus=N1,Mo.useFormState=Xw,Mo.useActionState=Xw,Mo.useOptimistic=function(o,u){var c=en();return Hw(c,Tt,o,u)};var fu={readContext:Un,use:Ap,useCallback:ok,useContext:Un,useEffect:C1,useImperativeHandle:sk,useInsertionEffect:nk,useLayoutEffect:rk,useMemo:ak,useReducer:T1,useRef:ek,useState:function(){return T1(Ls)},useDebugValue:R1,useDeferredValue:function(o,u){var c=en();return Tt===null?I1(c,o,u):uk(c,Tt.memoizedState,o,u)},useTransition:function(){var o=T1(Ls)[0],u=en().memoizedState;return[typeof o=="boolean"?o:Nh(o),u]},useSyncExternalStore:Fw,useId:fk};fu.useCacheRefresh=dk,fu.useMemoCache=w1,fu.useHostTransitionStatus=N1,fu.useFormState=Jw,fu.useActionState=Jw,fu.useOptimistic=function(o,u){var c=en();return Tt!==null?Hw(c,Tt,o,u):(c.baseState=o,[o,c.queue.dispatch])};function O1(o,u,c,d){u=o.memoizedState,c=c(d,u),c=c==null?u:F({},u,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var L1={isMounted:function(o){return(o=o._reactInternals)?ke(o)===o:!1},enqueueSetState:function(o,u,c){o=o._reactInternals;var d=Ir(),g=Po(d);g.payload=u,c!=null&&(g.callback=c),u=Bo(o,g,d),u!==null&&(er(u,o,d),Ph(u,o,d))},enqueueReplaceState:function(o,u,c){o=o._reactInternals;var d=Ir(),g=Po(d);g.tag=1,g.payload=u,c!=null&&(g.callback=c),u=Bo(o,g,d),u!==null&&(er(u,o,d),Ph(u,o,d))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var c=Ir(),d=Po(c);d.tag=2,u!=null&&(d.callback=u),u=Bo(o,d,c),u!==null&&(er(u,o,c),Ph(u,o,c))}};function yk(o,u,c,d,g,b,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,b,S):u.prototype&&u.prototype.isPureReactComponent?!vh(c,d)||!vh(g,b):!0}function bk(o,u,c,d){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,d),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,d),u.state!==o&&L1.enqueueReplaceState(u,u.state,null)}function du(o,u){var c=u;if("ref"in u){c={};for(var d in u)d!=="ref"&&(c[d]=u[d])}if(o=o.defaultProps){c===u&&(c=F({},c));for(var g in o)c[g]===void 0&&(c[g]=o[g])}return c}var Np=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function _k(o){Np(o)}function vk(o){console.error(o)}function xk(o){Np(o)}function Mp(o,u){try{var c=o.onUncaughtError;c(u.value,{componentStack:u.stack})}catch(d){setTimeout(function(){throw d})}}function Ek(o,u,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function P1(o,u,c){return c=Po(c),c.tag=3,c.payload={element:null},c.callback=function(){Mp(o,u)},c}function wk(o){return o=Po(o),o.tag=3,o}function kk(o,u,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;o.payload=function(){return g(b)},o.callback=function(){Ek(u,c,d)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(o.callback=function(){Ek(u,c,d),typeof g!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function PD(o,u,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(u=c.alternate,u!==null&&Lh(u,c,g,!0),c=Yr.current,c!==null){switch(c.tag){case 13:return Ki===null?yy():c.alternate===null&&$t===0&&($t=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===f1?c.flags|=16384:(u=c.updateQueue,u===null?c.updateQueue=new Set([d]):u.add(d),_y(o,d,g)),!1;case 22:return c.flags|=65536,d===f1?c.flags|=16384:(u=c.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=u):(c=u.retryQueue,c===null?u.retryQueue=new Set([d]):c.add(d)),_y(o,d,g)),!1}throw Error(r(435,c.tag))}return _y(o,d,g),yy(),!1}if(gt)return u=Yr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=g,d!==h1&&(o=Error(r(422),{cause:d}),kh(Kr(o,c)))):(d!==h1&&(u=Error(r(423),{cause:d}),kh(Kr(u,c))),o=o.current.alternate,o.flags|=65536,g&=-g,o.lanes|=g,d=Kr(d,c),g=P1(o.stateNode,d,g),X1(o,g),$t!==4&&($t=2)),!1;var b=Error(r(520),{cause:d});if(b=Kr(b,c),Hh===null?Hh=[b]:Hh.push(b),$t!==4&&($t=2),u===null)return!0;d=Kr(d,c),c=u;do{switch(c.tag){case 3:return c.flags|=65536,o=g&-g,c.lanes|=o,o=P1(c.stateNode,d,o),X1(c,o),!1;case 1:if(u=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qo===null||!qo.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=wk(g),kk(g,o,c,d),X1(c,g),!1}c=c.return}while(c!==null);return!1}var Tk=Error(r(461)),_n=!1;function Cn(o,u,c,d){u.child=o===null?Iw(u,null,c,d):uu(u,o.child,c,d)}function Sk(o,u,c,d,g){c=c.render;var b=u.ref;if("ref"in d){var S={};for(var M in d)M!=="ref"&&(S[M]=d[M])}else S=d;return mu(u),d=_1(o,u,c,S,b,g),M=v1(),o!==null&&!_n?(x1(o,u,g),Ps(o,u,g)):(gt&&M&&l1(u),u.flags|=1,Cn(o,u,d,g),u.child)}function Ak(o,u,c,d,g){if(o===null){var b=c.type;return typeof b=="function"&&!sy(b)&&b.defaultProps===void 0&&c.compare===null?(u.tag=15,u.type=b,Ck(o,u,b,d,g)):(o=Fp(c.type,null,d,u,u.mode,g),o.ref=u.ref,o.return=u,u.child=o)}if(b=o.child,!$1(o,g)){var S=b.memoizedProps;if(c=c.compare,c=c!==null?c:vh,c(S,d)&&o.ref===u.ref)return Ps(o,u,g)}return u.flags|=1,o=zo(b,d),o.ref=u.ref,o.return=u,u.child=o}function Ck(o,u,c,d,g){if(o!==null){var b=o.memoizedProps;if(vh(b,d)&&o.ref===u.ref)if(_n=!1,u.pendingProps=d=b,$1(o,g))(o.flags&131072)!==0&&(_n=!0);else return u.lanes=o.lanes,Ps(o,u,g)}return B1(o,u,c,d,g)}function Rk(o,u,c){var d=u.pendingProps,g=d.children,b=(u.stateNode._pendingVisibility&2)!==0,S=o!==null?o.memoizedState:null;if(Oh(o,u),d.mode==="hidden"||b){if((u.flags&128)!==0){if(d=S!==null?S.baseLanes|c:c,o!==null){for(g=u.child=o.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;u.childLanes=b&~d}else u.childLanes=0,u.child=null;return Ik(o,u,d,c)}if((c&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&wp(u,S!==null?S.cachePool:null),S!==null?Dw(u,S):d1(),Nw(u);else return u.lanes=u.childLanes=536870912,Ik(o,u,S!==null?S.baseLanes|c:c,c)}else S!==null?(wp(u,S.cachePool),Dw(u,S),Do(),u.memoizedState=null):(o!==null&&wp(u,null),d1(),Do());return Cn(o,u,g,c),u.child}function Ik(o,u,c,d){var g=y1();return g=g===null?null:{parent:hn._currentValue,pool:g},u.memoizedState={baseLanes:c,cachePool:g},o!==null&&wp(u,null),d1(),Nw(u),o!==null&&Lh(o,u,d,!0),null}function Oh(o,u){var c=u.ref;if(c===null)o!==null&&o.ref!==null&&(u.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(u.flags|=2097664)}}function B1(o,u,c,d,g){return mu(u),c=_1(o,u,c,d,void 0,g),d=v1(),o!==null&&!_n?(x1(o,u,g),Ps(o,u,g)):(gt&&d&&l1(u),u.flags|=1,Cn(o,u,c,g),u.child)}function Dk(o,u,c,d,g,b){return mu(u),u.updateQueue=null,c=Bw(u,d,c,g),Pw(o),d=v1(),o!==null&&!_n?(x1(o,u,b),Ps(o,u,b)):(gt&&d&&l1(u),u.flags|=1,Cn(o,u,c,b),u.child)}function Nk(o,u,c,d,g){if(mu(u),u.stateNode===null){var b=Tl,S=c.contextType;typeof S=="object"&&S!==null&&(b=Un(S)),b=new c(d,b),u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=L1,u.stateNode=b,b._reactInternals=u,b=u.stateNode,b.props=d,b.state=u.memoizedState,b.refs={},Q1(u),S=c.contextType,b.context=typeof S=="object"&&S!==null?Un(S):Tl,b.state=u.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(O1(u,c,S,d),b.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&L1.enqueueReplaceState(b,b.state,null),Fh(u,d,b,g),Bh(),b.state=u.memoizedState),typeof b.componentDidMount=="function"&&(u.flags|=4194308),d=!0}else if(o===null){b=u.stateNode;var M=u.memoizedProps,q=du(c,M);b.props=q;var Z=b.context,ce=c.contextType;S=Tl,typeof ce=="object"&&ce!==null&&(S=Un(ce));var me=c.getDerivedStateFromProps;ce=typeof me=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=u.pendingProps!==M,ce||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||Z!==S)&&bk(u,b,d,S),Lo=!1;var ie=u.memoizedState;b.state=ie,Fh(u,d,b,g),Bh(),Z=u.memoizedState,M||ie!==Z||Lo?(typeof me=="function"&&(O1(u,c,me,d),Z=u.memoizedState),(q=Lo||yk(u,c,q,d,ie,Z,S))?(ce||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(u.flags|=4194308)):(typeof b.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=d,u.memoizedState=Z),b.props=d,b.state=Z,b.context=S,d=q):(typeof b.componentDidMount=="function"&&(u.flags|=4194308),d=!1)}else{b=u.stateNode,Y1(o,u),S=u.memoizedProps,ce=du(c,S),b.props=ce,me=u.pendingProps,ie=b.context,Z=c.contextType,q=Tl,typeof Z=="object"&&Z!==null&&(q=Un(Z)),M=c.getDerivedStateFromProps,(Z=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==me||ie!==q)&&bk(u,b,d,q),Lo=!1,ie=u.memoizedState,b.state=ie,Fh(u,d,b,g),Bh();var le=u.memoizedState;S!==me||ie!==le||Lo||o!==null&&o.dependencies!==null&&Op(o.dependencies)?(typeof M=="function"&&(O1(u,c,M,d),le=u.memoizedState),(ce=Lo||yk(u,c,ce,d,ie,le,q)||o!==null&&o.dependencies!==null&&Op(o.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,le,q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,le,q)),typeof b.componentDidUpdate=="function"&&(u.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===o.memoizedProps&&ie===o.memoizedState||(u.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&ie===o.memoizedState||(u.flags|=1024),u.memoizedProps=d,u.memoizedState=le),b.props=d,b.state=le,b.context=q,d=ce):(typeof b.componentDidUpdate!="function"||S===o.memoizedProps&&ie===o.memoizedState||(u.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&ie===o.memoizedState||(u.flags|=1024),d=!1)}return b=d,Oh(o,u),d=(u.flags&128)!==0,b||d?(b=u.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),u.flags|=1,o!==null&&d?(u.child=uu(u,o.child,null,g),u.child=uu(u,null,c,g)):Cn(o,u,c,g),u.memoizedState=b.state,o=u.child):o=Ps(o,u,g),o}function Mk(o,u,c,d){return wh(),u.flags|=256,Cn(o,u,c,d),u.child}var F1={dehydrated:null,treeContext:null,retryLane:0};function V1(o){return{baseLanes:o,cachePool:Lw()}}function U1(o,u,c){return o=o!==null?o.childLanes&~c:0,u&&(o|=ei),o}function Ok(o,u,c){var d=u.pendingProps,g=!1,b=(u.flags&128)!==0,S;if((S=b)||(S=o!==null&&o.memoizedState===null?!1:(cn.current&2)!==0),S&&(g=!0,u.flags&=-129),S=(u.flags&32)!==0,u.flags&=-33,o===null){if(gt){if(g?Io(u):Do(),gt){var M=An,q;if(q=M){e:{for(q=M,M=Gi;q.nodeType!==8;){if(!M){M=null;break e}if(q=_i(q.nextSibling),q===null){M=null;break e}}M=q}M!==null?(u.memoizedState={dehydrated:M,treeContext:su!==null?{id:Ns,overflow:Ms}:null,retryLane:536870912},q=Jr(18,null,null,0),q.stateNode=M,q.return=u,u.child=q,Jn=u,An=null,q=!0):q=!1}q||au(u)}if(M=u.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return M.data==="$!"?u.lanes=16:u.lanes=536870912,null;Os(u)}return M=d.children,d=d.fallback,g?(Do(),g=u.mode,M=j1({mode:"hidden",children:M},g),d=yu(d,g,c,null),M.return=u,d.return=u,M.sibling=d,u.child=M,g=u.child,g.memoizedState=V1(c),g.childLanes=U1(o,S,c),u.memoizedState=F1,d):(Io(u),z1(u,M))}if(q=o.memoizedState,q!==null&&(M=q.dehydrated,M!==null)){if(b)u.flags&256?(Io(u),u.flags&=-257,u=q1(o,u,c)):u.memoizedState!==null?(Do(),u.child=o.child,u.flags|=128,u=null):(Do(),g=d.fallback,M=u.mode,d=j1({mode:"visible",children:d.children},M),g=yu(g,M,c,null),g.flags|=2,d.return=u,g.return=u,d.sibling=g,u.child=d,uu(u,o.child,null,c),d=u.child,d.memoizedState=V1(c),d.childLanes=U1(o,S,c),u.memoizedState=F1,u=g);else if(Io(u),M.data==="$!"){if(S=M.nextSibling&&M.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(r(419)),d.stack="",d.digest=S,kh({value:d,source:null,stack:null}),u=q1(o,u,c)}else if(_n||Lh(o,u,c,!1),S=(c&o.childLanes)!==0,_n||S){if(S=Rt,S!==null){if(d=c&-c,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(S.suspendedLanes|c))!==0?0:d,d!==0&&d!==q.retryLane)throw q.retryLane=d,Ro(o,d),er(S,o,d),Tk}M.data==="$?"||yy(),u=q1(o,u,c)}else M.data==="$?"?(u.flags|=128,u.child=o.child,u=XD.bind(null,o),M._reactRetry=u,u=null):(o=q.treeContext,An=_i(M.nextSibling),Jn=u,gt=!0,yi=null,Gi=!1,o!==null&&(Wr[Qr++]=Ns,Wr[Qr++]=Ms,Wr[Qr++]=su,Ns=o.id,Ms=o.overflow,su=u),u=z1(u,d.children),u.flags|=4096);return u}return g?(Do(),g=d.fallback,M=u.mode,q=o.child,Z=q.sibling,d=zo(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&31457280,Z!==null?g=zo(Z,g):(g=yu(g,M,c,null),g.flags|=2),g.return=u,d.return=u,d.sibling=g,u.child=d,d=g,g=u.child,M=o.child.memoizedState,M===null?M=V1(c):(q=M.cachePool,q!==null?(Z=hn._currentValue,q=q.parent!==Z?{parent:Z,pool:Z}:q):q=Lw(),M={baseLanes:M.baseLanes|c,cachePool:q}),g.memoizedState=M,g.childLanes=U1(o,S,c),u.memoizedState=F1,d):(Io(u),c=o.child,o=c.sibling,c=zo(c,{mode:"visible",children:d.children}),c.return=u,c.sibling=null,o!==null&&(S=u.deletions,S===null?(u.deletions=[o],u.flags|=16):S.push(o)),u.child=c,u.memoizedState=null,c)}function z1(o,u){return u=j1({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function j1(o,u){return o2(o,u,0,null)}function q1(o,u,c){return uu(u,o.child,null,c),o=z1(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Lk(o,u,c){o.lanes|=u;var d=o.alternate;d!==null&&(d.lanes|=u),K1(o.return,u,c)}function H1(o,u,c,d,g){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(b.isBackwards=u,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=g)}function Pk(o,u,c){var d=u.pendingProps,g=d.revealOrder,b=d.tail;if(Cn(o,u,d.children,c),d=cn.current,(d&2)!==0)d=d&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Lk(o,c,u);else if(o.tag===19)Lk(o,c,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}switch(Xe(cn,d),g){case"forwards":for(c=u.child,g=null;c!==null;)o=c.alternate,o!==null&&Ep(o)===null&&(g=c),c=c.sibling;c=g,c===null?(g=u.child,u.child=null):(g=c.sibling,c.sibling=null),H1(u,!1,g,c,b);break;case"backwards":for(c=null,g=u.child,u.child=null;g!==null;){if(o=g.alternate,o!==null&&Ep(o)===null){u.child=g;break}o=g.sibling,g.sibling=c,c=g,g=o}H1(u,!0,c,null,b);break;case"together":H1(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ps(o,u,c){if(o!==null&&(u.dependencies=o.dependencies),jo|=u.lanes,(c&u.childLanes)===0)if(o!==null){if(Lh(o,u,c,!1),(c&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,c=zo(o,o.pendingProps),u.child=c,c.return=u;o.sibling!==null;)o=o.sibling,c=c.sibling=zo(o,o.pendingProps),c.return=u;c.sibling=null}return u.child}function $1(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Op(o)))}function BD(o,u,c){switch(u.tag){case 3:xr(u,u.stateNode.containerInfo),Oo(u,hn,o.memoizedState.cache),wh();break;case 27:case 5:Vr(u);break;case 4:xr(u,u.stateNode.containerInfo);break;case 10:Oo(u,u.type,u.memoizedProps.value);break;case 13:var d=u.memoizedState;if(d!==null)return d.dehydrated!==null?(Io(u),u.flags|=128,null):(c&u.child.childLanes)!==0?Ok(o,u,c):(Io(u),o=Ps(o,u,c),o!==null?o.sibling:null);Io(u);break;case 19:var g=(o.flags&128)!==0;if(d=(c&u.childLanes)!==0,d||(Lh(o,u,c,!1),d=(c&u.childLanes)!==0),g){if(d)return Pk(o,u,c);u.flags|=128}if(g=u.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Xe(cn,cn.current),d)break;return null;case 22:case 23:return u.lanes=0,Rk(o,u,c);case 24:Oo(u,hn,o.memoizedState.cache)}return Ps(o,u,c)}function Bk(o,u,c){if(o!==null)if(o.memoizedProps!==u.pendingProps)_n=!0;else{if(!$1(o,c)&&(u.flags&128)===0)return _n=!1,BD(o,u,c);_n=(o.flags&131072)!==0}else _n=!1,gt&&(u.flags&1048576)!==0&&xw(u,yp,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var d=u.elementType,g=d._init;if(d=g(d._payload),u.type=d,typeof d=="function")sy(d)?(o=du(d,o),u.tag=1,u=Nk(null,u,d,o,c)):(u.tag=0,u=B1(null,u,d,o,c));else{if(d!=null){if(g=d.$$typeof,g===w){u.tag=11,u=Sk(null,u,d,o,c);break e}else if(g===V){u.tag=14,u=Ak(null,u,d,o,c);break e}}throw u=I(d)||d,Error(r(306,u,""))}}return u;case 0:return B1(o,u,u.type,u.pendingProps,c);case 1:return d=u.type,g=du(d,u.pendingProps),Nk(o,u,d,g,c);case 3:e:{if(xr(u,u.stateNode.containerInfo),o===null)throw Error(r(387));var b=u.pendingProps;g=u.memoizedState,d=g.element,Y1(o,u),Fh(u,b,null,c);var S=u.memoizedState;if(b=S.cache,Oo(u,hn,b),b!==g.cache&&W1(u,[hn],c,!0),Bh(),b=S.element,g.isDehydrated)if(g={element:b,isDehydrated:!1,cache:S.cache},u.updateQueue.baseState=g,u.memoizedState=g,u.flags&256){u=Mk(o,u,b,c);break e}else if(b!==d){d=Kr(Error(r(424)),u),kh(d),u=Mk(o,u,b,c);break e}else for(An=_i(u.stateNode.containerInfo.firstChild),Jn=u,gt=!0,yi=null,Gi=!0,c=Iw(u,null,b,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wh(),b===d){u=Ps(o,u,c);break e}Cn(o,u,b,c)}u=u.child}return u;case 26:return Oh(o,u),o===null?(c=U2(u.type,null,u.pendingProps,null))?u.memoizedState=c:gt||(c=u.type,o=u.pendingProps,d=Yp(Qt.current).createElement(c),d[gn]=u,d[an]=o,Rn(d,c,o),Pt(d),u.stateNode=d):u.memoizedState=U2(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Vr(u),o===null&&gt&&(d=u.stateNode=B2(u.type,u.pendingProps,Qt.current),Jn=u,Gi=!0,An=_i(d.firstChild)),d=u.pendingProps.children,o!==null||gt?Cn(o,u,d,c):u.child=uu(u,null,d,c),Oh(o,u),u.child;case 5:return o===null&&gt&&((g=d=An)&&(d=dN(d,u.type,u.pendingProps,Gi),d!==null?(u.stateNode=d,Jn=u,An=_i(d.firstChild),Gi=!1,g=!0):g=!1),g||au(u)),Vr(u),g=u.type,b=u.pendingProps,S=o!==null?o.memoizedProps:null,d=b.children,Dy(g,b)?d=null:S!==null&&Dy(g,S)&&(u.flags|=32),u.memoizedState!==null&&(g=_1(o,u,ID,null,null,c),Jh._currentValue=g),Oh(o,u),Cn(o,u,d,c),u.child;case 6:return o===null&&gt&&((o=c=An)&&(c=pN(c,u.pendingProps,Gi),c!==null?(u.stateNode=c,Jn=u,An=null,o=!0):o=!1),o||au(u)),null;case 13:return Ok(o,u,c);case 4:return xr(u,u.stateNode.containerInfo),d=u.pendingProps,o===null?u.child=uu(u,null,d,c):Cn(o,u,d,c),u.child;case 11:return Sk(o,u,u.type,u.pendingProps,c);case 7:return Cn(o,u,u.pendingProps,c),u.child;case 8:return Cn(o,u,u.pendingProps.children,c),u.child;case 12:return Cn(o,u,u.pendingProps.children,c),u.child;case 10:return d=u.pendingProps,Oo(u,u.type,d.value),Cn(o,u,d.children,c),u.child;case 9:return g=u.type._context,d=u.pendingProps.children,mu(u),g=Un(g),d=d(g),u.flags|=1,Cn(o,u,d,c),u.child;case 14:return Ak(o,u,u.type,u.pendingProps,c);case 15:return Ck(o,u,u.type,u.pendingProps,c);case 19:return Pk(o,u,c);case 22:return Rk(o,u,c);case 24:return mu(u),d=Un(hn),o===null?(g=y1(),g===null&&(g=Rt,b=m1(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),u.memoizedState={parent:d,cache:g},Q1(u),Oo(u,hn,g)):((o.lanes&c)!==0&&(Y1(o,u),Fh(u,null,null,c),Bh()),g=o.memoizedState,b=u.memoizedState,g.parent!==d?(g={parent:d,cache:d},u.memoizedState=g,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=g),Oo(u,hn,d)):(d=b.cache,Oo(u,hn,d),d!==g.cache&&W1(u,[hn],c,!0))),Cn(o,u,u.pendingProps.children,c),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}var G1=Ne(null),pu=null,Bs=null;function Oo(o,u,c){Xe(G1,u._currentValue),u._currentValue=c}function Fs(o){o._currentValue=G1.current,Je(G1)}function K1(o,u,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,d!==null&&(d.childLanes|=u)):d!==null&&(d.childLanes&u)!==u&&(d.childLanes|=u),o===c)break;o=o.return}}function W1(o,u,c,d){var g=o.child;for(g!==null&&(g.return=o);g!==null;){var b=g.dependencies;if(b!==null){var S=g.child;b=b.firstContext;e:for(;b!==null;){var M=b;b=g;for(var q=0;q<u.length;q++)if(M.context===u[q]){b.lanes|=c,M=b.alternate,M!==null&&(M.lanes|=c),K1(b.return,c,o),d||(S=null);break e}b=M.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=c,b=S.alternate,b!==null&&(b.lanes|=c),K1(S,c,o),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===o){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Lh(o,u,c,d){o=null;for(var g=u,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var M=g.type;Sr(g.pendingProps.value,S.value)||(o!==null?o.push(M):o=[M])}}else if(g===Fn.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(o!==null?o.push(Jh):o=[Jh])}g=g.return}o!==null&&W1(u,o,c,d),u.flags|=262144}function Op(o){for(o=o.firstContext;o!==null;){if(!Sr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function mu(o){pu=o,Bs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Un(o){return Fk(pu,o)}function Lp(o,u){return pu===null&&mu(o),Fk(o,u)}function Fk(o,u){var c=u._currentValue;if(u={context:u,memoizedValue:c,next:null},Bs===null){if(o===null)throw Error(r(308));Bs=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Bs=Bs.next=u;return c}var Lo=!1;function Q1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y1(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Po(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bo(o,u,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Ft&2)!==0){var g=d.pending;return g===null?u.next=u:(u.next=g.next,g.next=u),d.pending=u,u=mp(o),_w(o,null,c),u}return pp(o,d,u,c),mp(o)}function Ph(o,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194176)!==0)){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,_o(o,c)}}function X1(o,u){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=S:b=b.next=S,c=c.next}while(c!==null);b===null?g=b=u:b=b.next=u}else g=b=u;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=u}var Z1=!1;function Bh(){if(Z1){var o=Dl;if(o!==null)throw o}}function Fh(o,u,c,d){Z1=!1;var g=o.updateQueue;Lo=!1;var b=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var q=M,Z=q.next;q.next=null,S===null?b=Z:S.next=Z,S=q;var ce=o.alternate;ce!==null&&(ce=ce.updateQueue,M=ce.lastBaseUpdate,M!==S&&(M===null?ce.firstBaseUpdate=Z:M.next=Z,ce.lastBaseUpdate=q))}if(b!==null){var me=g.baseState;S=0,ce=Z=q=null,M=b;do{var ie=M.lane&-536870913,le=ie!==M.lane;if(le?(ht&ie)===ie:(d&ie)===ie){ie!==0&&ie===Il&&(Z1=!0),ce!==null&&(ce=ce.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ie=o,We=M;ie=u;var Gt=c;switch(We.tag){case 1:if(Ie=We.payload,typeof Ie=="function"){me=Ie.call(Gt,me,ie);break e}me=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=We.payload,ie=typeof Ie=="function"?Ie.call(Gt,me,ie):Ie,ie==null)break e;me=F({},me,ie);break e;case 2:Lo=!0}}ie=M.callback,ie!==null&&(o.flags|=64,le&&(o.flags|=8192),le=g.callbacks,le===null?g.callbacks=[ie]:le.push(ie))}else le={lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ce===null?(Z=ce=le,q=me):ce=ce.next=le,S|=ie;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;le=M,M=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);ce===null&&(q=me),g.baseState=q,g.firstBaseUpdate=Z,g.lastBaseUpdate=ce,b===null&&(g.shared.lanes=0),jo|=S,o.lanes=S,o.memoizedState=me}}function Vk(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function Uk(o,u){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)Vk(c[o],u)}function Vh(o,u){try{var c=u.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&o)===o){d=void 0;var b=c.create,S=c.inst;d=b(),S.destroy=d}c=c.next}while(c!==g)}}catch(M){Ct(u,u.return,M)}}function Fo(o,u,c){try{var d=u.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&o)===o){var S=d.inst,M=S.destroy;if(M!==void 0){S.destroy=void 0,g=u;var q=c;try{M()}catch(Z){Ct(g,q,Z)}}}d=d.next}while(d!==b)}}catch(Z){Ct(u,u.return,Z)}}function zk(o){var u=o.updateQueue;if(u!==null){var c=o.stateNode;try{Uk(u,c)}catch(d){Ct(o,o.return,d)}}}function jk(o,u,c){c.props=du(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){Ct(o,u,d)}}function gu(o,u){try{var c=o.ref;if(c!==null){var d=o.stateNode;switch(o.tag){case 26:case 27:case 5:var g=d;break;default:g=d}typeof c=="function"?o.refCleanup=c(g):c.current=g}}catch(b){Ct(o,u,b)}}function Ar(o,u){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Ct(o,u,g)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ct(o,u,g)}else c.current=null}function qk(o){var u=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Ct(o,o.return,g)}}function Hk(o,u,c){try{var d=o.stateNode;uN(d,o.type,c,u),d[an]=u}catch(g){Ct(o,o.return,g)}}function $k(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function J1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$k(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ey(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?c.nodeType===8?c.parentNode.insertBefore(o,u):c.insertBefore(o,u):(c.nodeType===8?(u=c.parentNode,u.insertBefore(o,c)):(u=c,u.appendChild(o)),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=Qp));else if(d!==4&&d!==27&&(o=o.child,o!==null))for(ey(o,u,c),o=o.sibling;o!==null;)ey(o,u,c),o=o.sibling}function Pp(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?c.insertBefore(o,u):c.appendChild(o);else if(d!==4&&d!==27&&(o=o.child,o!==null))for(Pp(o,u,c),o=o.sibling;o!==null;)Pp(o,u,c),o=o.sibling}var Vs=!1,Ht=!1,ty=!1,Gk=typeof WeakSet=="function"?WeakSet:Set,vn=null,Kk=!1;function FD(o,u){if(o=o.containerInfo,Ry=n0,o=cw(o),r1(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var S=0,M=-1,q=-1,Z=0,ce=0,me=o,ie=null;t:for(;;){for(var le;me!==c||g!==0&&me.nodeType!==3||(M=S+g),me!==b||d!==0&&me.nodeType!==3||(q=S+d),me.nodeType===3&&(S+=me.nodeValue.length),(le=me.firstChild)!==null;)ie=me,me=le;for(;;){if(me===o)break t;if(ie===c&&++Z===g&&(M=S),ie===b&&++ce===d&&(q=S),(le=me.nextSibling)!==null)break;me=ie,ie=me.parentNode}me=le}c=M===-1||q===-1?null:{start:M,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(Iy={focusedElem:o,selectionRange:c},n0=!1,vn=u;vn!==null;)if(u=vn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,vn=o;else for(;vn!==null;){switch(u=vn,b=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,c=u,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Ie=du(c.type,g,c.elementType===c.type);o=d.getSnapshotBeforeUpdate(Ie,b),d.__reactInternalSnapshotBeforeUpdate=o}catch(We){Ct(c,c.return,We)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,c=o.nodeType,c===9)Oy(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Oy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,vn=o;break}vn=u.return}return Ie=Kk,Kk=!1,Ie}function Wk(o,u,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:zs(o,c),d&4&&Vh(5,c);break;case 1:if(zs(o,c),d&4)if(o=c.stateNode,u===null)try{o.componentDidMount()}catch(M){Ct(c,c.return,M)}else{var g=du(c.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(g,u,o.__reactInternalSnapshotBeforeUpdate)}catch(M){Ct(c,c.return,M)}}d&64&&zk(c),d&512&&gu(c,c.return);break;case 3:if(zs(o,c),d&64&&(d=c.updateQueue,d!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Uk(d,o)}catch(M){Ct(c,c.return,M)}}break;case 26:zs(o,c),d&512&&gu(c,c.return);break;case 27:case 5:zs(o,c),u===null&&d&4&&qk(c),d&512&&gu(c,c.return);break;case 12:zs(o,c);break;case 13:zs(o,c),d&4&&Xk(o,c);break;case 22:if(g=c.memoizedState!==null||Vs,!g){u=u!==null&&u.memoizedState!==null||Ht;var b=Vs,S=Ht;Vs=g,(Ht=u)&&!S?Vo(o,c,(c.subtreeFlags&8772)!==0):zs(o,c),Vs=b,Ht=S}d&512&&(c.memoizedProps.mode==="manual"?gu(c,c.return):Ar(c,c.return));break;default:zs(o,c)}}function Qk(o){var u=o.alternate;u!==null&&(o.alternate=null,Qk(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Ga(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var tn=null,Cr=!1;function Us(o,u,c){for(c=c.child;c!==null;)Yk(o,u,c),c=c.sibling}function Yk(o,u,c){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(ae,c)}catch{}switch(c.tag){case 26:Ht||Ar(c,u),Us(o,u,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ht||Ar(c,u);var d=tn,g=Cr;for(tn=c.stateNode,Us(o,u,c),c=c.stateNode,u=c.attributes;u.length;)c.removeAttributeNode(u[0]);Ga(c),tn=d,Cr=g;break;case 5:Ht||Ar(c,u);case 6:g=tn;var b=Cr;if(tn=null,Us(o,u,c),tn=g,Cr=b,tn!==null)if(Cr)try{o=tn,d=c.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)}catch(S){Ct(c,u,S)}else try{tn.removeChild(c.stateNode)}catch(S){Ct(c,u,S)}break;case 18:tn!==null&&(Cr?(u=tn,c=c.stateNode,u.nodeType===8?My(u.parentNode,c):u.nodeType===1&&My(u,c),rf(u)):My(tn,c.stateNode));break;case 4:d=tn,g=Cr,tn=c.stateNode.containerInfo,Cr=!0,Us(o,u,c),tn=d,Cr=g;break;case 0:case 11:case 14:case 15:Ht||Fo(2,c,u),Ht||Fo(4,c,u),Us(o,u,c);break;case 1:Ht||(Ar(c,u),d=c.stateNode,typeof d.componentWillUnmount=="function"&&jk(c,u,d)),Us(o,u,c);break;case 21:Us(o,u,c);break;case 22:Ht||Ar(c,u),Ht=(d=Ht)||c.memoizedState!==null,Us(o,u,c),Ht=d;break;default:Us(o,u,c)}}function Xk(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{rf(o)}catch(c){Ct(u,u.return,c)}}function VD(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Gk),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Gk),u;default:throw Error(r(435,o.tag))}}function ny(o,u){var c=VD(o);u.forEach(function(d){var g=ZD.bind(null,o,d);c.has(d)||(c.add(d),d.then(g,g))})}function Xr(o,u){var c=u.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=o,S=u,M=S;e:for(;M!==null;){switch(M.tag){case 27:case 5:tn=M.stateNode,Cr=!1;break e;case 3:tn=M.stateNode.containerInfo,Cr=!0;break e;case 4:tn=M.stateNode.containerInfo,Cr=!0;break e}M=M.return}if(tn===null)throw Error(r(160));Yk(b,S,g),tn=null,Cr=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Zk(u,o),u=u.sibling}var bi=null;function Zk(o,u){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Xr(u,o),Zr(o),d&4&&(Fo(3,o,o.return),Vh(3,o),Fo(5,o,o.return));break;case 1:Xr(u,o),Zr(o),d&512&&(Ht||c===null||Ar(c,c.return)),d&64&&Vs&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=bi;if(Xr(u,o),Zr(o),d&512&&(Ht||c===null||Ar(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[xo]||b[gn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Rn(b,d,c),b[gn]=o,Pt(b),d=b;break e;case"link":var S=q2("link","href",g).get(d+(c.href||""));if(S){for(var M=0;M<S.length;M++)if(b=S[M],b.getAttribute("href")===(c.href==null?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(M,1);break t}}b=g.createElement(d),Rn(b,d,c),g.head.appendChild(b);break;case"meta":if(S=q2("meta","content",g).get(d+(c.content||""))){for(M=0;M<S.length;M++)if(b=S[M],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(M,1);break t}}b=g.createElement(d),Rn(b,d,c),g.head.appendChild(b);break;default:throw Error(r(468,d))}b[gn]=o,Pt(b),d=b}o.stateNode=d}else H2(g,o.type,o.stateNode);else o.stateNode=j2(g,d,o.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?H2(g,o.type,o.stateNode):j2(g,d,o.memoizedProps)):d===null&&o.stateNode!==null&&Hk(o,o.memoizedProps,c.memoizedProps)}break;case 27:if(d&4&&o.alternate===null){g=o.stateNode,b=o.memoizedProps;try{for(var q=g.firstChild;q;){var Z=q.nextSibling,ce=q.nodeName;q[xo]||ce==="HEAD"||ce==="BODY"||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&q.rel.toLowerCase()==="stylesheet"||g.removeChild(q),q=Z}for(var me=o.type,ie=g.attributes;ie.length;)g.removeAttributeNode(ie[0]);Rn(g,me,b),g[gn]=o,g[an]=b}catch(Ie){Ct(o,o.return,Ie)}}case 5:if(Xr(u,o),Zr(o),d&512&&(Ht||c===null||Ar(c,c.return)),o.flags&32){g=o.stateNode;try{jr(g,"")}catch(Ie){Ct(o,o.return,Ie)}}d&4&&o.stateNode!=null&&(g=o.memoizedProps,Hk(o,g,c!==null?c.memoizedProps:g)),d&1024&&(ty=!0);break;case 6:if(Xr(u,o),Zr(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(Ie){Ct(o,o.return,Ie)}}break;case 3:if(Jp=null,g=bi,bi=Xp(u.containerInfo),Xr(u,o),bi=g,Zr(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{rf(u.containerInfo)}catch(Ie){Ct(o,o.return,Ie)}ty&&(ty=!1,Jk(o));break;case 4:d=bi,bi=Xp(o.stateNode.containerInfo),Xr(u,o),Zr(o),bi=d;break;case 12:Xr(u,o),Zr(o);break;case 13:Xr(u,o),Zr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(hy=mn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,ny(o,d)));break;case 22:if(d&512&&(Ht||c===null||Ar(c,c.return)),q=o.memoizedState!==null,Z=c!==null&&c.memoizedState!==null,ce=Vs,me=Ht,Vs=ce||q,Ht=me||Z,Xr(u,o),Ht=me,Vs=ce,Zr(o),u=o.stateNode,u._current=o,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,d&8192&&(u._visibility=q?u._visibility&-2:u._visibility|1,q&&(u=Vs||Ht,c===null||Z||u||Ll(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(c=null,u=o;;){if(u.tag===5||u.tag===26||u.tag===27){if(c===null){Z=c=u;try{if(g=Z.stateNode,q)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=Z.stateNode,M=Z.memoizedProps.style;var le=M!=null&&M.hasOwnProperty("display")?M.display:null;S.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Ie){Ct(Z,Z.return,Ie)}}}else if(u.tag===6){if(c===null){Z=u;try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(Ie){Ct(Z,Z.return,Ie)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ny(o,c))));break;case 19:Xr(u,o),Zr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,ny(o,d)));break;case 21:break;default:Xr(u,o),Zr(o)}}function Zr(o){var u=o.flags;if(u&2){try{if(o.tag!==27){e:{for(var c=o.return;c!==null;){if($k(c)){var d=c;break e}c=c.return}throw Error(r(160))}switch(d.tag){case 27:var g=d.stateNode,b=J1(o);Pp(o,b,g);break;case 5:var S=d.stateNode;d.flags&32&&(jr(S,""),d.flags&=-33);var M=J1(o);Pp(o,M,S);break;case 3:case 4:var q=d.stateNode.containerInfo,Z=J1(o);ey(o,Z,q);break;default:throw Error(r(161))}}}catch(ce){Ct(o,o.return,ce)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Jk(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Jk(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function zs(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Wk(o,u.alternate,u),u=u.sibling}function Ll(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Fo(4,u,u.return),Ll(u);break;case 1:Ar(u,u.return);var c=u.stateNode;typeof c.componentWillUnmount=="function"&&jk(u,u.return,c),Ll(u);break;case 26:case 27:case 5:Ar(u,u.return),Ll(u);break;case 22:Ar(u,u.return),u.memoizedState===null&&Ll(u);break;default:Ll(u)}o=o.sibling}}function Vo(o,u,c){for(c=c&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var d=u.alternate,g=o,b=u,S=b.flags;switch(b.tag){case 0:case 11:case 15:Vo(g,b,c),Vh(4,b);break;case 1:if(Vo(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Z){Ct(d,d.return,Z)}if(d=b,g=d.updateQueue,g!==null){var M=d.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)Vk(q[g],M)}catch(Z){Ct(d,d.return,Z)}}c&&S&64&&zk(b),gu(b,b.return);break;case 26:case 27:case 5:Vo(g,b,c),c&&d===null&&S&4&&qk(b),gu(b,b.return);break;case 12:Vo(g,b,c);break;case 13:Vo(g,b,c),c&&S&4&&Xk(g,b);break;case 22:b.memoizedState===null&&Vo(g,b,c),gu(b,b.return);break;default:Vo(g,b,c)}u=u.sibling}}function ry(o,u){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&Rh(c))}function iy(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Rh(o))}function Uo(o,u,c,d){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)e2(o,u,c,d),u=u.sibling}function e2(o,u,c,d){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Uo(o,u,c,d),g&2048&&Vh(9,u);break;case 3:Uo(o,u,c,d),g&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Rh(o)));break;case 12:if(g&2048){Uo(o,u,c,d),o=u.stateNode;try{var b=u.memoizedProps,S=b.id,M=b.onPostCommit;typeof M=="function"&&M(S,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(q){Ct(u,u.return,q)}}else Uo(o,u,c,d);break;case 23:break;case 22:b=u.stateNode,u.memoizedState!==null?b._visibility&4?Uo(o,u,c,d):Uh(o,u):b._visibility&4?Uo(o,u,c,d):(b._visibility|=4,Pl(o,u,c,d,(u.subtreeFlags&10256)!==0)),g&2048&&ry(u.alternate,u);break;case 24:Uo(o,u,c,d),g&2048&&iy(u.alternate,u);break;default:Uo(o,u,c,d)}}function Pl(o,u,c,d,g){for(g=g&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var b=o,S=u,M=c,q=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:Pl(b,S,M,q,g),Vh(8,S);break;case 23:break;case 22:var ce=S.stateNode;S.memoizedState!==null?ce._visibility&4?Pl(b,S,M,q,g):Uh(b,S):(ce._visibility|=4,Pl(b,S,M,q,g)),g&&Z&2048&&ry(S.alternate,S);break;case 24:Pl(b,S,M,q,g),g&&Z&2048&&iy(S.alternate,S);break;default:Pl(b,S,M,q,g)}u=u.sibling}}function Uh(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var c=o,d=u,g=d.flags;switch(d.tag){case 22:Uh(c,d),g&2048&&ry(d.alternate,d);break;case 24:Uh(c,d),g&2048&&iy(d.alternate,d);break;default:Uh(c,d)}u=u.sibling}}var zh=8192;function Bl(o){if(o.subtreeFlags&zh)for(o=o.child;o!==null;)t2(o),o=o.sibling}function t2(o){switch(o.tag){case 26:Bl(o),o.flags&zh&&o.memoizedState!==null&&AN(bi,o.memoizedState,o.memoizedProps);break;case 5:Bl(o);break;case 3:case 4:var u=bi;bi=Xp(o.stateNode.containerInfo),Bl(o),bi=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=zh,zh=16777216,Bl(o),zh=u):Bl(o));break;default:Bl(o)}}function n2(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function jh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];vn=d,i2(d,o)}n2(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)r2(o),o=o.sibling}function r2(o){switch(o.tag){case 0:case 11:case 15:jh(o),o.flags&2048&&Fo(9,o,o.return);break;case 3:jh(o);break;case 12:jh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&4&&(o.return===null||o.return.tag!==13)?(u._visibility&=-5,Bp(o)):jh(o);break;default:jh(o)}}function Bp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];vn=d,i2(d,o)}n2(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Fo(8,u,u.return),Bp(u);break;case 22:c=u.stateNode,c._visibility&4&&(c._visibility&=-5,Bp(u));break;default:Bp(u)}o=o.sibling}}function i2(o,u){for(;vn!==null;){var c=vn;switch(c.tag){case 0:case 11:case 15:Fo(8,c,u);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Rh(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,vn=d;else e:for(c=o;vn!==null;){d=vn;var g=d.sibling,b=d.return;if(Qk(d),d===c){vn=null;break e}if(g!==null){g.return=b,vn=g;break e}vn=b}}}function UD(o,u,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(o,u,c,d){return new UD(o,u,c,d)}function sy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function zo(o,u){var c=o.alternate;return c===null?(c=Jr(o.tag,u,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=u,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&31457280,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,u=o.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function s2(o,u){o.flags&=31457282;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,u=c.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Fp(o,u,c,d,g,b){var S=0;if(d=o,typeof o=="function")sy(o)&&(S=1);else if(typeof o=="string")S=TN(o,c,jt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case h:return yu(c.children,g,b,u);case f:S=8,g|=24;break;case p:return o=Jr(12,c,u,g|2),o.elementType=p,o.lanes=b,o;case R:return o=Jr(13,c,u,g),o.elementType=R,o.lanes=b,o;case D:return o=Jr(19,c,u,g),o.elementType=D,o.lanes=b,o;case G:return o2(c,g,b,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case y:case v:S=10;break e;case _:S=9;break e;case w:S=11;break e;case V:S=14;break e;case W:S=16,d=null;break e}S=29,c=Error(r(130,o===null?"null":typeof o,"")),d=null}return u=Jr(S,c,u,g),u.elementType=o,u.type=d,u.lanes=b,u}function yu(o,u,c,d){return o=Jr(7,o,d,u),o.lanes=c,o}function o2(o,u,c,d){o=Jr(22,o,d,u),o.elementType=G,o.lanes=c;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var b=g._current;if(b===null)throw Error(r(456));if((g._pendingVisibility&2)===0){var S=Ro(b,2);S!==null&&(g._pendingVisibility|=2,er(S,b,2))}},attach:function(){var b=g._current;if(b===null)throw Error(r(456));if((g._pendingVisibility&2)!==0){var S=Ro(b,2);S!==null&&(g._pendingVisibility&=-3,er(S,b,2))}}};return o.stateNode=g,o}function oy(o,u,c){return o=Jr(6,o,null,u),o.lanes=c,o}function ay(o,u,c){return u=Jr(4,o.children!==null?o.children:[],o.key,u),u.lanes=c,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function js(o){o.flags|=4}function a2(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!$2(u)){if(u=Yr.current,u!==null&&((ht&4194176)===ht?Ki!==null:(ht&62914560)!==ht&&(ht&536870912)===0||u!==Ki))throw Sh=f1,kw;o.flags|=8192}}function Vp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?yo():536870912,o.lanes|=u,Vl|=u)}function qh(o,u){if(!gt)switch(o.tailMode){case"hidden":u=o.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Bt(o){var u=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(u)for(var g=o.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&31457280,d|=g.flags&31457280,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=d,o.childLanes=c,u}function zD(o,u,c){var d=u.pendingProps;switch(c1(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(u),null;case 1:return Bt(u),null;case 3:return c=u.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Fs(hn),ur(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Eh(u)?js(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,yi!==null&&(my(yi),yi=null))),Bt(u),null;case 26:return c=u.memoizedState,o===null?(js(u),c!==null?(Bt(u),a2(u,c)):(Bt(u),u.flags&=-16777217)):c?c!==o.memoizedState?(js(u),Bt(u),a2(u,c)):(Bt(u),u.flags&=-16777217):(o.memoizedProps!==d&&js(u),Bt(u),u.flags&=-16777217),null;case 27:Li(u),c=Qt.current;var g=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==d&&js(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Bt(u),null}o=jt.current,Eh(u)?Ew(u):(o=B2(g,d,c),u.stateNode=o,js(u))}return Bt(u),null;case 5:if(Li(u),c=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==d&&js(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Bt(u),null}if(o=jt.current,Eh(u))Ew(u);else{switch(g=Yp(Qt.current),o){case 1:o=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=g.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?o.multiple=!0:d.size&&(o.size=d.size);break;default:o=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}o[gn]=u,o[an]=d;e:for(g=u.child;g!==null;){if(g.tag===5||g.tag===6)o.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break e;for(;g.sibling===null;){if(g.return===null||g.return===u)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}u.stateNode=o;e:switch(Rn(o,c,d),c){case"button":case"input":case"select":case"textarea":o=!!d.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&js(u)}}return Bt(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==d&&js(u);else{if(typeof d!="string"&&u.stateNode===null)throw Error(r(166));if(o=Qt.current,Eh(u)){if(o=u.stateNode,c=u.memoizedProps,d=null,g=Jn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}o[gn]=u,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||D2(o.nodeValue,c)),o||au(u)}else o=Yp(o).createTextNode(d),o[gn]=u,u.stateNode=o}return Bt(u),null;case 13:if(d=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(g=Eh(u),d!==null&&d.dehydrated!==null){if(o===null){if(!g)throw Error(r(318));if(g=u.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[gn]=u}else wh(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Bt(u),g=!1}else yi!==null&&(my(yi),yi=null),g=!0;if(!g)return u.flags&256?(Os(u),u):(Os(u),null)}if(Os(u),(u.flags&128)!==0)return u.lanes=c,u;if(c=d!==null,o=o!==null&&o.memoizedState!==null,c){d=u.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)}return c!==o&&c&&(u.child.flags|=8192),Vp(u,u.updateQueue),Bt(u),null;case 4:return ur(),o===null&&Sy(u.stateNode.containerInfo),Bt(u),null;case 10:return Fs(u.type),Bt(u),null;case 19:if(Je(cn),g=u.memoizedState,g===null)return Bt(u),null;if(d=(u.flags&128)!==0,b=g.rendering,b===null)if(d)qh(g,!1);else{if($t!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(b=Ep(o),b!==null){for(u.flags|=128,qh(g,!1),o=b.updateQueue,u.updateQueue=o,Vp(u,o),u.subtreeFlags=0,o=c,c=u.child;c!==null;)s2(c,o),c=c.sibling;return Xe(cn,cn.current&1|2),u.child}o=o.sibling}g.tail!==null&&mn()>Up&&(u.flags|=128,d=!0,qh(g,!1),u.lanes=4194304)}else{if(!d)if(o=Ep(b),o!==null){if(u.flags|=128,d=!0,o=o.updateQueue,u.updateQueue=o,Vp(u,o),qh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!gt)return Bt(u),null}else 2*mn()-g.renderingStartTime>Up&&c!==536870912&&(u.flags|=128,d=!0,qh(g,!1),u.lanes=4194304);g.isBackwards?(b.sibling=u.child,u.child=b):(o=g.last,o!==null?o.sibling=b:u.child=b,g.last=b)}return g.tail!==null?(u=g.tail,g.rendering=u,g.tail=u.sibling,g.renderingStartTime=mn(),u.sibling=null,o=cn.current,Xe(cn,d?o&1|2:o&1),u):(Bt(u),null);case 22:case 23:return Os(u),p1(),d=u.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(u.flags|=8192):d&&(u.flags|=8192),d?(c&536870912)!==0&&(u.flags&128)===0&&(Bt(u),u.subtreeFlags&6&&(u.flags|=8192)):Bt(u),c=u.updateQueue,c!==null&&Vp(u,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==c&&(u.flags|=2048),o!==null&&Je(lu),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),u.memoizedState.cache!==c&&(u.flags|=2048),Fs(hn),Bt(u),null;case 25:return null}throw Error(r(156,u.tag))}function jD(o,u){switch(c1(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Fs(hn),ur(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Li(u),null;case 13:if(Os(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));wh()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Je(cn),null;case 4:return ur(),null;case 10:return Fs(u.type),null;case 22:case 23:return Os(u),p1(),o!==null&&Je(lu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Fs(hn),null;case 25:return null;default:return null}}function u2(o,u){switch(c1(u),u.tag){case 3:Fs(hn),ur();break;case 26:case 27:case 5:Li(u);break;case 4:ur();break;case 13:Os(u);break;case 19:Je(cn);break;case 10:Fs(u.type);break;case 22:case 23:Os(u),p1(),o!==null&&Je(lu);break;case 24:Fs(hn)}}var qD={getCacheForType:function(o){var u=Un(hn),c=u.data.get(o);return c===void 0&&(c=o(),u.data.set(o,c)),c}},HD=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Rt=null,rt=null,ht=0,It=0,Rr=null,qs=!1,Fl=!1,uy=!1,Hs=0,$t=0,jo=0,bu=0,ly=0,ei=0,Vl=0,Hh=null,Qi=null,cy=!1,hy=0,Up=1/0,zp=null,qo=null,jp=!1,_u=null,$h=0,fy=0,dy=null,Gh=0,py=null;function Ir(){if((Ft&2)!==0&&ht!==0)return ht&-ht;if(N.T!==null){var o=Il;return o!==0?o:Ey()}return Wd()}function l2(){ei===0&&(ei=(ht&536870912)===0||gt?ih():536870912);var o=Yr.current;return o!==null&&(o.flags|=32),ei}function er(o,u,c){(o===Rt&&It===2||o.cancelPendingCommit!==null)&&(Ul(o,0),$s(o,ht,ei,!1)),Yt(o,c),((Ft&2)===0||o!==Rt)&&(o===Rt&&((Ft&2)===0&&(bu|=c),$t===4&&$s(o,ht,ei,!1)),Yi(o))}function c2(o,u,c){if((Ft&6)!==0)throw Error(r(327));var d=!c&&(u&60)===0&&(u&o.expiredLanes)===0||go(o,u),g=d?KD(o,u):by(o,u,!0),b=d;do{if(g===0){Fl&&!d&&$s(o,u,0,!1);break}else if(g===6)$s(o,u,0,!qs);else{if(c=o.current.alternate,b&&!$D(c)){g=by(o,u,!1),b=!1;continue}if(g===2){if(b=u,o.errorRecoveryDisabledLanes&b)var S=0;else S=o.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){u=S;e:{var M=o;g=Hh;var q=M.current.memoizedState.isDehydrated;if(q&&(Ul(M,S).flags|=256),S=by(M,S,!1),S!==2){if(uy&&!q){M.errorRecoveryDisabledLanes|=b,bu|=b,g=4;break e}b=Qi,Qi=g,b!==null&&my(b)}g=S}if(b=!1,g!==2)continue}}if(g===1){Ul(o,0),$s(o,u,0,!0);break}e:{switch(d=o,g){case 0:case 1:throw Error(r(345));case 4:if((u&4194176)===u){$s(d,u,ei,!qs);break e}break;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(d.finishedWork=c,d.finishedLanes=u,(u&62914560)===u&&(b=hy+300-mn(),10<b)){if($s(d,u,ei,!qs),Ur(d,0)!==0)break e;d.timeoutHandle=O2(h2.bind(null,d,c,Qi,zp,cy,u,ei,bu,Vl,qs,2,-0,0),b);break e}h2(d,c,Qi,zp,cy,u,ei,bu,Vl,qs,0,-0,0)}}break}while(!0);Yi(o)}function my(o){Qi===null?Qi=o:Qi.push.apply(Qi,o)}function h2(o,u,c,d,g,b,S,M,q,Z,ce,me,ie){var le=u.subtreeFlags;if((le&8192||(le&16785408)===16785408)&&(Zh={stylesheets:null,count:0,unsuspend:SN},t2(u),u=CN(),u!==null)){o.cancelPendingCommit=u(b2.bind(null,o,c,d,g,S,M,q,1,me,ie)),$s(o,b,S,!Z);return}b2(o,c,d,g,S,M,q,ce,me,ie)}function $D(o){for(var u=o;;){var c=u.tag;if((c===0||c===11||c===15)&&u.flags&16384&&(c=u.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!Sr(b(),g))return!1}catch{return!1}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function $s(o,u,c,d){u&=~ly,u&=~bu,o.suspendedLanes|=u,o.pingedLanes&=~u,d&&(o.warmLanes|=u),d=o.expirationTimes;for(var g=u;0<g;){var b=31-He(g),S=1<<b;d[b]=-1,g&=~S}c!==0&&bo(o,c,u)}function qp(){return(Ft&6)===0?(Kh(0),!1):!0}function gy(){if(rt!==null){if(It===0)var o=rt.return;else o=rt,Bs=pu=null,E1(o),Cl=null,Ah=0,o=rt;for(;o!==null;)u2(o.alternate,o),o=o.return;rt=null}}function Ul(o,u){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,cN(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),gy(),Rt=o,rt=c=zo(o.current,null),ht=u,It=0,Rr=null,qs=!1,Fl=go(o,u),uy=!1,Vl=ei=ly=bu=jo=$t=0,Qi=Hh=null,cy=!1,(u&8)!==0&&(u|=u&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=u;0<d;){var g=31-He(d),b=1<<g;u|=o[g],d&=~b}return Hs=u,dp(),c}function f2(o,u){et=null,N.H=Wi,u===Th?(u=Aw(),It=3):u===kw?(u=Aw(),It=4):It=u===Tk?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Rr=u,rt===null&&($t=1,Mp(o,Kr(u,o.current)))}function d2(){var o=N.H;return N.H=Wi,o===null?Wi:o}function p2(){var o=N.A;return N.A=qD,o}function yy(){$t=4,qs||(ht&4194176)!==ht&&Yr.current!==null||(Fl=!0),(jo&134217727)===0&&(bu&134217727)===0||Rt===null||$s(Rt,ht,ei,!1)}function by(o,u,c){var d=Ft;Ft|=2;var g=d2(),b=p2();(Rt!==o||ht!==u)&&(zp=null,Ul(o,u)),u=!1;var S=$t;e:do try{if(It!==0&&rt!==null){var M=rt,q=Rr;switch(It){case 8:gy(),S=6;break e;case 3:case 2:case 6:Yr.current===null&&(u=!0);var Z=It;if(It=0,Rr=null,zl(o,M,q,Z),c&&Fl){S=0;break e}break;default:Z=It,It=0,Rr=null,zl(o,M,q,Z)}}GD(),S=$t;break}catch(ce){f2(o,ce)}while(!0);return u&&o.shellSuspendCounter++,Bs=pu=null,Ft=d,N.H=g,N.A=b,rt===null&&(Rt=null,ht=0,dp()),S}function GD(){for(;rt!==null;)m2(rt)}function KD(o,u){var c=Ft;Ft|=2;var d=d2(),g=p2();Rt!==o||ht!==u?(zp=null,Up=mn()+500,Ul(o,u)):Fl=go(o,u);e:do try{if(It!==0&&rt!==null){u=rt;var b=Rr;t:switch(It){case 1:It=0,Rr=null,zl(o,u,b,1);break;case 2:if(Tw(b)){It=0,Rr=null,g2(u);break}u=function(){It===2&&Rt===o&&(It=7),Yi(o)},b.then(u,u);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:Tw(b)?(It=0,Rr=null,g2(u)):(It=0,Rr=null,zl(o,u,b,7));break;case 5:var S=null;switch(rt.tag){case 26:S=rt.memoizedState;case 5:case 27:var M=rt;if(!S||$2(S)){It=0,Rr=null;var q=M.sibling;if(q!==null)rt=q;else{var Z=M.return;Z!==null?(rt=Z,Hp(Z)):rt=null}break t}}It=0,Rr=null,zl(o,u,b,5);break;case 6:It=0,Rr=null,zl(o,u,b,6);break;case 8:gy(),$t=6;break e;default:throw Error(r(462))}}WD();break}catch(ce){f2(o,ce)}while(!0);return Bs=pu=null,N.H=d,N.A=g,Ft=c,rt!==null?0:(Rt=null,ht=0,dp(),$t)}function WD(){for(;rt!==null&&!Vn();)m2(rt)}function m2(o){var u=Bk(o.alternate,o,Hs);o.memoizedProps=o.pendingProps,u===null?Hp(o):rt=u}function g2(o){var u=o,c=u.alternate;switch(u.tag){case 15:case 0:u=Dk(c,u,u.pendingProps,u.type,void 0,ht);break;case 11:u=Dk(c,u,u.pendingProps,u.type.render,u.ref,ht);break;case 5:E1(u);default:u2(c,u),u=rt=s2(u,Hs),u=Bk(c,u,Hs)}o.memoizedProps=o.pendingProps,u===null?Hp(o):rt=u}function zl(o,u,c,d){Bs=pu=null,E1(u),Cl=null,Ah=0;var g=u.return;try{if(PD(o,g,u,c,ht)){$t=1,Mp(o,Kr(c,o.current)),rt=null;return}}catch(b){if(g!==null)throw rt=g,b;$t=1,Mp(o,Kr(c,o.current)),rt=null;return}u.flags&32768?(gt||d===1?o=!0:Fl||(ht&536870912)!==0?o=!1:(qs=o=!0,(d===2||d===3||d===6)&&(d=Yr.current,d!==null&&d.tag===13&&(d.flags|=16384))),y2(u,o)):Hp(u)}function Hp(o){var u=o;do{if((u.flags&32768)!==0){y2(u,qs);return}o=u.return;var c=zD(u.alternate,u,Hs);if(c!==null){rt=c;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=o}while(u!==null);$t===0&&($t=5)}function y2(o,u){do{var c=jD(o.alternate,o);if(c!==null){c.flags&=32767,rt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!u&&(o=o.sibling,o!==null)){rt=o;return}rt=o=c}while(o!==null);$t=6,rt=null}function b2(o,u,c,d,g,b,S,M,q,Z){var ce=N.T,me=_e.p;try{_e.p=2,N.T=null,QD(o,u,c,d,me,g,b,S,M,q,Z)}finally{N.T=ce,_e.p=me}}function QD(o,u,c,d,g,b,S,M){do jl();while(_u!==null);if((Ft&6)!==0)throw Error(r(327));var q=o.finishedWork;if(d=o.finishedLanes,q===null)return null;if(o.finishedWork=null,o.finishedLanes=0,q===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var Z=q.lanes|q.childLanes;if(Z|=a1,Gd(o,d,Z,b,S,M),o===Rt&&(rt=Rt=null,ht=0),(q.subtreeFlags&10256)===0&&(q.flags&10256)===0||jp||(jp=!0,fy=Z,dy=c,JD(x,function(){return jl(),null})),c=(q.flags&15990)!==0,(q.subtreeFlags&15990)!==0||c?(c=N.T,N.T=null,b=_e.p,_e.p=2,S=Ft,Ft|=4,FD(o,q),Zk(q,o),_D(Iy,o.containerInfo),n0=!!Ry,Iy=Ry=null,o.current=q,Wk(o,q.alternate,q),di(),Ft=S,_e.p=b,N.T=c):o.current=q,jp?(jp=!1,_u=o,$h=d):_2(o,Z),Z=o.pendingLanes,Z===0&&(qo=null),ut(q.stateNode),Yi(o),u!==null)for(g=o.onRecoverableError,q=0;q<u.length;q++)Z=u[q],g(Z.value,{componentStack:Z.stack});return($h&3)!==0&&jl(),Z=o.pendingLanes,(d&4194218)!==0&&(Z&42)!==0?o===py?Gh++:(Gh=0,py=o):Gh=0,Kh(0),null}function _2(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Rh(u)))}function jl(){if(_u!==null){var o=_u,u=fy;fy=0;var c=Kd($h),d=N.T,g=_e.p;try{if(_e.p=32>c?32:c,N.T=null,_u===null)var b=!1;else{c=dy,dy=null;var S=_u,M=$h;if(_u=null,$h=0,(Ft&6)!==0)throw Error(r(331));var q=Ft;if(Ft|=4,r2(S.current),e2(S,S.current,M,c),Ft=q,Kh(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(ae,S)}catch{}b=!0}return b}finally{_e.p=g,N.T=d,_2(o,u)}}return!1}function v2(o,u,c){u=Kr(c,u),u=P1(o.stateNode,u,2),o=Bo(o,u,2),o!==null&&(Yt(o,2),Yi(o))}function Ct(o,u,c){if(o.tag===3)v2(o,o,c);else for(;u!==null;){if(u.tag===3){v2(u,o,c);break}else if(u.tag===1){var d=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(qo===null||!qo.has(d))){o=Kr(c,o),c=wk(2),d=Bo(u,c,2),d!==null&&(kk(c,d,u,o),Yt(d,2),Yi(d));break}}u=u.return}}function _y(o,u,c){var d=o.pingCache;if(d===null){d=o.pingCache=new HD;var g=new Set;d.set(u,g)}else g=d.get(u),g===void 0&&(g=new Set,d.set(u,g));g.has(c)||(uy=!0,g.add(c),o=YD.bind(null,o,u,c),u.then(o,o))}function YD(o,u,c){var d=o.pingCache;d!==null&&d.delete(u),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Rt===o&&(ht&c)===c&&($t===4||$t===3&&(ht&62914560)===ht&&300>mn()-hy?(Ft&2)===0&&Ul(o,0):ly|=c,Vl===ht&&(Vl=0)),Yi(o)}function x2(o,u){u===0&&(u=yo()),o=Ro(o,u),o!==null&&(Yt(o,u),Yi(o))}function XD(o){var u=o.memoizedState,c=0;u!==null&&(c=u.retryLane),x2(o,c)}function ZD(o,u){var c=0;switch(o.tag){case 13:var d=o.stateNode,g=o.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(u),x2(o,c)}function JD(o,u){return Er(o,u)}var $p=null,ql=null,vy=!1,Gp=!1,xy=!1,vu=0;function Yi(o){o!==ql&&o.next===null&&(ql===null?$p=ql=o:ql=ql.next=o),Gp=!0,vy||(vy=!0,tN(eN))}function Kh(o,u){if(!xy&&Gp){xy=!0;do for(var c=!1,d=$p;d!==null;){if(o!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var S=d.suspendedLanes,M=d.pingedLanes;b=(1<<31-He(42|o)+1)-1,b&=g&~(S&~M),b=b&201326677?b&201326677|1:b?b|2:0}b!==0&&(c=!0,k2(d,b))}else b=ht,b=Ur(d,d===Rt?b:0),(b&3)===0||go(d,b)||(c=!0,k2(d,b));d=d.next}while(c);xy=!1}}function eN(){Gp=vy=!1;var o=0;vu!==0&&(lN()&&(o=vu),vu=0);for(var u=mn(),c=null,d=$p;d!==null;){var g=d.next,b=E2(d,u);b===0?(d.next=null,c===null?$p=g:c.next=g,g===null&&(ql=c)):(c=d,(o!==0||(b&3)!==0)&&(Gp=!0)),d=g}Kh(o)}function E2(o,u){for(var c=o.suspendedLanes,d=o.pingedLanes,g=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var S=31-He(b),M=1<<S,q=g[S];q===-1?((M&c)===0||(M&d)!==0)&&(g[S]=al(M,u)):q<=u&&(o.expiredLanes|=M),b&=~M}if(u=Rt,c=ht,c=Ur(o,o===u?c:0),d=o.callbackNode,c===0||o===u&&It===2||o.cancelPendingCommit!==null)return d!==null&&d!==null&&wr(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||go(o,c)){if(u=c&-c,u===o.callbackPriority)return u;switch(d!==null&&wr(d),Kd(c)){case 2:case 8:c=A;break;case 32:c=x;break;case 268435456:c=L;break;default:c=x}return d=w2.bind(null,o),c=Er(c,d),o.callbackPriority=u,o.callbackNode=c,u}return d!==null&&d!==null&&wr(d),o.callbackPriority=2,o.callbackNode=null,2}function w2(o,u){var c=o.callbackNode;if(jl()&&o.callbackNode!==c)return null;var d=ht;return d=Ur(o,o===Rt?d:0),d===0?null:(c2(o,d,u),E2(o,mn()),o.callbackNode!=null&&o.callbackNode===c?w2.bind(null,o):null)}function k2(o,u){if(jl())return null;c2(o,u,!0)}function tN(o){hN(function(){(Ft&6)!==0?Er(se,o):o()})}function Ey(){return vu===0&&(vu=ih()),vu}function T2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Vi(""+o)}function S2(o,u){var c=u.ownerDocument.createElement("input");return c.name=u.name,c.value=u.value,o.id&&c.setAttribute("form",o.id),u.parentNode.insertBefore(c,u),o=new FormData(o),c.parentNode.removeChild(c),o}function nN(o,u,c,d,g){if(u==="submit"&&c&&c.stateNode===g){var b=T2((g[an]||null).action),S=d.submitter;S&&(u=(u=S[an]||null)?T2(u.formAction):S.getAttribute("formAction"),u!==null&&(b=u,S=null));var M=new pl("action","action",null,d,g);o.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(vu!==0){var q=S?S2(g,S):new FormData(g);D1(c,{pending:!0,data:q,method:g.method,action:b},null,q)}}else typeof b=="function"&&(M.preventDefault(),q=S?S2(g,S):new FormData(g),D1(c,{pending:!0,data:q,method:g.method,action:b},b,q))},currentTarget:g}]})}}for(var wy=0;wy<bw.length;wy++){var ky=bw[wy],rN=ky.toLowerCase(),iN=ky[0].toUpperCase()+ky.slice(1);gi(rN,"on"+iN)}gi(dw,"onAnimationEnd"),gi(pw,"onAnimationIteration"),gi(mw,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(xD,"onTransitionRun"),gi(ED,"onTransitionStart"),gi(wD,"onTransitionCancel"),gi(gw,"onTransitionEnd"),lr("onMouseEnter",["mouseout","mouseover"]),lr("onMouseLeave",["mouseout","mouseover"]),lr("onPointerEnter",["pointerout","pointerover"]),lr("onPointerLeave",["pointerout","pointerover"]),kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kr("onBeforeInput",["compositionend","keypress","textInput","paste"]),kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wh));function A2(o,u){u=(u&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],g=d.event;d=d.listeners;e:{var b=void 0;if(u)for(var S=d.length-1;0<=S;S--){var M=d[S],q=M.instance,Z=M.currentTarget;if(M=M.listener,q!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=Z;try{b(g)}catch(ce){Np(ce)}g.currentTarget=null,b=q}else for(S=0;S<d.length;S++){if(M=d[S],q=M.instance,Z=M.currentTarget,M=M.listener,q!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=Z;try{b(g)}catch(ce){Np(ce)}g.currentTarget=null,b=q}}}}function ot(o,u){var c=u[$a];c===void 0&&(c=u[$a]=new Set);var d=o+"__bubble";c.has(d)||(C2(u,o,2,!1),c.add(d))}function Ty(o,u,c){var d=0;u&&(d|=4),C2(c,o,d,u)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function Sy(o){if(!o[Kp]){o[Kp]=!0,oh.forEach(function(c){c!=="selectionchange"&&(sN.has(c)||Ty(c,!1,o),Ty(c,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Kp]||(u[Kp]=!0,Ty("selectionchange",!1,u))}}function C2(o,u,c,d){switch(X2(u)){case 2:var g=DN;break;case 8:g=NN;break;default:g=Vy}c=g.bind(null,u,c,o),g=void 0,!Hr||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(g=!0),d?g!==void 0?o.addEventListener(u,c,{capture:!0,passive:g}):o.addEventListener(u,c,!0):g!==void 0?o.addEventListener(u,c,{passive:g}):o.addEventListener(u,c,!1)}function Ay(o,u,c,d,g){var b=d;if((u&1)===0&&(u&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var M=d.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=d.return;S!==null;){var q=S.tag;if((q===3||q===4)&&(q=S.stateNode.containerInfo,q===g||q.nodeType===8&&q.parentNode===g))return;S=S.return}for(;M!==null;){if(S=mi(M),S===null)return;if(q=S.tag,q===5||q===6||q===26||q===27){d=b=S;continue e}M=M.parentNode}}d=d.return}Zd(function(){var Z=b,ce=dl(c),me=[];e:{var ie=yw.get(o);if(ie!==void 0){var le=pl,Ie=o;switch(o){case"keypress":if(zi(c)===0)break e;case"keydown":case"keyup":le=vl;break;case"focusin":Ie="focus",le=yl;break;case"focusout":Ie="blur",le=yl;break;case"beforeblur":case"afterblur":le=yl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=$r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=op;break;case dw:case pw:case mw:le=bl;break;case gw:le=up;break;case"scroll":case"scrollend":le=Jd;break;case"wheel":le=xl;break;case"copy":case"cut":case"paste":le=_l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=bh;break;case"toggle":case"beforetoggle":le=cp}var We=(u&4)!==0,Gt=!We&&(o==="scroll"||o==="scrollend"),J=We?ie!==null?ie+"Capture":null:ie;We=[];for(var X=Z,ne;X!==null;){var fe=X;if(ne=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ne===null||J===null||(fe=Ya(X,J),fe!=null&&We.push(Qh(X,fe,ne))),Gt)break;X=X.return}0<We.length&&(ie=new le(ie,Ie,null,c,ce),me.push({event:ie,listeners:We}))}}if((u&7)===0){e:{if(ie=o==="mouseover"||o==="pointerover",le=o==="mouseout"||o==="pointerout",ie&&c!==qr&&(Ie=c.relatedTarget||c.fromElement)&&(mi(Ie)||Ie[ws]))break e;if((le||ie)&&(ie=ce.window===ce?ce:(ie=ce.ownerDocument)?ie.defaultView||ie.parentWindow:window,le?(Ie=c.relatedTarget||c.toElement,le=Z,Ie=Ie?mi(Ie):null,Ie!==null&&(Gt=ke(Ie),We=Ie.tag,Ie!==Gt||We!==5&&We!==27&&We!==6)&&(Ie=null)):(le=null,Ie=Z),le!==Ie)){if(We=$r,fe="onMouseLeave",J="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(We=bh,fe="onPointerLeave",J="onPointerEnter",X="pointer"),Gt=le==null?ie:Eo(le),ne=Ie==null?ie:Eo(Ie),ie=new We(fe,X+"leave",le,c,ce),ie.target=Gt,ie.relatedTarget=ne,fe=null,mi(ce)===Z&&(We=new We(J,X+"enter",Ie,c,ce),We.target=ne,We.relatedTarget=Gt,fe=We),Gt=fe,le&&Ie)t:{for(We=le,J=Ie,X=0,ne=We;ne;ne=Hl(ne))X++;for(ne=0,fe=J;fe;fe=Hl(fe))ne++;for(;0<X-ne;)We=Hl(We),X--;for(;0<ne-X;)J=Hl(J),ne--;for(;X--;){if(We===J||J!==null&&We===J.alternate)break t;We=Hl(We),J=Hl(J)}We=null}else We=null;le!==null&&R2(me,ie,le,We,!1),Ie!==null&&Gt!==null&&R2(me,Gt,Ie,We,!0)}}e:{if(ie=Z?Eo(Z):window,le=ie.nodeName&&ie.nodeName.toLowerCase(),le==="select"||le==="input"&&ie.type==="file")var Ce=nw;else if(ln(ie))if(rw)Ce=yD;else{Ce=mD;var tt=pD}else le=ie.nodeName,!le||le.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?Z&&hh(Z.elementType)&&(Ce=nw):Ce=gD;if(Ce&&(Ce=Ce(o,Z))){Ds(me,Ce,c,ce);break e}tt&&tt(o,ie,Z),o==="focusout"&&Z&&ie.type==="number"&&Z.memoizedProps.value!=null&&fl(ie,"number",ie.value)}switch(tt=Z?Eo(Z):window,o){case"focusin":(ln(tt)||tt.contentEditable==="true")&&(El=tt,i1=Z,xh=null);break;case"focusout":xh=i1=El=null;break;case"mousedown":s1=!0;break;case"contextmenu":case"mouseup":case"dragend":s1=!1,hw(me,c,ce);break;case"selectionchange":if(vD)break;case"keydown":case"keyup":hw(me,c,ce)}var Le;if(Hi)e:{switch(o){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else lt?oe(o,c)&&(Fe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Fe="onCompositionStart");Fe&&(T&&c.locale!=="ko"&&(lt||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&lt&&(Le=dh()):(Ui=ce,Co="value"in Ui?Ui.value:Ui.textContent,lt=!0)),tt=Wp(Z,Fe),0<tt.length&&(Fe=new gh(Fe,o,null,c,ce),me.push({event:Fe,listeners:tt}),Le?Fe.data=Le:(Le=ve(c),Le!==null&&(Fe.data=Le)))),(Le=E?un(o,c):ct(o,c))&&(Fe=Wp(Z,"onBeforeInput"),0<Fe.length&&(tt=new gh("onBeforeInput","beforeinput",null,c,ce),me.push({event:tt,listeners:Fe}),tt.data=Le)),nN(me,o,Z,c,ce)}A2(me,u)})}function Qh(o,u,c){return{instance:o,listener:u,currentTarget:c}}function Wp(o,u){for(var c=u+"Capture",d=[];o!==null;){var g=o,b=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Ya(o,c),g!=null&&d.unshift(Qh(o,g,b)),g=Ya(o,u),g!=null&&d.push(Qh(o,g,b))),o=o.return}return d}function Hl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function R2(o,u,c,d,g){for(var b=u._reactName,S=[];c!==null&&c!==d;){var M=c,q=M.alternate,Z=M.stateNode;if(M=M.tag,q!==null&&q===d)break;M!==5&&M!==26&&M!==27||Z===null||(q=Z,g?(Z=Ya(c,b),Z!=null&&S.unshift(Qh(c,Z,q))):g||(Z=Ya(c,b),Z!=null&&S.push(Qh(c,Z,q)))),c=c.return}S.length!==0&&o.push({event:u,listeners:S})}var oN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function I2(o){return(typeof o=="string"?o:""+o).replace(oN,`
`).replace(aN,"")}function D2(o,u){return u=I2(u),I2(o)===u}function Qp(){}function St(o,u,c,d,g,b){switch(c){case"children":typeof d=="string"?u==="body"||u==="textarea"&&d===""||jr(o,d):(typeof d=="number"||typeof d=="bigint")&&u!=="body"&&jr(o,""+d);break;case"className":To(o,"class",d);break;case"tabIndex":To(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":To(o,c,d);break;case"style":Xd(o,d,b);break;case"data":if(u!=="object"){To(o,"data",d);break}case"src":case"href":if(d===""&&(u!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Vi(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(u!=="input"&&St(o,u,"name",g.name,g,null),St(o,u,"formEncType",g.formEncType,g,null),St(o,u,"formMethod",g.formMethod,g,null),St(o,u,"formTarget",g.formTarget,g,null)):(St(o,u,"encType",g.encType,g,null),St(o,u,"method",g.method,g,null),St(o,u,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Vi(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=Qp);break;case"onScroll":d!=null&&ot("scroll",o);break;case"onScrollEnd":d!=null&&ot("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Vi(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":ot("beforetoggle",o),ot("toggle",o),ko(o,"popover",d);break;case"xlinkActuate":zr(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":zr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":zr(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":zr(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":zr(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":zr(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":zr(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":zr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":zr(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ko(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xg.get(c)||c,ko(o,c,d))}}function Cy(o,u,c,d,g,b){switch(c){case"style":Xd(o,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof d=="string"?jr(o,d):(typeof d=="number"||typeof d=="bigint")&&jr(o,""+d);break;case"onScroll":d!=null&&ot("scroll",o);break;case"onScrollEnd":d!=null&&ot("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Qp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),u=c.slice(2,g?c.length-7:void 0),b=o[an]||null,b=b!=null?b[c]:null,typeof b=="function"&&o.removeEventListener(u,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(u,d,g);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):ko(o,c,d)}}}function Rn(o,u,c){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",o),ot("load",o);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var S=c[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:St(o,u,b,S,c,null)}}g&&St(o,u,"srcSet",c.srcSet,c,null),d&&St(o,u,"src",c.src,c,null);return;case"input":ot("invalid",o);var M=b=S=g=null,q=null,Z=null;for(d in c)if(c.hasOwnProperty(d)){var ce=c[d];if(ce!=null)switch(d){case"name":g=ce;break;case"type":S=ce;break;case"checked":q=ce;break;case"defaultChecked":Z=ce;break;case"value":b=ce;break;case"defaultValue":M=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:St(o,u,d,ce,c,null)}}Wa(o,b,M,q,Z,S,g,!1),Ka(o);return;case"select":ot("invalid",o),d=S=b=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":b=M;break;case"defaultValue":S=M;break;case"multiple":d=M;default:St(o,u,g,M,c,null)}u=b,c=S,o.multiple=!!d,u!=null?mt(o,!!d,u,!1):c!=null&&mt(o,!!d,c,!0);return;case"textarea":ot("invalid",o),b=g=d=null;for(S in c)if(c.hasOwnProperty(S)&&(M=c[S],M!=null))switch(S){case"value":d=M;break;case"defaultValue":g=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:St(o,u,S,M,c,null)}Ao(o,d,g,b),Ka(o);return;case"option":for(q in c)if(c.hasOwnProperty(q)&&(d=c[q],d!=null))switch(q){case"selected":o.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:St(o,u,q,d,c,null)}return;case"dialog":ot("cancel",o),ot("close",o);break;case"iframe":case"object":ot("load",o);break;case"video":case"audio":for(d=0;d<Wh.length;d++)ot(Wh[d],o);break;case"image":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"embed":case"source":case"link":ot("error",o),ot("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in c)if(c.hasOwnProperty(Z)&&(d=c[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:St(o,u,Z,d,c,null)}return;default:if(hh(u)){for(ce in c)c.hasOwnProperty(ce)&&(d=c[ce],d!==void 0&&Cy(o,u,ce,d,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(d=c[M],d!=null&&St(o,u,M,d,c,null))}function uN(o,u,c,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,S=null,M=null,q=null,Z=null,ce=null;for(le in c){var me=c[le];if(c.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":q=me;default:d.hasOwnProperty(le)||St(o,u,le,null,d,me)}}for(var ie in d){var le=d[ie];if(me=c[ie],d.hasOwnProperty(ie)&&(le!=null||me!=null))switch(ie){case"type":b=le;break;case"name":g=le;break;case"checked":Z=le;break;case"defaultChecked":ce=le;break;case"value":S=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,u));break;default:le!==me&&St(o,u,ie,le,d,me)}}So(o,S,M,q,Z,ce,b,g);return;case"select":le=S=M=ie=null;for(b in c)if(q=c[b],c.hasOwnProperty(b)&&q!=null)switch(b){case"value":break;case"multiple":le=q;default:d.hasOwnProperty(b)||St(o,u,b,null,d,q)}for(g in d)if(b=d[g],q=c[g],d.hasOwnProperty(g)&&(b!=null||q!=null))switch(g){case"value":ie=b;break;case"defaultValue":M=b;break;case"multiple":S=b;default:b!==q&&St(o,u,g,b,d,q)}u=M,c=S,d=le,ie!=null?mt(o,!!c,ie,!1):!!d!=!!c&&(u!=null?mt(o,!!c,u,!0):mt(o,!!c,c?[]:"",!1));return;case"textarea":le=ie=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:St(o,u,M,null,d,g)}for(S in d)if(g=d[S],b=c[S],d.hasOwnProperty(S)&&(g!=null||b!=null))switch(S){case"value":ie=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&St(o,u,S,g,d,b)}Qa(o,ie,le);return;case"option":for(var Ie in c)if(ie=c[Ie],c.hasOwnProperty(Ie)&&ie!=null&&!d.hasOwnProperty(Ie))switch(Ie){case"selected":o.selected=!1;break;default:St(o,u,Ie,null,d,ie)}for(q in d)if(ie=d[q],le=c[q],d.hasOwnProperty(q)&&ie!==le&&(ie!=null||le!=null))switch(q){case"selected":o.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:St(o,u,q,ie,d,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in c)ie=c[We],c.hasOwnProperty(We)&&ie!=null&&!d.hasOwnProperty(We)&&St(o,u,We,null,d,ie);for(Z in d)if(ie=d[Z],le=c[Z],d.hasOwnProperty(Z)&&ie!==le&&(ie!=null||le!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,u));break;default:St(o,u,Z,ie,d,le)}return;default:if(hh(u)){for(var Gt in c)ie=c[Gt],c.hasOwnProperty(Gt)&&ie!==void 0&&!d.hasOwnProperty(Gt)&&Cy(o,u,Gt,void 0,d,ie);for(ce in d)ie=d[ce],le=c[ce],!d.hasOwnProperty(ce)||ie===le||ie===void 0&&le===void 0||Cy(o,u,ce,ie,d,le);return}}for(var J in c)ie=c[J],c.hasOwnProperty(J)&&ie!=null&&!d.hasOwnProperty(J)&&St(o,u,J,null,d,ie);for(me in d)ie=d[me],le=c[me],!d.hasOwnProperty(me)||ie===le||ie==null&&le==null||St(o,u,me,ie,d,le)}var Ry=null,Iy=null;function Yp(o){return o.nodeType===9?o:o.ownerDocument}function N2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M2(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Dy(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ny=null;function lN(){var o=window.event;return o&&o.type==="popstate"?o===Ny?!1:(Ny=o,!0):(Ny=null,!1)}var O2=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,L2=typeof Promise=="function"?Promise:void 0,hN=typeof queueMicrotask=="function"?queueMicrotask:typeof L2<"u"?function(o){return L2.resolve(null).then(o).catch(fN)}:O2;function fN(o){setTimeout(function(){throw o})}function My(o,u){var c=u,d=0;do{var g=c.nextSibling;if(o.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(d===0){o.removeChild(g),rf(u);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=g}while(c);rf(u)}function Oy(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var c=u;switch(u=u.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Oy(c),Ga(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function dN(o,u,c,d){for(;o.nodeType===1;){var g=c;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[xo])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==g.rel||o.getAttribute("href")!==(g.href==null?null:g.href)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||o.getAttribute("title")!==(g.title==null?null:g.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(g.src==null?null:g.src)||o.getAttribute("type")!==(g.type==null?null:g.type)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=_i(o.nextSibling),o===null)break}return null}function pN(o,u,c){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=_i(o.nextSibling),o===null))return null;return o}function _i(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}function P2(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(u===0)return o;u--}else c==="/$"&&u++}o=o.previousSibling}return null}function B2(o,u,c){switch(u=Yp(c),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}var ti=new Map,F2=new Set;function Xp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var Gs=_e.d;_e.d={f:mN,r:gN,D:yN,C:bN,L:_N,m:vN,X:EN,S:xN,M:wN};function mN(){var o=Gs.f(),u=qp();return o||u}function gN(o){var u=ks(o);u!==null&&u.tag===5&&u.type==="form"?hk(u):Gs.r(o)}var $l=typeof document>"u"?null:document;function V2(o,u,c){var d=$l;if(d&&typeof u=="string"&&u){var g=qt(u);g='link[rel="'+o+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),F2.has(g)||(F2.add(g),o={rel:o,crossOrigin:c,href:u},d.querySelector(g)===null&&(u=d.createElement("link"),Rn(u,"link",o),Pt(u),d.head.appendChild(u)))}}function yN(o){Gs.D(o),V2("dns-prefetch",o,null)}function bN(o,u){Gs.C(o,u),V2("preconnect",o,u)}function _N(o,u,c){Gs.L(o,u,c);var d=$l;if(d&&o&&u){var g='link[rel="preload"][as="'+qt(u)+'"]';u==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+qt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+qt(c.imageSizes)+'"]')):g+='[href="'+qt(o)+'"]';var b=g;switch(u){case"style":b=Gl(o);break;case"script":b=Kl(o)}ti.has(b)||(o=F({rel:"preload",href:u==="image"&&c&&c.imageSrcSet?void 0:o,as:u},c),ti.set(b,o),d.querySelector(g)!==null||u==="style"&&d.querySelector(Yh(b))||u==="script"&&d.querySelector(Xh(b))||(u=d.createElement("link"),Rn(u,"link",o),Pt(u),d.head.appendChild(u)))}}function vN(o,u){Gs.m(o,u);var c=$l;if(c&&o){var d=u&&typeof u.as=="string"?u.as:"script",g='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(o)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Kl(o)}if(!ti.has(b)&&(o=F({rel:"modulepreload",href:o},u),ti.set(b,o),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xh(b)))return}d=c.createElement("link"),Rn(d,"link",o),Pt(d),c.head.appendChild(d)}}}function xN(o,u,c){Gs.S(o,u,c);var d=$l;if(d&&o){var g=wo(d).hoistableStyles,b=Gl(o);u=u||"default";var S=g.get(b);if(!S){var M={loading:0,preload:null};if(S=d.querySelector(Yh(b)))M.loading=5;else{o=F({rel:"stylesheet",href:o,"data-precedence":u},c),(c=ti.get(b))&&Ly(o,c);var q=S=d.createElement("link");Pt(q),Rn(q,"link",o),q._p=new Promise(function(Z,ce){q.onload=Z,q.onerror=ce}),q.addEventListener("load",function(){M.loading|=1}),q.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Zp(S,u,d)}S={type:"stylesheet",instance:S,count:1,state:M},g.set(b,S)}}}function EN(o,u){Gs.X(o,u);var c=$l;if(c&&o){var d=wo(c).hoistableScripts,g=Kl(o),b=d.get(g);b||(b=c.querySelector(Xh(g)),b||(o=F({src:o,async:!0},u),(u=ti.get(g))&&Py(o,u),b=c.createElement("script"),Pt(b),Rn(b,"link",o),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function wN(o,u){Gs.M(o,u);var c=$l;if(c&&o){var d=wo(c).hoistableScripts,g=Kl(o),b=d.get(g);b||(b=c.querySelector(Xh(g)),b||(o=F({src:o,async:!0,type:"module"},u),(u=ti.get(g))&&Py(o,u),b=c.createElement("script"),Pt(b),Rn(b,"link",o),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function U2(o,u,c,d){var g=(g=Qt.current)?Xp(g):null;if(!g)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(u=Gl(c.href),c=wo(g).hoistableStyles,d=c.get(u),d||(d={type:"style",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Gl(c.href);var b=wo(g).hoistableStyles,S=b.get(o);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,S),(b=g.querySelector(Yh(o)))&&!b._p&&(S.instance=b,S.state.loading=5),ti.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ti.set(o,c),b||kN(g,o,c,S.state))),u&&d===null)throw Error(r(528,""));return S}if(u&&d!==null)throw Error(r(529,""));return null;case"script":return u=c.async,c=c.src,typeof c=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Kl(c),c=wo(g).hoistableScripts,d=c.get(u),d||(d={type:"script",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Gl(o){return'href="'+qt(o)+'"'}function Yh(o){return'link[rel="stylesheet"]['+o+"]"}function z2(o){return F({},o,{"data-precedence":o.precedence,precedence:null})}function kN(o,u,c,d){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?d.loading=1:(u=o.createElement("link"),d.preload=u,u.addEventListener("load",function(){return d.loading|=1}),u.addEventListener("error",function(){return d.loading|=2}),Rn(u,"link",c),Pt(u),o.head.appendChild(u))}function Kl(o){return'[src="'+qt(o)+'"]'}function Xh(o){return"script[async]"+o}function j2(o,u,c){if(u.count++,u.instance===null)switch(u.type){case"style":var d=o.querySelector('style[data-href~="'+qt(c.href)+'"]');if(d)return u.instance=d,Pt(d),d;var g=F({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Pt(d),Rn(d,"style",g),Zp(d,c.precedence,o),u.instance=d;case"stylesheet":g=Gl(c.href);var b=o.querySelector(Yh(g));if(b)return u.state.loading|=4,u.instance=b,Pt(b),b;d=z2(c),(g=ti.get(g))&&Ly(d,g),b=(o.ownerDocument||o).createElement("link"),Pt(b);var S=b;return S._p=new Promise(function(M,q){S.onload=M,S.onerror=q}),Rn(b,"link",d),u.state.loading|=4,Zp(b,c.precedence,o),u.instance=b;case"script":return b=Kl(c.src),(g=o.querySelector(Xh(b)))?(u.instance=g,Pt(g),g):(d=c,(g=ti.get(b))&&(d=F({},c),Py(d,g)),o=o.ownerDocument||o,g=o.createElement("script"),Pt(g),Rn(g,"link",d),o.head.appendChild(g),u.instance=g);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(d=u.instance,u.state.loading|=4,Zp(d,c.precedence,o));return u.instance}function Zp(o,u,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,S=0;S<d.length;S++){var M=d[S];if(M.dataset.precedence===u)b=M;else if(b!==g)break}b?b.parentNode.insertBefore(o,b.nextSibling):(u=c.nodeType===9?c.head:c,u.insertBefore(o,u.firstChild))}function Ly(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Py(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Jp=null;function q2(o,u,c){if(Jp===null){var d=new Map,g=Jp=new Map;g.set(c,d)}else g=Jp,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),g=0;g<c.length;g++){var b=c[g];if(!(b[xo]||b[gn]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(u)||"";S=o+S;var M=d.get(S);M?M.push(b):d.set(S,[b])}}return d}function H2(o,u,c){o=o.ownerDocument||o,o.head.insertBefore(c,u==="title"?o.querySelector("head > title"):null)}function TN(o,u,c){if(c===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function $2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Zh=null;function SN(){}function AN(o,u,c){if(Zh===null)throw Error(r(475));var d=Zh;if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=Gl(c.href),b=o.querySelector(Yh(g));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(d.count++,d=e0.bind(d),o.then(d,d)),u.state.loading|=4,u.instance=b,Pt(b);return}b=o.ownerDocument||o,c=z2(c),(g=ti.get(g))&&Ly(c,g),b=b.createElement("link"),Pt(b);var S=b;S._p=new Promise(function(M,q){S.onload=M,S.onerror=q}),Rn(b,"link",c),u.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(d.count++,u=e0.bind(d),o.addEventListener("load",u),o.addEventListener("error",u))}}function CN(){if(Zh===null)throw Error(r(475));var o=Zh;return o.stylesheets&&o.count===0&&By(o,o.stylesheets),0<o.count?function(u){var c=setTimeout(function(){if(o.stylesheets&&By(o,o.stylesheets),o.unsuspend){var d=o.unsuspend;o.unsuspend=null,d()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(c)}}:null}function e0(){if(this.count--,this.count===0){if(this.stylesheets)By(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var t0=null;function By(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,t0=new Map,u.forEach(RN,o),t0=null,e0.call(o))}function RN(o,u){if(!(u.state.loading&4)){var c=t0.get(o);if(c)var d=c.get(null);else{c=new Map,t0.set(o,c);for(var g=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var S=g[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),d=S)}d&&c.set(null,d)}g=u.instance,S=g.getAttribute("data-precedence"),b=c.get(S)||d,b===d&&c.set(null,g),c.set(S,g),this.count++,d=e0.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(g,o.firstChild)),u.state.loading|=4}}var Jh={$$typeof:v,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function IN(o,u,c,d,g,b,S,M){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ul(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.hiddenUpdates=ul(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function G2(o,u,c,d,g,b,S,M,q,Z,ce,me){return o=new IN(o,u,c,S,M,q,Z,me),u=1,b===!0&&(u|=24),b=Jr(3,null,null,u),o.current=b,b.stateNode=o,u=m1(),u.refCount++,o.pooledCache=u,u.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:u},Q1(b),o}function K2(o){return o?(o=Tl,o):Tl}function W2(o,u,c,d,g,b){g=K2(g),d.context===null?d.context=g:d.pendingContext=g,d=Po(u),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Bo(o,d,u),c!==null&&(er(c,o,u),Ph(c,o,u))}function Q2(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<u?c:u}}function Fy(o,u){Q2(o,u),(o=o.alternate)&&Q2(o,u)}function Y2(o){if(o.tag===13){var u=Ro(o,67108864);u!==null&&er(u,o,67108864),Fy(o,67108864)}}var n0=!0;function DN(o,u,c,d){var g=N.T;N.T=null;var b=_e.p;try{_e.p=2,Vy(o,u,c,d)}finally{_e.p=b,N.T=g}}function NN(o,u,c,d){var g=N.T;N.T=null;var b=_e.p;try{_e.p=8,Vy(o,u,c,d)}finally{_e.p=b,N.T=g}}function Vy(o,u,c,d){if(n0){var g=Uy(d);if(g===null)Ay(o,u,d,r0,c),Z2(o,d);else if(ON(g,o,u,c,d))d.stopPropagation();else if(Z2(o,d),u&4&&-1<MN.indexOf(o)){for(;g!==null;){var b=ks(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=pi(b.pendingLanes);if(S!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;S;){var q=1<<31-He(S);M.entanglements[1]|=q,S&=~q}Yi(b),(Ft&6)===0&&(Up=mn()+500,Kh(0))}}break;case 13:M=Ro(b,2),M!==null&&er(M,b,2),qp(),Fy(b,2)}if(b=Uy(d),b===null&&Ay(o,u,d,r0,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else Ay(o,u,d,null,c)}}function Uy(o){return o=dl(o),zy(o)}var r0=null;function zy(o){if(r0=null,o=mi(o),o!==null){var u=ke(o);if(u===null)o=null;else{var c=u.tag;if(c===13){if(o=Ke(u),o!==null)return o;o=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return r0=o,null}function X2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yn()){case se:return 2;case A:return 8;case x:case k:return 32;case L:return 268435456;default:return 32}default:return 32}}var jy=!1,Ho=null,$o=null,Go=null,ef=new Map,tf=new Map,Ko=[],MN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z2(o,u){switch(o){case"focusin":case"focusout":Ho=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":ef.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":tf.delete(u.pointerId)}}function nf(o,u,c,d,g,b){return o===null||o.nativeEvent!==b?(o={blockedOn:u,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},u!==null&&(u=ks(u),u!==null&&Y2(u)),o):(o.eventSystemFlags|=d,u=o.targetContainers,g!==null&&u.indexOf(g)===-1&&u.push(g),o)}function ON(o,u,c,d,g){switch(u){case"focusin":return Ho=nf(Ho,o,u,c,d,g),!0;case"dragenter":return $o=nf($o,o,u,c,d,g),!0;case"mouseover":return Go=nf(Go,o,u,c,d,g),!0;case"pointerover":var b=g.pointerId;return ef.set(b,nf(ef.get(b)||null,o,u,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,tf.set(b,nf(tf.get(b)||null,o,u,c,d,g)),!0}return!1}function J2(o){var u=mi(o.target);if(u!==null){var c=ke(u);if(c!==null){if(u=c.tag,u===13){if(u=Ke(c),u!==null){o.blockedOn=u,vo(o.priority,function(){if(c.tag===13){var d=Ir(),g=Ro(c,d);g!==null&&er(g,c,d),Fy(c,d)}});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function i0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var c=Uy(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);qr=d,c.target.dispatchEvent(d),qr=null}else return u=ks(c),u!==null&&Y2(u),o.blockedOn=c,!1;u.shift()}return!0}function eT(o,u,c){i0(o)&&c.delete(u)}function LN(){jy=!1,Ho!==null&&i0(Ho)&&(Ho=null),$o!==null&&i0($o)&&($o=null),Go!==null&&i0(Go)&&(Go=null),ef.forEach(eT),tf.forEach(eT)}function s0(o,u){o.blockedOn===u&&(o.blockedOn=null,jy||(jy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LN)))}var o0=null;function tT(o){o0!==o&&(o0=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){o0===o&&(o0=null);for(var u=0;u<o.length;u+=3){var c=o[u],d=o[u+1],g=o[u+2];if(typeof d!="function"){if(zy(d||c)===null)continue;break}var b=ks(c);b!==null&&(o.splice(u,3),u-=3,D1(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function rf(o){function u(q){return s0(q,o)}Ho!==null&&s0(Ho,o),$o!==null&&s0($o,o),Go!==null&&s0(Go,o),ef.forEach(u),tf.forEach(u);for(var c=0;c<Ko.length;c++){var d=Ko[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Ko.length&&(c=Ko[0],c.blockedOn===null);)J2(c),c.blockedOn===null&&Ko.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],S=g[an]||null;if(typeof b=="function")S||tT(c);else if(S){var M=null;if(b&&b.hasAttribute("formAction")){if(g=b,S=b[an]||null)M=S.formAction;else if(zy(g)!==null)continue}else M=S.action;typeof M=="function"?c[d+1]=M:(c.splice(d,3),d-=3),tT(c)}}}function qy(o){this._internalRoot=o}a0.prototype.render=qy.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var c=u.current,d=Ir();W2(c,d,o,u,null,null)},a0.prototype.unmount=qy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;o.tag===0&&jl(),W2(o.current,2,null,o,null,null),qp(),u[ws]=null}};function a0(o){this._internalRoot=o}a0.prototype.unstable_scheduleHydration=function(o){if(o){var u=Wd();o={blockedOn:null,target:o,priority:u};for(var c=0;c<Ko.length&&u!==0&&u<Ko[c].priority;c++);Ko.splice(c,0,o),c===0&&J2(o)}};var nT=e.version;if(nT!=="19.0.0")throw Error(r(527,nT,"19.0.0"));_e.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=ue(u),o=o!==null?be(o):null,o=o===null?null:o.stateNode,o};var PN={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:mi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u0.isDisabled&&u0.supportsFiber)try{ae=u0.inject(PN),Re=u0}catch{}}return af.createRoot=function(o,u){if(!i(o))throw Error(r(299));var c=!1,d="",g=_k,b=vk,S=xk,M=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(d=u.identifierPrefix),u.onUncaughtError!==void 0&&(g=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(S=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(M=u.unstable_transitionCallbacks)),u=G2(o,1,!1,null,null,c,d,g,b,S,M,null),o[ws]=u.current,Sy(o.nodeType===8?o.parentNode:o),new qy(u)},af.hydrateRoot=function(o,u,c){if(!i(o))throw Error(r(299));var d=!1,g="",b=_k,S=vk,M=xk,q=null,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks),c.formState!==void 0&&(Z=c.formState)),u=G2(o,1,!0,u,c??null,d,g,b,S,M,q,Z),u.context=K2(null),c=u.current,d=Ir(),g=Po(d),g.callback=null,Bo(c,g,d),u.current.lanes=d,Yt(u,d),Yi(u),o[ws]=u.current,Sy(o),new a0(u)},af.version="19.0.0",af}var gT;function JN(){if(gT)return Wy.exports;gT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wy.exports=ZN(),Wy.exports}var e8=JN();const t8=yd(e8),n8=()=>{};var yT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r8=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],l=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},HA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,l=a?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|f>>6,v=f&63;h||(v=64,a||(_=64)),r.push(t[p],t[y],t[_],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||f==null||y==null)throw new i8;const _=s<<2|l>>4;if(r.push(_),f!==64){const v=l<<4&240|f>>2;if(r.push(v),y!==64){const w=f<<6&192|y;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class i8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s8=function(n){const e=qA(n);return HA.encodeByteArray(e,!0)},fm=function(n){return s8(n).replace(/\./g,"")},$A=function(n){try{return HA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=()=>o8().__FIREBASE_DEFAULTS__,u8=()=>{if(typeof process>"u"||typeof yT>"u")return;const n=yT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$A(n[1]);return e&&JSON.parse(e)},Xm=()=>{try{return n8()||a8()||u8()||l8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GA=n=>{var e,t;return(t=(e=Xm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},KA=n=>{const e=GA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},WA=()=>{var n;return(n=Xm())===null||n===void 0?void 0:n.config},QA=n=>{var e;return(e=Xm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[fm(JSON.stringify(t)),fm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function f8(){var n;const e=(n=Xm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function d8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p8(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function m8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g8(){const n=Wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function y8(){return!f8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b8(){try{return typeof indexedDB=="object"}catch{return!1}}function _8(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="FirebaseError";class vs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=v8,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bd.prototype.create)}}class bd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?x8(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new vs(i,l,r)}}function x8(n,e){return n.replace(E8,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const E8=/\{\$([^}]+)}/g;function w8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function so(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(bT(s)&&bT(a)){if(!so(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function bT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function k8(n,e){const t=new T8(n,e);return t.subscribe.bind(t)}class T8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");S8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Zy),i.error===void 0&&(i.error=Zy),i.complete===void 0&&(i.complete=Zy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S8(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n){return n&&n._delegate?n._delegate:n}class Ca{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new c8;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R8(e))try{this.getOrInitializeService({instanceIdentifier:Eu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eu){return this.instances.has(e)}getOptions(e=Eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eu){return this.component?this.component.multipleInstances?e:Eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C8(n){return n===Eu?void 0:n}function R8(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const D8={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},N8=it.INFO,M8={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},O8=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=M8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gv{constructor(e){this.name=e,this._logLevel=N8,this._logHandler=O8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const L8=(n,e)=>e.some(t=>n instanceof t);let _T,vT;function P8(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B8(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XA=new WeakMap,i_=new WeakMap,ZA=new WeakMap,Jy=new WeakMap,yv=new WeakMap;function F8(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(_a(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&XA.set(t,n)}).catch(()=>{}),yv.set(e,n),e}function V8(n){if(i_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});i_.set(n,e)}let s_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return i_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _a(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function U8(n){s_=n(s_)}function z8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(eb(this),e,...t);return ZA.set(r,e.sort?e.sort():[e]),_a(r)}:B8().includes(n)?function(...e){return n.apply(eb(this),e),_a(XA.get(this))}:function(...e){return _a(n.apply(eb(this),e))}}function j8(n){return typeof n=="function"?z8(n):(n instanceof IDBTransaction&&V8(n),L8(n,P8())?new Proxy(n,s_):n)}function _a(n){if(n instanceof IDBRequest)return F8(n);if(Jy.has(n))return Jy.get(n);const e=j8(n);return e!==n&&(Jy.set(n,e),yv.set(e,n)),e}const eb=n=>yv.get(n);function q8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=_a(a);return r&&a.addEventListener("upgradeneeded",h=>{r(_a(a.result),h.oldVersion,h.newVersion,_a(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const H8=["get","getKey","getAll","getAllKeys","count"],$8=["put","add","delete","clear"],tb=new Map;function xT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tb.get(e))return tb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=$8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H8.includes(t)))return;const s=async function(a,...l){const h=this.transaction(a,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[t](...l),i&&h.done]))[0]};return tb.set(e,s),s}U8(n=>({...n,get:(e,t,r)=>xT(e,t)||n.get(e,t,r),has:(e,t)=>!!xT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(K8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function K8(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const o_="@firebase/app",ET="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new gv("@firebase/app"),W8="@firebase/app-compat",Q8="@firebase/analytics-compat",Y8="@firebase/analytics",X8="@firebase/app-check-compat",Z8="@firebase/app-check",J8="@firebase/auth",eM="@firebase/auth-compat",tM="@firebase/database",nM="@firebase/data-connect",rM="@firebase/database-compat",iM="@firebase/functions",sM="@firebase/functions-compat",oM="@firebase/installations",aM="@firebase/installations-compat",uM="@firebase/messaging",lM="@firebase/messaging-compat",cM="@firebase/performance",hM="@firebase/performance-compat",fM="@firebase/remote-config",dM="@firebase/remote-config-compat",pM="@firebase/storage",mM="@firebase/storage-compat",gM="@firebase/firestore",yM="@firebase/vertexai",bM="@firebase/firestore-compat",_M="firebase",vM="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="[DEFAULT]",xM={[o_]:"fire-core",[W8]:"fire-core-compat",[Y8]:"fire-analytics",[Q8]:"fire-analytics-compat",[Z8]:"fire-app-check",[X8]:"fire-app-check-compat",[J8]:"fire-auth",[eM]:"fire-auth-compat",[tM]:"fire-rtdb",[nM]:"fire-data-connect",[rM]:"fire-rtdb-compat",[iM]:"fire-fn",[sM]:"fire-fn-compat",[oM]:"fire-iid",[aM]:"fire-iid-compat",[uM]:"fire-fcm",[lM]:"fire-fcm-compat",[cM]:"fire-perf",[hM]:"fire-perf-compat",[fM]:"fire-rc",[dM]:"fire-rc-compat",[pM]:"fire-gcs",[mM]:"fire-gcs-compat",[gM]:"fire-fst",[bM]:"fire-fst-compat",[yM]:"fire-vertex","fire-js":"fire-js",[_M]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map,EM=new Map,u_=new Map;function wT(n,e){try{n.container.addComponent(e)}catch(t){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ju(n){const e=n.name;if(u_.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;u_.set(e,n);for(const t of dm.values())wT(t,n);for(const t of EM.values())wT(t,n);return!0}function Zm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function si(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},va=new bd("app","Firebase",wM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=vM;function JA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:a_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw va.create("bad-app-name",{appName:String(i)});if(t||(t=WA()),!t)throw va.create("no-options");const s=dm.get(i);if(s){if(so(t,s.options)&&so(r,s.config))return s;throw va.create("duplicate-app",{appName:i})}const a=new I8(i);for(const h of u_.values())a.addComponent(h);const l=new kM(t,r,a);return dm.set(i,l),l}function bv(n=a_){const e=dm.get(n);if(!e&&n===a_&&WA())return JA();if(!e)throw va.create("no-app",{appName:n});return e}function us(n,e,t){var r;let i=(r=xM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oo.warn(l.join(" "));return}ju(new Ca(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="firebase-heartbeat-database",SM=1,Xf="firebase-heartbeat-store";let nb=null;function eC(){return nb||(nb=q8(TM,SM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xf)}catch(t){console.warn(t)}}}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),nb}async function AM(n){try{const t=(await eC()).transaction(Xf),r=await t.objectStore(Xf).get(tC(n));return await t.done,r}catch(e){if(e instanceof vs)oo.warn(e.message);else{const t=va.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oo.warn(t.message)}}}async function kT(n,e){try{const r=(await eC()).transaction(Xf,"readwrite");await r.objectStore(Xf).put(e,tC(n)),await r.done}catch(t){if(t instanceof vs)oo.warn(t.message);else{const r=va.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});oo.warn(r.message)}}}function tC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=1024,RM=30;class IM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=TT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>RM){const a=MM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){oo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=TT(),{heartbeatsToSend:r,unsentEntries:i}=DM(this._heartbeatsCache.heartbeats),s=fm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return oo.warn(t),""}}}function TT(){return new Date().toISOString().substring(0,10)}function DM(n,e=CM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),ST(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ST(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b8()?_8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ST(n){return fm(JSON.stringify({version:2,heartbeats:n})).length}function MM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){ju(new Ca("platform-logger",e=>new G8(e),"PRIVATE")),ju(new Ca("heartbeat",e=>new IM(e),"PRIVATE")),us(o_,ET,n),us(o_,ET,"esm2017"),us("fire-js","")}OM("");var AT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,nC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,I){function N(){}N.prototype=I.prototype,U.D=I.prototype,U.prototype=new N,U.prototype.constructor=U,U.C=function(F,j,H){for(var P=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)P[xe-2]=arguments[xe];return I.prototype[j].apply(F,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,I,N){N||(N=0);var F=Array(16);if(typeof I=="string")for(var j=0;16>j;++j)F[j]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(j=0;16>j;++j)F[j]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=U.g[0],N=U.g[1],j=U.g[2];var H=U.g[3],P=I+(H^N&(j^H))+F[0]+3614090360&4294967295;I=N+(P<<7&4294967295|P>>>25),P=H+(j^I&(N^j))+F[1]+3905402710&4294967295,H=I+(P<<12&4294967295|P>>>20),P=j+(N^H&(I^N))+F[2]+606105819&4294967295,j=H+(P<<17&4294967295|P>>>15),P=N+(I^j&(H^I))+F[3]+3250441966&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(H^N&(j^H))+F[4]+4118548399&4294967295,I=N+(P<<7&4294967295|P>>>25),P=H+(j^I&(N^j))+F[5]+1200080426&4294967295,H=I+(P<<12&4294967295|P>>>20),P=j+(N^H&(I^N))+F[6]+2821735955&4294967295,j=H+(P<<17&4294967295|P>>>15),P=N+(I^j&(H^I))+F[7]+4249261313&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(H^N&(j^H))+F[8]+1770035416&4294967295,I=N+(P<<7&4294967295|P>>>25),P=H+(j^I&(N^j))+F[9]+2336552879&4294967295,H=I+(P<<12&4294967295|P>>>20),P=j+(N^H&(I^N))+F[10]+4294925233&4294967295,j=H+(P<<17&4294967295|P>>>15),P=N+(I^j&(H^I))+F[11]+2304563134&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(H^N&(j^H))+F[12]+1804603682&4294967295,I=N+(P<<7&4294967295|P>>>25),P=H+(j^I&(N^j))+F[13]+4254626195&4294967295,H=I+(P<<12&4294967295|P>>>20),P=j+(N^H&(I^N))+F[14]+2792965006&4294967295,j=H+(P<<17&4294967295|P>>>15),P=N+(I^j&(H^I))+F[15]+1236535329&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(j^H&(N^j))+F[1]+4129170786&4294967295,I=N+(P<<5&4294967295|P>>>27),P=H+(N^j&(I^N))+F[6]+3225465664&4294967295,H=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(H^I))+F[11]+643717713&4294967295,j=H+(P<<14&4294967295|P>>>18),P=N+(H^I&(j^H))+F[0]+3921069994&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^H&(N^j))+F[5]+3593408605&4294967295,I=N+(P<<5&4294967295|P>>>27),P=H+(N^j&(I^N))+F[10]+38016083&4294967295,H=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(H^I))+F[15]+3634488961&4294967295,j=H+(P<<14&4294967295|P>>>18),P=N+(H^I&(j^H))+F[4]+3889429448&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^H&(N^j))+F[9]+568446438&4294967295,I=N+(P<<5&4294967295|P>>>27),P=H+(N^j&(I^N))+F[14]+3275163606&4294967295,H=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(H^I))+F[3]+4107603335&4294967295,j=H+(P<<14&4294967295|P>>>18),P=N+(H^I&(j^H))+F[8]+1163531501&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^H&(N^j))+F[13]+2850285829&4294967295,I=N+(P<<5&4294967295|P>>>27),P=H+(N^j&(I^N))+F[2]+4243563512&4294967295,H=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(H^I))+F[7]+1735328473&4294967295,j=H+(P<<14&4294967295|P>>>18),P=N+(H^I&(j^H))+F[12]+2368359562&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(N^j^H)+F[5]+4294588738&4294967295,I=N+(P<<4&4294967295|P>>>28),P=H+(I^N^j)+F[8]+2272392833&4294967295,H=I+(P<<11&4294967295|P>>>21),P=j+(H^I^N)+F[11]+1839030562&4294967295,j=H+(P<<16&4294967295|P>>>16),P=N+(j^H^I)+F[14]+4259657740&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^H)+F[1]+2763975236&4294967295,I=N+(P<<4&4294967295|P>>>28),P=H+(I^N^j)+F[4]+1272893353&4294967295,H=I+(P<<11&4294967295|P>>>21),P=j+(H^I^N)+F[7]+4139469664&4294967295,j=H+(P<<16&4294967295|P>>>16),P=N+(j^H^I)+F[10]+3200236656&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^H)+F[13]+681279174&4294967295,I=N+(P<<4&4294967295|P>>>28),P=H+(I^N^j)+F[0]+3936430074&4294967295,H=I+(P<<11&4294967295|P>>>21),P=j+(H^I^N)+F[3]+3572445317&4294967295,j=H+(P<<16&4294967295|P>>>16),P=N+(j^H^I)+F[6]+76029189&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^H)+F[9]+3654602809&4294967295,I=N+(P<<4&4294967295|P>>>28),P=H+(I^N^j)+F[12]+3873151461&4294967295,H=I+(P<<11&4294967295|P>>>21),P=j+(H^I^N)+F[15]+530742520&4294967295,j=H+(P<<16&4294967295|P>>>16),P=N+(j^H^I)+F[2]+3299628645&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(j^(N|~H))+F[0]+4096336452&4294967295,I=N+(P<<6&4294967295|P>>>26),P=H+(N^(I|~j))+F[7]+1126891415&4294967295,H=I+(P<<10&4294967295|P>>>22),P=j+(I^(H|~N))+F[14]+2878612391&4294967295,j=H+(P<<15&4294967295|P>>>17),P=N+(H^(j|~I))+F[5]+4237533241&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~H))+F[12]+1700485571&4294967295,I=N+(P<<6&4294967295|P>>>26),P=H+(N^(I|~j))+F[3]+2399980690&4294967295,H=I+(P<<10&4294967295|P>>>22),P=j+(I^(H|~N))+F[10]+4293915773&4294967295,j=H+(P<<15&4294967295|P>>>17),P=N+(H^(j|~I))+F[1]+2240044497&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~H))+F[8]+1873313359&4294967295,I=N+(P<<6&4294967295|P>>>26),P=H+(N^(I|~j))+F[15]+4264355552&4294967295,H=I+(P<<10&4294967295|P>>>22),P=j+(I^(H|~N))+F[6]+2734768916&4294967295,j=H+(P<<15&4294967295|P>>>17),P=N+(H^(j|~I))+F[13]+1309151649&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~H))+F[4]+4149444226&4294967295,I=N+(P<<6&4294967295|P>>>26),P=H+(N^(I|~j))+F[11]+3174756917&4294967295,H=I+(P<<10&4294967295|P>>>22),P=j+(I^(H|~N))+F[2]+718787259&4294967295,j=H+(P<<15&4294967295|P>>>17),P=N+(H^(j|~I))+F[9]+3951481745&4294967295,U.g[0]=U.g[0]+I&4294967295,U.g[1]=U.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,U.g[2]=U.g[2]+j&4294967295,U.g[3]=U.g[3]+H&4294967295}r.prototype.u=function(U,I){I===void 0&&(I=U.length);for(var N=I-this.blockSize,F=this.B,j=this.h,H=0;H<I;){if(j==0)for(;H<=N;)i(this,U,H),H+=this.blockSize;if(typeof U=="string"){for(;H<I;)if(F[j++]=U.charCodeAt(H++),j==this.blockSize){i(this,F),j=0;break}}else for(;H<I;)if(F[j++]=U[H++],j==this.blockSize){i(this,F),j=0;break}}this.h=j,this.o+=I},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var I=1;I<U.length-8;++I)U[I]=0;var N=8*this.o;for(I=U.length-8;I<U.length;++I)U[I]=N&255,N/=256;for(this.u(U),U=Array(16),I=N=0;4>I;++I)for(var F=0;32>F;F+=8)U[N++]=this.g[I]>>>F&255;return U};function s(U,I){var N=l;return Object.prototype.hasOwnProperty.call(N,U)?N[U]:N[U]=I(U)}function a(U,I){this.h=I;for(var N=[],F=!0,j=U.length-1;0<=j;j--){var H=U[j]|0;F&&H==I||(N[j]=H,F=!1)}this.g=N}var l={};function h(U){return-128<=U&&128>U?s(U,function(I){return new a([I|0],0>I?-1:0)}):new a([U|0],0>U?-1:0)}function f(U){if(isNaN(U)||!isFinite(U))return y;if(0>U)return D(f(-U));for(var I=[],N=1,F=0;U>=N;F++)I[F]=U/N|0,N*=4294967296;return new a(I,0)}function p(U,I){if(U.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(U.charAt(0)=="-")return D(p(U.substring(1),I));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(I,8)),F=y,j=0;j<U.length;j+=8){var H=Math.min(8,U.length-j),P=parseInt(U.substring(j,j+H),I);8>H?(H=f(Math.pow(I,H)),F=F.j(H).add(f(P))):(F=F.j(N),F=F.add(f(P)))}return F}var y=h(0),_=h(1),v=h(16777216);n=a.prototype,n.m=function(){if(R(this))return-D(this).m();for(var U=0,I=1,N=0;N<this.g.length;N++){var F=this.i(N);U+=(0<=F?F:4294967296+F)*I,I*=4294967296}return U},n.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(w(this))return"0";if(R(this))return"-"+D(this).toString(U);for(var I=f(Math.pow(U,6)),N=this,F="";;){var j=te(N,I).g;N=V(N,j.j(I));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(U);if(N=j,w(N))return H+F;for(;6>H.length;)H="0"+H;F=H+F}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function w(U){if(U.h!=0)return!1;for(var I=0;I<U.g.length;I++)if(U.g[I]!=0)return!1;return!0}function R(U){return U.h==-1}n.l=function(U){return U=V(this,U),R(U)?-1:w(U)?0:1};function D(U){for(var I=U.g.length,N=[],F=0;F<I;F++)N[F]=~U.g[F];return new a(N,~U.h).add(_)}n.abs=function(){return R(this)?D(this):this},n.add=function(U){for(var I=Math.max(this.g.length,U.g.length),N=[],F=0,j=0;j<=I;j++){var H=F+(this.i(j)&65535)+(U.i(j)&65535),P=(H>>>16)+(this.i(j)>>>16)+(U.i(j)>>>16);F=P>>>16,H&=65535,P&=65535,N[j]=P<<16|H}return new a(N,N[N.length-1]&-2147483648?-1:0)};function V(U,I){return U.add(D(I))}n.j=function(U){if(w(this)||w(U))return y;if(R(this))return R(U)?D(this).j(D(U)):D(D(this).j(U));if(R(U))return D(this.j(D(U)));if(0>this.l(v)&&0>U.l(v))return f(this.m()*U.m());for(var I=this.g.length+U.g.length,N=[],F=0;F<2*I;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(var j=0;j<U.g.length;j++){var H=this.i(F)>>>16,P=this.i(F)&65535,xe=U.i(j)>>>16,Ee=U.i(j)&65535;N[2*F+2*j]+=P*Ee,W(N,2*F+2*j),N[2*F+2*j+1]+=H*Ee,W(N,2*F+2*j+1),N[2*F+2*j+1]+=P*xe,W(N,2*F+2*j+1),N[2*F+2*j+2]+=H*xe,W(N,2*F+2*j+2)}for(F=0;F<I;F++)N[F]=N[2*F+1]<<16|N[2*F];for(F=I;F<2*I;F++)N[F]=0;return new a(N,0)};function W(U,I){for(;(U[I]&65535)!=U[I];)U[I+1]+=U[I]>>>16,U[I]&=65535,I++}function G(U,I){this.g=U,this.h=I}function te(U,I){if(w(I))throw Error("division by zero");if(w(U))return new G(y,y);if(R(U))return I=te(D(U),I),new G(D(I.g),D(I.h));if(R(I))return I=te(U,D(I)),new G(D(I.g),I.h);if(30<U.g.length){if(R(U)||R(I))throw Error("slowDivide_ only works with positive integers.");for(var N=_,F=I;0>=F.l(U);)N=Y(N),F=Y(F);var j=$(N,1),H=$(F,1);for(F=$(F,2),N=$(N,2);!w(F);){var P=H.add(F);0>=P.l(U)&&(j=j.add(N),H=P),F=$(F,1),N=$(N,1)}return I=V(U,j.j(I)),new G(j,I)}for(j=y;0<=U.l(I);){for(N=Math.max(1,Math.floor(U.m()/I.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),H=f(N),P=H.j(I);R(P)||0<P.l(U);)N-=F,H=f(N),P=H.j(I);w(H)&&(H=_),j=j.add(H),U=V(U,P)}return new G(j,U)}n.A=function(U){return te(this,U).h},n.and=function(U){for(var I=Math.max(this.g.length,U.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)&U.i(F);return new a(N,this.h&U.h)},n.or=function(U){for(var I=Math.max(this.g.length,U.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)|U.i(F);return new a(N,this.h|U.h)},n.xor=function(U){for(var I=Math.max(this.g.length,U.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)^U.i(F);return new a(N,this.h^U.h)};function Y(U){for(var I=U.g.length+1,N=[],F=0;F<I;F++)N[F]=U.i(F)<<1|U.i(F-1)>>>31;return new a(N,U.h)}function $(U,I){var N=I>>5;I%=32;for(var F=U.g.length-N,j=[],H=0;H<F;H++)j[H]=0<I?U.i(H+N)>>>I|U.i(H+N+1)<<32-I:U.i(H+N);return new a(j,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,xa=a}).apply(typeof AT<"u"?AT:typeof self<"u"?self:typeof window<"u"?window:{});var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rC,hf,iC,w0,l_,sC,oC,aC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,T){return m==Array.prototype||m==Object.prototype||(m[E]=T.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof c0=="object"&&c0];for(var E=0;E<m.length;++E){var T=m[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(m,E){if(E)e:{var T=r;m=m.split(".");for(var O=0;O<m.length-1;O++){var ee=m[O];if(!(ee in T))break e;T=T[ee]}m=m[m.length-1],O=T[m],E=E(O),E!=O&&E!=null&&e(T,m,{configurable:!0,writable:!0,value:E})}}function s(m,E){m instanceof String&&(m+="");var T=0,O=!1,ee={next:function(){if(!O&&T<m.length){var oe=T++;return{value:E(oe,m[oe]),done:!1}}return O=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}i("Array.prototype.values",function(m){return m||function(){return s(this,function(E,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function p(m,E,T){return m.call.apply(m.bind,arguments)}function y(m,E,T){if(!m)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,O),m.apply(E,ee)}}return function(){return m.apply(E,arguments)}}function _(m,E,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,_.apply(null,arguments)}function v(m,E){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),m.apply(this,O)}}function w(m,E){function T(){}T.prototype=E.prototype,m.aa=E.prototype,m.prototype=new T,m.prototype.constructor=m,m.Qb=function(O,ee,oe){for(var ve=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ve[lt-2]=arguments[lt];return E.prototype[ee].apply(O,ve)}}function R(m){const E=m.length;if(0<E){const T=Array(E);for(let O=0;O<E;O++)T[O]=m[O];return T}return[]}function D(m,E){for(let T=1;T<arguments.length;T++){const O=arguments[T];if(h(O)){const ee=m.length||0,oe=O.length||0;m.length=ee+oe;for(let ve=0;ve<oe;ve++)m[ee+ve]=O[ve]}else m.push(O)}}class V{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function W(m){return/^[\s\xa0]*$/.test(m)}function G(){var m=l.navigator;return m&&(m=m.userAgent)?m:""}function te(m){return te[" "](m),m}te[" "]=function(){};var Y=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function $(m,E,T){for(const O in m)E.call(T,m[O],O,m)}function U(m,E){for(const T in m)E.call(void 0,m[T],T,m)}function I(m){const E={};for(const T in m)E[T]=m[T];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(m,E){let T,O;for(let ee=1;ee<arguments.length;ee++){O=arguments[ee];for(T in O)m[T]=O[T];for(let oe=0;oe<N.length;oe++)T=N[oe],Object.prototype.hasOwnProperty.call(O,T)&&(m[T]=O[T])}}function j(m){var E=1;m=m.split(":");const T=[];for(;0<E&&m.length;)T.push(m.shift()),E--;return m.length&&T.push(m.join(":")),T}function H(m){l.setTimeout(()=>{throw m},0)}function P(){var m=Ke;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class xe{constructor(){this.h=this.g=null}add(E,T){const O=Ee.get();O.set(E,T),this.h?this.h.next=O:this.g=O,this.h=O}}var Ee=new V(()=>new pe,m=>m.reset());class pe{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let we,ke=!1,Ke=new xe,C=()=>{const m=l.Promise.resolve(void 0);we=()=>{m.then(ue)}};var ue=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(T){H(T)}var E=Ee;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}ke=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};l.addEventListener("test",T,E),l.removeEventListener("test",T,E)}catch{}return m}();function Pe(m,E){if(B.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var T=this.type=m.type,O=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(Y){e:{try{te(E.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(E=null)}}else T=="mouseover"?E=m.fromElement:T=="mouseout"&&(E=m.toElement);this.relatedTarget=E,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ae[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Pe.aa.h.call(this)}}w(Pe,B);var Ae={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Je(m,E,T,O,ee){this.listener=m,this.proxy=null,this.src=E,this.type=T,this.capture=!!O,this.ha=ee,this.key=++Ne,this.da=this.fa=!1}function Xe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function jt(m){this.src=m,this.g={},this.h=0}jt.prototype.add=function(m,E,T,O,ee){var oe=m.toString();m=this.g[oe],m||(m=this.g[oe]=[],this.h++);var ve=Qt(m,E,O,ee);return-1<ve?(E=m[ve],T||(E.fa=!1)):(E=new Je(E,this.src,oe,!!O,ee),E.fa=T,m.push(E)),E};function ar(m,E){var T=E.type;if(T in m.g){var O=m.g[T],ee=Array.prototype.indexOf.call(O,E,void 0),oe;(oe=0<=ee)&&Array.prototype.splice.call(O,ee,1),oe&&(Xe(E),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Qt(m,E,T,O){for(var ee=0;ee<m.length;++ee){var oe=m[ee];if(!oe.da&&oe.listener==E&&oe.capture==!!T&&oe.ha==O)return ee}return-1}var Fn="closure_lm_"+(1e6*Math.random()|0),xr={};function ur(m,E,T,O,ee){if(Array.isArray(E)){for(var oe=0;oe<E.length;oe++)ur(m,E[oe],T,O,ee);return null}return T=Yn(T),m&&m[Ve]?m.K(E,T,f(O)?!!O.capture:!1,ee):Vr(m,E,T,!1,O,ee)}function Vr(m,E,T,O,ee,oe){if(!E)throw Error("Invalid event type");var ve=f(ee)?!!ee.capture:!!ee,lt=di(m);if(lt||(m[Fn]=lt=new jt(m)),T=lt.add(E,T,O,ve,oe),T.proxy)return T;if(O=Li(),T.proxy=O,O.src=m,O.listener=T,m.addEventListener)_e||(ee=ve),ee===void 0&&(ee=!1),m.addEventListener(E.toString(),O,ee);else if(m.attachEvent)m.attachEvent(wr(E.toString()),O);else if(m.addListener&&m.removeListener)m.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Li(){function m(T){return E.call(m.src,m.listener,T)}const E=Vn;return m}function fi(m,E,T,O,ee){if(Array.isArray(E))for(var oe=0;oe<E.length;oe++)fi(m,E[oe],T,O,ee);else O=f(O)?!!O.capture:!!O,T=Yn(T),m&&m[Ve]?(m=m.i,E=String(E).toString(),E in m.g&&(oe=m.g[E],T=Qt(oe,T,O,ee),-1<T&&(Xe(oe[T]),Array.prototype.splice.call(oe,T,1),oe.length==0&&(delete m.g[E],m.h--)))):m&&(m=di(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Qt(E,T,O,ee)),(T=-1<m?E[m]:null)&&Er(T))}function Er(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ve])ar(E.i,m);else{var T=m.type,O=m.proxy;E.removeEventListener?E.removeEventListener(T,O,m.capture):E.detachEvent?E.detachEvent(wr(T),O):E.addListener&&E.removeListener&&E.removeListener(O),(T=di(E))?(ar(T,m),T.h==0&&(T.src=null,E[Fn]=null)):Xe(m)}}}function wr(m){return m in xr?xr[m]:xr[m]="on"+m}function Vn(m,E){if(m.da)m=!0;else{E=new Pe(E,this);var T=m.listener,O=m.ha||m.src;m.fa&&Er(m),m=T.call(O,E)}return m}function di(m){return m=m[Fn],m instanceof jt?m:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(m){return typeof m=="function"?m:(m[mn]||(m[mn]=function(E){return m.handleEvent(E)}),m[mn])}function se(){be.call(this),this.i=new jt(this),this.M=this,this.F=null}w(se,be),se.prototype[Ve]=!0,se.prototype.removeEventListener=function(m,E,T,O){fi(this,m,E,T,O)};function A(m,E){var T,O=m.F;if(O)for(T=[];O;O=O.F)T.push(O);if(m=m.M,O=E.type||E,typeof E=="string")E=new B(E,m);else if(E instanceof B)E.target=E.target||m;else{var ee=E;E=new B(O,m),F(E,ee)}if(ee=!0,T)for(var oe=T.length-1;0<=oe;oe--){var ve=E.g=T[oe];ee=x(ve,O,!0,E)&&ee}if(ve=E.g=m,ee=x(ve,O,!0,E)&&ee,ee=x(ve,O,!1,E)&&ee,T)for(oe=0;oe<T.length;oe++)ve=E.g=T[oe],ee=x(ve,O,!1,E)&&ee}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var T=m.g[E],O=0;O<T.length;O++)Xe(T[O]);delete m.g[E],m.h--}}this.F=null},se.prototype.K=function(m,E,T,O){return this.i.add(String(m),E,!1,T,O)},se.prototype.L=function(m,E,T,O){return this.i.add(String(m),E,!0,T,O)};function x(m,E,T,O){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var ee=!0,oe=0;oe<E.length;++oe){var ve=E[oe];if(ve&&!ve.da&&ve.capture==T){var lt=ve.listener,un=ve.ha||ve.src;ve.fa&&ar(m.i,ve),ee=lt.call(un,O)!==!1&&ee}}return ee&&!O.defaultPrevented}function k(m,E,T){if(typeof m=="function")T&&(m=_(m,T));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:l.setTimeout(m,E||0)}function L(m){m.g=k(()=>{m.g=null,m.i&&(m.i=!1,L(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class K extends be{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:L(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(m){be.call(this),this.h=m,this.g={}}w(re,be);var ae=[];function Re(m){$(m.g,function(E,T){this.g.hasOwnProperty(T)&&Er(E)},m),m.g={}}re.prototype.N=function(){re.aa.N.call(this),Re(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=l.JSON.stringify,Ue=l.JSON.parse,He=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Ye(){}Ye.prototype.h=null;function Hd(m){return m.h||(m.h=m.i())}function $d(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mo(){B.call(this,"d")}w(mo,B);function pi(){B.call(this,"c")}w(pi,B);var Ur={},go=null;function al(){return go=go||new se}Ur.La="serverreachability";function ih(m){B.call(this,Ur.La,m)}w(ih,B);function yo(m){const E=al();A(E,new ih(E))}Ur.STAT_EVENT="statevent";function ul(m,E){B.call(this,Ur.STAT_EVENT,m),this.stat=E}w(ul,B);function Yt(m){const E=al();A(E,new ul(E,m))}Ur.Ma="timingevent";function Gd(m,E){B.call(this,Ur.Ma,m),this.size=E}w(Gd,B);function bo(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},E)}function _o(){this.g=!0}_o.prototype.xa=function(){this.g=!1};function Kd(m,E,T,O,ee,oe){m.info(function(){if(m.g)if(oe)for(var ve="",lt=oe.split("&"),un=0;un<lt.length;un++){var ct=lt[un].split("=");if(1<ct.length){var bn=ct[0];ct=ct[1];var ln=bn.split("_");ve=2<=ln.length&&ln[1]=="type"?ve+(bn+"="+ct+"&"):ve+(bn+"=redacted&")}}else ve=null;else ve=oe;return"XMLHTTP REQ ("+O+") [attempt "+ee+"]: "+E+`
`+T+`
`+ve})}function Wd(m,E,T,O,ee,oe,ve){m.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+ee+"]: "+E+`
`+T+`
`+oe+" "+ve})}function vo(m,E,T,O){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+gn(m,T)+(O?" "+O:"")})}function Bi(m,E){m.info(function(){return"TIMEOUT: "+E})}_o.prototype.info=function(){};function gn(m,E){if(!m.g)return E;if(!E)return null;try{var T=JSON.parse(E);if(T){for(m=0;m<T.length;m++)if(Array.isArray(T[m])){var O=T[m];if(!(2>O.length)){var ee=O[1];if(Array.isArray(ee)&&!(1>ee.length)){var oe=ee[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var ve=1;ve<ee.length;ve++)ee[ve]=""}}}}return ut(T)}catch{return E}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$a;function ll(){}w(ll,Ye),ll.prototype.g=function(){return new XMLHttpRequest},ll.prototype.i=function(){return{}},$a=new ll;function Fi(m,E,T,O){this.j=m,this.i=E,this.l=T,this.R=O||1,this.U=new re(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sh}function sh(){this.i=null,this.g="",this.h=!1}var xo={},Ga={};function mi(m,E,T){m.L=1,m.v=Qa(qt(E)),m.m=T,m.P=!0,ks(m,null)}function ks(m,E){m.F=Date.now(),Pt(m),m.A=qt(m.v);var T=m.A,O=m.R;Array.isArray(O)||(O=[String(O)]),As(T.i,"t",O),m.C=0,T=m.j.J,m.h=new sh,m.g=up(m.j,T?E:null,!m.m),0<m.O&&(m.M=new K(_(m.Y,m,m.g),m.O)),E=m.U,T=m.g,O=m.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(ae[0]=ee.toString()),ee=ae);for(var oe=0;oe<ee.length;oe++){var ve=ur(T,ee[oe],O||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),yo(),Kd(m.i,m.u,m.A,m.l,m.R,m.m)}Fi.prototype.ca=function(m){m=m.target;const E=this.M;E&&$r(m)==3?E.j():this.Y(m)},Fi.prototype.Y=function(m){try{if(m==this.g)e:{const ln=$r(this.g);var E=this.g.Ba();const Ds=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||ep(this.g)))){this.J||ln!=4||E==7||(E==8||0>=Ds?yo(3):yo(2)),cl(this);var T=this.g.Z();this.X=T;t:if(Eo(this)){var O=ep(this.g);m="";var ee=O.length,oe=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),kr(this);var ve="";break t}this.h.i=new l.TextDecoder}for(E=0;E<ee;E++)this.h.h=!0,m+=this.h.i.decode(O[E],{stream:!(oe&&E==ee-1)});O.length=0,this.h.g+=m,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=T==200,Wd(this.i,this.u,this.A,this.l,this.R,ln,T),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,un=this.g;if((lt=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(lt)){var ct=lt;break t}}ct=null}if(T=ct)vo(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tr(this,T);else{this.o=!1,this.s=3,Yt(12),lr(this),kr(this);break e}}if(this.P){T=!0;let Sn;for(;!this.J&&this.C<ve.length;)if(Sn=wo(this,ve),Sn==Ga){ln==4&&(this.s=4,Yt(14),T=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==xo){this.s=4,Yt(15),vo(this.i,this.l,ve,"[Invalid Chunk]"),T=!1;break}else vo(this.i,this.l,Sn,null),Tr(this,Sn);if(Eo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||ve.length!=0||this.h.h||(this.s=1,Yt(16),T=!1),this.o=this.o&&T,!T)vo(this.i,this.l,ve,"[Invalid Chunked Response]"),lr(this),kr(this);else if(0<ve.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),nu(bn),bn.M=!0,Yt(11))}}else vo(this.i,this.l,ve,null),Tr(this,ve);ln==4&&lr(this),this.o&&!this.J&&(ln==4?sp(this.j,this):(this.o=!1,Pt(this)))}else Jg(this.g),T==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),lr(this),kr(this)}}}catch{}finally{}};function Eo(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function wo(m,E){var T=m.C,O=E.indexOf(`
`,T);return O==-1?Ga:(T=Number(E.substring(T,O)),isNaN(T)?xo:(O+=1,O+T>E.length?Ga:(E=E.slice(O,O+T),m.C=O+T,E)))}Fi.prototype.cancel=function(){this.J=!0,lr(this)};function Pt(m){m.S=Date.now()+m.I,oh(m,m.I)}function oh(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=bo(_(m.ba,m),E)}function cl(m){m.B&&(l.clearTimeout(m.B),m.B=null)}Fi.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Bi(this.i,this.A),this.L!=2&&(yo(),Yt(17)),lr(this),this.s=2,kr(this)):oh(this,this.S-m)};function kr(m){m.j.G==0||m.J||sp(m.j,m)}function lr(m){cl(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Re(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function Tr(m,E){try{var T=m.j;if(T.G!=0&&(T.g==m||ko(T.h,m))){if(!m.K&&ko(T.h,m)&&T.G==3){try{var O=T.Da.g.parse(E)}catch{O=null}if(Array.isArray(O)&&O.length==3){var ee=O;if(ee[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<m.F)vl(T),bl(T);else break e;yh(T),Yt(18)}}else T.za=ee[1],0<T.za-T.T&&37500>ee[2]&&T.F&&T.v==0&&!T.C&&(T.C=bo(_(T.Za,T),6e3));if(1>=Qd(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Is(T,11)}else if((m.K||T.g==m)&&vl(T),!W(E))for(ee=T.Da.g.parse(E),E=0;E<ee.length;E++){let ct=ee[E];if(T.T=ct[0],ct=ct[1],T.G==2)if(ct[0]=="c"){T.K=ct[1],T.ia=ct[2];const bn=ct[3];bn!=null&&(T.la=bn,T.j.info("VER="+T.la));const ln=ct[4];ln!=null&&(T.Aa=ln,T.j.info("SVER="+T.Aa));const Ds=ct[5];Ds!=null&&typeof Ds=="number"&&0<Ds&&(O=1.5*Ds,T.L=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const Sn=m.g;if(Sn){const $i=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var oe=O.h;oe.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(To(oe,oe.h),oe.h=null))}if(O.D){const _h=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(O.ya=_h,mt(O.I,O.D,_h))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-m.F,T.j.info("Handshake RTT: "+T.R+"ms")),O=T;var ve=m;if(O.qa=ap(O,O.J?O.ia:null,O.W),ve.K){zr(O.h,ve);var lt=ve,un=O.L;un&&(lt.I=un),lt.B&&(cl(lt),Pt(lt)),O.g=ve}else rp(O);0<T.i.length&&_l(T)}else ct[0]!="stop"&&ct[0]!="close"||Is(T,7);else T.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Is(T,7):mh(T):ct[0]!="noop"&&T.l&&T.l.ta(ct),T.v=0)}}yo(4)}catch{}}var Wg=class{constructor(m,E){this.g=m,this.map=E}};function ah(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Qd(m){return m.h?1:m.g?m.g.size:0}function ko(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function To(m,E){m.g?m.g.add(E):m.h=E}function zr(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}ah.prototype.cancel=function(){if(this.i=Xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Xn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const T of m.g.values())E=E.concat(T.D);return E}return R(m.i)}function Yd(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var E=[],T=m.length,O=0;O<T;O++)E.push(m[O]);return E}E=[],T=0;for(O in m)E[T++]=m[O];return E}function Qg(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var E=[];m=m.length;for(var T=0;T<m;T++)E.push(T);return E}E=[],T=0;for(const O in m)E[T++]=O;return E}}}function Ka(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var T=Qg(m),O=Yd(m),ee=O.length,oe=0;oe<ee;oe++)E.call(void 0,O[oe],T&&T[oe],m)}var lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hl(m,E){if(m){m=m.split("&");for(var T=0;T<m.length;T++){var O=m[T].indexOf("="),ee=null;if(0<=O){var oe=m[T].substring(0,O);ee=m[T].substring(O+1)}else oe=m[T];E(oe,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Ts(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ts){this.h=m.h,So(this,m.j),this.o=m.o,this.g=m.g,Wa(this,m.s),this.l=m.l;var E=m.i,T=new Vi;T.i=E.i,E.g&&(T.g=new Map(E.g),T.h=E.h),fl(this,T),this.m=m.m}else m&&(E=String(m).match(lh))?(this.h=!1,So(this,E[1]||"",!0),this.o=Ao(E[2]||""),this.g=Ao(E[3]||"",!0),Wa(this,E[4]),this.l=Ao(E[5]||"",!0),fl(this,E[6]||"",!0),this.m=Ao(E[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Ts.prototype.toString=function(){var m=[],E=this.j;E&&m.push(jr(E,ch,!0),":");var T=this.g;return(T||E=="file")&&(m.push("//"),(E=this.o)&&m.push(jr(E,ch,!0),"@"),m.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&m.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(jr(T,T.charAt(0)=="/"?hh:Xd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",jr(T,Zg)),m.join("")};function qt(m){return new Ts(m)}function So(m,E,T){m.j=T?Ao(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Wa(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function fl(m,E,T){E instanceof Vi?(m.i=E,fh(m.i,m.h)):(T||(E=jr(E,Xg)),m.i=new Vi(E,m.h))}function mt(m,E,T){m.i.set(E,T)}function Qa(m){return mt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ao(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function jr(m,E,T){return typeof m=="string"?(m=encodeURI(m).replace(E,Yg),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Yg(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ch=/[#\/\?@]/g,Xd=/[#\?:]/g,hh=/[#\?]/g,Xg=/[#\?@]/g,Zg=/#/g;function Vi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function qr(m){m.g||(m.g=new Map,m.h=0,m.i&&hl(m.i,function(E,T){m.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Vi.prototype,n.add=function(m,E){qr(this),this.i=null,m=Cs(this,m);var T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(E),this.h+=1,this};function dl(m,E){qr(m),E=Cs(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Ss(m,E){return qr(m),E=Cs(m,E),m.g.has(E)}n.forEach=function(m,E){qr(this),this.g.forEach(function(T,O){T.forEach(function(ee){m.call(E,ee,O,this)},this)},this)},n.na=function(){qr(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),T=[];for(let O=0;O<E.length;O++){const ee=m[O];for(let oe=0;oe<ee.length;oe++)T.push(E[O])}return T},n.V=function(m){qr(this);let E=[];if(typeof m=="string")Ss(this,m)&&(E=E.concat(this.g.get(Cs(this,m))));else{m=Array.from(this.g.values());for(let T=0;T<m.length;T++)E=E.concat(m[T])}return E},n.set=function(m,E){return qr(this),this.i=null,m=Cs(this,m),Ss(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function As(m,E,T){dl(m,E),0<T.length&&(m.i=null,m.g.set(Cs(m,E),R(T)),m.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var T=0;T<E.length;T++){var O=E[T];const oe=encodeURIComponent(String(O)),ve=this.V(O);for(O=0;O<ve.length;O++){var ee=oe;ve[O]!==""&&(ee+="="+encodeURIComponent(String(ve[O]))),m.push(ee)}}return this.i=m.join("&")};function Cs(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function fh(m,E){E&&!m.j&&(qr(m),m.i=null,m.g.forEach(function(T,O){var ee=O.toLowerCase();O!=ee&&(dl(this,O),As(this,ee,T))},m)),m.j=E}function Zd(m,E){const T=new _o;if(l.Image){const O=new Image;O.onload=v(Hr,T,"TestLoadImage: loaded",!0,E,O),O.onerror=v(Hr,T,"TestLoadImage: error",!1,E,O),O.onabort=v(Hr,T,"TestLoadImage: abort",!1,E,O),O.ontimeout=v(Hr,T,"TestLoadImage: timeout",!1,E,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=m}else E(!1)}function Ya(m,E){const T=new _o,O=new AbortController,ee=setTimeout(()=>{O.abort(),Hr(T,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:O.signal}).then(oe=>{clearTimeout(ee),oe.ok?Hr(T,"TestPingServer: ok",!0,E):Hr(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ee),Hr(T,"TestPingServer: error",!1,E)})}function Hr(m,E,T,O,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),O(T)}catch{}}function Xa(){this.g=new He}function Ui(m,E,T){const O=T||"";try{Ka(m,function(ee,oe){let ve=ee;f(ee)&&(ve=ut(ee)),E.push(O+oe+"="+encodeURIComponent(ve))})}catch(ee){throw E.push(O+"type="+encodeURIComponent("_badmap")),ee}}function Co(m){this.l=m.Ub||null,this.j=m.eb||!1}w(Co,Ye),Co.prototype.g=function(){return new Rs(this.l,this.j)},Co.prototype.i=function(m){return function(){return m}}({});function Rs(m,E){se.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Rs,se),n=Rs.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,ji(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||l).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function dh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?zi(this):ji(this),this.readyState==3&&dh(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,zi(this))},n.Qa=function(m){this.g&&(this.response=m,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ji(m)}n.setRequestHeader=function(m,E){this.u.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=E.next();return m.join(`\r
`)};function ji(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ph(m){let E="";return $(m,function(T,O){E+=O,E+=":",E+=T,E+=`\r
`}),E}function yn(m,E,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=ph(T),typeof m=="string"?T!=null&&encodeURIComponent(String(T)):mt(m,E,T))}function Et(m){se.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Et,se);var pl=/^https?$/i,Za=["POST","PUT"];n=Et.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,E,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$a.g(),this.v=this.o?Hd(this.o):Hd($a),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(oe){Jd(this,oe);return}if(m=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var ee in O)T.set(ee,O[ee]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const oe of O.keys())T.set(oe,O.get(oe));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(oe=>oe.toLowerCase()=="content-type"),ee=l.FormData&&m instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Za,E,void 0))||O||ee||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,ve]of T)this.g.setRequestHeader(oe,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ja(this),this.u=!0,this.g.send(m),this.u=!1}catch(oe){Jd(this,oe)}};function Jd(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,ml(m),qi(m)}function ml(m){m.A||(m.A=!0,A(m,"complete"),A(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,A(this,"complete"),A(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gl(this):this.bb())},n.bb=function(){gl(this)};function gl(m){if(m.h&&typeof a<"u"&&(!m.v[1]||$r(m)!=4||m.Z()!=2)){if(m.u&&$r(m)==4)k(m.Ea,0,m);else if(A(m,"readystatechange"),$r(m)==4){m.h=!1;try{const ve=m.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var O;if(O=ve===0){var ee=String(m.D).match(lh)[1]||null;!ee&&l.self&&l.self.location&&(ee=l.self.location.protocol.slice(0,-1)),O=!pl.test(ee?ee.toLowerCase():"")}T=O}if(T)A(m,"complete"),A(m,"success");else{m.m=6;try{var oe=2<$r(m)?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.Z()+"]",ml(m)}}finally{qi(m)}}}}function qi(m,E){if(m.g){Ja(m);const T=m.g,O=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||A(m,"ready");try{T.onreadystatechange=O}catch{}}}function Ja(m){m.I&&(l.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function $r(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Ue(E)}};function ep(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Jg(m){const E={};m=(m.g&&2<=$r(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<m.length;O++){if(W(m[O]))continue;var T=j(m[O]);const ee=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const oe=E[ee]||[];E[ee]=oe,oe.push(T)}U(E,function(O){return O.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eu(m,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||E}function yl(m){this.Aa=0,this.i=[],this.j=new _o,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eu("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eu("baseRetryDelayMs",5e3,m),this.cb=eu("retryDelaySeedMs",1e4,m),this.Wa=eu("forwardChannelMaxRetries",2,m),this.wa=eu("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ah(m&&m.concurrentRequestLimit),this.Da=new Xa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=yl.prototype,n.la=8,n.G=1,n.connect=function(m,E,T,O){Yt(0),this.W=m,this.H=E||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.I=ap(this,null,this.W),_l(this)};function mh(m){if(tp(m),m.G==3){var E=m.U++,T=qt(m.I);if(mt(T,"SID",m.K),mt(T,"RID",E),mt(T,"TYPE","terminate"),tu(m,T),E=new Fi(m,m.j,E),E.L=2,E.v=Qa(qt(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(E.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=E.v,T=!0),T||(E.g=up(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Pt(E)}op(m)}function bl(m){m.g&&(nu(m),m.g.cancel(),m.g=null)}function tp(m){bl(m),m.u&&(l.clearTimeout(m.u),m.u=null),vl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&l.clearTimeout(m.s),m.s=null)}function _l(m){if(!uh(m.h)&&!m.s){m.s=!0;var E=m.Ga;we||C(),ke||(we(),ke=!0),Ke.add(E,m),m.B=0}}function e1(m,E){return Qd(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=bo(_(m.Ga,m,E),bh(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ee=new Fi(this,this.j,m);let oe=this.o;if(this.S&&(oe?(oe=I(oe),F(oe,this.S)):oe=this.S),this.m!==null||this.O||(ee.H=oe,oe=null),this.P)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(E+=O,4096<E){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=np(this,ee,E),T=qt(this.I),mt(T,"RID",m),mt(T,"CVER",22),this.D&&mt(T,"X-HTTP-Session-Id",this.D),tu(this,T),oe&&(this.O?E="headers="+encodeURIComponent(String(ph(oe)))+"&"+E:this.m&&yn(T,this.m,oe)),To(this.h,ee),this.Ua&&mt(T,"TYPE","init"),this.P?(mt(T,"$req",E),mt(T,"SID","null"),ee.T=!0,mi(ee,T,null)):mi(ee,T,E),this.G=2}}else this.G==3&&(m?gh(this,m):this.i.length==0||uh(this.h)||gh(this))};function gh(m,E){var T;E?T=E.l:T=m.U++;const O=qt(m.I);mt(O,"SID",m.K),mt(O,"RID",T),mt(O,"AID",m.T),tu(m,O),m.m&&m.o&&yn(O,m.m,m.o),T=new Fi(m,m.j,T,m.B+1),m.m===null&&(T.H=m.o),E&&(m.i=E.D.concat(m.i)),E=np(m,T,1e3),T.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),To(m.h,T),mi(T,O,E)}function tu(m,E){m.H&&$(m.H,function(T,O){mt(E,O,T)}),m.l&&Ka({},function(T,O){mt(E,O,T)})}function np(m,E,T){T=Math.min(m.i.length,T);var O=m.l?_(m.l.Na,m.l,m):null;e:{var ee=m.i;let oe=-1;for(;;){const ve=["count="+T];oe==-1?0<T?(oe=ee[0].g,ve.push("ofs="+oe)):oe=0:ve.push("ofs="+oe);let lt=!0;for(let un=0;un<T;un++){let ct=ee[un].g;const bn=ee[un].map;if(ct-=oe,0>ct)oe=Math.max(0,ee[un].g-100),lt=!1;else try{Ui(bn,ve,"req"+ct+"_")}catch{O&&O(bn)}}if(lt){O=ve.join("&");break e}}}return m=m.i.splice(0,T),E.D=m,O}function rp(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;we||C(),ke||(we(),ke=!0),Ke.add(E,m),m.v=0}}function yh(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=bo(_(m.Fa,m),bh(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,ip(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=bo(_(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),bl(this),ip(this))};function nu(m){m.A!=null&&(l.clearTimeout(m.A),m.A=null)}function ip(m){m.g=new Fi(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=qt(m.qa);mt(E,"RID","rpc"),mt(E,"SID",m.K),mt(E,"AID",m.T),mt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&mt(E,"TO",m.ja),mt(E,"TYPE","xmlhttp"),tu(m,E),m.m&&m.o&&yn(E,m.m,m.o),m.L&&(m.g.I=m.L);var T=m.g;m=m.ia,T.L=1,T.v=Qa(qt(E)),T.m=null,T.P=!0,ks(T,m)}n.Za=function(){this.C!=null&&(this.C=null,bl(this),yh(this),Yt(19))};function vl(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function sp(m,E){var T=null;if(m.g==E){vl(m),nu(m),m.g=null;var O=2}else if(ko(m.h,E))T=E.D,zr(m.h,E),O=1;else return;if(m.G!=0){if(E.o)if(O==1){T=E.m?E.m.length:0,E=Date.now()-E.F;var ee=m.B;O=al(),A(O,new Gd(O,T)),_l(m)}else rp(m);else if(ee=E.s,ee==3||ee==0&&0<E.X||!(O==1&&e1(m,E)||O==2&&yh(m)))switch(T&&0<T.length&&(E=m.h,E.i=E.i.concat(T)),ee){case 1:Is(m,5);break;case 4:Is(m,10);break;case 3:Is(m,6);break;default:Is(m,2)}}}function bh(m,E){let T=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(T*=2),T*E}function Is(m,E){if(m.j.info("Error code "+E),E==2){var T=_(m.fb,m),O=m.Xa;const ee=!O;O=new Ts(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||So(O,"https"),Qa(O),ee?Zd(O.toString(),T):Ya(O.toString(),T)}else Yt(2);m.G=0,m.l&&m.l.sa(E),op(m),tp(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function op(m){if(m.G=0,m.ka=[],m.l){const E=Xn(m.h);(E.length!=0||m.i.length!=0)&&(D(m.ka,E),D(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function ap(m,E,T){var O=T instanceof Ts?qt(T):new Ts(T);if(O.g!="")E&&(O.g=E+"."+O.g),Wa(O,O.s);else{var ee=l.location;O=ee.protocol,E=E?E+"."+ee.hostname:ee.hostname,ee=+ee.port;var oe=new Ts(null);O&&So(oe,O),E&&(oe.g=E),ee&&Wa(oe,ee),T&&(oe.l=T),O=oe}return T=m.D,E=m.ya,T&&E&&mt(O,T,E),mt(O,"VER",m.la),tu(m,O),O}function up(m,E,T){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new Et(new Co({eb:T})):new Et(m.pa),E.Ha(m.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lp(){}n=lp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xl(){}xl.prototype.g=function(m,E){return new Zn(m,E)};function Zn(m,E){se.call(this),this.g=new yl(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!W(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!W(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Hi(this)}w(Zn,se),Zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){mh(this.g)},Zn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.u&&(T={},T.__data__=ut(m),m=T);E.i.push(new Wg(E.Ya++,m)),E.G==3&&_l(E)},Zn.prototype.N=function(){this.g.l=null,delete this.j,mh(this.g),delete this.g,Zn.aa.N.call(this)};function cp(m){mo.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const T in E){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}w(cp,mo);function hp(){pi.call(this),this.status=1}w(hp,pi);function Hi(m){this.g=m}w(Hi,lp),Hi.prototype.ua=function(){A(this.g,"a")},Hi.prototype.ta=function(m){A(this.g,new cp(m))},Hi.prototype.sa=function(m){A(this.g,new hp)},Hi.prototype.ra=function(){A(this.g,"b")},xl.prototype.createWebChannel=xl.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,aC=function(){return new xl},oC=function(){return al()},sC=Ur,l_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,w0=an,ws.COMPLETE="complete",iC=ws,$d.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",se.prototype.listen=se.prototype.K,hf=$d,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,rC=Et}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});const CT="@firebase/firestore",RT="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new gv("@firebase/firestore");function Zl(){return qu.logLevel}function Te(n,...e){if(qu.logLevel<=it.DEBUG){const t=e.map(_v);qu.debug(`Firestore (${jc}): ${n}`,...t)}}function ao(n,...e){if(qu.logLevel<=it.ERROR){const t=e.map(_v);qu.error(`Firestore (${jc}): ${n}`,...t)}}function kc(n,...e){if(qu.logLevel<=it.WARN){const t=e.map(_v);qu.warn(`Firestore (${jc}): ${n}`,...t)}}function _v(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n="Unexpected state"){const e=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: `+n;throw ao(e),new Error(e)}function wt(n,e){n||ze()}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends vs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hn.UNAUTHENTICATED))}shutdown(){}}class PM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class BM{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new no;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new no,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},l=h=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new no)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new uC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new Hn(e)}}class FM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class VM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new FM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,si(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0);const r=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new IT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt(typeof t.token=="string"),this.R=t.token,new IT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function Tc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=-62135596800,NT=1e6;class dn{static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NT);return new dn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DT)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NT}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-DT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new dn(0,0))}static max(){return new $e(new dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__name__";class ts{constructor(e,t,r){t===void 0?t=0:t>e.length&&ze(),r===void 0?r=e.length-t:r>e.length-t&&ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ts.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=ts.isNumericId(e),i=ts.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ts.extractNumericId(e).compare(ts.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class Lt extends ts{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const jM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends ts{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return jM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new Pn([MT])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Oe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Oe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Oe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Lt.fromString(e))}static fromName(e){return new Be(Lt.fromString(e).popFirst(5))}static empty(){return new Be(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=-1;function qM(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=$e.fromTimestamp(r===1e9?new dn(t+1,0):new dn(t,r));return new Ra(i,Be.empty(),e)}function HM(n){return new Ra(n.readTime,n.key,Zf)}class Ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ra($e.min(),Be.empty(),Zf)}static max(){return new Ra($e.max(),Be.empty(),Zf)}}function $M(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==GM)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let h=0;h<s;h++){const f=h;t(e[f]).next(p=>{a[f]=p,++l,l===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new de((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function WM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Jm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=-1;function eg(n){return n==null}function pm(n){return n===0&&1/n==-1/0}function QM(n){return typeof n=="number"&&Number.isInteger(n)&&!pm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="";function YM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OT(e)),e=XM(n.get(t),e);return OT(e)}function XM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case cC:t+="";break;default:t+=s}}return t}function OT(n){return n+cC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new h0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new h0(this.root,e,this.comparator,!1)}getReverseIterator(){return new h0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new h0(this.root,e,this.comparator,!0)}}class h0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=i??Nn.EMPTY,this.right=s??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Nn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new Mr([])}unionWith(e){let t=new pn(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fC("Invalid base64 string: "+s):s}}(e);return new Bn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const ZM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(n){if(wt(!!n),typeof n=="string"){let e=0;const t=ZM.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zt(n.seconds),nanos:Zt(n.nanos)}}function Zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Da(n){return typeof n=="string"?Bn.fromBase64String(n):Bn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="server_timestamp",pC="__type__",mC="__previous_value__",gC="__local_write_time__";function xv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[pC])===null||t===void 0?void 0:t.stringValue)===dC}function tg(n){const e=n.mapValue.fields[mC];return xv(e)?tg(e):e}function Jf(n){const e=Ia(n.mapValue.fields[gC].timestampValue);return new dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t,r,i,s,a,l,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f}}const mm="(default)";class ed{constructor(e,t){this.projectId=e,this.database=t||mm}static empty(){return new ed("","")}get isDefaultDatabase(){return this.database===mm}isEqual(e){return e instanceof ed&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="__type__",e9="__max__",f0={mapValue:{}},bC="__vector__",gm="value";function Na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xv(n)?4:n9(n)?9007199254740991:t9(n)?10:11:ze()}function ds(n,e){if(n===e)return!0;const t=Na(n);if(t!==Na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jf(n).isEqual(Jf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ia(i.timestampValue),l=Ia(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Da(i.bytesValue).isEqual(Da(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Zt(i.geoPointValue.latitude)===Zt(s.geoPointValue.latitude)&&Zt(i.geoPointValue.longitude)===Zt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Zt(i.integerValue)===Zt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Zt(i.doubleValue),l=Zt(s.doubleValue);return a===l?pm(a)===pm(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Tc(n.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(LT(a)!==LT(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(l[h]===void 0||!ds(a[h],l[h])))return!1;return!0}(n,e);default:return ze()}}function td(n,e){return(n.values||[]).find(t=>ds(t,e))!==void 0}function Sc(n,e){if(n===e)return 0;const t=Na(n),r=Na(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Zt(s.integerValue||s.doubleValue),h=Zt(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return BT(n.timestampValue,e.timestampValue);case 4:return BT(Jf(n),Jf(e));case 5:return at(n.stringValue,e.stringValue);case 6:return function(s,a){const l=Da(s),h=Da(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),h=a.split("/");for(let f=0;f<l.length&&f<h.length;f++){const p=at(l[f],h[f]);if(p!==0)return p}return at(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const l=at(Zt(s.latitude),Zt(a.latitude));return l!==0?l:at(Zt(s.longitude),Zt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FT(n.arrayValue,e.arrayValue);case 10:return function(s,a){var l,h,f,p;const y=s.fields||{},_=a.fields||{},v=(l=y[gm])===null||l===void 0?void 0:l.arrayValue,w=(h=_[gm])===null||h===void 0?void 0:h.arrayValue,R=at(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((p=w==null?void 0:w.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:FT(v,w)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===f0.mapValue&&a===f0.mapValue)return 0;if(s===f0.mapValue)return 1;if(a===f0.mapValue)return-1;const l=s.fields||{},h=Object.keys(l),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const _=at(h[y],p[y]);if(_!==0)return _;const v=Sc(l[h[y]],f[p[y]]);if(v!==0)return v}return at(h.length,p.length)}(n.mapValue,e.mapValue);default:throw ze()}}function BT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Ia(n),r=Ia(e),i=at(t.seconds,r.seconds);return i!==0?i:at(t.nanos,r.nanos)}function FT(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Sc(t[i],r[i]);if(s)return s}return at(t.length,r.length)}function Ac(n){return c_(n)}function c_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ia(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Da(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=c_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${c_(t.fields[a])}`;return i+"}"}(n.mapValue):ze()}function k0(n){switch(Na(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(n);return e?16+k0(e):16;case 5:return 2*n.stringValue.length;case 6:return Da(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+k0(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Va(r.fields,(s,a)=>{i+=s.length+k0(a)}),i}(n.mapValue);default:throw ze()}}function h_(n){return!!n&&"integerValue"in n}function Ev(n){return!!n&&"arrayValue"in n}function VT(n){return!!n&&"nullValue"in n}function UT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function T0(n){return!!n&&"mapValue"in n}function t9(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yC])===null||t===void 0?void 0:t.stringValue)===bC}function Pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function n9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===e9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!T0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pf(t)}setAll(e){let t=Pn.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=l.popLast()}a?r[l.lastSegment()]=Pf(a):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());T0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];T0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Va(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pr(Pf(this.value))}}function _C(n){const e=[];return Va(n.fields,(t,r)=>{const i=new Pn([t]);if(T0(r)){const s=_C(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,r,i,s,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new $n(e,0,$e.min(),$e.min(),$e.min(),pr.empty(),0)}static newFoundDocument(e,t,r,i){return new $n(e,1,t,$e.min(),r,i,0)}static newNoDocument(e,t){return new $n(e,2,t,$e.min(),$e.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,$e.min(),$e.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.position=e,this.inclusive=t}}function zT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Be.comparator(Be.fromName(a.referenceValue),t.key):r=Sc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ds(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t="asc"){this.field=e,this.dir=t}}function r9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class fn extends vC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new s9(e,t,r):t==="array-contains"?new u9(e,r):t==="in"?new l9(e,r):t==="not-in"?new c9(e,r):t==="array-contains-any"?new h9(e,r):new fn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new o9(e,r):new a9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Sc(t,this.value)):t!==null&&Na(this.value)===Na(t)&&this.matchesComparison(Sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends vC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ps(e,t)}matches(e){return xC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xC(n){return n.op==="and"}function EC(n){return i9(n)&&xC(n)}function i9(n){for(const e of n.filters)if(e instanceof ps)return!1;return!0}function f_(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+Ac(n.value);if(EC(n))return n.filters.map(e=>f_(e)).join(",");{const e=n.filters.map(t=>f_(t)).join(",");return`${n.op}(${e})`}}function wC(n,e){return n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)}(n,e):n instanceof ps?function(r,i){return i instanceof ps&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&wC(a,i.filters[l]),!0):!1}(n,e):void ze()}function kC(n){return n instanceof fn?function(t){return`${t.field.canonicalString()} ${t.op} ${Ac(t.value)}`}(n):n instanceof ps?function(t){return t.op.toString()+" {"+t.getFilters().map(kC).join(" ,")+"}"}(n):"Filter"}class s9 extends fn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class o9 extends fn{constructor(e,t){super(e,"in",t),this.keys=TC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class a9 extends fn{constructor(e,t){super(e,"not-in",t),this.keys=TC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class u9 extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ev(t)&&td(t.arrayValue,this.value)}}class l9 extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&td(this.value.arrayValue,t)}}class c9 extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!td(this.value.arrayValue,t)}}class h9 extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ev(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.le=null}}function qT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new f9(n,e,t,r,i,s,a)}function wv(n){const e=Qe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>f_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ac(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ac(r)).join(",")),e.le=t}return e.le}function kv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!r9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jT(n.startAt,e.startAt)&&jT(n.endAt,e.endAt)}function d_(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t=null,r=[],i=[],s=null,a="F",l=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function d9(n,e,t,r,i,s,a,l){return new ng(n,e,t,r,i,s,a,l)}function rg(n){return new ng(n)}function HT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p9(n){return n.collectionGroup!==null}function Bf(n){const e=Qe(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new pn(Pn.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new bm(s,r))}),t.has(Pn.keyField().canonicalString())||e.he.push(new bm(Pn.keyField(),r))}return e.he}function ls(n){const e=Qe(n);return e.Pe||(e.Pe=m9(e,Bf(n))),e.Pe}function m9(n,e){if(n.limitType==="F")return qT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bm(i.field,s)});const t=n.endAt?new ym(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ym(n.startAt.position,n.startAt.inclusive):null;return qT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function p_(n,e,t){return new ng(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ig(n,e){return kv(ls(n),ls(e))&&n.limitType===e.limitType}function SC(n){return`${wv(ls(n))}|lt:${n.limitType}`}function Jl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>kC(i)).join(", ")}]`),eg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ac(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ac(i)).join(",")),`Target(${r})`}(ls(n))}; limitType=${n.limitType})`}function sg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Bf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,l,h){const f=zT(a,l,h);return a.inclusive?f<=0:f<0}(r.startAt,Bf(r),i)||r.endAt&&!function(a,l,h){const f=zT(a,l,h);return a.inclusive?f>=0:f>0}(r.endAt,Bf(r),i))}(n,e)}function g9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AC(n){return(e,t)=>{let r=!1;for(const i of Bf(n)){const s=y9(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function y9(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(s,a,l){const h=a.data.field(s),f=l.data.field(s);return h!==null&&f!==null?Sc(h,f):ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ze()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Va(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=new Ut(Be.comparator);function uo(){return b9}const CC=new Ut(Be.comparator);function ff(...n){let e=CC;for(const t of n)e=e.insert(t.key,t);return e}function RC(n){let e=CC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cu(){return Ff()}function IC(){return Ff()}function Ff(){return new Zu(n=>n.toString(),(n,e)=>n.isEqual(e))}const _9=new Ut(Be.comparator),v9=new pn(Be.comparator);function st(...n){let e=v9;for(const t of n)e=e.add(t);return e}const x9=new pn(at);function E9(){return x9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pm(e)?"-0":e}}function DC(n){return{integerValue:""+n}}function w9(n,e){return QM(e)?DC(e):Tv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this._=void 0}}function k9(n,e,t){return n instanceof _m?function(i,s){const a={fields:{[pC]:{stringValue:dC},[gC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xv(s)&&(s=tg(s)),s&&(a.fields[mC]=s),{mapValue:a}}(t,e):n instanceof Cc?MC(n,e):n instanceof Rc?OC(n,e):function(i,s){const a=NC(i,s),l=$T(a)+$T(i.Ie);return h_(a)&&h_(i.Ie)?DC(l):Tv(i.serializer,l)}(n,e)}function T9(n,e,t){return n instanceof Cc?MC(n,e):n instanceof Rc?OC(n,e):t}function NC(n,e){return n instanceof vm?function(r){return h_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _m extends og{}class Cc extends og{constructor(e){super(),this.elements=e}}function MC(n,e){const t=LC(e);for(const r of n.elements)t.some(i=>ds(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rc extends og{constructor(e){super(),this.elements=e}}function OC(n,e){let t=LC(e);for(const r of n.elements)t=t.filter(i=>!ds(i,r));return{arrayValue:{values:t}}}class vm extends og{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function $T(n){return Zt(n.integerValue||n.doubleValue)}function LC(n){return Ev(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.field=e,this.transform=t}}function S9(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Cc&&i instanceof Cc||r instanceof Rc&&i instanceof Rc?Tc(r.elements,i.elements,ds):r instanceof vm&&i instanceof vm?ds(r.Ie,i.Ie):r instanceof _m&&i instanceof _m}(n.transform,e.transform)}class A9{constructor(e,t){this.version=e,this.transformResults=t}}class ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function S0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ag{}function BC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sv(n.key,ai.none()):new vd(n.key,n.data,ai.none());{const t=n.data,r=pr.empty();let i=new pn(Pn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ua(n.key,r,new Mr(i.toArray()),ai.none())}}function C9(n,e,t){n instanceof vd?function(i,s,a){const l=i.value.clone(),h=KT(i.fieldTransforms,s,a.transformResults);l.setAll(h),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ua?function(i,s,a){if(!S0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=KT(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(FC(i)),h.setAll(l),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Vf(n,e,t,r){return n instanceof vd?function(s,a,l,h){if(!S0(s.precondition,a))return l;const f=s.value.clone(),p=WT(s.fieldTransforms,h,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ua?function(s,a,l,h){if(!S0(s.precondition,a))return l;const f=WT(s.fieldTransforms,h,a),p=a.data;return p.setAll(FC(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(s,a,l){return S0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function R9(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=NC(r.transform,i||null);s!=null&&(t===null&&(t=pr.empty()),t.set(r.field,s))}return t||null}function GT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tc(r,i,(s,a)=>S9(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vd extends ag{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ua extends ag{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KT(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,T9(a,l,t[i]))}return r}function WT(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,k9(s,a,e))}return r}class Sv extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I9 extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&C9(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IC();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=t.has(i.key)?null:l;const h=BC(a,l);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument($e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(t,r)=>GT(t,r))&&Tc(this.baseMutations,e.baseMutations,(t,r)=>GT(t,r))}}class Av{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=function(){return _9}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Av(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,ft;function O9(n){switch(n){case ge.OK:return ze();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return ze()}}function VC(n){if(n===void 0)return ao("GRPC error has no .code"),ge.UNKNOWN;switch(n){case nn.OK:return ge.OK;case nn.CANCELLED:return ge.CANCELLED;case nn.UNKNOWN:return ge.UNKNOWN;case nn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case nn.INTERNAL:return ge.INTERNAL;case nn.UNAVAILABLE:return ge.UNAVAILABLE;case nn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case nn.NOT_FOUND:return ge.NOT_FOUND;case nn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case nn.ABORTED:return ge.ABORTED;case nn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case nn.DATA_LOSS:return ge.DATA_LOSS;default:return ze()}}(ft=nn||(nn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new xa([4294967295,4294967295],0);function QT(n){const e=L9().encode(n),t=new nC;return t.update(e),new Uint8Array(t.digest())}function YT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xa([t,r],0),new xa([i,s],0)]}class Cv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new df(`Invalid padding: ${t}`);if(r<0)throw new df(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new df(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new df(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=xa.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(xa.fromNumber(r)));return i.compare(P9)===1&&(i=new xa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=QT(e),[r,i]=YT(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(r,i,s);if(!this.Re(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Cv(s,i,t);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const t=QT(e),[r,i]=YT(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(r,i,s);this.Ve(a)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ug($e.min(),i,new Ut(at),uo(),st())}}class xd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xd(r,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class UC{constructor(e,t){this.targetId=e,this.ge=t}}class zC{constructor(e,t,r=Bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XT{constructor(){this.pe=0,this.ye=ZT(),this.we=Bn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=st(),t=st(),r=st();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ze()}}),new xd(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=ZT()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,wt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class B9{constructor(e){this.ke=e,this.qe=new Map,this.Qe=uo(),this.$e=d0(),this.Ke=d0(),this.Ue=new Ut(at)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(d_(s))if(r===0){const a=new Be(s.path);this.ze(t,a,$n.newNoDocument(a,$e.min()))}else wt(r===1);else{const a=this.et(t);if(a!==r){const l=this.tt(e),h=l?this.nt(l,e,a):1;if(h!==0){this.Ye(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,f)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,l;try{a=Da(r).toUint8Array()}catch(h){if(h instanceof fC)return kc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{l=new Cv(a,i,s)}catch(h){return kc(h instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return l.Ee===0?null:l}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,a)=>{const l=this.Xe(a);if(l){if(s.current&&d_(l.target)){const h=new Be(l.target.path);this._t(h).has(a)||this.ut(a,h)||this.ze(a,h,$n.newNoDocument(h,e))}s.ve&&(t.set(a,s.Fe()),s.Me())}});let r=st();this.Ke.forEach((s,a)=>{let l=!0;a.forEachWhile(h=>{const f=this.Xe(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.Qe.forEach((s,a)=>a.setReadTime(e));const i=new ug(e,t,this.Ue,this.Qe,r);return this.Qe=uo(),this.$e=d0(),this.Ke=d0(),this.Ue=new Ut(at),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new XT,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new pn(at),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new pn(at),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new XT),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function d0(){return new Ut(Be.comparator)}function ZT(){return new Ut(Be.comparator)}const F9={asc:"ASCENDING",desc:"DESCENDING"},V9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U9={and:"AND",or:"OR"};class z9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function m_(n,e){return n.useProto3Json||eg(e)?e:{value:e}}function xm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j9(n,e){return xm(n,e.toTimestamp())}function cs(n){return wt(!!n),$e.fromTimestamp(function(t){const r=Ia(t);return new dn(r.seconds,r.nanos)}(n))}function Rv(n,e){return g_(n,e).canonicalString()}function g_(n,e){const t=function(i){return new Lt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qC(n){const e=Lt.fromString(n);return wt(WC(e)),e}function y_(n,e){return Rv(n.databaseId,e.path)}function rb(n,e){const t=qC(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be($C(t))}function HC(n,e){return Rv(n.databaseId,e)}function q9(n){const e=qC(n);return e.length===4?Lt.emptyPath():$C(e)}function b_(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $C(n){return wt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function JT(n,e,t){return{name:y_(n,e),fields:t.value.mapValue.fields}}function H9(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ze()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,p){return f.useProto3Json?(wt(p===void 0||typeof p=="string"),Bn.fromBase64String(p||"")):(wt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Bn.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const p=f.code===void 0?ge.UNKNOWN:VC(f.code);return new Oe(p,f.message||"")}(a);t=new zC(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rb(n,r.document.name),s=cs(r.document.updateTime),a=r.document.createTime?cs(r.document.createTime):$e.min(),l=new pr({mapValue:{fields:r.document.fields}}),h=$n.newFoundDocument(i,s,a,l),f=r.targetIds||[],p=r.removedTargetIds||[];t=new A0(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rb(n,r.document),s=r.readTime?cs(r.readTime):$e.min(),a=$n.newNoDocument(i,s),l=r.removedTargetIds||[];t=new A0([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rb(n,r.document),s=r.removedTargetIds||[];t=new A0([],s,i,null)}else{if(!("filter"in e))return ze();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new M9(i,s),l=r.targetId;t=new UC(l,a)}}return t}function $9(n,e){let t;if(e instanceof vd)t={update:JT(n,e.key,e.value)};else if(e instanceof Sv)t={delete:y_(n,e.key)};else if(e instanceof Ua)t={update:JT(n,e.key,e.data),updateMask:eO(e.fieldMask)};else{if(!(e instanceof I9))return ze();t={verify:y_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof _m)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vm)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw ze()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:j9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ze()}(n,e.precondition)),t}function G9(n,e){return n&&n.length>0?(wt(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?cs(i.updateTime):cs(s);return a.isEqual($e.min())&&(a=cs(s)),new A9(a,i.transformResults||[])}(t,e))):[]}function K9(n,e){return{documents:[HC(n,e.path)]}}function W9(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HC(n,i);const s=function(f){if(f.length!==0)return KC(ps.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:ec(_.field),direction:X9(_.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=m_(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:t,parent:i}}function Q9(n){let e=q9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(r===1);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(y){const _=GC(y);return _ instanceof ps&&EC(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(_=>function(w){return new bm(tc(w.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(_))}(t.orderBy));let l=null;t.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,eg(_)?null:_}(t.limit));let h=null;t.startAt&&(h=function(y){const _=!!y.before,v=y.values||[];return new ym(v,_)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const _=!y.before,v=y.values||[];return new ym(v,_)}(t.endAt)),d9(e,i,a,s,l,"F",h,f)}function Y9(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=tc(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=tc(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tc(t.unaryFilter.field);return fn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=tc(t.unaryFilter.field);return fn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ze()}}(n):n.fieldFilter!==void 0?function(t){return fn.create(tc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ze()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ps.create(t.compositeFilter.filters.map(r=>GC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ze()}}(t.compositeFilter.op))}(n):ze()}function X9(n){return F9[n]}function Z9(n){return V9[n]}function J9(n){return U9[n]}function ec(n){return{fieldPath:n.canonicalString()}}function tc(n){return Pn.fromServerFormat(n.fieldPath)}function KC(n){return n instanceof fn?function(t){if(t.op==="=="){if(UT(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NAN"}};if(VT(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UT(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NOT_NAN"}};if(VT(t.value))return{unaryFilter:{field:ec(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ec(t.field),op:Z9(t.op),value:t.value}}}(n):n instanceof ps?function(t){const r=t.getFilters().map(i=>KC(i));return r.length===1?r[0]:{compositeFilter:{op:J9(t.op),filters:r}}}(n):ze()}function eO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t,r,i,s=$e.min(),a=$e.min(),l=Bn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=h}withSequenceNumber(e){return new pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.Tt=e}}function nO(n){const e=Q9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?p_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Tn=new iO}addToCollectionParentIndex(e,t){return this.Tn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Ra.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class iO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(Lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QC=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(QC,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Ic(0)}static Un(){return new Ic(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="LruGarbageCollector",sO=1048576;function nS([n,e],[t,r]){const i=at(n,t);return i===0?at(e,r):i}class oO{constructor(e){this.Hn=e,this.buffer=new pn(nS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Te(tS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hc(t)?Te(tS,"Ignoring IndexedDB error during garbage collection: ",t):await qc(t)}await this.er(3e5)})}}class uO{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return de.resolve(Jm.ae);const r=new oO(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(eS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,a,l,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,l=Date.now(),this.removeTargets(e,r,t))).next(y=>(s=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Zl()<=it.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(h-l)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function lO(n,e){return new uO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.changes=new Zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vf(r.mutation,i,Mr.empty(),dn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,t,r=st()){const i=Cu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=ff();return s.forEach((l,h)=>{a=a.insert(l,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Cu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,st()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,r,i){let s=uo();const a=Ff(),l=function(){return Ff()}();return t.forEach((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Ua)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),Vf(p.mutation,f,p.mutation.getFieldMask(),dn.now())):a.set(f.key,Mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((f,p)=>a.set(f,p)),t.forEach((f,p)=>{var y;return l.set(f,new hO(p,(y=a.get(f))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Ff();let i=new Ut((a,l)=>a-l),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||Mr.empty();p=l.applyToLocalView(f,p),r.set(h,p);const y=(i.get(l.batchId)||st()).add(h);i=i.insert(l.batchId,y)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const h=l.getNext(),f=h.key,p=h.value,y=IC();p.forEach(_=>{if(!s.has(_)){const v=BC(t.get(_),r.get(_));v!==null&&y.set(_,v),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return de.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return Be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p9(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):de.resolve(Cu());let l=Zf,h=s;return a.next(f=>de.forEach(f,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{h=h.insert(p,_)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,h,f,st())).next(p=>({batchId:l,changes:RC(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let i=ff();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=ff();return this.indexManager.getCollectionParents(e,s).next(l=>de.forEach(l,h=>{const f=function(y,_){return new ng(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(p=>{p.forEach((y,_)=>{a=a.insert(y,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,$n.newInvalidDocument(p)))});let l=ff();return a.forEach((h,f)=>{const p=s.get(h);p!==void 0&&Vf(p.mutation,f,Mr.empty(),dn.now()),sg(t,f)&&(l=l.insert(h,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return de.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:cs(i.createTime)}}(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:nO(i.bundledQuery),readTime:cs(i.readTime)}}(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.overlays=new Ut(Be.comparator),this.Rr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cu();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Cu(),s=t.length+1,a=new Be(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const h=l.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ut((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=Cu(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const l=Cu(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,p)=>l.set(f,p)),!(l.size()>=i)););return de.resolve(l)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new N9(t,r));let s=this.Rr.get(t);s===void 0&&(s=st(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.Vr=new pn(wn.mr),this.gr=new pn(wn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new wn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new wn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new Be(new Lt([])),r=new wn(t,e),i=new wn(t,e+1),s=[];return this.gr.forEachInRange([r,i],a=>{this.wr(a),s.push(a.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Be(new Lt([])),r=new wn(t,e),i=new wn(t,e+1);let s=st();return this.gr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new wn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Be.comparator(e.key,t.key)||at(e.Cr,t.Cr)}static pr(e,t){return at(e.Cr,t.Cr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new pn(wn.mr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new D9(s,t,r,i);this.mutationQueue.push(a);for(const l of i)this.Mr=this.Mr.add(new wn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(a)}lookupMutationBatch(e,t){return de.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?vv:this.Fr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new wn(t,0),i=new wn(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],a=>{const l=this.Or(a.Cr);s.push(l)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(at);return t.forEach(i=>{const s=new wn(i,0),a=new wn(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],l=>{r=r.add(l.Cr)})}),de.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const a=new wn(new Be(s),0);let l=new pn(at);return this.Mr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(h.Cr)),!0)},a),de.resolve(this.Br(l))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){wt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return de.forEach(t.mutations,i=>{const s=new wn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new wn(t,0),i=this.Mr.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.kr=e,this.docs=function(){return new Ut(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=uo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$n.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=uo();const a=t.path,l=new Be(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||$M(HM(p),r)<=0||(i.has(p.key)||sg(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ze()}qr(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bO(this)}getSize(e){return de.resolve(this.size)}}class bO extends cO{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.persistence=e,this.Qr=new Zu(t=>wv(t),kv),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Iv,this.targetCount=0,this.Ur=Ic.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),de.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.zn(t),de.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Jm(0),this.zr=!1,this.zr=!0,this.jr=new mO,this.referenceDelegate=e(this),this.Hr=new _O(this),this.indexManager=new rO,this.remoteDocumentCache=function(i){return new yO(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new tO(t),this.Yr=new dO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new gO(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const i=new vO(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return de.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class vO extends KM{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.ti=new Iv,this.ni=null}static ri(e){return new Dv(e)}get ii(){if(this.ni)return this.ni;throw ze()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),de.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ii,r=>{const i=Be.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,$e.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return de.or([()=>de.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Em{constructor(e,t){this.persistence=e,this.oi=new Zu(r=>YM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lO(this,t)}static ri(e,t){return new Em(e,t)}Zr(){}Xr(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return de.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?de.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,a=>this.ar(e,a,t).next(l=>{l||(r++,s.removeEntry(a,$e.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),de.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=k0(e.data.value)),t}ar(e,t,r){return de.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=st(),i=st();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Nv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return y8()?8:WM(Wn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new xO;return this._s(e,t,a).next(l=>{if(s.result=l,this.Xi)return this.us(e,t,a,l.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Zl()<=it.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),de.resolve()):(Zl()<=it.DEBUG&&Te("QueryEngine","Query:",Jl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Zl()<=it.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(t))):de.resolve())}rs(e,t){if(HT(t))return de.resolve(null);let r=ls(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=p_(t,null,"F"),r=ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=st(...s);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.cs(t,l);return this.ls(t,f,a,h.readTime)?this.rs(e,p_(t,null,"F")):this.hs(e,f,t,h)}))})))}ss(e,t,r,i){return HT(t)||i.isEqual($e.min())?de.resolve(null):this.ns.getDocuments(e,r).next(s=>{const a=this.cs(t,s);return this.ls(t,a,r,i)?de.resolve(null):(Zl()<=it.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jl(t)),this.hs(e,a,t,qM(i,Zf)).next(l=>l))})}cs(e,t){let r=new pn(AC(e));return t.forEach((i,s)=>{sg(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return Zl()<=it.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Jl(t)),this.ns.getDocumentsMatchingQuery(e,t,Ra.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="LocalStore",wO=3e8;class kO{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Ut(at),this.Is=new Zu(s=>wv(s),kv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function TO(n,e,t,r){return new kO(n,e,t,r)}async function XC(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let h=st();for(const f of i){a.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of s){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Rs:f,removedBatchIds:a,addedBatchIds:l}))})})}function SO(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(l,h,f,p){const y=f.batch,_=y.keys();let v=de.resolve();return _.forEach(w=>{v=v.next(()=>p.getEntry(h,w)).next(R=>{const D=f.docVersions.get(w);wt(D!==null),R.version.compareTo(D)<0&&(y.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(h,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=st();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(h=h.add(l.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZC(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function AO(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const l=[];e.targetChanges.forEach((p,y)=>{const _=i.get(y);if(!_)return;l.push(t.Hr.removeMatchingKeys(s,p.removedDocuments,y).next(()=>t.Hr.addMatchingKeys(s,p.addedDocuments,y)));let v=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?v=v.withResumeToken(Bn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(y,v),function(R,D,V){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=wO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(_,v,p)&&l.push(t.Hr.updateTargetData(s,v))});let h=uo(),f=st();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(CO(s,a,e.documentUpdates).next(p=>{h=p.Vs,f=p.fs})),!r.isEqual($e.min())){const p=t.Hr.getLastRemoteSnapshotVersion(s).next(y=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return de.waitFor(l).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,f)).next(()=>h)}).then(s=>(t.Ts=i,s))}function CO(n,e,t){let r=st(),i=st();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=uo();return t.forEach((l,h)=>{const f=s.get(l);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),h.isNoDocument()&&h.version.isEqual($e.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Te(Mv,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",h.version)}),{Vs:a,fs:i}})}function RO(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IO(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):t.Hr.allocateTargetId(r).next(a=>(i=new pa(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function __(n,e,t){const r=Qe(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Hc(a))throw a;Te(Mv,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function rS(n,e,t){const r=Qe(n);let i=$e.min(),s=st();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,p){const y=Qe(h),_=y.Is.get(p);return _!==void 0?de.resolve(y.Ts.get(_)):y.Hr.getTargetData(f,p)}(r,a,ls(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(a,l.targetId).next(h=>{s=h})}).next(()=>r.Ps.getDocumentsMatchingQuery(a,e,t?i:$e.min(),t?s:st())).next(l=>(DO(r,g9(e),l),{documents:l,gs:s})))}function DO(n,e,t){let r=n.Es.get(e)||$e.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class iS{constructor(){this.activeTargetIds=E9()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(){this.ho=new iS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new iS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="ConnectivityMonitor";class oS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Te(sS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Te(sS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p0=null;function v_(){return p0===null?p0=function(){return 268435456+Math.round(2147483648*Math.random())}():p0++,"0x"+p0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="RestConnection",OO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===mm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,s){const a=v_(),l=this.So(e,t.toUriEncodedString());Te(ib,`Sending RPC '${e}' ${a}:`,l,r);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,i,s),this.vo(e,l,h,r).then(f=>(Te(ib,`Received RPC '${e}' ${a}: `,f),f),f=>{throw kc(ib,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Co(e,t,r,i,s,a){return this.bo(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}So(e,t){const r=OO[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class BO extends LO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=v_();return new Promise((a,l)=>{const h=new rC;h.setWithCredentials(!0),h.listenOnce(iC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case w0.NO_ERROR:const p=h.getResponseJson();Te(jn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case w0.TIMEOUT:Te(jn,`RPC '${e}' ${s} timed out`),l(new Oe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case w0.HTTP_ERROR:const y=h.getStatus();if(Te(jn,`RPC '${e}' ${s} failed with status:`,y,"response text:",h.getResponseText()),y>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_==null?void 0:_.error;if(v&&v.status&&v.message){const w=function(D){const V=D.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(V)>=0?V:ge.UNKNOWN}(v.status);l(new Oe(w,v.message))}else l(new Oe(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Oe(ge.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{Te(jn,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Te(jn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",f,r,15)})}Wo(e,t,r){const i=v_(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=aC(),l=oC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=s.join("");Te(jn,`Creating RPC '${e}' stream ${i}: ${p}`,h);const y=a.createWebChannel(p,h);let _=!1,v=!1;const w=new PO({Fo:D=>{v?Te(jn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(Te(jn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),Te(jn,`RPC '${e}' stream ${i} sending:`,D),y.send(D))},Mo:()=>y.close()}),R=(D,V,W)=>{D.listen(V,G=>{try{W(G)}catch(te){setTimeout(()=>{throw te},0)}})};return R(y,hf.EventType.OPEN,()=>{v||(Te(jn,`RPC '${e}' stream ${i} transport opened.`),w.Qo())}),R(y,hf.EventType.CLOSE,()=>{v||(v=!0,Te(jn,`RPC '${e}' stream ${i} transport closed`),w.Ko())}),R(y,hf.EventType.ERROR,D=>{v||(v=!0,kc(jn,`RPC '${e}' stream ${i} transport errored:`,D),w.Ko(new Oe(ge.UNAVAILABLE,"The operation could not be completed")))}),R(y,hf.EventType.MESSAGE,D=>{var V;if(!v){const W=D.data[0];wt(!!W);const G=W,te=(G==null?void 0:G.error)||((V=G[0])===null||V===void 0?void 0:V.error);if(te){Te(jn,`RPC '${e}' stream ${i} received error:`,te);const Y=te.status;let $=function(N){const F=nn[N];if(F!==void 0)return VC(F)}(Y),U=te.message;$===void 0&&($=ge.INTERNAL,U="Unknown error status: "+Y+" with message "+te.message),v=!0,w.Ko(new Oe($,U)),y.close()}else Te(jn,`RPC '${e}' stream ${i} received:`,W),w.Uo(W)}}),R(l,sC.STAT_EVENT,D=>{D.stat===l_.PROXY?Te(jn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===l_.NOPROXY&&Te(jn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function sb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(n){return new z9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="PersistentStream";class e6{constructor(e,t,r,i,s,a,l,h){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new JC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ao(t.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new Oe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Te(aS,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Te(aS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FO extends e6{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=H9(this.serializer,e),r=function(s){if(!("targetChange"in s))return $e.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?$e.min():a.readTime?cs(a.readTime):$e.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=b_(this.serializer),t.addTarget=function(s,a){let l;const h=a.target;if(l=d_(h)?{documents:K9(s,h)}:{query:W9(s,h).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=jC(s,a.resumeToken);const f=m_(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo($e.min())>0){l.readTime=xm(s,a.snapshotVersion.toTimestamp());const f=m_(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=Y9(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=b_(this.serializer),t.removeTarget=e,this.I_(t)}}class VO extends e6{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return wt(!!e.streamToken),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=G9(e.writeResults,e.commitTime),r=cs(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=b_(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$9(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{}class zO extends UO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.bo(e,g_(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Oe(ge.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,g_(t,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(ge.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ao(t),this.N_=!1):Te("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="RemoteStore";class qO{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(a=>{r.enqueueAndForget(async()=>{Ju(this)&&(Te(Hu,"Restarting streams for network reachability change."),await async function(h){const f=Qe(h);f.W_.add(4),await Ed(f),f.j_.set("Unknown"),f.W_.delete(4),await cg(f)}(this))})}),this.j_=new jO(r,i)}}async function cg(n){if(Ju(n))for(const e of n.G_)await e(!0)}async function Ed(n){for(const e of n.G_)await e(!1)}function t6(n,e){const t=Qe(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Bv(t)?Pv(t):$c(t).c_()&&Lv(t,e))}function Ov(n,e){const t=Qe(n),r=$c(t);t.U_.delete(e),r.c_()&&n6(t,e),t.U_.size===0&&(r.c_()?r.P_():Ju(t)&&t.j_.set("Unknown"))}function Lv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$c(n).y_(e)}function n6(n,e){n.H_.Ne(e),$c(n).w_(e)}function Pv(n){n.H_=new B9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),$c(n).start(),n.j_.B_()}function Bv(n){return Ju(n)&&!$c(n).u_()&&n.U_.size>0}function Ju(n){return Qe(n).W_.size===0}function r6(n){n.H_=void 0}async function HO(n){n.j_.set("Online")}async function $O(n){n.U_.forEach((e,t)=>{Lv(n,e)})}async function GO(n,e){r6(n),Bv(n)?(n.j_.q_(e),Pv(n)):n.j_.set("Unknown")}async function KO(n,e,t){if(n.j_.set("Online"),e instanceof zC&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.U_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.U_.delete(l),i.H_.removeTarget(l))}(n,e)}catch(r){Te(Hu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wm(n,r)}else if(e instanceof A0?n.H_.We(e):e instanceof UC?n.H_.Ze(e):n.H_.je(e),!t.isEqual($e.min()))try{const r=await ZC(n.localStore);t.compareTo(r)>=0&&await function(s,a){const l=s.H_.ot(a);return l.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.U_.get(f);p&&s.U_.set(f,p.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,f)=>{const p=s.U_.get(h);if(!p)return;s.U_.set(h,p.withResumeToken(Bn.EMPTY_BYTE_STRING,p.snapshotVersion)),n6(s,h);const y=new pa(p.target,h,f,p.sequenceNumber);Lv(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){Te(Hu,"Failed to raise snapshot:",r),await wm(n,r)}}async function wm(n,e,t){if(!Hc(e))throw e;n.W_.add(1),await Ed(n),n.j_.set("Offline"),t||(t=()=>ZC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Te(Hu,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await cg(n)})}function i6(n,e){return e().catch(t=>wm(n,t,e))}async function hg(n){const e=Qe(n),t=Ma(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:vv;for(;WO(e);)try{const i=await RO(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,QO(e,i)}catch(i){await wm(e,i)}s6(e)&&o6(e)}function WO(n){return Ju(n)&&n.K_.length<10}function QO(n,e){n.K_.push(e);const t=Ma(n);t.c_()&&t.b_&&t.S_(e.mutations)}function s6(n){return Ju(n)&&!Ma(n).u_()&&n.K_.length>0}function o6(n){Ma(n).start()}async function YO(n){Ma(n).C_()}async function XO(n){const e=Ma(n);for(const t of n.K_)e.S_(t.mutations)}async function ZO(n,e,t){const r=n.K_.shift(),i=Av.from(r,e,t);await i6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await hg(n)}async function JO(n,e){e&&Ma(n).b_&&await async function(r,i){if(function(a){return O9(a)&&a!==ge.ABORTED}(i.code)){const s=r.K_.shift();Ma(r).h_(),await i6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hg(r)}}(n,e),s6(n)&&o6(n)}async function uS(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Te(Hu,"RemoteStore received new credentials");const r=Ju(t);t.W_.add(3),await Ed(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await cg(t)}async function e7(n,e){const t=Qe(n);e?(t.W_.delete(2),await cg(t)):e||(t.W_.add(2),await Ed(t),t.j_.set("Unknown"))}function $c(n){return n.J_||(n.J_=function(t,r,i){const s=Qe(t);return s.M_(),new FO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:HO.bind(null,n),No:$O.bind(null,n),Lo:GO.bind(null,n),p_:KO.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Bv(n)?Pv(n):n.j_.set("Unknown")):(await n.J_.stop(),r6(n))})),n.J_}function Ma(n){return n.Y_||(n.Y_=function(t,r,i){const s=Qe(t);return s.M_(),new VO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:YO.bind(null,n),Lo:JO.bind(null,n),D_:XO.bind(null,n),v_:ZO.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await hg(n)):(await n.Y_.stop(),n.K_.length>0&&(Te(Hu,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,l=new Fv(e,t,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(n,e){if(ao("AsyncQueue",`${e}: ${n}`),Hc(n))return new Oe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{static emptySet(e){return new dc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=ff(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new dc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.Z_=new Ut(Be.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ze():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Dc{constructor(e,t,r,i,s,a,l,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Dc(e,t,dc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class n7{constructor(){this.queries=cS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Qe(t),s=i.queries;i.queries=cS(),s.forEach((a,l)=>{for(const h of l.ta)h.onError(r)})})(this,new Oe(ge.ABORTED,"Firestore shutting down"))}}function cS(){return new Zu(n=>SC(n),ig)}async function Uv(n,e){const t=Qe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new t7,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const l=Vv(a,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&jv(t)}async function zv(n,e){const t=Qe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.ta.indexOf(e);a>=0&&(s.ta.splice(a,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function r7(n,e){const t=Qe(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const l of a.ta)l.oa(i)&&(r=!0);a.ea=i}}r&&jv(t)}function i7(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function jv(n){n.ia.forEach(e=>{e.next()})}var x_,hS;(hS=x_||(x_={}))._a="default",hS.Cache="cache";class qv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==x_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.key=e}}class u6{constructor(e){this.key=e}}class s7{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=st(),this.mutatedKeys=st(),this.ya=AC(e),this.wa=new dc(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new lS,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,l=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,y)=>{const _=i.get(p),v=sg(this.query,y)?y:null,w=!!_&&this.mutatedKeys.has(_.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;_&&v?_.data.isEqual(v.data)?w!==R&&(r.track({type:3,doc:v}),D=!0):this.va(_,v)||(r.track({type:2,doc:v}),D=!0,(h&&this.ya(v,h)>0||f&&this.ya(v,f)<0)&&(l=!0)):!_&&v?(r.track({type:0,doc:v}),D=!0):_&&!v&&(r.track({type:1,doc:_}),D=!0,(h||f)&&(l=!0)),D&&(v?(a=a.add(v),s=R?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{wa:a,Da:r,ls:l,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((p,y)=>function(v,w){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return R(v)-R(w)}(p.type,y.type)||this.ya(p.doc,y.doc)),this.Ca(r),i=i!=null&&i;const l=t&&!i?this.Fa():[],h=this.pa.size===0&&this.current&&!i?1:0,f=h!==this.ga;return this.ga=h,a.length!==0||f?{snapshot:new Dc(this.query,e.wa,s,a,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new lS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=st(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new u6(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new a6(r))}),t}Oa(e){this.fa=e.gs,this.pa=st();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Dc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Hv="SyncEngine";class o7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class a7{constructor(e){this.key=e,this.Ba=!1}}class u7{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Zu(l=>SC(l),ig),this.qa=new Map,this.Qa=new Set,this.$a=new Ut(Be.comparator),this.Ka=new Map,this.Ua=new Iv,this.Wa={},this.Ga=new Map,this.za=Ic.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function l7(n,e,t=!0){const r=p6(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await l6(r,e,t,!0),i}async function c7(n,e){const t=p6(n);await l6(t,e,!0,!1)}async function l6(n,e,t,r){const i=await IO(n.localStore,ls(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await h7(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&t6(n.remoteStore,i),l}async function h7(n,e,t,r,i){n.Ha=(y,_,v)=>async function(R,D,V,W){let G=D.view.Sa(V);G.ls&&(G=await rS(R.localStore,D.query,!1).then(({documents:U})=>D.view.Sa(U,G)));const te=W&&W.targetChanges.get(D.targetId),Y=W&&W.targetMismatches.get(D.targetId)!=null,$=D.view.applyChanges(G,R.isPrimaryClient,te,Y);return dS(R,D.targetId,$.Ma),$.snapshot}(n,y,_,v);const s=await rS(n.localStore,e,!0),a=new s7(e,s.gs),l=a.Sa(s.documents),h=xd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(l,n.isPrimaryClient,h);dS(n,t,f.Ma);const p=new o7(e,t,a);return n.ka.set(e,p),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),f.snapshot}async function f7(n,e,t){const r=Qe(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(a=>!ig(a,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await __(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ov(r.remoteStore,i.targetId),E_(r,i.targetId)}).catch(qc)):(E_(r,i.targetId),await __(r.localStore,i.targetId,!0))}async function d7(n,e){const t=Qe(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ov(t.remoteStore,r.targetId))}async function p7(n,e,t){const r=x7(n);try{const i=await function(a,l){const h=Qe(a),f=dn.now(),p=l.reduce((v,w)=>v.add(w.key),st());let y,_;return h.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=uo(),R=st();return h.ds.getEntries(v,p).next(D=>{w=D,w.forEach((V,W)=>{W.isValidDocument()||(R=R.add(V))})}).next(()=>h.localDocuments.getOverlayedDocuments(v,w)).next(D=>{y=D;const V=[];for(const W of l){const G=R9(W,y.get(W.key).overlayedDocument);G!=null&&V.push(new Ua(W.key,G,_C(G.value.mapValue),ai.exists(!0)))}return h.mutationQueue.addMutationBatch(v,f,V,l)}).next(D=>{_=D;const V=D.applyToLocalDocumentSet(y,R);return h.documentOverlayCache.saveOverlays(v,D.batchId,V)})}).then(()=>({batchId:_.batchId,changes:RC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let f=a.Wa[a.currentUser.toKey()];f||(f=new Ut(at)),f=f.insert(l,h),a.Wa[a.currentUser.toKey()]=f}(r,i.batchId,t),await wd(r,i.changes),await hg(r.remoteStore)}catch(i){const s=Vv(i,"Failed to persist write");t.reject(s)}}async function c6(n,e){const t=Qe(n);try{const r=await AO(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Ka.get(s);a&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ba=!0:i.modifiedDocuments.size>0?wt(a.Ba):i.removedDocuments.size>0&&(wt(a.Ba),a.Ba=!1))}),await wd(t,r,e)}catch(r){await qc(r)}}function fS(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,a)=>{const l=a.view.sa(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const h=Qe(a);h.onlineState=l;let f=!1;h.queries.forEach((p,y)=>{for(const _ of y.ta)_.sa(l)&&(f=!0)}),f&&jv(h)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m7(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let a=new Ut(Be.comparator);a=a.insert(s,$n.newNoDocument(s,$e.min()));const l=st().add(s),h=new ug($e.min(),new Map,new Ut(at),a,l);await c6(r,h),r.$a=r.$a.remove(s),r.Ka.delete(e),$v(r)}else await __(r.localStore,e,!1).then(()=>E_(r,e,t)).catch(qc)}async function g7(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=await SO(t.localStore,e);f6(t,r,null),h6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await wd(t,i)}catch(i){await qc(i)}}async function y7(n,e,t){const r=Qe(n);try{const i=await function(a,l){const h=Qe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return h.mutationQueue.lookupMutationBatch(f,l).next(y=>(wt(y!==null),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>h.localDocuments.getDocuments(f,p))})}(r.localStore,e);f6(r,e,t),h6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await wd(r,i)}catch(i){await qc(i)}}function h6(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function f6(n,e,t){const r=Qe(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function E_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||d6(n,r)})}function d6(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Ov(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),$v(n))}function dS(n,e,t){for(const r of t)r instanceof a6?(n.Ua.addReference(r.key,e),b7(n,r)):r instanceof u6?(Te(Hv,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||d6(n,r.key)):ze()}function b7(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(Te(Hv,"New document in limbo: "+t),n.Qa.add(r),$v(n))}function $v(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Be(Lt.fromString(e)),r=n.za.next();n.Ka.set(r,new a7(t)),n.$a=n.$a.insert(t,r),t6(n.remoteStore,new pa(ls(rg(t.path)),r,"TargetPurposeLimboResolution",Jm.ae))}}async function wd(n,e,t){const r=Qe(n),i=[],s=[],a=[];r.ka.isEmpty()||(r.ka.forEach((l,h)=>{a.push(r.Ha(h,e,t).then(f=>{var p;if((f||t)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){i.push(f);const y=Nv.Yi(h.targetId,f);s.push(y)}}))}),await Promise.all(a),r.La.p_(i),await async function(h,f){const p=Qe(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>de.forEach(f,_=>de.forEach(_.Hi,v=>p.persistence.referenceDelegate.addReference(y,_.targetId,v)).next(()=>de.forEach(_.Ji,v=>p.persistence.referenceDelegate.removeReference(y,_.targetId,v)))))}catch(y){if(!Hc(y))throw y;Te(Mv,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const v=p.Ts.get(_),w=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(w);p.Ts=p.Ts.insert(_,R)}}}(r.localStore,s))}async function _7(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Te(Hv,"User change. New user:",e.toKey());const r=await XC(t.localStore,e);t.currentUser=e,function(s,a){s.Ga.forEach(l=>{l.forEach(h=>{h.reject(new Oe(ge.CANCELLED,a))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wd(t,r.Rs)}}function v7(n,e){const t=Qe(n),r=t.Ka.get(e);if(r&&r.Ba)return st().add(r.key);{let i=st();const s=t.qa.get(e);if(!s)return i;for(const a of s){const l=t.ka.get(a);i=i.unionWith(l.view.ba)}return i}}function p6(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=c6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m7.bind(null,e),e.La.p_=r7.bind(null,e.eventManager),e.La.Ja=i7.bind(null,e.eventManager),e}function x7(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y7.bind(null,e),e}class km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return TO(this.persistence,new EO,e.initialUser,this.serializer)}Xa(e){return new YC(Dv.ri,this.serializer)}Za(e){return new NO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}km.provider={build:()=>new km};class E7 extends km{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){wt(this.persistence.referenceDelegate instanceof Em);const r=this.persistence.referenceDelegate.garbageCollector;return new aO(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new YC(r=>Em.ri(r,t),this.serializer)}}class w_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_7.bind(null,this.syncEngine),await e7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n7}()}createDatastore(e){const t=lg(e.databaseInfo.databaseId),r=function(s){return new BO(s)}(e.databaseInfo);return function(s,a,l,h){return new zO(s,a,l,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,l){return new qO(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>fS(this.syncEngine,t,0),function(){return oS.D()?new oS:new MO}())}createSyncEngine(e,t){return function(i,s,a,l,h,f,p){const y=new u7(i,s,a,l,h,f);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Qe(i);Te(Hu,"RemoteStore shutting down."),s.W_.add(5),await Ed(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}w_.provider={build:()=>new w_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ao("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="FirestoreClient";class w7{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Hn.UNAUTHENTICATED,this.clientId=lC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Te(Oa,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Te(Oa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ob(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function pS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await k7(n);Te(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uS(e.remoteStore,i)),n._onlineComponents=e}async function k7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Oa,"Using user provided OfflineComponentProvider");try{await ob(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;kc("Error using user provided cache. Falling back to memory cache: "+t),await ob(n,new km)}}else Te(Oa,"Using default OfflineComponentProvider"),await ob(n,new E7(void 0));return n._offlineComponents}async function m6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Oa,"Using user provided OnlineComponentProvider"),await pS(n,n._uninitializedComponentsProvider._online)):(Te(Oa,"Using default OnlineComponentProvider"),await pS(n,new w_))),n._onlineComponents}function T7(n){return m6(n).then(e=>e.syncEngine)}async function Tm(n){const e=await m6(n),t=e.eventManager;return t.onListen=l7.bind(null,e.syncEngine),t.onUnlisten=f7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d7.bind(null,e.syncEngine),t}function S7(n,e,t={}){const r=new no;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,f){const p=new Gv({next:_=>{p.su(),a.enqueueAndForget(()=>zv(s,y));const v=_.docs.has(l);!v&&_.fromCache?f.reject(new Oe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&h&&h.source==="server"?f.reject(new Oe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new qv(rg(l.path),p,{includeMetadataChanges:!0,Ta:!0});return Uv(s,y)}(await Tm(n),n.asyncQueue,e,t,r)),r.promise}function A7(n,e,t={}){const r=new no;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,l,h,f){const p=new Gv({next:_=>{p.su(),a.enqueueAndForget(()=>zv(s,y)),_.fromCache&&h.source==="server"?f.reject(new Oe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new qv(l,p,{includeMetadataChanges:!0,Ta:!0});return Uv(s,y)}(await Tm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(n,e,t){if(!t)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C7(n,e,t,r){if(e===!0&&r===!0)throw new Oe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gS(n){if(!Be.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yS(n){if(Be.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze()}function mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kv(n);throw new Oe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="firestore.googleapis.com",bS=!0;class _S{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b6,this.ssl=bS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sO)throw new Oe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _S({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _S(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LM;switch(r.type){case"firstParty":return new VM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mS.get(t);r&&(Te("ComponentProvider","Removing Datastore"),mS.delete(t),r.terminate())}(this),Promise.resolve()}}function R7(n,e,t,r={}){var i;const s=(n=mr(n,fg))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s.host!==b6&&s.host!==l&&kc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:r});if(!so(h,a)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Hn.MOCK_USER;else{f=YA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Oe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Hn(y)}n._authCredentials=new PM(new uC(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kd(this.firestore,e,this._query)}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Ea extends kd{constructor(e,t,r){super(e,t,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Be(e))}withConverter(e){return new Ea(this.firestore,e,this._path)}}function dg(n,e,...t){if(n=Wt(n),y6("collection","path",e),n instanceof fg){const r=Lt.fromString(e,...t);return yS(r),new Ea(n,null,r)}{if(!(n instanceof nr||n instanceof Ea))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return yS(r),new Ea(n.firestore,null,r)}}function lo(n,e,...t){if(n=Wt(n),arguments.length===1&&(e=lC.newId()),y6("doc","path",e),n instanceof fg){const r=Lt.fromString(e,...t);return gS(r),new nr(n,null,new Be(r))}{if(!(n instanceof nr||n instanceof Ea))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return gS(r),new nr(n.firestore,n instanceof Ea?n.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="AsyncQueue";class xS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new JC(this,"async_queue_retry"),this.bu=()=>{const r=sb();r&&Te(vS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=sb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=sb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new no;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Hc(e))throw e;Te(vS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw ao("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Fv.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&ze()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function ES(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class co extends fg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function I7(n,e){const t=typeof n=="object"?n:bv(),r=typeof n=="string"?n:mm,i=Zm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KA("firestore");s&&R7(i,...s)}return i}function pg(n){if(n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||D7(n),n._firestoreClient}function D7(n){var e,t,r;const i=n._freezeSettings(),s=function(l,h,f,p){return new JM(l,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,g6(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new w7(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const h=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nc(Bn.fromBase64String(e))}catch(t){throw new Oe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nc(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7=/^__.*__$/;class M7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class _6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function v6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class gg{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Sm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(v6(this.Lu)&&N7.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class O7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lg(e)}ju(e,t,r,i=!1){return new gg({Lu:e,methodName:t,zu:r,path:Pn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yv(n){const e=n._freezeSettings(),t=lg(n._databaseId);return new O7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function x6(n,e,t,r,i,s={}){const a=n.ju(s.merge||s.mergeFields?2:0,e,t,i);Jv("Data must be an object, but it was:",a,r);const l=w6(r,a);let h,f;if(s.merge)h=new Mr(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const y of s.mergeFields){const _=k_(e,y,t);if(!a.contains(_))throw new Oe(ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);T6(p,_)||p.push(_)}h=new Mr(p),f=a.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=a.fieldTransforms;return new M7(new pr(l),h,f)}class Sd extends Td{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}function E6(n,e,t){return new gg({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xv extends Td{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=E6(this,e,!0),r=this.Hu.map(s=>Gc(s,t)),i=new Cc(r);return new PC(e.path,i)}isEqual(e){return e instanceof Xv&&so(this.Hu,e.Hu)}}class Zv extends Td{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=E6(this,e,!0),r=this.Hu.map(s=>Gc(s,t)),i=new Rc(r);return new PC(e.path,i)}isEqual(e){return e instanceof Zv&&so(this.Hu,e.Hu)}}function L7(n,e,t,r){const i=n.ju(1,e,t);Jv("Data must be an object, but it was:",i,r);const s=[],a=pr.empty();Va(r,(h,f)=>{const p=ex(e,h,t);f=Wt(f);const y=i.Ku(p);if(f instanceof Sd)s.push(p);else{const _=Gc(f,y);_!=null&&(s.push(p),a.set(p,_))}});const l=new Mr(s);return new _6(a,l,i.fieldTransforms)}function P7(n,e,t,r,i,s){const a=n.ju(1,e,t),l=[k_(e,r,t)],h=[i];if(s.length%2!=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(k_(e,s[_])),h.push(s[_+1]);const f=[],p=pr.empty();for(let _=l.length-1;_>=0;--_)if(!T6(f,l[_])){const v=l[_];let w=h[_];w=Wt(w);const R=a.Ku(v);if(w instanceof Sd)f.push(v);else{const D=Gc(w,R);D!=null&&(f.push(v),p.set(v,D))}}const y=new Mr(f);return new _6(p,y,a.fieldTransforms)}function Gc(n,e){if(k6(n=Wt(n)))return Jv("Unsupported field value:",e,n),w6(n,e);if(n instanceof Td)return function(r,i){if(!v6(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let h=Gc(l,i.Uu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=dn.fromDate(r);return{timestampValue:xm(i.serializer,s)}}if(r instanceof dn){const s=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xm(i.serializer,s)}}if(r instanceof Wv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nc)return{bytesValue:jC(i.serializer,r._byteString)};if(r instanceof nr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qv)return function(a,l){return{mapValue:{fields:{[yC]:{stringValue:bC},[gm]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Wu("VectorValues must only contain numeric values.");return Tv(l.serializer,f)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Kv(r)}`)}(n,e)}function w6(n,e){const t={};return hC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Va(n,(r,i)=>{const s=Gc(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function k6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dn||n instanceof Wv||n instanceof Nc||n instanceof nr||n instanceof Td||n instanceof Qv)}function Jv(n,e,t){if(!k6(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Kv(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function k_(n,e,t){if((e=Wt(e))instanceof mg)return e._internalPath;if(typeof e=="string")return ex(n,e);throw Sm("Field path arguments must be of type string or ",n,!1,void 0,t)}const B7=new RegExp("[~\\*/\\[\\]]");function ex(n,e,t){if(e.search(B7)>=0)throw Sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mg(...e.split("."))._internalPath}catch{throw Sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sm(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new Oe(ge.INVALID_ARGUMENT,l+n+h)}function T6(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(A6("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class F7 extends S6{data(){return super.data()}}function A6(n,e){return typeof e=="string"?ex(n,e):e instanceof mg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Oe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V7{convertValue(e,t="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Va(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[gm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Zt(a.doubleValue));return new Qv(s)}convertGeoPoint(e){return new Wv(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jf(e));default:return null}}convertTimestamp(e){const t=Ia(e);return new dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);wt(WC(r));const i=new ed(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(t)||ao(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I6 extends S6{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new C0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(A6("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class C0 extends I6{data(e={}){return super.data(e)}}class D6{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new C0(this._firestore,this._userDataWriter,r.key,r,new pf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const h=new C0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new pf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const h=new C0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new pf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:U7(l.type),doc:h,oldIndex:f,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(n){n=mr(n,nr);const e=mr(n.firestore,co);return S7(pg(e),n._key).then(t=>O6(e,n,t))}class tx extends V7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function z7(n){n=mr(n,kd);const e=mr(n.firestore,co),t=pg(e),r=new tx(e);return C6(n._query),A7(t,n._query).then(i=>new D6(e,r,n,i))}function M6(n,e,t){n=mr(n,nr);const r=mr(n.firestore,co),i=R6(n.converter,e,t);return yg(r,[x6(Yv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ai.none())])}function nx(n,e,t,...r){n=mr(n,nr);const i=mr(n.firestore,co),s=Yv(i);let a;return a=typeof(e=Wt(e))=="string"||e instanceof mg?P7(s,"updateDoc",n._key,e,t,r):L7(s,"updateDoc",n._key,e),yg(i,[a.toMutation(n._key,ai.exists(!0))])}function j7(n){return yg(mr(n.firestore,co),[new Sv(n._key,ai.none())])}function q7(n,e){const t=mr(n.firestore,co),r=lo(n),i=R6(n.converter,e);return yg(t,[x6(Yv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ai.exists(!1))]).then(()=>r)}function H7(n,...e){var t,r,i;n=Wt(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||ES(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ES(e[a])){const y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let h,f,p;if(n instanceof nr)f=mr(n.firestore,co),p=rg(n._key.path),h={next:y=>{e[a]&&e[a](O6(f,n,y))},error:e[a+1],complete:e[a+2]};else{const y=mr(n,kd);f=mr(y.firestore,co),p=y._query;const _=new tx(f);h={next:v=>{e[a]&&e[a](new D6(f,_,y,v))},error:e[a+1],complete:e[a+2]},C6(n._query)}return function(_,v,w,R){const D=new Gv(R),V=new qv(v,D,w);return _.asyncQueue.enqueueAndForget(async()=>Uv(await Tm(_),V)),()=>{D.su(),_.asyncQueue.enqueueAndForget(async()=>zv(await Tm(_),V))}}(pg(f),p,l,h)}function yg(n,e){return function(r,i){const s=new no;return r.asyncQueue.enqueueAndForget(async()=>p7(await T7(r),i,s)),s.promise}(pg(n),e)}function O6(n,e,t){const r=t.docs.get(e._key),i=new tx(n);return new I6(n,i,e._key,r,new pf(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(){return new Sd("deleteField")}function L6(...n){return new Xv("arrayUnion",n)}function P6(...n){return new Zv("arrayRemove",n)}(function(e,t=!0){(function(i){jc=i})(Xu),ju(new Ca("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new co(new BM(r.getProvider("auth-internal")),new UM(a,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Oe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ed(f.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),us(CT,RT,e),us(CT,RT,"esm2017")})();var G7="firebase",K7="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(G7,K7,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebasestorage.googleapis.com",F6="storageBucket",W7=2*60*1e3,Q7=10*60*1e3,Y7=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt extends vs{constructor(e,t,r=0){super(ab(e),`Firebase Storage: ${t} (${ab(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ab(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ot;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function ab(n){return"storage/"+n}function rx(){const n="An unknown error occurred, please check the error payload for server response.";return new zt(Ot.UNKNOWN,n)}function X7(n){return new zt(Ot.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Z7(n){return new zt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function J7(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Ot.UNAUTHENTICATED,n)}function eL(){return new zt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tL(n){return new zt(Ot.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function V6(){return new zt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U6(){return new zt(Ot.CANCELED,"User canceled the upload/download.")}function nL(n){return new zt(Ot.INVALID_URL,"Invalid URL '"+n+"'.")}function rL(n){return new zt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function iL(){return new zt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+F6+"' property when initializing the app?")}function z6(){return new zt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sL(){return new zt(Ot.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function oL(){return new zt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aL(n){return new zt(Ot.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function T_(n){return new zt(Ot.INVALID_ARGUMENT,n)}function j6(){return new zt(Ot.APP_DELETED,"The Firebase app was deleted.")}function uL(n){return new zt(Ot.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uf(n,e){return new zt(Ot.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uf(n){throw new zt(Ot.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Or.makeFromUrl(e,t)}catch{return new Or(e,"")}if(r.path==="")return r;throw rL(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),h={bucket:1,path:3};function f(te){te.path_=decodeURIComponent(te.path)}const p="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",v=new RegExp(`^https?://${y}/${p}/b/${i}/o${_}`,"i"),w={bucket:1,path:3},R=t===B6?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",V=new RegExp(`^https?://${R}/${i}/${D}`,"i"),G=[{regex:l,indices:h,postModify:s},{regex:v,indices:w,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let te=0;te<G.length;te++){const Y=G[te],$=Y.regex.exec(e);if($){const U=$[Y.indices.bucket];let I=$[Y.indices.path];I||(I=""),r=new Or(U,I),Y.postModify(r);break}}if(r==null)throw nL(e);return r}}class lL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n,e,t){let r=1,i=null,s=null,a=!1,l=0;function h(){return l===2}let f=!1;function p(...D){f||(f=!0,e.apply(null,D))}function y(D){i=setTimeout(()=>{i=null,n(v,h())},D)}function _(){s&&clearTimeout(s)}function v(D,...V){if(f){_();return}if(D){_(),p.call(null,D,...V);return}if(h()||a){_(),p.call(null,D,...V);return}r<64&&(r*=2);let G;l===1?(l=2,G=0):G=(r+Math.random())*1e3,y(G)}let w=!1;function R(D){w||(w=!0,_(),!f&&(i!==null?(D||(l=2),clearTimeout(i),y(0)):D||(l=1)))}return y(0),s=setTimeout(()=>{a=!0,R(!0)},t),R}function hL(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(n){return n!==void 0}function dL(n){return typeof n=="function"}function pL(n){return typeof n=="object"&&!Array.isArray(n)}function bg(n){return typeof n=="string"||n instanceof String}function wS(n){return ix()&&n instanceof Blob}function ix(){return typeof Blob<"u"}function kS(n,e,t,r){if(r<e)throw T_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw T_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function q6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Nu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Nu||(Nu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t,r,i,s,a,l,h,f,p,y,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new m0(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const h=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Nu.NO_ERROR,h=s.getStatus();if(!l||H6(h,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Nu.ABORT;r(!1,new m0(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new m0(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(l,l.getResponse());fL(h)?s(h):s()}catch(h){a(h)}else if(l!==null){const h=rx();h.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,h)):a(h)}else if(i.canceled){const h=this.appDelete_?j6():U6();a(h)}else{const h=V6();a(h)}};this.canceled_?t(!1,new m0(!1,null,!0)):this.backoffId_=cL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class m0{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function gL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function yL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function _L(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function vL(n,e,t,r,i,s,a=!0){const l=q6(n.urlParams),h=n.url+l,f=Object.assign({},n.headers);return bL(f,e),gL(f,t),yL(f,s),_L(f,r),new mL(h,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EL(...n){const e=xL();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ix())return new Blob(n);throw new zt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){if(typeof atob>"u")throw aL("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ub{constructor(e,t){this.data=e,this.contentType=t||null}}function TL(n,e){switch(n){case rs.RAW:return new ub($6(e));case rs.BASE64:case rs.BASE64URL:return new ub(G6(n,e));case rs.DATA_URL:return new ub(AL(e),CL(e))}throw rx()}function $6(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function SL(n){let e;try{e=decodeURIComponent(n)}catch{throw Uf(rs.DATA_URL,"Malformed data URL.")}return $6(e)}function G6(n,e){switch(n){case rs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Uf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Uf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=kL(e)}catch(i){throw i.message.includes("polyfill")?i:Uf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class K6{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Uf(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=RL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function AL(n){const e=new K6(n);return e.base64?G6(rs.BASE64,e.rest):SL(e.rest)}function CL(n){return new K6(n).contentType}function RL(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){let r=0,i="";wS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(wS(this.data_)){const r=this.data_,i=wL(r,e,t);return i===null?null:new ua(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ua(r,!0)}}static getBlob(...e){if(ix()){const t=e.map(r=>r instanceof ua?r.data_:r);return new ua(EL.apply(null,t))}else{const t=e.map(a=>bg(a)?TL(rs.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)i[s++]=a[l]}),new ua(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n){let e;try{e=JSON.parse(n)}catch{return null}return pL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function DL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Q6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(n,e){return e}let tr=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||NL}},g0=null;function ML(n){return!bg(n)||n.length<2?n:Q6(n)}function Y6(){if(g0)return g0;const n=[];n.push(new tr("bucket")),n.push(new tr("generation")),n.push(new tr("metageneration")),n.push(new tr("name","fullPath",!0));function e(s,a){return ML(a)}const t=new tr("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new tr("size");return i.xform=r,n.push(i),n.push(new tr("timeCreated")),n.push(new tr("updated")),n.push(new tr("md5Hash",null,!0)),n.push(new tr("cacheControl",null,!0)),n.push(new tr("contentDisposition",null,!0)),n.push(new tr("contentEncoding",null,!0)),n.push(new tr("contentLanguage",null,!0)),n.push(new tr("contentType",null,!0)),n.push(new tr("metadata","customMetadata",!0)),g0=n,g0}function OL(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Or(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function LL(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return OL(r,n),r}function X6(n,e,t){const r=W6(e);return r===null?null:LL(n,r,t)}function PL(n,e,t,r){const i=W6(e);if(i===null||!bg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const p=n.bucket,y=n.fullPath,_="/b/"+a(p)+"/o/"+a(y),v=Ad(_,t,r),w=q6({alt:"media",token:f});return v+w})[0]}function Z6(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Kc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(n){if(!n)throw rx()}function sx(n,e){function t(r,i){const s=X6(n,i,e);return ro(s!==null),s}return t}function BL(n,e){function t(r,i){const s=X6(n,i,e);return ro(s!==null),PL(s,i,n.host,n._protocol)}return t}function Cd(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=eL():i=J7():t.getStatus()===402?i=Z7(n.bucket):t.getStatus()===403?i=tL(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function J6(n){const e=Cd(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=X7(n.path)),s.serverResponse=i.serverResponse,s}return t}function FL(n,e,t){const r=e.fullServerUrl(),i=Ad(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,l=new Kc(i,s,sx(n,t),a);return l.errorHandler=J6(e),l}function VL(n,e,t){const r=e.fullServerUrl(),i=Ad(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,l=new Kc(i,s,BL(n,t),a);return l.errorHandler=J6(e),l}function UL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function e4(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=UL(null,e)),r}function zL(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let G="";for(let te=0;te<2;te++)G=G+Math.random().toString().slice(2);return G}const h=l();a["Content-Type"]="multipart/related; boundary="+h;const f=e4(e,r,i),p=Z6(f,t),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+h+"--",v=ua.getBlob(y,r,_);if(v===null)throw z6();const w={name:f.fullPath},R=Ad(s,n.host,n._protocol),D="POST",V=n.maxUploadRetryTime,W=new Kc(R,D,sx(n,t),V);return W.urlParams=w,W.headers=a,W.body=v.uploadData(),W.errorHandler=Cd(e),W}class Am{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ox(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ro(!1)}return ro(!!t&&(e||["active"]).indexOf(t)!==-1),t}function jL(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a=e4(e,r,i),l={name:a.fullPath},h=Ad(s,n.host,n._protocol),f="POST",p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},y=Z6(a,t),_=n.maxUploadRetryTime;function v(R){ox(R);let D;try{D=R.getResponseHeader("X-Goog-Upload-URL")}catch{ro(!1)}return ro(bg(D)),D}const w=new Kc(h,f,v,_);return w.urlParams=l,w.headers=p,w.body=y,w.errorHandler=Cd(e),w}function qL(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function s(f){const p=ox(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ro(!1)}y||ro(!1);const _=Number(y);return ro(!isNaN(_)),new Am(_,r.size(),p==="final")}const a="POST",l=n.maxUploadRetryTime,h=new Kc(t,a,s,l);return h.headers=i,h.errorHandler=Cd(e),h}const TS=256*1024;function HL(n,e,t,r,i,s,a,l){const h=new Am(0,0);if(a?(h.current=a.current,h.total=a.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw sL();const f=h.total-h.current;let p=f;i>0&&(p=Math.min(p,i));const y=h.current,_=y+p;let v="";p===0?v="finalize":f===p?v="upload, finalize":v="upload";const w={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${h.current}`},R=r.slice(y,_);if(R===null)throw z6();function D(te,Y){const $=ox(te,["active","final"]),U=h.current+p,I=r.size();let N;return $==="final"?N=sx(e,s)(te,Y):N=null,new Am(U,I,$==="final",N)}const V="POST",W=e.maxUploadRetryTime,G=new Kc(t,V,D,W);return G.headers=w,G.body=R.uploadData(),G.progressCallback=l||null,G.errorHandler=Cd(n),G}const dr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lb(n){switch(n){case"running":case"pausing":case"canceling":return dr.RUNNING;case"paused":return dr.PAUSED;case"success":return dr.SUCCESS;case"canceled":return dr.CANCELED;case"error":return dr.ERROR;default:return dr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,t,r){if(dL(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class GL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw uf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KL extends GL{initXhr(){this.xhr_.responseType="text"}}function nc(){return new KL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Y6(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ot.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(H6(i.status,[]))if(s)i=V6();else{this.sleepTime=Math.max(this.sleepTime*2,Y7),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ot.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=jL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,nc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=qL(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,nc,t,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=TS*this._chunkMultiplier,t=new Am(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=HL(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const l=this._ref.storage._makeRequest(a,nc,i,s,!1);this._request=l,l.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){TS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,nc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=zL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,nc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=U6(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=lb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new $L(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(lb(this._state)){case dr.SUCCESS:Wl(this._resolve.bind(null,this.snapshot))();break;case dr.CANCELED:case dr.ERROR:const t=this._reject;Wl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lb(this._state)){case dr.RUNNING:case dr.PAUSED:e.next&&Wl(e.next.bind(e,this.snapshot))();break;case dr.SUCCESS:e.complete&&Wl(e.complete.bind(e))();break;case dr.CANCELED:case dr.ERROR:e.error&&Wl(e.error.bind(e,this._error))();break;default:e.error&&Wl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this._service=e,t instanceof Or?this._location=t:this._location=Or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $u(e,t)}get root(){const e=new Or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q6(this._location.path)}get storage(){return this._service}get parent(){const e=IL(this._location.path);if(e===null)return null;const t=new Or(this._location.bucket,e);return new $u(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw uL(e)}}function QL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WL(n,new ua(e),t)}function YL(n){n._throwIfRoot("getDownloadURL");const e=VL(n.storage,n._location,Y6());return n.storage.makeRequestWithTokens(e,nc).then(t=>{if(t===null)throw oL();return t})}function XL(n,e){const t=DL(n._location.path,e),r=new Or(n._location.bucket,t);return new $u(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(n){return/^[A-Za-z]+:\/\//.test(n)}function JL(n,e){return new $u(n,e)}function t4(n,e){if(n instanceof ax){const t=n;if(t._bucket==null)throw iL();const r=new $u(t,t._bucket);return e!=null?t4(r,e):r}else return e!==void 0?XL(n,e):n}function eP(n,e){if(e&&ZL(e)){if(n instanceof ax)return JL(n,e);throw T_("To use ref(service, url), the first argument must be a Storage instance.")}else return t4(n,e)}function SS(n,e){const t=e==null?void 0:e[F6];return t==null?null:Or.makeFromBucketSpec(t,n)}function tP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:YA(i,n.app.options.projectId))}class ax{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=B6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=W7,this._maxUploadRetryTime=Q7,this._requests=new Set,i!=null?this._bucket=Or.makeFromBucketSpec(i,this._host):this._bucket=SS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Or.makeFromBucketSpec(this._url,e):this._bucket=SS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $u(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new lL(j6());{const a=vL(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const AS="@firebase/storage",CS="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="storage";function r4(n,e,t){return n=Wt(n),QL(n,e,t)}function i4(n){return n=Wt(n),YL(n)}function s4(n,e){return n=Wt(n),eP(n,e)}function nP(n=bv(),e){n=Wt(n);const r=Zm(n,n4).getImmediate({identifier:e}),i=KA("storage");return i&&rP(r,...i),r}function rP(n,e,t,r={}){tP(n,e,t,r)}function iP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ax(t,r,i,e,Xu)}function sP(){ju(new Ca(n4,iP,"PUBLIC").setMultipleInstances(!0)),us(AS,CS,""),us(AS,CS,"esm2017")}sP();function ux(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function o4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=o4,a4=new bd("auth","Firebase",o4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=new gv("@firebase/auth");function aP(n,...e){Cm.logLevel<=it.WARN&&Cm.warn(`Auth (${Xu}): ${n}`,...e)}function R0(n,...e){Cm.logLevel<=it.ERROR&&Cm.error(`Auth (${Xu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,...e){throw cx(n,...e)}function Ti(n,...e){return cx(n,...e)}function lx(n,e,t){const r=Object.assign(Object.assign({},oP()),{[e]:t});return new bd("auth","Firebase",r).create(e,{appName:n.name})}function Mu(n){return lx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uP(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ms(n,"argument-error"),lx(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return a4.create(n,...e)}function qe(n,e,...t){if(!n)throw cx(e,...t)}function Xs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw R0(e),new Error(e)}function ho(n,e){n||Xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lP(){return RS()==="http:"||RS()==="https:"}function RS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lP()||p8()||"connection"in navigator)?navigator.onLine:!0}function hP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ho(t>e,"Short delay should be less than long delay!"),this.isMobile=h8()||m8()}get(){return cP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n,e){ho(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Rd(3e4,6e4);function fx(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function el(n,e,t,r,i={}){return l4(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=_d(Object.assign({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},s);return d8()||(f.referrerPolicy="no-referrer"),u4.fetch()(c4(n,n.config.apiHost,t,l),f)})}async function l4(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},fP),e);try{const i=new mP(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw y0(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw y0(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw y0(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw y0(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lx(n,p,f);ms(n,p)}}catch(i){if(i instanceof vs)throw i;ms(n,"network-request-failed",{message:String(i)})}}async function pP(n,e,t,r,i={}){const s=await el(n,e,t,r,i);return"mfaPendingCredential"in s&&ms(n,"multi-factor-auth-required",{_serverResponse:s}),s}function c4(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?hx(n.config,i):`${n.config.apiScheme}://${i}`}class mP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),dP.get())})}}function y0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ti(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e){return el(n,"POST","/v1/accounts:delete",e)}async function h4(n,e){return el(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yP(n,e=!1){const t=Wt(n),r=await t.getIdToken(e),i=dx(r);qe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zf(cb(i.auth_time)),issuedAtTime:zf(cb(i.iat)),expirationTime:zf(cb(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cb(n){return Number(n)*1e3}function dx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return R0("JWT malformed, contained fewer than 3 sections"),null;try{const i=$A(t);return i?JSON.parse(i):(R0("Failed to decode base64 JWT payload"),null)}catch(i){return R0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function IS(n){const e=dx(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vs&&bP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function bP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zf(this.lastLoginAt),this.creationTime=zf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Mc(n,h4(t,{idToken:r}));qe(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?f4(s.providerUserInfo):[],l=xP(n.providerData,a),h=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new A_(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function vP(n){const e=Wt(n);await Rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function f4(n){return n.map(e=>{var{providerId:t}=e,r=ux(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(n,e){const t=await l4(n,{},async()=>{const r=_d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=c4(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",u4.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wP(n,e){return el(n,"POST","/v2/accounts:revokeToken",fx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=IS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await EP(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new pc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(qe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(qe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zs{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ux(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _P(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new A_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yP(this,e)}reload(){return vP(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Rm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(Mu(this.auth));const e=await this.getIdToken();return await Mc(this,gP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,l,h,f,p;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=t.photoURL)!==null&&a!==void 0?a:void 0,R=(l=t.tenantId)!==null&&l!==void 0?l:void 0,D=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,V=(f=t.createdAt)!==null&&f!==void 0?f:void 0,W=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:G,emailVerified:te,isAnonymous:Y,providerData:$,stsTokenManager:U}=t;qe(G&&U,e,"internal-error");const I=pc.fromJSON(this.name,U);qe(typeof G=="string",e,"internal-error"),Qo(y,e.name),Qo(_,e.name),qe(typeof te=="boolean",e,"internal-error"),qe(typeof Y=="boolean",e,"internal-error"),Qo(v,e.name),Qo(w,e.name),Qo(R,e.name),Qo(D,e.name),Qo(V,e.name),Qo(W,e.name);const N=new Zs({uid:G,auth:e,email:_,emailVerified:te,displayName:y,isAnonymous:Y,photoURL:w,phoneNumber:v,tenantId:R,stsTokenManager:I,createdAt:V,lastLoginAt:W});return $&&Array.isArray($)&&(N.providerData=$.map(F=>Object.assign({},F))),D&&(N._redirectEventId=D),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new pc;i.updateFromServerResponse(t);const s=new Zs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rm(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];qe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?f4(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new pc;l.updateFromIdToken(r);const h=new Zs({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new A_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Map;function Js(n){ho(n instanceof Function,"Expected a class definition");let e=DS.get(n);return e?(ho(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}d4.type="NONE";const NS=d4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n,e,t){return`firebase:${n}:${e}:${t}`}class mc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=I0(this.userKey,i.apiKey,s),this.fullPersistenceKey=I0("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new mc(Js(NS),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Js(NS);const a=I0(r,e.config.apiKey,e.name);let l=null;for(const f of t)try{const p=await f._get(a);if(p){const y=Zs._fromJSON(e,p);f!==s&&(l=y),s=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new mc(s,e,r):(s=h[0],l&&await s._set(a,l.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new mc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_4(e))return"Blackberry";if(v4(e))return"Webos";if(m4(e))return"Safari";if((e.includes("chrome/")||g4(e))&&!e.includes("edge/"))return"Chrome";if(b4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p4(n=Wn()){return/firefox\//i.test(n)}function m4(n=Wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g4(n=Wn()){return/crios\//i.test(n)}function y4(n=Wn()){return/iemobile/i.test(n)}function b4(n=Wn()){return/android/i.test(n)}function _4(n=Wn()){return/blackberry/i.test(n)}function v4(n=Wn()){return/webos/i.test(n)}function px(n=Wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kP(n=Wn()){var e;return px(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TP(){return g8()&&document.documentMode===10}function x4(n=Wn()){return px(n)||b4(n)||v4(n)||_4(n)||/windows phone/i.test(n)||y4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(n,e=[]){let t;switch(n){case"Browser":t=MS(Wn());break;case"Worker":t=`${MS(Wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,l)=>{try{const h=e(s);a(h)}catch(h){l(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n,e={}){return el(n,"GET","/v2/passwordPolicy",fx(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=6;class RP{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:CP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,l;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OS(this),this.idTokenSubscription=new OS(this),this.beforeStateQueue=new SP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Js(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await h4(this,{idToken:e}),r=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(si(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Rm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(Mu(this));const t=e?Wt(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(Mu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(Mu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AP(this),t=new RP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Js(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await mc.create(this,[Js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&aP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _g(n){return Wt(n)}class OS{constructor(e){this.auth=e,this.observer=null,this.addObserver=k8(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DP(n){mx=n}function NP(n){return mx.loadJS(n)}function MP(){return mx.gapiScript}function OP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n,e){const t=Zm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(so(s,e??{}))return i;ms(i,"already-initialized")}return t.initialize({options:e})}function PP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Js);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BP(n,e,t){const r=_g(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=w4(e),{host:a,port:l}=FP(e),h=l===null?"":`:${l}`,f={url:`${s}//${a}${h}/`},p=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(so(f,r.config.emulator)&&so(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,VP()}function w4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FP(n){const e=w4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:LS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:LS(a)}}}function LS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function VP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,t){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(n,e){return pP(n,"POST","/v1/accounts:signInWithIdp",fx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="http://localhost";class Gu extends k4{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ux(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Gu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return gc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,gc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gc(e,t)}buildRequest(){const e={requestUri:UP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_d(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Id{constructor(){super("facebook.com")}static credential(e){return Gu._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gu._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ei.credential(t,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Id{constructor(){super("github.com")}static credential(e){return Gu._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Id{constructor(){super("twitter.com")}static credential(e,t){return Gu._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ha.credential(t,r)}catch{return null}}}ha.TWITTER_SIGN_IN_METHOD="twitter.com";ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Zs._fromIdTokenResponse(e,r,i),a=PS(r);return new Oc({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=PS(r);return new Oc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function PS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends vs{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Im.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Im(e,t,r,i)}}function T4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Im._fromErrorAndOperation(n,s,e,r):s})}async function zP(n,e,t=!1){const r=await Mc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(n,e,t=!1){const{auth:r}=n;if(si(r.app))return Promise.reject(Mu(r));const i="reauthenticate";try{const s=await Mc(n,T4(r,i,e,n),t);qe(s.idToken,r,"internal-error");const a=dx(s.idToken);qe(a,r,"internal-error");const{sub:l}=a;return qe(n.uid===l,r,"user-mismatch"),Oc._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(n,e,t=!1){if(si(n.app))return Promise.reject(Mu(n));const r="signIn",i=await T4(n,r,e),s=await Oc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(n,e){return el(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Wt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Mc(r,HP(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function GP(n,e,t,r){return Wt(n).onIdTokenChanged(e,t,r)}function KP(n,e,t){return Wt(n).beforeAuthStateChanged(e,t)}function WP(n,e,t,r){return Wt(n).onAuthStateChanged(e,t,r)}function QP(n){return Wt(n).signOut()}const Dm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dm,"1"),this.storage.removeItem(Dm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1e3,XP=10;class A4 extends S4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);TP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XP):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},YP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}A4.type="LOCAL";const ZP=A4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4 extends S4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C4.type="SESSION";const R4=C4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new vg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async f=>f(t.origin,s)),h=await JP(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,h)=>{const f=yx("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(_.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(){return window}function tB(n){hs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return typeof hs().WorkerGlobalScope<"u"&&typeof hs().importScripts=="function"}async function nB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rB(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iB(){return I4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebaseLocalStorageDb",sB=1,Nm="firebaseLocalStorage",N4="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xg(n,e){return n.transaction([Nm],e?"readwrite":"readonly").objectStore(Nm)}function oB(){const n=indexedDB.deleteDatabase(D4);return new Dd(n).toPromise()}function C_(){const n=indexedDB.open(D4,sB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nm,{keyPath:N4})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nm)?e(r):(r.close(),await oB(),e(await C_()))})})}async function BS(n,e,t){const r=xg(n,!0).put({[N4]:e,value:t});return new Dd(r).toPromise()}async function aB(n,e){const t=xg(n,!1).get(e),r=await new Dd(t).toPromise();return r===void 0?null:r.value}function FS(n,e){const t=xg(n,!0).delete(e);return new Dd(t).toPromise()}const uB=800,lB=3;class M4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>lB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vg._getInstance(iB()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await nB(),!this.activeServiceWorker)return;this.sender=new eB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C_();return await BS(e,Dm,"1"),await FS(e,Dm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>BS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>aB(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=xg(i,!1).getAll();return new Dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M4.type="LOCAL";const cB=M4;new Rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n,e){return e?Js(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends k4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hB(n){return qP(n.auth,new bx(n),n.bypassAuthState)}function fB(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),jP(t,new bx(n),n.bypassAuthState)}async function dB(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),zP(t,new bx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hB;case"linkViaPopup":case"linkViaRedirect":return dB;case"reauthViaPopup":case"reauthViaRedirect":return fB;default:ms(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=new Rd(2e3,1e4);async function P4(n,e,t){if(si(n.app))return Promise.reject(Ti(n,"operation-not-supported-in-this-environment"));const r=_g(n);uP(n,e,gx);const i=O4(r,t);return new Ru(r,"signInViaPopup",e,i).executeNotNull()}class Ru extends L4{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ru.currentPopupAction&&Ru.currentPopupAction.cancel(),Ru.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=yx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ru.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pB.get())};e()}}Ru.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="pendingRedirect",D0=new Map;class gB extends L4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=D0.get(this.auth._key());if(!e){try{const r=await yB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}D0.set(this.auth._key(),e)}return this.bypassAuthState||D0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yB(n,e){const t=vB(e),r=_B(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function bB(n,e){D0.set(n._key(),e)}function _B(n){return Js(n._redirectPersistence)}function vB(n){return I0(mB,n.config.apiKey,n.name)}async function xB(n,e,t=!1){if(si(n.app))return Promise.reject(Mu(n));const r=_g(n),i=O4(r,e),a=await new gB(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=10*60*1e3;class wB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!B4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EB&&this.cachedEventUids.clear(),this.cachedEventUids.has(VS(e))}saveEventToCache(e){this.cachedEventUids.add(VS(e)),this.lastProcessedEventTime=Date.now()}}function VS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function B4({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B4(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(n,e={}){return el(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AB=/^https?/;async function CB(n){if(n.config.emulator)return;const{authorizedDomains:e}=await TB(n);for(const t of e)try{if(RB(t))return}catch{}ms(n,"unauthorized-domain")}function RB(n){const e=S_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!AB.test(t))return!1;if(SB.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB=new Rd(3e4,6e4);function US(){const n=hs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DB(n){return new Promise((e,t)=>{var r,i,s;function a(){US(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{US(),t(Ti(n,"network-request-failed"))},timeout:IB.get()})}if(!((i=(r=hs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hs().gapi)===null||s===void 0)&&s.load)a();else{const l=OP("iframefcb");return hs()[l]=()=>{gapi.load?a():t(Ti(n,"network-request-failed"))},NP(`${MP()}?onload=${l}`).catch(h=>t(h))}}).catch(e=>{throw N0=null,e})}let N0=null;function NB(n){return N0=N0||DB(n),N0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=new Rd(5e3,15e3),OB="__/auth/iframe",LB="emulator/auth/iframe",PB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FB(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hx(e,LB):`https://${n.config.authDomain}/${OB}`,r={apiKey:e.apiKey,appName:n.name,v:Xu},i=BB.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_d(r).slice(1)}`}async function VB(n){const e=await NB(n),t=hs().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:FB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ti(n,"network-request-failed"),l=hs().setTimeout(()=>{s(a)},MB.get());function h(){hs().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zB=500,jB=600,qB="_blank",HB="http://localhost";class zS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $B(n,e,t,r=zB,i=jB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const h=Object.assign(Object.assign({},UB),{width:r.toString(),height:i.toString(),top:s,left:a}),f=Wn().toLowerCase();t&&(l=g4(f)?qB:t),p4(f)&&(e=e||HB,h.scrollbars="yes");const p=Object.entries(h).reduce((_,[v,w])=>`${_}${v}=${w},`,"");if(kP(f)&&l!=="_self")return GB(e||"",l),new zS(null);const y=window.open(e||"",l,p);qe(y,n,"popup-blocked");try{y.focus()}catch{}return new zS(y)}function GB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="__/auth/handler",WB="emulator/auth/handler",QB=encodeURIComponent("fac");async function jS(n,e,t,r,i,s){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xu,eventId:i};if(e instanceof gx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",w8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))a[p]=y}if(e instanceof Id){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const h=await n._getAppCheckToken(),f=h?`#${QB}=${encodeURIComponent(h)}`:"";return`${YB(n)}?${_d(l).slice(1)}${f}`}function YB({config:n}){return n.emulator?hx(n,WB):`https://${n.authDomain}/${KB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="webStorageSupport";class XB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R4,this._completeRedirectFn=xB,this._overrideRedirectResult=bB}async _openPopup(e,t,r,i){var s;ho((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await jS(e,t,r,S_(),i);return $B(e,a,yx())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await jS(e,t,r,S_(),i);return tB(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ho(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await VB(e),r=new wB(e);return t.register("authEvent",i=>(qe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hb,{type:hb},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[hb];a!==void 0&&t(!!a),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return x4()||m4()||px()}}const ZB=XB;var qS="@firebase/auth",HS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tF(n){ju(new Ca("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;qe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E4(n)},f=new IP(r,i,s,h);return PP(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ju(new Ca("auth-internal",e=>{const t=_g(e.getProvider("auth").getImmediate());return(r=>new JB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(qS,HS,eF(n)),us(qS,HS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=5*60,rF=QA("authIdTokenMaxAge")||nF;let $S=null;const iF=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>rF)return;const i=t==null?void 0:t.token;$S!==i&&($S=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sF(n=bv()){const e=Zm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LP(n,{popupRedirectResolver:ZB,persistence:[cB,ZP,R4]}),r=QA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=iF(s.toString());KP(t,a,()=>a(t.currentUser)),GP(t,l=>a(l))}}const i=GA("auth");return i&&BP(t,`http://${i}`),t}function oF(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",oF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tF("Browser");const aF={apiKey:"AIzaSyD4nUoB4aBIqyuB92O-1UyjELt3x95DHRA",authDomain:"d320-971d2.firebaseapp.com",projectId:"d320-971d2",storageBucket:"d320-971d2.firebasestorage.app",messagingSenderId:"895104531613",appId:"1:895104531613:web:488a63a0e7364545112874"},_x=JA(aF),Si=I7(_x),F4=nP(_x),nd=sF(_x);new Ei;const V4=dg(Si,"eotv-enemies"),uF=dg(Si,"eotv-enemy-tags");dg(Si,"users");const lF=async n=>{},vx=Q.createContext(null),cF=({children:n})=>{const[e,t]=Q.useState(null);return Q.useEffect(()=>WP(nd,t),[]),Q.useEffect(()=>{e&&lF(e.uid)},[e]),z.jsx(vx.Provider,{value:{user:e,setUser:t},children:n})},tl=()=>{var n;return((n=Q.useContext(vx))==null?void 0:n.user)??null},hF=()=>{var n;return(n=Q.useContext(vx))==null?void 0:n.setUser};function fF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const dF=Q.forwardRef(fF);function pF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const U4=Q.forwardRef(pF);function mF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const gF=Q.forwardRef(mF);function yF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const bF=Q.forwardRef(yF);function _F({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const vF=Q.forwardRef(_F);function xF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const EF=Q.forwardRef(xF);function wF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const kF=Q.forwardRef(wF);function TF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const SF=Q.forwardRef(TF);function AF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const CF=Q.forwardRef(AF);function RF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const z4=Q.forwardRef(RF);function IF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const xx=Q.forwardRef(IF);function DF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const NF=Q.forwardRef(DF);function MF({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const nl=Q.forwardRef(MF),OF=(n,e,t,r)=>{const i=s4(F4,`enemies/${n}/${e.name}`),s=r4(i,e);s.on("state_changed",a=>{const l=a.bytesTransferred/a.totalBytes*100;r(l)},a=>{console.error(" :",a)},async()=>{const a=await i4(s.snapshot.ref);t(a)})},Mm=({imageURL:n,setImageURL:e,ownerUid:t,className:r,placeholder:i})=>{const[s,a]=Q.useState(0),l=f=>{f&&OF(t,f,e,a)},h=f=>{f.preventDefault(),l(f.dataTransfer.files[0])};return z.jsxs("div",{className:`w-full sm:w-3/14 flex items-center justify-center bg-gray-200 dark:bg-gray-800 relative overflow-hidden group ${r||""}`,onDrop:h,onDragOver:f=>f.preventDefault(),children:[z.jsx("img",{src:n||i||"/eotv-enemy-placeholder.png",className:"object-cover w-full h-full",alt:""}),z.jsx("input",{type:"file",accept:"image/*",onChange:f=>l(f.target.files&&f.target.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer"}),z.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center text-gray-300 bg-black/40 opacity-100 pointer-events-none z-10",children:[z.jsx(U4,{className:"w-8 h-8"}),z.jsx("span",{className:"text-xs",children:"   "})]}),s>0&&s<100&&z.jsxs("span",{className:"absolute bottom-2 left-2 text-xs bg-black/60 px-1 rounded",children:[s.toFixed(0),"%"]})]})},j4=Q.createContext([]),LF=({children:n})=>{const[e,t]=Q.useState([]);return Q.useEffect(()=>{(async()=>{const i=await z7(uF);t(i.docs.map(s=>s.data().name))})()},[]),z.jsx(j4.Provider,{value:e,children:n})},Ex=()=>Q.useContext(j4),PF=({selectedTags:n,setSelectedTags:e})=>{const t=Ex().map(y=>({name:y})),[r,i]=Q.useState(""),s=Array.from(new Set([...t.map(y=>y.name)])),a=s.filter(y=>y.toLowerCase().includes(r.toLowerCase())&&!n.includes(y)),l=Q.useCallback(y=>{const _=y.trim();_&&(n.includes(_)||e([...n,_]))},[n,e,t]),h=Q.useCallback(y=>{(y.key==="Enter"||y.key===",")&&(y.preventDefault(),l(r),i(""))},[r,l]),f=Q.useCallback(y=>{const _=y.target.value;s.includes(_)?(l(_),i("")):i(_)},[s,l]),p=Q.useCallback(y=>{e(n.filter(_=>_!==y))},[n,e]);return z.jsxs("div",{className:"py-4",children:[z.jsx("label",{className:"block text-sm mb-1",children:""}),z.jsxs("div",{className:"flex flex-wrap gap-1 bg-gray-200 dark:bg-gray-700 p-2 rounded",children:[n.map(y=>z.jsxs("span",{className:"bg-gray-300 dark:bg-gray-600 px-2 py-1 rounded text-xs flex items-center gap-1",children:[y,z.jsx("button",{type:"button",onClick:()=>p(y),className:"text-red-400 hover:text-white",children:""})]},y)),z.jsx("input",{type:"text",value:r,list:"tag-suggestions",onChange:f,onKeyDown:h,className:"bg-transparent outline-none flex-1 text-sm text-gray-900 dark:text-white"}),z.jsx("datalist",{id:"tag-suggestions",children:a.map(y=>z.jsx("option",{value:y},y))})]})]})},Eg=Q.createContext({});function BF(){const{dom:n,editor:e,setLoading:t,editorFactory:r}=Q.useContext(Eg),i=Q.useRef(null);return Q.useEffect(()=>{const s=i.current;if(!r||!s)return;n.current=s;const a=r(s);if(a)return t(!0),a.create().then(l=>{e.current=l}).finally(()=>{t(!1)}).catch(console.error),()=>{a.destroy().catch(console.error)}},[n,e,r,t]),i}const FF=()=>{const n=BF();return mv.createElement("div",{"data-milkdown-root":!0,ref:n})},VF=({children:n})=>{const e=Q.useRef(void 0),[t,r]=Q.useState(void 0),i=Q.useRef(void 0),[s,a]=Q.useState(!0),l=Q.useMemo(()=>({loading:s,dom:e,editor:i,setLoading:a,editorFactory:t,setEditorFactory:r}),[s,t]);return mv.createElement(Eg.Provider,{value:l},n)};function UF(n,e=[]){const t=Q.useContext(Eg),r=Q.useCallback(n,e);return Q.useLayoutEffect(()=>{t.setEditorFactory(()=>r)},[t,r]),{loading:t.loading,get:()=>t.editor.current}}function zF(){const n=Q.useContext(Eg),e=Q.useCallback(()=>n.editor.current,[n.editor]);return[n.loading,e]}var Fr=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(Fr||{});class ci extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}const jF=(n,e)=>typeof e=="function"?"[Function]":e,wg=n=>JSON.stringify(n,jF);function qF(n){return new ci(Fr.docTypeError,`Doc type error, unsupported type: ${wg(n)}`)}function HF(n){return new ci(Fr.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function $F(n){return new ci(Fr.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function wx(){return new ci(Fr.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function GF(n,e,t){const i=`Cannot create node for ${"name"in n?n.name:n}`,s=p=>{if(p==null)return"null";if(Array.isArray(p))return`[${p.map(s).join(", ")}]`;if(typeof p=="object")return"toJSON"in p&&typeof p.toJSON=="function"?JSON.stringify(p.toJSON()):"spec"in p?JSON.stringify(p.spec):JSON.stringify(p);if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return JSON.stringify(p);if(typeof p=="function")return`[Function: ${p.name||"anonymous"}]`;try{return String(p)}catch{return"[Unserializable]"}},a=["[Description]",i],l=["[Attributes]",e],h=["[Content]",(t??[]).map(p=>p?typeof p=="object"&&"type"in p?`${p}`:s(p):"null")],f=[a,l,h].reduce((p,[y,_])=>{const v=`${y}: ${s(_)}.`;return p.concat(v)},[]);return new ci(Fr.createNodeInParserFail,f.join(`
`))}function q4(){return new ci(Fr.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function KF(n){return new ci(Fr.parserMatchError,`Cannot match target parser for node: ${wg(n)}.`)}function WF(n){return new ci(Fr.serializerMatchError,`Cannot match target serializer for node: ${wg(n)}.`)}function rl(n){return new ci(Fr.expectDomTypeError,`Expect to be a dom, but get: ${wg(n)}.`)}function fb(){return new ci(Fr.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function QF(n){return new ci(Fr.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function YF(n){return new ci(Fr.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}var H4=n=>{throw TypeError(n)},$4=(n,e,t)=>e.has(n)||H4("Cannot "+t),De=(n,e,t)=>($4(n,e,"read from private field"),t?t.call(n):e.get(n)),Kt=(n,e,t)=>e.has(n)?H4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),bt=(n,e,t,r)=>($4(n,e,"write to private field"),e.set(n,t),t),Xi,Xo,mf,M0,O0,L0,rc,gf,wu,yf,bf,_f,Zo,Jo,P0,vi,ic,ku,vf,ea,xf,B0;class G4{constructor(){this.sliceMap=new Map,this.get=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!t){const r=typeof e=="string"?e:e.name;throw HF(r)}return t},this.remove=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}let XF=class{constructor(e,t,r){Kt(this,Xi),Kt(this,Xo),Kt(this,mf),bt(this,Xi,[]),bt(this,mf,()=>{De(this,Xi).forEach(i=>i(De(this,Xo)))}),this.set=i=>{bt(this,Xo,i),De(this,mf).call(this)},this.get=()=>De(this,Xo),this.update=i=>{bt(this,Xo,i(De(this,Xo))),De(this,mf).call(this)},this.type=r,bt(this,Xo,t),e.set(r.id,this)}on(e){return De(this,Xi).push(e),()=>{bt(this,Xi,De(this,Xi).filter(t=>t!==e))}}once(e){const t=this.on(r=>{e(r),t()});return t}off(e){bt(this,Xi,De(this,Xi).filter(t=>t!==e))}offAll(){bt(this,Xi,[])}};Xi=new WeakMap;Xo=new WeakMap;mf=new WeakMap;class ZF{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw wx()}}create(e,t=this._defaultValue){return new XF(e,t,this)}}const vt=(n,e)=>new ZF(n,e);class JF{constructor(e,t,r){Kt(this,M0),Kt(this,O0),Kt(this,L0),Kt(this,rc),Kt(this,gf),Kt(this,wu),Kt(this,yf),Kt(this,bf),Kt(this,_f),bt(this,rc,new Set),bt(this,gf,new Set),bt(this,wu,new Map),bt(this,yf,new Map),this.read=()=>({metadata:De(this,M0),injectedSlices:[...De(this,rc)].map(i=>({name:typeof i=="string"?i:i.name,value:De(this,bf).call(this,i)})),consumedSlices:[...De(this,gf)].map(i=>({name:typeof i=="string"?i:i.name,value:De(this,bf).call(this,i)})),recordedTimers:[...De(this,wu)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:De(this,_f).call(this,i)})),waitTimers:[...De(this,yf)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:De(this,_f).call(this,i)}))}),this.onRecord=i=>{De(this,wu).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{De(this,wu).delete(i)},this.onDone=i=>{const s=De(this,wu).get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const a=Date.now();s.finally(()=>{De(this,yf).set(i,{duration:Date.now()-a})}).catch(console.error)},this.onInject=i=>{De(this,rc).add(i)},this.onRemove=i=>{De(this,rc).delete(i)},this.onUse=i=>{De(this,gf).add(i)},bt(this,bf,i=>De(this,O0).get(i).get()),bt(this,_f,i=>De(this,L0).get(i).status),bt(this,O0,e),bt(this,L0,t),bt(this,M0,r)}}M0=new WeakMap;O0=new WeakMap;L0=new WeakMap;rc=new WeakMap;gf=new WeakMap;wu=new WeakMap;yf=new WeakMap;bf=new WeakMap;_f=new WeakMap;const eV=class K4{constructor(e,t,r){Kt(this,Zo),Kt(this,Jo),Kt(this,P0),Kt(this,vi),this.produce=i=>i&&Object.keys(i).length?new K4(De(this,Zo),De(this,Jo),{...i}):this,this.inject=(i,s)=>{var a;const l=i.create(De(this,Zo).sliceMap);return s!=null&&l.set(s),(a=De(this,vi))==null||a.onInject(i),this},this.remove=i=>{var s;return De(this,Zo).remove(i),(s=De(this,vi))==null||s.onRemove(i),this},this.record=i=>{var s;return i.create(De(this,Jo).store),(s=De(this,vi))==null||s.onRecord(i),this},this.clearTimer=i=>{var s;return De(this,Jo).remove(i),(s=De(this,vi))==null||s.onClear(i),this},this.isInjected=i=>De(this,Zo).has(i),this.isRecorded=i=>De(this,Jo).has(i),this.use=i=>{var s;return(s=De(this,vi))==null||s.onUse(i),De(this,Zo).get(i)},this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>De(this,Jo).get(i),this.done=i=>{var s;this.timer(i).done(),(s=De(this,vi))==null||s.onDone(i)},this.wait=i=>{var s;const a=this.timer(i).start();return(s=De(this,vi))==null||s.onWait(i,a),a},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},bt(this,Zo,e),bt(this,Jo,t),bt(this,P0,r),r&&bt(this,vi,new JF(e,t,r))}get meta(){return De(this,P0)}get inspector(){return De(this,vi)}};Zo=new WeakMap;Jo=new WeakMap;P0=new WeakMap;vi=new WeakMap;let tV=eV;class nV{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw $F(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class rV{constructor(e,t){Kt(this,ic),Kt(this,ku),Kt(this,vf),Kt(this,ea),Kt(this,xf),Kt(this,B0),bt(this,ic,null),bt(this,ku,null),bt(this,ea,"pending"),this.start=()=>(De(this,ic)??bt(this,ic,new Promise((r,i)=>{bt(this,ku,s=>{s instanceof CustomEvent&&s.detail.id===De(this,vf)&&(bt(this,ea,"resolved"),De(this,xf).call(this),s.stopImmediatePropagation(),r())}),De(this,B0).call(this,()=>{De(this,ea)==="pending"&&bt(this,ea,"rejected"),De(this,xf).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),bt(this,ea,"pending"),addEventListener(this.type.name,De(this,ku))})),De(this,ic)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:De(this,vf)}});dispatchEvent(r)},bt(this,xf,()=>{De(this,ku)&&removeEventListener(this.type.name,De(this,ku))}),bt(this,B0,r=>{setTimeout(()=>{r()},this.type.timeout)}),bt(this,vf,Symbol(t.name)),this.type=t,e.set(t.id,this)}get status(){return De(this,ea)}}ic=new WeakMap;ku=new WeakMap;vf=new WeakMap;ea=new WeakMap;xf=new WeakMap;B0=new WeakMap;class iV{constructor(e,t=3e3){this.create=r=>new rV(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}const za=(n,e=3e3)=>new iV(n,e);function Dn(n){this.content=n}Dn.prototype={constructor:Dn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new Dn(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Dn(t)},addToStart:function(n,e){return new Dn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Dn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new Dn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Dn.from(n),n.size?new Dn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Dn.from(n),n.size?new Dn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Dn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Dn.from=function(n){if(n instanceof Dn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Dn(e)};function W4(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=W4(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function Q4(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),l=e.child(--s),h=a.nodeSize;if(a==l){t-=h,r-=h;continue}if(!a.sameMarkup(l))return{a:t,b:r};if(a.isText&&a.text!=l.text){let f=0,p=Math.min(a.text.length,l.text.length);for(;f<p&&a.text[a.text.length-f-1]==l.text[l.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||l.content.size){let f=Q4(a.content,l.content,t-1,r-1);if(f)return f}t-=h,r-=h}}class ye{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,l=0;l<t;a++){let h=this.content[a],f=l+h.nodeSize;if(f>e&&r(h,i+l,s||null,a)!==!1&&h.content.size){let p=l+1;h.nodesBetween(Math.max(0,e-p),Math.min(h.content.size,t-p),r,i+p)}l=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(l,h)=>{let f=l.isText?l.text.slice(Math.max(e,h)-h,t-h):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&f||l.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ye(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let l=this.content[s],h=a+l.nodeSize;h>e&&((a<e||h>t)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,t-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,t-a-1))),r.push(l),i+=l.nodeSize),a=h}return new ye(r,i)}cutByIndex(e,t){return e==t?ye.empty:e==0&&t==this.content.length?this:new ye(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ye(i,s)}addToStart(e){return new ye([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ye(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return W4(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Q4(this,e,t,r)}findIndex(e,t=-1){if(e==0)return b0(0,e);if(e==this.size)return b0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?b0(r+1,a):b0(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ye.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ye.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new ye(t||e,r)}static from(e){if(!e)return ye.empty;if(e instanceof ye)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ye([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const db={index:0,offset:0};function b0(n,e){return db.index=n,db.offset=e,db}function Om(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Om(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Om(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class dt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Om(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return dt.none;if(e instanceof dt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}dt.none=[];class Lm extends Error{}class Se{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=X4(this.content,e+this.openStart,t);return r&&new Se(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Se(Y4(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Se.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Se(ye.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new Se(e,r,i)}}Se.empty=new Se(ye.empty,0,0);function Y4(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:l}=n.findIndex(t);if(i==e||s.isText){if(l!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Y4(s.content,e-i-1,t-i-1)))}function X4(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let l=X4(a.content,e-s-1,t);return l&&n.replaceChild(i,a.copy(l))}function sV(n,e,t){if(t.openStart>n.depth)throw new Lm("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Lm("Inconsistent open depths");return Z4(n,e,t,0)}function Z4(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=Z4(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,l=a.content;return Lu(a,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:a,end:l}=oV(t,n);return Lu(s,e5(n,a,l,e,r))}else return Lu(s,Pm(n,e,r))}function J4(n,e){if(!e.type.compatibleContent(n.type))throw new Lm("Cannot join "+e.type.name+" onto "+n.type.name)}function R_(n,e,t){let r=n.node(t);return J4(r,e.node(t)),r}function Ou(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function jf(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Ou(n.nodeAfter,r),s++));for(let l=s;l<a;l++)Ou(i.child(l),r);e&&e.depth==t&&e.textOffset&&Ou(e.nodeBefore,r)}function Lu(n,e){return n.type.checkContent(e),n.copy(e)}function e5(n,e,t,r,i){let s=n.depth>i&&R_(n,e,i+1),a=r.depth>i&&R_(t,r,i+1),l=[];return jf(null,n,i,l),s&&a&&e.index(i)==t.index(i)?(J4(s,a),Ou(Lu(s,e5(n,e,t,r,i+1)),l)):(s&&Ou(Lu(s,Pm(n,e,i+1)),l),jf(e,t,i,l),a&&Ou(Lu(a,Pm(t,r,i+1)),l)),jf(r,null,i,l),new ye(l)}function Pm(n,e,t){let r=[];if(jf(null,n,t,r),n.depth>t){let i=R_(n,e,t+1);Ou(Lu(i,Pm(n,e,t+1)),r)}return jf(e,null,t,r),new ye(r)}function oV(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(ye.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class rd{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return dt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new t5(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:l,offset:h}=a.content.findIndex(s),f=s-h;if(r.push(a,l,i+h),!f||(a=a.child(l),a.isText))break;s=f-1,i+=h+1}return new rd(t,r,s)}static resolveCached(e,t){let r=GS.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else GS.set(e,r=new aV);let i=r.elts[r.i]=rd.resolve(e,t);return r.i=(r.i+1)%uV,i}}class aV{constructor(){this.elts=[],this.i=0}}const uV=12,GS=new WeakMap;class t5{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const lV=Object.create(null);class ui{constructor(e,t,r,i=dt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Om(this.attrs,t||e.defaultAttrs||lV)&&dt.sameSet(this.marks,r||dt.none)}copy(e=null){return e==this.content?this:new ui(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ui(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Se.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),l=i.start(a),f=i.node(a).content.cut(i.pos-l,s.pos-l);return new Se(f,i.depth-a,s.depth-a)}replace(e,t,r){return sV(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return rd.resolveCached(this,e)}resolveNoCache(e){return rd.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),n5(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ye.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),l=a&&a.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let h=i;h<s;h++)if(!this.type.allowsMarks(r.child(h).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=dt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ye.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}ui.prototype.text=void 0;class Bm extends ui{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):n5(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Bm(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Bm(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function n5(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ku{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new cV(e,t);if(r.next==null)return Ku.empty;let i=r5(r);r.next&&r.err("Unexpected trailing text");let s=yV(gV(i));return bV(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,l){let h=a.matchFragment(e,r);if(h&&(!t||h.validEnd))return ye.from(l.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:y}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(y)==-1){i.push(y);let _=s(y,l.concat(p));if(_)return _}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let l=i;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:h}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||h.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}Ku.empty=new Ku(!0);class cV{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function r5(n){let e=[];do e.push(hV(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hV(n){let e=[];do e.push(fV(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fV(n){let e=mV(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=dV(n,e);else break;return e}function KS(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function dV(n,e){let t=KS(n),r=t;return n.eat(",")&&(n.next!="}"?r=KS(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function pV(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function mV(n){if(n.eat("(")){let e=r5(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=pV(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gV(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,l,h){let f={term:h,to:l};return e[a].push(f),f}function i(a,l){a.forEach(h=>h.to=l)}function s(a,l){if(a.type=="choice")return a.exprs.reduce((h,f)=>h.concat(s(f,l)),[]);if(a.type=="seq")for(let h=0;;h++){let f=s(a.exprs[h],l);if(h==a.exprs.length-1)return f;i(f,l=t())}else if(a.type=="star"){let h=t();return r(l,h),i(s(a.expr,h),h),[r(h)]}else if(a.type=="plus"){let h=t();return i(s(a.expr,l),h),i(s(a.expr,h),h),[r(h)]}else{if(a.type=="opt")return[r(l)].concat(s(a.expr,l));if(a.type=="range"){let h=l;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,h),p),h=p}if(a.max==-1)i(s(a.expr,h),h);else for(let f=a.min;f<a.max;f++){let p=t();r(h,p),i(s(a.expr,h),p),h=p}return[r(h)]}else{if(a.type=="name")return[r(l,void 0,a.value)];throw new Error("Unknown expr type")}}}}function i5(n,e){return e-n}function WS(n,e){let t=[];return r(e),t.sort(i5);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:l,to:h}=s[a];!l&&t.indexOf(h)==-1&&r(h)}}}function yV(n){let e=Object.create(null);return t(WS(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:l,to:h})=>{if(!l)return;let f;for(let p=0;p<i.length;p++)i[p][0]==l&&(f=i[p][1]);WS(n,h).forEach(p=>{f||i.push([l,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new Ku(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let l=i[a][1].sort(i5);s.next.push({type:i[a][0],next:e[l.join(",")]||t(l)})}return s}}function bV(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let l=0;l<i.next.length;l++){let{type:h,next:f}=i.next[l];a.push(h.name),s&&!(h.isText||h.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function s5(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function o5(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function a5(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function u5(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new vV(n,r,e[r]);return t}let QS=class l5{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=u5(e,r.attrs),this.defaultAttrs=s5(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ku.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:o5(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ui(this,this.computeAttrs(e),ye.from(t),dt.setFrom(r))}createChecked(e=null,t,r){return t=ye.from(t),this.checkContent(t),new ui(this,this.computeAttrs(e),t,dt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ye.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(ye.empty,!0);return s?new ui(this,e,t.append(s),dt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){a5(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:dt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new l5(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function _V(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class vV{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?_V(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class kg{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=u5(e,i.attrs),this.excluded=null;let s=s5(this.attrs);this.instance=s?new dt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new dt(this,o5(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new kg(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){a5(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class xV{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Dn.from(e.nodes),t.marks=Dn.from(e.marks||{}),this.nodes=QS.compile(this.spec.nodes,this),this.marks=kg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ku.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?YS(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:YS(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof QS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Bm(r,r.defaultAttrs,e,dt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ui.fromJSON(this,e)}markFromJSON(e){return dt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function YS(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let l in n.marks){let h=n.marks[l];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=h)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function EV(n){return n.tag!=null}function wV(n){return n.style!=null}class Lc{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(EV(i))this.tags.push(i);else if(wV(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new ZS(this,t,!1);return r.addAll(e,dt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ZS(this,t,!0);return r.addAll(e,dt.none,t.from,t.to),Se.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(SV(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(a.getAttrs){let h=a.getAttrs(t);if(h===!1)continue;a.attrs=h||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let l=t[a];if((l.priority==null?50:l.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=JS(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=JS(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Lc(e,Lc.schemaRules(e)))}}const c5={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kV={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},h5={ol:!0,ul:!0},id=1,I_=2,F0=4;function XS(n,e,t){return e!=null?(e?id:0)|(e==="full"?I_:0):n&&n.whitespace=="pre"?id|I_:t&-5}class _0{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=dt.none,this.match=s||(a&F0?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ye.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&id)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=ye.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!c5.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ZS{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=XS(null,t.preserveWhitespace,0)|(r?F0:0);i?s=new _0(i.type,i.attrs,dt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new _0(null,null,dt.none,!0,null,a):s=new _0(e.schema.topNodeType,null,dt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&I_?"full":this.localPreserveWS||(i.options&id)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),l;h5.hasOwnProperty(a)&&this.parser.normalizeLists&&TV(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(h?h.ignore:kV.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let f,p=this.needsBlock;if(c5.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=h&&h.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,h,f,h.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let l=void 0;;){let h=this.parser.matchStyle(s,a,this,l);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(f=>!h.clearMark(f)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)l=h;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let h=this.enter(a,t.attrs||null,r,t.preserveWhitespace);h&&(s=!0,r=h)}else{let h=this.parser.schema.marks[t.mark];r=r.concat(h.create(t.attrs))}let l=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,r,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,r),this.findAround(e,h,!1)}s&&this.sync(l)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];a!=l;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,l=0;a>=0;a--){let h=this.nodes[a],f=h.findWrapping(e);if(f&&(!i||i.length>f.length+l)&&(i=f,s=h,!f.length))break;if(h.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=dt.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):e3(l.type,e.type))&&(a=l.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let l=XS(e,s,a.options);a.options&F0&&a.content.length==0&&(l|=F0);let h=dt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):e3(f.type,e))?(h=f.addToSet(h),!1):!0),this.nodes.push(new _0(e,t,h,i,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=id)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(l,h)=>{for(;l>=0;l--){let f=t[l];if(f==""){if(l==t.length-1||l==0)continue;for(;h>=s;h--)if(a(l-1,h))return!0;return!1}else{let p=h>0||h==0&&i?this.nodes[h].type:r&&h>=s?r.node(h-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;h--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function TV(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&h5.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function SV(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function JS(n){let e={};for(let t in n)e[t]=n[t];return e}function e3(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=l=>{s.push(l);for(let h=0;h<l.edgeCount;h++){let{type:f,next:p}=l.edge(h);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Wc{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=pb(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,h=0;for(;l<s.length&&h<a.marks.length;){let f=a.marks[h];if(!this.marks[f.type.name]){h++;continue}if(!f.eq(s[l][0])||f.type.spec.spanning===!1)break;l++,h++}for(;l<s.length;)i=s.pop()[1];for(;h<a.marks.length;){let f=a.marks[h++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=V0(pb(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&V0(pb(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return V0(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Wc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=t3(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return t3(e.marks)}}function t3(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function pb(n){return n.document||window.document}const n3=new WeakMap;function AV(n){let e=n3.get(n);return e===void 0&&n3.set(n,e=CV(n)),e}function CV(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function V0(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=AV(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let l,h=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let y in f)if(f[y]!=null){let _=y.indexOf(" ");_>0?h.setAttributeNS(y.slice(0,_),y.slice(_+1),f[y]):h.setAttribute(y,f[y])}}for(let y=p;y<e.length;y++){let _=e[y];if(_===0){if(y<e.length-1||y>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:v,contentDOM:w}=V0(n,_,t,r);if(h.appendChild(v),w){if(l)throw new RangeError("Multiple content holes");l=w}}}return{dom:h,contentDOM:l}}const RV={};function kx(n,e){const t=RV,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return f5(n,r,i)}function f5(n,e,t){if(IV(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return r3(n.children,e,t)}return Array.isArray(n)?r3(n,e,t):""}function r3(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=f5(n[i],e,t);return r.join("")}function IV(n){return!!(n&&typeof n=="object")}const i3=document.createElement("i");function Tx(n){const e="&"+n+";";i3.innerHTML=e;const t=i3.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function gs(n,e,t,r){const i=n.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)a=Array.from(r),a.unshift(e,t),n.splice(...a);else for(t&&n.splice(e,t);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),n.splice(...a),s+=1e4,e+=1e4}function ii(n,e){return n.length>0?(gs(n,n.length,0,e),n):e}const s3={}.hasOwnProperty;function DV(n){const e={};let t=-1;for(;++t<n.length;)NV(e,n[t]);return e}function NV(n,e){let t;for(t in e){const i=(s3.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let a;if(s)for(a in s){s3.call(i,a)||(i[a]=[]);const l=s[a];MV(i[a],Array.isArray(l)?l:l?[l]:[])}}}function MV(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);gs(n,0,0,r)}function d5(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function yc(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ns=ja(/[A-Za-z]/),ki=ja(/[\dA-Za-z]/),OV=ja(/[#-'*+\--9=?A-Z^-~]/);function D_(n){return n!==null&&(n<32||n===127)}const N_=ja(/\d/),LV=ja(/[\dA-Fa-f]/),PV=ja(/[!-/:-@[-`{-~]/);function je(n){return n!==null&&n<-2}function gr(n){return n!==null&&(n<0||n===32)}function xt(n){return n===-2||n===-1||n===32}const BV=ja(new RegExp("\\p{P}|\\p{S}","u")),FV=ja(/\s/);function ja(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Dt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(h){return xt(h)?(n.enter(t),l(h)):e(h)}function l(h){return xt(h)&&s++<i?(n.consume(h),l):(n.exit(t),e(h))}}const VV={tokenize:UV};function UV(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),Dt(n,e,"linePrefix")}function i(l){return n.enter("paragraph"),s(l)}function s(l){const h=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=h),t=h,a(l)}function a(l){if(l===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(l);return}return je(l)?(n.consume(l),n.exit("chunkText"),s):(n.consume(l),a)}}const zV={tokenize:jV},o3={tokenize:qV};function jV(n){const e=this,t=[];let r=0,i,s,a;return l;function l(G){if(r<t.length){const te=t[r];return e.containerState=te[1],n.attempt(te[0].continuation,h,f)(G)}return f(G)}function h(G){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&W();const te=e.events.length;let Y=te,$;for(;Y--;)if(e.events[Y][0]==="exit"&&e.events[Y][1].type==="chunkFlow"){$=e.events[Y][1].end;break}V(r);let U=te;for(;U<e.events.length;)e.events[U][1].end={...$},U++;return gs(e.events,Y+1,0,e.events.slice(te)),e.events.length=U,f(G)}return l(G)}function f(G){if(r===t.length){if(!i)return _(G);if(i.currentConstruct&&i.currentConstruct.concrete)return w(G);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(o3,p,y)(G)}function p(G){return i&&W(),V(r),_(G)}function y(G){return e.parser.lazy[e.now().line]=r!==t.length,a=e.now().offset,w(G)}function _(G){return e.containerState={},n.attempt(o3,v,w)(G)}function v(G){return r++,t.push([e.currentConstruct,e.containerState]),_(G)}function w(G){if(G===null){i&&W(),V(0),n.consume(G);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),R(G)}function R(G){if(G===null){D(n.exit("chunkFlow"),!0),V(0),n.consume(G);return}return je(G)?(n.consume(G),D(n.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(n.consume(G),R)}function D(G,te){const Y=e.sliceStream(G);if(te&&Y.push(null),G.previous=s,s&&(s.next=G),s=G,i.defineSkip(G.start),i.write(Y),e.parser.lazy[G.start.line]){let $=i.events.length;for(;$--;)if(i.events[$][1].start.offset<a&&(!i.events[$][1].end||i.events[$][1].end.offset>a))return;const U=e.events.length;let I=U,N,F;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(N){F=e.events[I][1].end;break}N=!0}for(V(r),$=U;$<e.events.length;)e.events[$][1].end={...F},$++;gs(e.events,I+1,0,e.events.slice(U)),e.events.length=$}}function V(G){let te=t.length;for(;te-- >G;){const Y=t[te];e.containerState=Y[1],Y[0].exit.call(e,n)}t.length=G}function W(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function qV(n,e,t){return Dt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Fm(n){if(n===null||gr(n)||FV(n))return 1;if(BV(n))return 2}function Sx(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const M_={name:"attention",resolveAll:HV,tokenize:$V};function HV(n,e){let t=-1,r,i,s,a,l,h,f,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;h=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const y={...n[r][1].end},_={...n[t][1].start};a3(y,-h),a3(_,h),a={type:h>1?"strongSequence":"emphasisSequence",start:y,end:{...n[r][1].end}},l={type:h>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:_},s={type:h>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:h>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},n[r][1].end={...a.start},n[t][1].start={...l.end},f=[],n[r][1].end.offset-n[r][1].start.offset&&(f=ii(f,[["enter",n[r][1],e],["exit",n[r][1],e]])),f=ii(f,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),f=ii(f,Sx(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),f=ii(f,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,f=ii(f,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,gs(n,r-1,t-r+3,f),t=r+f.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function $V(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Fm(r);let s;return a;function a(h){return s=h,n.enter("attentionSequence"),l(h)}function l(h){if(h===s)return n.consume(h),l;const f=n.exit("attentionSequence"),p=Fm(h),y=!p||p===2&&i||t.includes(h),_=!i||i===2&&p||t.includes(r);return f._open=!!(s===42?y:y&&(i||!_)),f._close=!!(s===42?_:_&&(p||!y)),e(h)}}function a3(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const GV={name:"autolink",tokenize:KV};function KV(n,e,t){let r=0;return i;function i(v){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(v){return ns(v)?(n.consume(v),a):v===64?t(v):f(v)}function a(v){return v===43||v===45||v===46||ki(v)?(r=1,l(v)):f(v)}function l(v){return v===58?(n.consume(v),r=0,h):(v===43||v===45||v===46||ki(v))&&r++<32?(n.consume(v),l):(r=0,f(v))}function h(v){return v===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.exit("autolink"),e):v===null||v===32||v===60||D_(v)?t(v):(n.consume(v),h)}function f(v){return v===64?(n.consume(v),p):OV(v)?(n.consume(v),f):t(v)}function p(v){return ki(v)?y(v):t(v)}function y(v){return v===46?(n.consume(v),r=0,p):v===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.exit("autolink"),e):_(v)}function _(v){if((v===45||ki(v))&&r++<63){const w=v===45?_:y;return n.consume(v),w}return t(v)}}const Tg={partial:!0,tokenize:WV};function WV(n,e,t){return r;function r(s){return xt(s)?Dt(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||je(s)?e(s):t(s)}}const p5={continuation:{tokenize:YV},exit:XV,name:"blockQuote",tokenize:QV};function QV(n,e,t){const r=this;return i;function i(a){if(a===62){const l=r.containerState;return l.open||(n.enter("blockQuote",{_container:!0}),l.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),s}return t(a)}function s(a){return xt(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function YV(n,e,t){const r=this;return i;function i(a){return xt(a)?Dt(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return n.attempt(p5,e,t)(a)}}function XV(n){n.exit("blockQuote")}const m5={name:"characterEscape",tokenize:ZV};function ZV(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return PV(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const g5={name:"characterReference",tokenize:JV};function JV(n,e,t){const r=this;let i=0,s,a;return l;function l(y){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),h}function h(y){return y===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(y),n.exit("characterReferenceMarkerNumeric"),f):(n.enter("characterReferenceValue"),s=31,a=ki,p(y))}function f(y){return y===88||y===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(y),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,a=LV,p):(n.enter("characterReferenceValue"),s=7,a=N_,p(y))}function p(y){if(y===59&&i){const _=n.exit("characterReferenceValue");return a===ki&&!Tx(r.sliceSerialize(_))?t(y):(n.enter("characterReferenceMarker"),n.consume(y),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(y)&&i++<s?(n.consume(y),p):t(y)}}const u3={partial:!0,tokenize:tU},l3={concrete:!0,name:"codeFenced",tokenize:eU};function eU(n,e,t){const r=this,i={partial:!0,tokenize:Y};let s=0,a=0,l;return h;function h($){return f($)}function f($){const U=r.events[r.events.length-1];return s=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,l=$,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p($)}function p($){return $===l?(a++,n.consume($),p):a<3?t($):(n.exit("codeFencedFenceSequence"),xt($)?Dt(n,y,"whitespace")($):y($))}function y($){return $===null||je($)?(n.exit("codeFencedFence"),r.interrupt?e($):n.check(u3,R,te)($)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),_($))}function _($){return $===null||je($)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),y($)):xt($)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Dt(n,v,"whitespace")($)):$===96&&$===l?t($):(n.consume($),_)}function v($){return $===null||je($)?y($):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),w($))}function w($){return $===null||je($)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),y($)):$===96&&$===l?t($):(n.consume($),w)}function R($){return n.attempt(i,te,D)($)}function D($){return n.enter("lineEnding"),n.consume($),n.exit("lineEnding"),V}function V($){return s>0&&xt($)?Dt(n,W,"linePrefix",s+1)($):W($)}function W($){return $===null||je($)?n.check(u3,R,te)($):(n.enter("codeFlowValue"),G($))}function G($){return $===null||je($)?(n.exit("codeFlowValue"),W($)):(n.consume($),G)}function te($){return n.exit("codeFenced"),e($)}function Y($,U,I){let N=0;return F;function F(Ee){return $.enter("lineEnding"),$.consume(Ee),$.exit("lineEnding"),j}function j(Ee){return $.enter("codeFencedFence"),xt(Ee)?Dt($,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ee):H(Ee)}function H(Ee){return Ee===l?($.enter("codeFencedFenceSequence"),P(Ee)):I(Ee)}function P(Ee){return Ee===l?(N++,$.consume(Ee),P):N>=a?($.exit("codeFencedFenceSequence"),xt(Ee)?Dt($,xe,"whitespace")(Ee):xe(Ee)):I(Ee)}function xe(Ee){return Ee===null||je(Ee)?($.exit("codeFencedFence"),U(Ee)):I(Ee)}}}function tU(n,e,t){const r=this;return i;function i(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}const mb={name:"codeIndented",tokenize:rU},nU={partial:!0,tokenize:iU};function rU(n,e,t){const r=this;return i;function i(f){return n.enter("codeIndented"),Dt(n,s,"linePrefix",5)(f)}function s(f){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?a(f):t(f)}function a(f){return f===null?h(f):je(f)?n.attempt(nU,a,h)(f):(n.enter("codeFlowValue"),l(f))}function l(f){return f===null||je(f)?(n.exit("codeFlowValue"),a(f)):(n.consume(f),l)}function h(f){return n.exit("codeIndented"),e(f)}}function iU(n,e,t){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?t(a):je(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):Dt(n,s,"linePrefix",5)(a)}function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):je(a)?i(a):t(a)}}const sU={name:"codeText",previous:aU,resolve:oU,tokenize:uU};function oU(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function aU(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uU(n,e,t){let r=0,i,s;return a;function a(y){return n.enter("codeText"),n.enter("codeTextSequence"),l(y)}function l(y){return y===96?(n.consume(y),r++,l):(n.exit("codeTextSequence"),h(y))}function h(y){return y===null?t(y):y===32?(n.enter("space"),n.consume(y),n.exit("space"),h):y===96?(s=n.enter("codeTextSequence"),i=0,p(y)):je(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),h):(n.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||je(y)?(n.exit("codeTextData"),h(y)):(n.consume(y),f)}function p(y){return y===96?(n.consume(y),i++,p):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(y)):(s.type="codeTextData",f(y))}}class lU{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&lf(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),lf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),lf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);lf(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);lf(this.left,t.reverse())}}}function lf(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function y5(n){const e={};let t=-1,r,i,s,a,l,h,f;const p=new lU(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(r=p.get(t),t&&r[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,cU(p,t)),t=e[t],f=!0);else if(r[1]._container){for(s=t,i=void 0;s--;)if(a=p.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(p.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...p.get(i)[1].start},l=p.slice(i,t),l.unshift(r),p.splice(i,t-i+1,l))}}return gs(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function cU(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const s=[];let a=t._tokenizer;a||(a=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,h=[],f={};let p,y,_=-1,v=t,w=0,R=0;const D=[R];for(;v;){for(;n.get(++i)[1]!==v;);s.push(i),v._tokenizer||(p=r.sliceStream(v),v.next||p.push(null),y&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(p),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),y=v,v=v.next}for(v=t;++_<l.length;)l[_][0]==="exit"&&l[_-1][0]==="enter"&&l[_][1].type===l[_-1][1].type&&l[_][1].start.line!==l[_][1].end.line&&(R=_+1,D.push(R),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):D.pop(),_=D.length;_--;){const V=l.slice(D[_],D[_+1]),W=s.pop();h.push([W,W+V.length-1]),n.splice(W,2,V)}for(h.reverse(),_=-1;++_<h.length;)f[w+h[_][0]]=w+h[_][1],w+=h[_][1]-h[_][0]-1;return f}const hU={resolve:dU,tokenize:pU},fU={partial:!0,tokenize:mU};function dU(n){return y5(n),n}function pU(n,e){let t;return r;function r(l){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):je(l)?n.check(fU,a,s)(l):(n.consume(l),i)}function s(l){return n.exit("chunkContent"),n.exit("content"),e(l)}function a(l){return n.consume(l),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function mU(n,e,t){const r=this;return i;function i(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Dt(n,s,"linePrefix")}function s(a){if(a===null||je(a))return t(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):n.interrupt(r.parser.constructs.flow,t,e)(a)}}function b5(n,e,t,r,i,s,a,l,h){const f=h||Number.POSITIVE_INFINITY;let p=0;return y;function y(V){return V===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(V),n.exit(s),_):V===null||V===32||V===41||D_(V)?t(V):(n.enter(r),n.enter(a),n.enter(l),n.enter("chunkString",{contentType:"string"}),R(V))}function _(V){return V===62?(n.enter(s),n.consume(V),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(l),n.enter("chunkString",{contentType:"string"}),v(V))}function v(V){return V===62?(n.exit("chunkString"),n.exit(l),_(V)):V===null||V===60||je(V)?t(V):(n.consume(V),V===92?w:v)}function w(V){return V===60||V===62||V===92?(n.consume(V),v):v(V)}function R(V){return!p&&(V===null||V===41||gr(V))?(n.exit("chunkString"),n.exit(l),n.exit(a),n.exit(r),e(V)):p<f&&V===40?(n.consume(V),p++,R):V===41?(n.consume(V),p--,R):V===null||V===32||V===40||D_(V)?t(V):(n.consume(V),V===92?D:R)}function D(V){return V===40||V===41||V===92?(n.consume(V),R):R(V)}}function _5(n,e,t,r,i,s){const a=this;let l=0,h;return f;function f(v){return n.enter(r),n.enter(i),n.consume(v),n.exit(i),n.enter(s),p}function p(v){return l>999||v===null||v===91||v===93&&!h||v===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?t(v):v===93?(n.exit(s),n.enter(i),n.consume(v),n.exit(i),n.exit(r),e):je(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),y(v))}function y(v){return v===null||v===91||v===93||je(v)||l++>999?(n.exit("chunkString"),p(v)):(n.consume(v),h||(h=!xt(v)),v===92?_:y)}function _(v){return v===91||v===92||v===93?(n.consume(v),l++,y):y(v)}}function v5(n,e,t,r,i,s){let a;return l;function l(_){return _===34||_===39||_===40?(n.enter(r),n.enter(i),n.consume(_),n.exit(i),a=_===40?41:_,h):t(_)}function h(_){return _===a?(n.enter(i),n.consume(_),n.exit(i),n.exit(r),e):(n.enter(s),f(_))}function f(_){return _===a?(n.exit(s),h(a)):_===null?t(_):je(_)?(n.enter("lineEnding"),n.consume(_),n.exit("lineEnding"),Dt(n,f,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===a||_===null||je(_)?(n.exit("chunkString"),f(_)):(n.consume(_),_===92?y:p)}function y(_){return _===a||_===92?(n.consume(_),p):p(_)}}function qf(n,e){let t;return r;function r(i){return je(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):xt(i)?Dt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const gU={name:"definition",tokenize:bU},yU={partial:!0,tokenize:_U};function bU(n,e,t){const r=this;let i;return s;function s(v){return n.enter("definition"),a(v)}function a(v){return _5.call(r,n,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return i=yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(n.enter("definitionMarker"),n.consume(v),n.exit("definitionMarker"),h):t(v)}function h(v){return gr(v)?qf(n,f)(v):f(v)}function f(v){return b5(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return n.attempt(yU,y,y)(v)}function y(v){return xt(v)?Dt(n,_,"whitespace")(v):_(v)}function _(v){return v===null||je(v)?(n.exit("definition"),r.parser.defined.push(i),e(v)):t(v)}}function _U(n,e,t){return r;function r(l){return gr(l)?qf(n,i)(l):t(l)}function i(l){return v5(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return xt(l)?Dt(n,a,"whitespace")(l):a(l)}function a(l){return l===null||je(l)?e(l):t(l)}}const vU={name:"hardBreakEscape",tokenize:xU};function xU(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return je(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const EU={name:"headingAtx",resolve:wU,tokenize:kU};function wU(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},gs(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function kU(n,e,t){let r=0;return i;function i(p){return n.enter("atxHeading"),s(p)}function s(p){return n.enter("atxHeadingSequence"),a(p)}function a(p){return p===35&&r++<6?(n.consume(p),a):p===null||gr(p)?(n.exit("atxHeadingSequence"),l(p)):t(p)}function l(p){return p===35?(n.enter("atxHeadingSequence"),h(p)):p===null||je(p)?(n.exit("atxHeading"),e(p)):xt(p)?Dt(n,l,"whitespace")(p):(n.enter("atxHeadingText"),f(p))}function h(p){return p===35?(n.consume(p),h):(n.exit("atxHeadingSequence"),l(p))}function f(p){return p===null||p===35||gr(p)?(n.exit("atxHeadingText"),l(p)):(n.consume(p),f)}}const TU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],c3=["pre","script","style","textarea"],SU={concrete:!0,name:"htmlFlow",resolveTo:RU,tokenize:IU},AU={partial:!0,tokenize:NU},CU={partial:!0,tokenize:DU};function RU(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function IU(n,e,t){const r=this;let i,s,a,l,h;return f;function f(B){return p(B)}function p(B){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(B),y}function y(B){return B===33?(n.consume(B),_):B===47?(n.consume(B),s=!0,R):B===63?(n.consume(B),i=3,r.interrupt?e:C):ns(B)?(n.consume(B),a=String.fromCharCode(B),D):t(B)}function _(B){return B===45?(n.consume(B),i=2,v):B===91?(n.consume(B),i=5,l=0,w):ns(B)?(n.consume(B),i=4,r.interrupt?e:C):t(B)}function v(B){return B===45?(n.consume(B),r.interrupt?e:C):t(B)}function w(B){const _e="CDATA[";return B===_e.charCodeAt(l++)?(n.consume(B),l===_e.length?r.interrupt?e:H:w):t(B)}function R(B){return ns(B)?(n.consume(B),a=String.fromCharCode(B),D):t(B)}function D(B){if(B===null||B===47||B===62||gr(B)){const _e=B===47,Pe=a.toLowerCase();return!_e&&!s&&c3.includes(Pe)?(i=1,r.interrupt?e(B):H(B)):TU.includes(a.toLowerCase())?(i=6,_e?(n.consume(B),V):r.interrupt?e(B):H(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(B):s?W(B):G(B))}return B===45||ki(B)?(n.consume(B),a+=String.fromCharCode(B),D):t(B)}function V(B){return B===62?(n.consume(B),r.interrupt?e:H):t(B)}function W(B){return xt(B)?(n.consume(B),W):F(B)}function G(B){return B===47?(n.consume(B),F):B===58||B===95||ns(B)?(n.consume(B),te):xt(B)?(n.consume(B),G):F(B)}function te(B){return B===45||B===46||B===58||B===95||ki(B)?(n.consume(B),te):Y(B)}function Y(B){return B===61?(n.consume(B),$):xt(B)?(n.consume(B),Y):G(B)}function $(B){return B===null||B===60||B===61||B===62||B===96?t(B):B===34||B===39?(n.consume(B),h=B,U):xt(B)?(n.consume(B),$):I(B)}function U(B){return B===h?(n.consume(B),h=null,N):B===null||je(B)?t(B):(n.consume(B),U)}function I(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||gr(B)?Y(B):(n.consume(B),I)}function N(B){return B===47||B===62||xt(B)?G(B):t(B)}function F(B){return B===62?(n.consume(B),j):t(B)}function j(B){return B===null||je(B)?H(B):xt(B)?(n.consume(B),j):t(B)}function H(B){return B===45&&i===2?(n.consume(B),pe):B===60&&i===1?(n.consume(B),we):B===62&&i===4?(n.consume(B),ue):B===63&&i===3?(n.consume(B),C):B===93&&i===5?(n.consume(B),Ke):je(B)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(AU,be,P)(B)):B===null||je(B)?(n.exit("htmlFlowData"),P(B)):(n.consume(B),H)}function P(B){return n.check(CU,xe,be)(B)}function xe(B){return n.enter("lineEnding"),n.consume(B),n.exit("lineEnding"),Ee}function Ee(B){return B===null||je(B)?P(B):(n.enter("htmlFlowData"),H(B))}function pe(B){return B===45?(n.consume(B),C):H(B)}function we(B){return B===47?(n.consume(B),a="",ke):H(B)}function ke(B){if(B===62){const _e=a.toLowerCase();return c3.includes(_e)?(n.consume(B),ue):H(B)}return ns(B)&&a.length<8?(n.consume(B),a+=String.fromCharCode(B),ke):H(B)}function Ke(B){return B===93?(n.consume(B),C):H(B)}function C(B){return B===62?(n.consume(B),ue):B===45&&i===2?(n.consume(B),C):H(B)}function ue(B){return B===null||je(B)?(n.exit("htmlFlowData"),be(B)):(n.consume(B),ue)}function be(B){return n.exit("htmlFlow"),e(B)}}function DU(n,e,t){const r=this;return i;function i(a){return je(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):t(a)}function s(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}function NU(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(Tg,e,t)}}const MU={name:"htmlText",tokenize:OU};function OU(n,e,t){const r=this;let i,s,a;return l;function l(C){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(C),h}function h(C){return C===33?(n.consume(C),f):C===47?(n.consume(C),Y):C===63?(n.consume(C),G):ns(C)?(n.consume(C),I):t(C)}function f(C){return C===45?(n.consume(C),p):C===91?(n.consume(C),s=0,w):ns(C)?(n.consume(C),W):t(C)}function p(C){return C===45?(n.consume(C),v):t(C)}function y(C){return C===null?t(C):C===45?(n.consume(C),_):je(C)?(a=y,we(C)):(n.consume(C),y)}function _(C){return C===45?(n.consume(C),v):y(C)}function v(C){return C===62?pe(C):C===45?_(C):y(C)}function w(C){const ue="CDATA[";return C===ue.charCodeAt(s++)?(n.consume(C),s===ue.length?R:w):t(C)}function R(C){return C===null?t(C):C===93?(n.consume(C),D):je(C)?(a=R,we(C)):(n.consume(C),R)}function D(C){return C===93?(n.consume(C),V):R(C)}function V(C){return C===62?pe(C):C===93?(n.consume(C),V):R(C)}function W(C){return C===null||C===62?pe(C):je(C)?(a=W,we(C)):(n.consume(C),W)}function G(C){return C===null?t(C):C===63?(n.consume(C),te):je(C)?(a=G,we(C)):(n.consume(C),G)}function te(C){return C===62?pe(C):G(C)}function Y(C){return ns(C)?(n.consume(C),$):t(C)}function $(C){return C===45||ki(C)?(n.consume(C),$):U(C)}function U(C){return je(C)?(a=U,we(C)):xt(C)?(n.consume(C),U):pe(C)}function I(C){return C===45||ki(C)?(n.consume(C),I):C===47||C===62||gr(C)?N(C):t(C)}function N(C){return C===47?(n.consume(C),pe):C===58||C===95||ns(C)?(n.consume(C),F):je(C)?(a=N,we(C)):xt(C)?(n.consume(C),N):pe(C)}function F(C){return C===45||C===46||C===58||C===95||ki(C)?(n.consume(C),F):j(C)}function j(C){return C===61?(n.consume(C),H):je(C)?(a=j,we(C)):xt(C)?(n.consume(C),j):N(C)}function H(C){return C===null||C===60||C===61||C===62||C===96?t(C):C===34||C===39?(n.consume(C),i=C,P):je(C)?(a=H,we(C)):xt(C)?(n.consume(C),H):(n.consume(C),xe)}function P(C){return C===i?(n.consume(C),i=void 0,Ee):C===null?t(C):je(C)?(a=P,we(C)):(n.consume(C),P)}function xe(C){return C===null||C===34||C===39||C===60||C===61||C===96?t(C):C===47||C===62||gr(C)?N(C):(n.consume(C),xe)}function Ee(C){return C===47||C===62||gr(C)?N(C):t(C)}function pe(C){return C===62?(n.consume(C),n.exit("htmlTextData"),n.exit("htmlText"),e):t(C)}function we(C){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(C),n.exit("lineEnding"),ke}function ke(C){return xt(C)?Dt(n,Ke,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):Ke(C)}function Ke(C){return n.enter("htmlTextData"),a(C)}}const Ax={name:"labelEnd",resolveAll:FU,resolveTo:VU,tokenize:UU},LU={tokenize:zU},PU={tokenize:jU},BU={tokenize:qU};function FU(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&gs(n,0,n.length,t),n}function VU(n,e){let t=n.length,r=0,i,s,a,l;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=t);const h={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},f={type:"label",start:{...n[s][1].start},end:{...n[a][1].end}},p={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[a-2][1].start}};return l=[["enter",h,e],["enter",f,e]],l=ii(l,n.slice(s+1,s+r+3)),l=ii(l,[["enter",p,e]]),l=ii(l,Sx(e.parser.constructs.insideSpan.null,n.slice(s+r+4,a-3),e)),l=ii(l,[["exit",p,e],n[a-2],n[a-1],["exit",f,e]]),l=ii(l,n.slice(a+1)),l=ii(l,[["exit",h,e]]),gs(n,s,n.length,l),n}function UU(n,e,t){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(_){return s?s._inactive?y(_):(a=r.parser.defined.includes(yc(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(_),n.exit("labelMarker"),n.exit("labelEnd"),h):t(_)}function h(_){return _===40?n.attempt(LU,p,a?p:y)(_):_===91?n.attempt(PU,p,a?f:y)(_):a?p(_):y(_)}function f(_){return n.attempt(BU,p,y)(_)}function p(_){return e(_)}function y(_){return s._balanced=!0,t(_)}}function zU(n,e,t){return r;function r(y){return n.enter("resource"),n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),i}function i(y){return gr(y)?qf(n,s)(y):s(y)}function s(y){return y===41?p(y):b5(n,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function a(y){return gr(y)?qf(n,h)(y):p(y)}function l(y){return t(y)}function h(y){return y===34||y===39||y===40?v5(n,f,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function f(y){return gr(y)?qf(n,p)(y):p(y)}function p(y){return y===41?(n.enter("resourceMarker"),n.consume(y),n.exit("resourceMarker"),n.exit("resource"),e):t(y)}}function jU(n,e,t){const r=this;return i;function i(l){return _5.call(r,n,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):t(l)}function a(l){return t(l)}}function qU(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const HU={name:"labelStartImage",resolveAll:Ax.resolveAll,tokenize:$U};function $U(n,e,t){const r=this;return i;function i(l){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(l),n.exit("labelImageMarker"),s}function s(l){return l===91?(n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelImage"),a):t(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):e(l)}}const GU={name:"labelStartLink",resolveAll:Ax.resolveAll,tokenize:KU};function KU(n,e,t){const r=this;return i;function i(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const gb={name:"lineEnding",tokenize:WU};function WU(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Dt(n,e,"linePrefix")}}const U0={name:"thematicBreak",tokenize:QU};function QU(n,e,t){let r=0,i;return s;function s(f){return n.enter("thematicBreak"),a(f)}function a(f){return i=f,l(f)}function l(f){return f===i?(n.enter("thematicBreakSequence"),h(f)):r>=3&&(f===null||je(f))?(n.exit("thematicBreak"),e(f)):t(f)}function h(f){return f===i?(n.consume(f),r++,h):(n.exit("thematicBreakSequence"),xt(f)?Dt(n,l,"whitespace")(f):l(f))}}const hr={continuation:{tokenize:JU},exit:tz,name:"list",tokenize:ZU},YU={partial:!0,tokenize:nz},XU={partial:!0,tokenize:ez};function ZU(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(v){const w=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:N_(v)){if(r.containerState.type||(r.containerState.type=w,n.enter(w,{_container:!0})),w==="listUnordered")return n.enter("listItemPrefix"),v===42||v===45?n.check(U0,t,f)(v):f(v);if(!r.interrupt||v===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),h(v)}return t(v)}function h(v){return N_(v)&&++a<10?(n.consume(v),h):(!r.interrupt||a<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(n.exit("listItemValue"),f(v)):t(v)}function f(v){return n.enter("listItemMarker"),n.consume(v),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,n.check(Tg,r.interrupt?t:p,n.attempt(YU,_,y))}function p(v){return r.containerState.initialBlankLine=!0,s++,_(v)}function y(v){return xt(v)?(n.enter("listItemPrefixWhitespace"),n.consume(v),n.exit("listItemPrefixWhitespace"),_):t(v)}function _(v){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(v)}}function JU(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(Tg,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Dt(n,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!xt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(XU,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Dt(n,n.attempt(hr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function ez(n,e,t){const r=this;return Dt(n,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):t(s)}}function tz(n){n.exit(this.containerState.type)}function nz(n,e,t){const r=this;return Dt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!xt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const h3={name:"setextUnderline",resolveTo:rz,tokenize:iz};function rz(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const a={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",a,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=a,n.push(["exit",a,e]),n}function iz(n,e,t){const r=this;let i;return s;function s(f){let p=r.events.length,y;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){y=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(n.enter("setextHeadingLine"),i=f,a(f)):t(f)}function a(f){return n.enter("setextHeadingLineSequence"),l(f)}function l(f){return f===i?(n.consume(f),l):(n.exit("setextHeadingLineSequence"),xt(f)?Dt(n,h,"lineSuffix")(f):h(f))}function h(f){return f===null||je(f)?(n.exit("setextHeadingLine"),e(f)):t(f)}}const sz={tokenize:oz};function oz(n){const e=this,t=n.attempt(Tg,r,n.attempt(this.parser.constructs.flowInitial,i,Dt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(hU,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const az={resolveAll:E5()},uz=x5("string"),lz=x5("text");function x5(n){return{resolveAll:E5(n==="text"?cz:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,a,l);return a;function a(p){return f(p)?s(p):l(p)}function l(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),h}function h(p){return f(p)?(t.exit("data"),s(p)):(t.consume(p),h)}function f(p){if(p===null)return!0;const y=i[p];let _=-1;if(y)for(;++_<y.length;){const v=y[_];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function E5(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function cz(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,a=-1,l=0,h;for(;s--;){const f=i[s];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(f===-2)h=!0,l++;else if(f!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(l=0),l){const f={type:t===n.length||h||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(n.splice(t,0,["enter",f,e],["exit",f,e]),t+=2)}t++}return n}const hz={42:hr,43:hr,45:hr,48:hr,49:hr,50:hr,51:hr,52:hr,53:hr,54:hr,55:hr,56:hr,57:hr,62:p5},fz={91:gU},dz={[-2]:mb,[-1]:mb,32:mb},pz={35:EU,42:U0,45:[h3,U0],60:SU,61:h3,95:U0,96:l3,126:l3},mz={38:g5,92:m5},gz={[-5]:gb,[-4]:gb,[-3]:gb,33:HU,38:g5,42:M_,60:[GV,MU],91:GU,92:[vU,m5],93:Ax,95:M_,96:sU},yz={null:[M_,az]},bz={null:[42,95]},_z={null:[]},vz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:bz,contentInitial:fz,disable:_z,document:hz,flow:pz,flowInitial:dz,insideSpan:yz,string:mz,text:gz},Symbol.toStringTag,{value:"Module"}));function xz(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},s=[];let a=[],l=[];const h={attempt:U(Y),check:U($),consume:W,enter:G,exit:te,interrupt:U($,{interrupt:!0})},f={code:null,containerState:{},defineSkip:R,events:[],now:w,parser:n,previous:null,sliceSerialize:_,sliceStream:v,write:y};let p=e.tokenize.call(f,h);return e.resolveAll&&s.push(e),f;function y(j){return a=ii(a,j),D(),a[a.length-1]!==null?[]:(I(e,0),f.events=Sx(s,f.events,f),f.events)}function _(j,H){return wz(v(j),H)}function v(j){return Ez(a,j)}function w(){const{_bufferIndex:j,_index:H,line:P,column:xe,offset:Ee}=r;return{_bufferIndex:j,_index:H,line:P,column:xe,offset:Ee}}function R(j){i[j.line]=j.column,F()}function D(){let j;for(;r._index<a.length;){const H=a[r._index];if(typeof H=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<H.length;)V(H.charCodeAt(r._bufferIndex));else V(H)}}function V(j){p=p(j)}function W(j){je(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,F()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=j}function G(j,H){const P=H||{};return P.type=j,P.start=w(),f.events.push(["enter",P,f]),l.push(P),P}function te(j){const H=l.pop();return H.end=w(),f.events.push(["exit",H,f]),H}function Y(j,H){I(j,H.from)}function $(j,H){H.restore()}function U(j,H){return P;function P(xe,Ee,pe){let we,ke,Ke,C;return Array.isArray(xe)?be(xe):"tokenize"in xe?be([xe]):ue(xe);function ue(Ae){return Ve;function Ve(Ne){const Je=Ne!==null&&Ae[Ne],Xe=Ne!==null&&Ae.null,jt=[...Array.isArray(Je)?Je:Je?[Je]:[],...Array.isArray(Xe)?Xe:Xe?[Xe]:[]];return be(jt)(Ne)}}function be(Ae){return we=Ae,ke=0,Ae.length===0?pe:B(Ae[ke])}function B(Ae){return Ve;function Ve(Ne){return C=N(),Ke=Ae,Ae.partial||(f.currentConstruct=Ae),Ae.name&&f.parser.constructs.disable.null.includes(Ae.name)?Pe():Ae.tokenize.call(H?Object.assign(Object.create(f),H):f,h,_e,Pe)(Ne)}}function _e(Ae){return j(Ke,C),Ee}function Pe(Ae){return C.restore(),++ke<we.length?B(we[ke]):pe}}}function I(j,H){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&gs(f.events,H,f.events.length-H,j.resolve(f.events.slice(H),f)),j.resolveTo&&(f.events=j.resolveTo(f.events,f))}function N(){const j=w(),H=f.previous,P=f.currentConstruct,xe=f.events.length,Ee=Array.from(l);return{from:xe,restore:pe};function pe(){r=j,f.previous=H,f.currentConstruct=P,f.events.length=xe,l=Ee,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ez(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(t===i)a=[n[t].slice(r,s)];else{if(a=n.slice(t,i),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}s>0&&a.push(n[i].slice(0,s))}return a}function wz(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function kz(n){const r={constructs:DV([vz,...(n||{}).extensions||[]]),content:i(VV),defined:[],document:i(zV),flow:i(sz),lazy:{},string:i(uz),text:i(lz)};return r;function i(s){return a;function a(l){return xz(r,s,l)}}}function Tz(n){for(;!y5(n););return n}const f3=/[\0\t\n\r]/g;function Sz(){let n=1,e="",t=!0,r;return i;function i(s,a,l){const h=[];let f,p,y,_,v;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),y=0,e="",t&&(s.charCodeAt(0)===65279&&y++,t=void 0);y<s.length;){if(f3.lastIndex=y,f=f3.exec(s),_=f&&f.index!==void 0?f.index:s.length,v=s.charCodeAt(_),!f){e=s.slice(y);break}if(v===10&&y===_&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),y<_&&(h.push(s.slice(y,_)),n+=_-y),v){case 0:{h.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,h.push(-2);n++<p;)h.push(-1);break}case 10:{h.push(-4),n=1;break}default:r=!0,n=1}y=_+1}return l&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const Az=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function w5(n){return n.replace(Az,Cz)}function Cz(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return d5(t.slice(s?2:1),s?16:10)}return Tx(t)||n}function Hf(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?d3(n.position):"start"in n||"end"in n?d3(n):"line"in n||"column"in n?O_(n):""}function O_(n){return p3(n&&n.line)+":"+p3(n&&n.column)}function d3(n){return O_(n&&n.start)+"-"+O_(n&&n.end)}function p3(n){return n&&typeof n=="number"?n:1}const k5={}.hasOwnProperty;function Rz(n,e,t){return typeof e!="string"&&(t=e,e=void 0),Iz(t)(Tz(kz(t).document().write(Sz()(n,e,!0))))}function Iz(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(fi),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(xr),blockQuote:s(Xe),characterEscape:N,characterReference:N,codeFenced:s(jt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(jt,a),codeText:s(ar,a),codeTextData:N,data:N,codeFlowValue:N,definition:s(Qt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Fn),hardBreakEscape:s(ur),hardBreakTrailing:s(ur),htmlFlow:s(Vr,a),htmlFlowData:N,htmlText:s(Vr,a),htmlTextData:N,image:s(Li),label:a,link:s(fi),listItem:s(wr),listItemValue:_,listOrdered:s(Er,y),listUnordered:s(Er),paragraph:s(Vn),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(xr),strong:s(di),thematicBreak:s(Yn)},exit:{atxHeading:h(),atxHeadingSequence:Y,autolink:h(),autolinkEmail:Je,autolinkProtocol:Ne,blockQuote:h(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:Pe,characterReferenceMarkerNumeric:Pe,characterReferenceValue:Ae,characterReference:Ve,codeFenced:h(D),codeFencedFence:R,codeFencedFenceInfo:v,codeFencedFenceMeta:w,codeFlowValue:F,codeIndented:h(V),codeText:h(Ee),codeTextData:F,data:F,definition:h(),definitionDestinationString:te,definitionLabelString:W,definitionTitleString:G,emphasis:h(),hardBreakEscape:h(H),hardBreakTrailing:h(H),htmlFlow:h(P),htmlFlowData:F,htmlText:h(xe),htmlTextData:F,image:h(we),label:Ke,labelText:ke,lineEnding:j,link:h(pe),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:_e,resourceDestinationString:C,resourceTitleString:ue,resource:be,setextHeading:h(I),setextHeadingLineSequence:U,setextHeadingText:$,strong:h(),thematicBreak:h()}};T5(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(se){let A={type:"root",children:[]};const x={stack:[A],tokenStack:[],config:e,enter:l,exit:f,buffer:a,resume:p,data:t},k=[];let L=-1;for(;++L<se.length;)if(se[L][1].type==="listOrdered"||se[L][1].type==="listUnordered")if(se[L][0]==="enter")k.push(L);else{const K=k.pop();L=i(se,K,L)}for(L=-1;++L<se.length;){const K=e[se[L][0]];k5.call(K,se[L][1].type)&&K[se[L][1].type].call(Object.assign({sliceSerialize:se[L][2].sliceSerialize},x),se[L][1])}if(x.tokenStack.length>0){const K=x.tokenStack[x.tokenStack.length-1];(K[1]||m3).call(x,void 0,K[0])}for(A.position={start:Yo(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:Yo(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},L=-1;++L<e.transforms.length;)A=e.transforms[L](A)||A;return A}function i(se,A,x){let k=A-1,L=-1,K=!1,re,ae,Re,ut;for(;++k<=x;){const Ue=se[k];switch(Ue[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ue[0]==="enter"?L++:L--,ut=void 0;break}case"lineEndingBlank":{Ue[0]==="enter"&&(re&&!ut&&!L&&!Re&&(Re=k),ut=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ut=void 0}if(!L&&Ue[0]==="enter"&&Ue[1].type==="listItemPrefix"||L===-1&&Ue[0]==="exit"&&(Ue[1].type==="listUnordered"||Ue[1].type==="listOrdered")){if(re){let He=k;for(ae=void 0;He--;){const Ye=se[He];if(Ye[1].type==="lineEnding"||Ye[1].type==="lineEndingBlank"){if(Ye[0]==="exit")continue;ae&&(se[ae][1].type="lineEndingBlank",K=!0),Ye[1].type="lineEnding",ae=He}else if(!(Ye[1].type==="linePrefix"||Ye[1].type==="blockQuotePrefix"||Ye[1].type==="blockQuotePrefixWhitespace"||Ye[1].type==="blockQuoteMarker"||Ye[1].type==="listItemIndent"))break}Re&&(!ae||Re<ae)&&(re._spread=!0),re.end=Object.assign({},ae?se[ae][1].start:Ue[1].end),se.splice(ae||k,0,["exit",re,Ue[2]]),k++,x++}if(Ue[1].type==="listItemPrefix"){const He={type:"listItem",_spread:!1,start:Object.assign({},Ue[1].start),end:void 0};re=He,se.splice(k,0,["enter",He,Ue[2]]),k++,x++,Re=void 0,ut=!0}}}return se[A][1]._spread=K,x}function s(se,A){return x;function x(k){l.call(this,se(k),k),A&&A.call(this,k)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(se,A,x){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([A,x||void 0]),se.position={start:Yo(A.start),end:void 0}}function h(se){return A;function A(x){se&&se.call(this,x),f.call(this,x)}}function f(se,A){const x=this.stack.pop(),k=this.tokenStack.pop();if(k)k[0].type!==se.type&&(A?A.call(this,se,k[0]):(k[1]||m3).call(this,se,k[0]));else throw new Error("Cannot close `"+se.type+"` ("+Hf({start:se.start,end:se.end})+"): its not open");x.position.end=Yo(se.end)}function p(){return kx(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function _(se){if(this.data.expectingFirstListItemValue){const A=this.stack[this.stack.length-2];A.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function v(){const se=this.resume(),A=this.stack[this.stack.length-1];A.lang=se}function w(){const se=this.resume(),A=this.stack[this.stack.length-1];A.meta=se}function R(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function D(){const se=this.resume(),A=this.stack[this.stack.length-1];A.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function V(){const se=this.resume(),A=this.stack[this.stack.length-1];A.value=se.replace(/(\r?\n|\r)$/g,"")}function W(se){const A=this.resume(),x=this.stack[this.stack.length-1];x.label=A,x.identifier=yc(this.sliceSerialize(se)).toLowerCase()}function G(){const se=this.resume(),A=this.stack[this.stack.length-1];A.title=se}function te(){const se=this.resume(),A=this.stack[this.stack.length-1];A.url=se}function Y(se){const A=this.stack[this.stack.length-1];if(!A.depth){const x=this.sliceSerialize(se).length;A.depth=x}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function U(se){const A=this.stack[this.stack.length-1];A.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function N(se){const x=this.stack[this.stack.length-1].children;let k=x[x.length-1];(!k||k.type!=="text")&&(k=mn(),k.position={start:Yo(se.start),end:void 0},x.push(k)),this.stack.push(k)}function F(se){const A=this.stack.pop();A.value+=this.sliceSerialize(se),A.position.end=Yo(se.end)}function j(se){const A=this.stack[this.stack.length-1];if(this.data.atHardBreak){const x=A.children[A.children.length-1];x.position.end=Yo(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(A.type)&&(N.call(this,se),F.call(this,se))}function H(){this.data.atHardBreak=!0}function P(){const se=this.resume(),A=this.stack[this.stack.length-1];A.value=se}function xe(){const se=this.resume(),A=this.stack[this.stack.length-1];A.value=se}function Ee(){const se=this.resume(),A=this.stack[this.stack.length-1];A.value=se}function pe(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const A=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=A,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function we(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const A=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=A,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function ke(se){const A=this.sliceSerialize(se),x=this.stack[this.stack.length-2];x.label=w5(A),x.identifier=yc(A).toLowerCase()}function Ke(){const se=this.stack[this.stack.length-1],A=this.resume(),x=this.stack[this.stack.length-1];if(this.data.inReference=!0,x.type==="link"){const k=se.children;x.children=k}else x.alt=A}function C(){const se=this.resume(),A=this.stack[this.stack.length-1];A.url=se}function ue(){const se=this.resume(),A=this.stack[this.stack.length-1];A.title=se}function be(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function _e(se){const A=this.resume(),x=this.stack[this.stack.length-1];x.label=A,x.identifier=yc(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function Pe(se){this.data.characterReferenceType=se.type}function Ae(se){const A=this.sliceSerialize(se),x=this.data.characterReferenceType;let k;x?(k=d5(A,x==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):k=Tx(A);const L=this.stack[this.stack.length-1];L.value+=k}function Ve(se){const A=this.stack.pop();A.position.end=Yo(se.end)}function Ne(se){F.call(this,se);const A=this.stack[this.stack.length-1];A.url=this.sliceSerialize(se)}function Je(se){F.call(this,se);const A=this.stack[this.stack.length-1];A.url="mailto:"+this.sliceSerialize(se)}function Xe(){return{type:"blockquote",children:[]}}function jt(){return{type:"code",lang:null,meta:null,value:""}}function ar(){return{type:"inlineCode",value:""}}function Qt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Fn(){return{type:"emphasis",children:[]}}function xr(){return{type:"heading",depth:0,children:[]}}function ur(){return{type:"break"}}function Vr(){return{type:"html",value:""}}function Li(){return{type:"image",title:null,url:"",alt:null}}function fi(){return{type:"link",title:null,url:"",children:[]}}function Er(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function wr(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function Vn(){return{type:"paragraph",children:[]}}function di(){return{type:"strong",children:[]}}function mn(){return{type:"text",value:""}}function Yn(){return{type:"thematicBreak"}}}function Yo(n){return{line:n.line,column:n.column,offset:n.offset}}function T5(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?T5(n,r):Dz(n,r)}}function Dz(n,e){let t;for(t in e)if(k5.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function m3(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Hf({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Hf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Hf({start:e.start,end:e.end})+") is still open")}function L_(n){const e=this;e.parser=t;function t(r){return Rz(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const g3={}.hasOwnProperty;function Nz(n,e){const t=e||{};function r(i,...s){let a=r.invalid;const l=r.handlers;if(i&&g3.call(i,n)){const h=String(i[n]);a=g3.call(l,h)?l[h]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const Mz={}.hasOwnProperty;function S5(n,e){let t=-1,r;if(e.extensions)for(;++t<e.extensions.length;)S5(n,e.extensions[t]);for(r in e)if(Mz.call(e,r))switch(r){case"extensions":break;case"unsafe":{y3(n[r],e[r]);break}case"join":{y3(n[r],e[r]);break}case"handlers":{Oz(n[r],e[r]);break}default:n.options[r]=e[r]}return n}function y3(n,e){e&&n.push(...e)}function Oz(n,e){e&&Object.assign(n,e)}function Lz(n,e,t,r){const i=t.enter("blockquote"),s=t.createTracker(r);s.move("> "),s.shift(2);const a=t.indentLines(t.containerFlow(n,s.current()),Pz);return i(),a}function Pz(n,e,t){return">"+(t?"":" ")+n}function A5(n,e){return b3(n,e.inConstruct,!0)&&!b3(n,e.notInConstruct,!1)}function b3(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function _3(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&A5(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Bz(n,e){const t=String(n);let r=t.indexOf(e),i=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+e.length,r=t.indexOf(e,i);return a}function P_(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function Fz(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Vz(n,e,t,r){const i=Fz(t),s=n.value||"",a=i==="`"?"GraveAccent":"Tilde";if(P_(n,t)){const y=t.enter("codeIndented"),_=t.indentLines(s,Uz);return y(),_}const l=t.createTracker(r),h=i.repeat(Math.max(Bz(s,i)+1,3)),f=t.enter("codeFenced");let p=l.move(h);if(n.lang){const y=t.enter(`codeFencedLang${a}`);p+=l.move(t.safe(n.lang,{before:p,after:" ",encode:["`"],...l.current()})),y()}if(n.lang&&n.meta){const y=t.enter(`codeFencedMeta${a}`);p+=l.move(" "),p+=l.move(t.safe(n.meta,{before:p,after:`
`,encode:["`"],...l.current()})),y()}return p+=l.move(`
`),s&&(p+=l.move(s+`
`)),p+=l.move(h),f(),p}function Uz(n,e,t){return(t?"":"    ")+n}function Cx(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function zz(n,e,t,r){const i=Cx(t),s=i==='"'?"Quote":"Apostrophe",a=t.enter("definition");let l=t.enter("label");const h=t.createTracker(r);let f=h.move("[");return f+=h.move(t.safe(t.associationId(n),{before:f,after:"]",...h.current()})),f+=h.move("]: "),l(),!n.url||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(t.safe(n.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(l=t.enter("destinationRaw"),f+=h.move(t.safe(n.url,{before:f,after:n.title?" ":`
`,...h.current()}))),l(),n.title&&(l=t.enter(`title${s}`),f+=h.move(" "+i),f+=h.move(t.safe(n.title,{before:f,after:i,...h.current()})),f+=h.move(i),l()),a(),f}function jz(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function La(n){return"&#x"+n.toString(16).toUpperCase()+";"}function Vm(n,e,t){const r=Fm(n),i=Fm(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}C5.peek=qz;function C5(n,e,t,r){const i=jz(t),s=t.enter("emphasis"),a=t.createTracker(r),l=a.move(i);let h=a.move(t.containerPhrasing(n,{after:i,before:l,...a.current()}));const f=h.charCodeAt(0),p=Vm(r.before.charCodeAt(r.before.length-1),f,i);p.inside&&(h=La(f)+h.slice(1));const y=h.charCodeAt(h.length-1),_=Vm(r.after.charCodeAt(0),y,i);_.inside&&(h=h.slice(0,-1)+La(y));const v=a.move(i);return s(),t.attentionEncodeSurroundingInfo={after:_.outside,before:p.outside},l+h+v}function qz(n,e,t){return t.options.emphasis||"*"}const Rx=function(n){if(n==null)return Kz;if(typeof n=="function")return Sg(n);if(typeof n=="object")return Array.isArray(n)?Hz(n):$z(n);if(typeof n=="string")return Gz(n);throw new Error("Expected function, string, or object as test")};function Hz(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Rx(n[t]);return Sg(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function $z(n){const e=n;return Sg(t);function t(r){const i=r;let s;for(s in n)if(i[s]!==e[s])return!1;return!0}}function Gz(n){return Sg(e);function e(t){return t&&t.type===n}}function Sg(n){return e;function e(t,r,i){return!!(Wz(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Kz(){return!0}function Wz(n){return n!==null&&typeof n=="object"&&"type"in n}const R5=[],Qz=!0,B_=!1,F_="skip";function I5(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const s=Rx(i),a=r?-1:1;l(n,void 0,[])();function l(h,f,p){const y=h&&typeof h=="object"?h:{};if(typeof y.type=="string"){const v=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(h.type+(v?"<"+v+">":""))+")"})}return _;function _(){let v=R5,w,R,D;if((!e||s(h,f,p[p.length-1]||void 0))&&(v=Yz(t(h,p)),v[0]===B_))return v;if("children"in h&&h.children){const V=h;if(V.children&&v[0]!==F_)for(R=(r?V.children.length:-1)+a,D=p.concat(V);R>-1&&R<V.children.length;){const W=V.children[R];if(w=l(W,R,D)(),w[0]===B_)return w;R=typeof w[1]=="number"?w[1]:R+a}}return v}}}function Yz(n){return Array.isArray(n)?n:typeof n=="number"?[Qz,n]:n==null?R5:[n]}function Qc(n,e,t,r){let i,s,a;typeof e=="function"&&typeof t!="function"?(s=void 0,a=e,i=t):(s=e,a=t,i=r),I5(n,s,l,i);function l(h,f){const p=f[f.length-1],y=p?p.children.indexOf(h):void 0;return a(h,y,p)}}function D5(n,e){let t=!1;return Qc(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,B_}),!!((!n.depth||n.depth<3)&&kx(n)&&(e.options.setext||t))}function Xz(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),s=t.createTracker(r);if(D5(n,t)){const p=t.enter("headingSetext"),y=t.enter("phrasing"),_=t.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return y(),p(),_+`
`+(i===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const a="#".repeat(i),l=t.enter("headingAtx"),h=t.enter("phrasing");s.move(a+" ");let f=t.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(f)&&(f=La(f.charCodeAt(0))+f.slice(1)),f=f?a+" "+f:a,t.options.closeAtx&&(f+=" "+a),h(),l(),f}N5.peek=Zz;function N5(n){return n.value||""}function Zz(){return"<"}M5.peek=Jz;function M5(n,e,t,r){const i=Cx(t),s=i==='"'?"Quote":"Apostrophe",a=t.enter("image");let l=t.enter("label");const h=t.createTracker(r);let f=h.move("![");return f+=h.move(t.safe(n.alt,{before:f,after:"]",...h.current()})),f+=h.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(t.safe(n.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(l=t.enter("destinationRaw"),f+=h.move(t.safe(n.url,{before:f,after:n.title?" ":")",...h.current()}))),l(),n.title&&(l=t.enter(`title${s}`),f+=h.move(" "+i),f+=h.move(t.safe(n.title,{before:f,after:i,...h.current()})),f+=h.move(i),l()),f+=h.move(")"),a(),f}function Jz(){return"!"}O5.peek=ej;function O5(n,e,t,r){const i=n.referenceType,s=t.enter("imageReference");let a=t.enter("label");const l=t.createTracker(r);let h=l.move("![");const f=t.safe(n.alt,{before:h,after:"]",...l.current()});h+=l.move(f+"]["),a();const p=t.stack;t.stack=[],a=t.enter("reference");const y=t.safe(t.associationId(n),{before:h,after:"]",...l.current()});return a(),t.stack=p,s(),i==="full"||!f||f!==y?h+=l.move(y+"]"):i==="shortcut"?h=h.slice(0,-1):h+=l.move("]"),h}function ej(){return"!"}L5.peek=tj;function L5(n,e,t){let r=n.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<t.unsafe.length;){const a=t.unsafe[s],l=t.compilePattern(a);let h;if(a.atBreak)for(;h=l.exec(r);){let f=h.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(h.index+1)}}return i+r+i}function tj(){return"`"}function P5(n,e){const t=kx(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}B5.peek=nj;function B5(n,e,t,r){const i=Cx(t),s=i==='"'?"Quote":"Apostrophe",a=t.createTracker(r);let l,h;if(P5(n,t)){const p=t.stack;t.stack=[],l=t.enter("autolink");let y=a.move("<");return y+=a.move(t.containerPhrasing(n,{before:y,after:">",...a.current()})),y+=a.move(">"),l(),t.stack=p,y}l=t.enter("link"),h=t.enter("label");let f=a.move("[");return f+=a.move(t.containerPhrasing(n,{before:f,after:"](",...a.current()})),f+=a.move("]("),h(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(h=t.enter("destinationLiteral"),f+=a.move("<"),f+=a.move(t.safe(n.url,{before:f,after:">",...a.current()})),f+=a.move(">")):(h=t.enter("destinationRaw"),f+=a.move(t.safe(n.url,{before:f,after:n.title?" ":")",...a.current()}))),h(),n.title&&(h=t.enter(`title${s}`),f+=a.move(" "+i),f+=a.move(t.safe(n.title,{before:f,after:i,...a.current()})),f+=a.move(i),h()),f+=a.move(")"),l(),f}function nj(n,e,t){return P5(n,t)?"<":"["}F5.peek=rj;function F5(n,e,t,r){const i=n.referenceType,s=t.enter("linkReference");let a=t.enter("label");const l=t.createTracker(r);let h=l.move("[");const f=t.containerPhrasing(n,{before:h,after:"]",...l.current()});h+=l.move(f+"]["),a();const p=t.stack;t.stack=[],a=t.enter("reference");const y=t.safe(t.associationId(n),{before:h,after:"]",...l.current()});return a(),t.stack=p,s(),i==="full"||!f||f!==y?h+=l.move(y+"]"):i==="shortcut"?h=h.slice(0,-1):h+=l.move("]"),h}function rj(){return"["}function Ix(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function ij(n){const e=Ix(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function sj(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function V5(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function oj(n,e,t,r){const i=t.enter("list"),s=t.bulletCurrent;let a=n.ordered?sj(t):Ix(t);const l=n.ordered?a==="."?")":".":ij(t);let h=e&&t.bulletLastUsed?a===t.bulletLastUsed:!1;if(!n.ordered){const p=n.children?n.children[0]:void 0;if((a==="*"||a==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(h=!0),V5(t)===a&&p){let y=-1;for(;++y<n.children.length;){const _=n.children[y];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(a=l),t.bulletCurrent=a;const f=t.containerFlow(n,r);return t.bulletLastUsed=a,t.bulletCurrent=s,i(),f}function aj(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function uj(n,e,t,r){const i=aj(t);let s=t.bulletCurrent||Ix(t);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(a=Math.ceil(a/4)*4);const l=t.createTracker(r);l.move(s+" ".repeat(a-s.length)),l.shift(a);const h=t.enter("listItem"),f=t.indentLines(t.containerFlow(n,l.current()),p);return h(),f;function p(y,_,v){return _?(v?"":" ".repeat(a))+y:(v?s:s+" ".repeat(a-s.length))+y}}function lj(n,e,t,r){const i=t.enter("paragraph"),s=t.enter("phrasing"),a=t.containerPhrasing(n,r);return s(),i(),a}const cj=Rx(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function hj(n,e,t,r){return(n.children.some(function(a){return cj(a)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function fj(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}U5.peek=dj;function U5(n,e,t,r){const i=fj(t),s=t.enter("strong"),a=t.createTracker(r),l=a.move(i+i);let h=a.move(t.containerPhrasing(n,{after:i,before:l,...a.current()}));const f=h.charCodeAt(0),p=Vm(r.before.charCodeAt(r.before.length-1),f,i);p.inside&&(h=La(f)+h.slice(1));const y=h.charCodeAt(h.length-1),_=Vm(r.after.charCodeAt(0),y,i);_.inside&&(h=h.slice(0,-1)+La(y));const v=a.move(i+i);return s(),t.attentionEncodeSurroundingInfo={after:_.outside,before:p.outside},l+h+v}function dj(n,e,t){return t.options.strong||"*"}function pj(n,e,t,r){return t.safe(n.value,r)}function mj(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function gj(n,e,t){const r=(V5(t)+(t.options.ruleSpaces?" ":"")).repeat(mj(t));return t.options.ruleSpaces?r.slice(0,-1):r}const yj={blockquote:Lz,break:_3,code:Vz,definition:zz,emphasis:C5,hardBreak:_3,heading:Xz,html:N5,image:M5,imageReference:O5,inlineCode:L5,link:B5,linkReference:F5,list:oj,listItem:uj,paragraph:lj,root:hj,strong:U5,text:pj,thematicBreak:gj},bj=[_j];function _j(n,e,t,r){if(e.type==="code"&&P_(e,r)&&(n.type==="list"||n.type===e.type&&P_(n,r)))return!1;if("spread"in t&&typeof t.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&D5(e,r))?void 0:t.spread?1:0}const xu=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],vj=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:xu},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:xu},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:xu},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:xu},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:xu},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:xu},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:xu},{atBreak:!0,character:"~"}];function xj(n){return n.label||!n.identifier?n.label||"":w5(n.identifier)}function Ej(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function wj(n,e,t){const r=e.indexStack,i=n.children||[],s=[];let a=-1,l=t.before,h;r.push(-1);let f=e.createTracker(t);for(;++a<i.length;){const p=i[a];let y;if(r[r.length-1]=a,a+1<i.length){let w=e.handle.handlers[i[a+1].type];w&&w.peek&&(w=w.peek),y=w?w(i[a+1],n,e,{before:"",after:"",...f.current()}).charAt(0):""}else y=t.after;s.length>0&&(l==="\r"||l===`
`)&&p.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",f=e.createTracker(t),f.move(s.join("")));let _=e.handle(p,n,e,{...f.current(),after:y,before:l});h&&h===_.slice(0,1)&&(_=La(h.charCodeAt(0))+_.slice(1));const v=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,h=void 0,v&&(s.length>0&&v.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+La(l.charCodeAt(0))),v.after&&(h=y)),f.move(_),s.push(_),l=_.slice(-1)}return r.pop(),s.join("")}function kj(n,e,t){const r=e.indexStack,i=n.children||[],s=e.createTracker(t),a=[];let l=-1;for(r.push(-1);++l<i.length;){const h=i[l];r[r.length-1]=l,a.push(s.move(e.handle(h,n,e,{before:`
`,after:`
`,...s.current()}))),h.type!=="list"&&(e.bulletLastUsed=void 0),l<i.length-1&&a.push(s.move(Tj(h,i[l+1],n,e)))}return r.pop(),a.join("")}function Tj(n,e,t,r){let i=r.join.length;for(;i--;){const s=r.join[i](n,e,t,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const Sj=/\r?\n|\r/g;function Aj(n,e){const t=[];let r=0,i=0,s;for(;s=Sj.exec(n);)a(n.slice(r,s.index)),t.push(s[0]),r=s.index+s[0].length,i++;return a(n.slice(r)),t.join("");function a(l){t.push(e(l,i,!l))}}function Cj(n,e,t){const r=(t.before||"")+(e||"")+(t.after||""),i=[],s=[],a={};let l=-1;for(;++l<n.unsafe.length;){const p=n.unsafe[l];if(!A5(n.stack,p))continue;const y=n.compilePattern(p);let _;for(;_=y.exec(r);){const v="before"in p||!!p.atBreak,w="after"in p,R=_.index+(v?_[1].length:0);i.includes(R)?(a[R].before&&!v&&(a[R].before=!1),a[R].after&&!w&&(a[R].after=!1)):(i.push(R),a[R]={before:v,after:w})}}i.sort(Rj);let h=t.before?t.before.length:0;const f=r.length-(t.after?t.after.length:0);for(l=-1;++l<i.length;){const p=i[l];p<h||p>=f||p+1<f&&i[l+1]===p+1&&a[p].after&&!a[p+1].before&&!a[p+1].after||i[l-1]===p-1&&a[p].before&&!a[p-1].before&&!a[p-1].after||(h!==p&&s.push(v3(r.slice(h,p),"\\")),h=p,/[!-/:-@[-`{-~]/.test(r.charAt(p))&&(!t.encode||!t.encode.includes(r.charAt(p)))?s.push("\\"):(s.push(La(r.charCodeAt(p))),h++))}return s.push(v3(r.slice(h,f),t.after)),s.join("")}function Rj(n,e){return n-e}function v3(n,e){const t=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],s=n+e;let a=-1,l=0,h;for(;h=t.exec(s);)r.push(h.index);for(;++a<r.length;)l!==r[a]&&i.push(n.slice(l,r[a])),i.push("\\"),l=r[a];return i.push(n.slice(l)),i.join("")}function Ij(n){const e=n||{},t=e.now||{};let r=e.lineShift||0,i=t.line||1,s=t.column||1;return{move:h,current:a,shift:l};function a(){return{now:{line:i,column:s},lineShift:r}}function l(f){r+=f}function h(f){const p=f||"",y=p.split(/\r?\n|\r/g),_=y[y.length-1];return i+=y.length-1,s=y.length===1?s+_.length:1+_.length+r,p}}function Dj(n,e){const t=e||{},r={associationId:xj,containerPhrasing:Lj,containerFlow:Pj,createTracker:Ij,compilePattern:Ej,enter:s,handlers:{...yj},handle:void 0,indentLines:Aj,indexStack:[],join:[...bj],options:{},safe:Bj,stack:[],unsafe:[...vj]};S5(r,t),r.options.tightDefinitions&&r.join.push(Oj),r.handle=Nz("type",{invalid:Nj,unknown:Mj,handlers:r.handlers});let i=r.handle(n,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(a){return r.stack.push(a),l;function l(){r.stack.pop()}}}function Nj(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function Mj(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function Oj(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function Lj(n,e){return wj(n,this,e)}function Pj(n,e){return kj(n,this,e)}function Bj(n,e){return Cj(this,n,e)}function V_(n){const e=this;e.compiler=t;function t(r){return Dj(r,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function x3(n){if(n)throw n}var yb,E3;function Fj(){if(E3)return yb;E3=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},s=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var p=n.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&n.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!y)return!1;var _;for(_ in f);return typeof _>"u"||n.call(f,_)},a=function(f,p){t&&p.name==="__proto__"?t(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},l=function(f,p){if(p==="__proto__")if(n.call(f,p)){if(r)return r(f,p).value}else return;return f[p]};return yb=function h(){var f,p,y,_,v,w,R=arguments[0],D=1,V=arguments.length,W=!1;for(typeof R=="boolean"&&(W=R,R=arguments[1]||{},D=2),(R==null||typeof R!="object"&&typeof R!="function")&&(R={});D<V;++D)if(f=arguments[D],f!=null)for(p in f)y=l(R,p),_=l(f,p),R!==_&&(W&&_&&(s(_)||(v=i(_)))?(v?(v=!1,w=y&&i(y)?y:[]):w=y&&s(y)?y:{},a(R,{name:p,newValue:h(W,w,_)})):typeof _<"u"&&a(R,{name:p,newValue:_}));return R},yb}var Vj=Fj();const bb=yd(Vj);function U_(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Uj(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...i);function l(h,...f){const p=n[++s];let y=-1;if(h){a(h);return}for(;++y<i.length;)(f[y]===null||f[y]===void 0)&&(f[y]=i[y]);i=f,p?zj(p,l)(...f):a(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function zj(n,e){let t;return r;function r(...a){const l=n.length>a.length;let h;l&&a.push(i);try{h=n.apply(this,a)}catch(f){const p=f;if(l&&t)throw p;return i(p)}l||(h&&h.then&&typeof h.then=="function"?h.then(s,i):h instanceof Error?i(h):s(h))}function i(a,...l){t||(t=!0,e(a,...l))}function s(a){i(null,a)}}class vr extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",s={},a=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?s.ruleId=r:(s.source=r.slice(0,h),s.ruleId=r.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=Hf(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}vr.prototype.file="";vr.prototype.name="";vr.prototype.reason="";vr.prototype.message="";vr.prototype.stack="";vr.prototype.column=void 0;vr.prototype.line=void 0;vr.prototype.ancestors=void 0;vr.prototype.cause=void 0;vr.prototype.fatal=void 0;vr.prototype.place=void 0;vr.prototype.ruleId=void 0;vr.prototype.source=void 0;const Ji={basename:jj,dirname:qj,extname:Hj,join:$j,sep:"/"};function jj(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Nd(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let a=-1,l=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else a<0&&(s=!0,a=i+1),l>-1&&(n.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=a));return t===r?r=a:r<0&&(r=n.length),n.slice(t,r)}function qj(n){if(Nd(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Hj(n){Nd(n);let e=n.length,t=-1,r=0,i=-1,s=0,a;for(;e--;){const l=n.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}t<0&&(a=!0,t=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function $j(...n){let e=-1,t;for(;++e<n.length;)Nd(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":Gj(t)}function Gj(n){Nd(n);const e=n.codePointAt(0)===47;let t=Kj(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function Kj(n,e){let t="",r=0,i=-1,s=0,a=-1,l,h;for(;++a<=n.length;){if(a<n.length)l=n.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(h=t.lastIndexOf("/"),h!==t.length-1){h<0?(t="",r=0):(t=t.slice(0,h),r=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length>0){t="",r=0,i=a,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,a):t=n.slice(i+1,a),r=a-i-1;i=a,s=0}else l===46&&s>-1?s++:s=-1}return t}function Nd(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const Wj={cwd:Qj};function Qj(){return"/"}function z_(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function Yj(n){if(typeof n=="string")n=new URL(n);else if(!z_(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Xj(n)}function Xj(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const _b=["history","path","basename","stem","extname","dirname"];class Zj{constructor(e){let t;e?z_(e)?t={path:e}:typeof e=="string"||Jj(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":Wj.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<_b.length;){const s=_b[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)_b.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?Ji.basename(this.path):void 0}set basename(e){xb(e,"basename"),vb(e,"basename"),this.path=Ji.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ji.dirname(this.path):void 0}set dirname(e){w3(this.basename,"dirname"),this.path=Ji.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ji.extname(this.path):void 0}set extname(e){if(vb(e,"extname"),w3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ji.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){z_(e)&&(e=Yj(e)),xb(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ji.basename(this.path,this.extname):void 0}set stem(e){xb(e,"stem"),vb(e,"stem"),this.path=Ji.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new vr(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function vb(n,e){if(n&&n.includes(Ji.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ji.sep+"`")}function xb(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function w3(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Jj(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const eq=function(n){const r=this.constructor.prototype,i=r[n],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},tq={}.hasOwnProperty;class Dx extends eq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Uj()}copy(){const e=new Dx;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(bb(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(kb("data",this.frozen),this.namespace[e]=t,this):tq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(kb("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=v0(e),r=this.parser||this.Parser;return Eb("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),Eb("process",this.parser||this.Parser),wb("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(s,a){const l=v0(e),h=r.parse(l);r.run(h,l,function(p,y,_){if(p||!y||!_)return f(p);const v=y,w=r.stringify(v,_);rq(w)?_.value=w:_.result=w,f(p,_)});function f(p,y){p||!y?a(p):s?s(y):t(void 0,y)}}}processSync(e){let t=!1,r;return this.freeze(),Eb("processSync",this.parser||this.Parser),wb("processSync",this.compiler||this.Compiler),this.process(e,i),T3("processSync","process",t),r;function i(s,a){t=!0,x3(s),r=a}}run(e,t,r){k3(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(a,l){const h=v0(t);i.run(e,h,f);function f(p,y,_){const v=y||e;p?l(p):a?a(v):r(void 0,v,_)}}}runSync(e,t){let r=!1,i;return this.run(e,t,s),T3("runSync","run",r),i;function s(a,l){x3(a),i=l,r=!0}}stringify(e,t){this.freeze();const r=v0(t),i=this.compiler||this.Compiler;return wb("stringify",i),k3(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(kb("use",this.frozen),e!=null)if(typeof e=="function")h(e,t);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(f){if(typeof f=="function")h(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...y]=f;h(p,y)}else a(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function a(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(f.plugins),f.settings&&(i.settings=bb(!0,i.settings,f.settings))}function l(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const y=f[p];s(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function h(f,p){let y=-1,_=-1;for(;++y<r.length;)if(r[y][0]===f){_=y;break}if(_===-1)r.push([f,...p]);else if(p.length>0){let[v,...w]=p;const R=r[_][1];U_(R)&&U_(v)&&(v=bb(!0,R,v)),r[_]=[f,v,...w]}}}}const j_=new Dx().freeze();function Eb(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function wb(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function kb(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k3(n){if(!U_(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function T3(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function v0(n){return nq(n)?n:new Zj(n)}function nq(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function rq(n){return typeof n=="string"||iq(n)}function iq(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var z5=n=>{throw TypeError(n)},j5=(n,e,t)=>e.has(n)||z5("Cannot "+t),nt=(n,e,t)=>(j5(n,e,"read from private field"),t?t.call(n):e.get(n)),rn=(n,e,t)=>e.has(n)?z5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Mt=(n,e,t,r)=>(j5(n,e,"write to private field"),e.set(n,t),t),Zi,Ef,z0,j0,q0,wf,kf,Ws,Tf,H0,$0,Sf,G0,Af,K0,W0,sc,Tu,Q0,Cf;class q5{}class H5{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var t;(t=this.top())==null||t.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw q4();return e}}}class Nx extends q5{constructor(e,t,r){super(),this.type=e,this.content=t,this.attrs=r}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,r){return new Nx(e,t,r)}}const q_=class extends H5{constructor(e){super(),rn(this,Zi),rn(this,Ef),rn(this,z0),rn(this,j0),rn(this,q0),rn(this,wf),rn(this,kf),Mt(this,Zi,dt.none),Mt(this,Ef,t=>t.isText),Mt(this,z0,(t,r)=>{if(nt(this,Ef).call(this,t)&&nt(this,Ef).call(this,r)&&dt.sameSet(t.marks,r.marks))return this.schema.text(t.text+r.text,t.marks)}),Mt(this,j0,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(t));if(!r)throw KF(t);return r}),Mt(this,q0,t=>{const r=nt(this,j0).call(this,t);r.spec.parseMarkdown.runner(this,t,r)}),this.injectRoot=(t,r,i)=>(this.openNode(r,i),this.next(t.children),this),this.openNode=(t,r)=>(this.open(Nx.create(t,[],r)),this),Mt(this,wf,()=>{Mt(this,Zi,dt.none);const t=this.close();return nt(this,kf).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>{try{nt(this,wf).call(this)}catch(t){console.error(t)}return this},Mt(this,kf,(t,r,i)=>{const s=t.createAndFill(r,i,nt(this,Zi));if(!s)throw GF(t,r,i);return this.push(s),s}),this.addNode=(t,r,i)=>{try{nt(this,kf).call(this,t,r,i)}catch(s){console.error(s)}return this},this.openMark=(t,r)=>{const i=t.create(r);return Mt(this,Zi,i.addToSet(nt(this,Zi))),this},this.closeMark=t=>(Mt(this,Zi,t.removeFromSet(nt(this,Zi))),this),this.addText=t=>{try{const r=this.top();if(!r)throw q4();const i=r.pop(),s=this.schema.text(t,nt(this,Zi));if(!i)return r.push(s),this;const a=nt(this,z0).call(this,i,s);return a?(r.push(a),this):(r.push(i,s),this)}catch(r){return console.error(r),this}},this.build=()=>{let t;do t=nt(this,wf).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(r=>nt(this,q0).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(t,r)=>{const i=t.runSync(t.parse(r),r);return this.next(i),this},this.schema=e}};Zi=new WeakMap;Ef=new WeakMap;z0=new WeakMap;j0=new WeakMap;q0=new WeakMap;wf=new WeakMap;kf=new WeakMap;q_.create=(n,e)=>{const t=new q_(n);return r=>(t.run(e,r),t.toDoc())};let sq=q_;const H_=class extends q5{constructor(e,t,r,i={}){super(),this.type=e,this.children=t,this.value=r,this.props=i,this.push=(s,...a)=>{this.children||(this.children=[]),this.children.push(s,...a)},this.pop=()=>{var s;return(s=this.children)==null?void 0:s.pop()}}};H_.create=(n,e,t,r={})=>new H_(n,e,t,r);let S3=H_;const oq=n=>Object.prototype.hasOwnProperty.call(n,"size"),$_=class extends H5{constructor(e){super(),rn(this,Ws),rn(this,Tf),rn(this,H0),rn(this,$0),rn(this,Sf),rn(this,G0),rn(this,Af),rn(this,K0),rn(this,W0),rn(this,sc),rn(this,Tu),rn(this,Q0),rn(this,Cf),Mt(this,Ws,dt.none),Mt(this,Tf,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(t));if(!r)throw WF(t.type);return r}),Mt(this,H0,t=>nt(this,Tf).call(this,t).spec.toMarkdown.runner(this,t)),Mt(this,$0,(t,r)=>nt(this,Tf).call(this,t).spec.toMarkdown.runner(this,t,r)),Mt(this,Sf,t=>{const{marks:r}=t,i=l=>l.type.spec.priority??50;[...r].sort((l,h)=>i(l)-i(h)).every(l=>!nt(this,$0).call(this,l,t))&&nt(this,H0).call(this,t),r.forEach(l=>nt(this,Cf).call(this,l))}),Mt(this,G0,(t,r)=>{var i;if(t.type===r||((i=t.children)==null?void 0:i.length)!==1)return t;const s=f=>{var p;if(f.type===r)return f;if(((p=f.children)==null?void 0:p.length)!==1)return null;const[y]=f.children;return y?s(y):null},a=s(t);if(!a)return t;const l=a.children?[...a.children]:void 0,h={...t,children:l};return h.children=l,a.children=[h],a}),Mt(this,Af,t=>{const{children:r}=t;return r&&(t.children=r.reduce((i,s,a)=>{if(a===0)return[s];const l=i.at(-1);if(l&&l.isMark&&s.isMark){s=nt(this,G0).call(this,s,l.type);const{children:h,...f}=s,{children:p,...y}=l;if(s.type===l.type&&h&&p&&JSON.stringify(f)===JSON.stringify(y)){const _={...y,children:[...p,...h]};return i.slice(0,-1).concat(nt(this,Af).call(this,_))}}return i.concat(s)},[])),t}),Mt(this,K0,t=>{const r={...t.props,type:t.type};return t.children&&(r.children=t.children),t.value&&(r.value=t.value),r}),this.openNode=(t,r,i)=>(this.open(S3.create(t,void 0,r,i)),this),Mt(this,W0,(t,r)=>{let i="",s="";const a=t.children;let l=-1,h=-1;const f=y=>{y&&y.forEach((_,v)=>{_.type==="text"&&_.value&&(l<0&&(l=v),h=v)})};if(a){f(a);const y=a==null?void 0:a[h],_=a==null?void 0:a[l];y&&y.value.endsWith(" ")&&(s=y.value.match(/ +$/)[0],y.value=y.value.trimEnd()),_&&_.value.startsWith(" ")&&(i=_.value.match(/^ +/)[0],_.value=_.value.trimStart())}i.length&&nt(this,Tu).call(this,"text",void 0,i);const p=r();return s.length&&nt(this,Tu).call(this,"text",void 0,s),p}),Mt(this,sc,(t=!1)=>{const r=this.close(),i=()=>nt(this,Tu).call(this,r.type,r.children,r.value,r.props);return t?nt(this,W0).call(this,r,i):i()}),this.closeNode=()=>(nt(this,sc).call(this),this),Mt(this,Tu,(t,r,i,s)=>{const a=S3.create(t,r,i,s),l=nt(this,Af).call(this,nt(this,K0).call(this,a));return this.push(l),l}),this.addNode=(t,r,i,s)=>(nt(this,Tu).call(this,t,r,i,s),this),Mt(this,Q0,(t,r,i,s)=>t.isInSet(nt(this,Ws))?this:(Mt(this,Ws,t.addToSet(nt(this,Ws))),this.openNode(r,i,{...s,isMark:!0}))),Mt(this,Cf,t=>{t.isInSet(nt(this,Ws))&&(Mt(this,Ws,t.type.removeFromSet(nt(this,Ws))),nt(this,sc).call(this,!0))}),this.withMark=(t,r,i,s)=>(nt(this,Q0).call(this,t,r,i,s),this),this.closeMark=t=>(nt(this,Cf).call(this,t),this),this.build=()=>{let t=null;do t=nt(this,sc).call(this);while(this.size());return t},this.next=t=>oq(t)?(t.forEach(r=>{nt(this,Sf).call(this,r)}),this):(nt(this,Sf).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=e}};Ws=new WeakMap;Tf=new WeakMap;H0=new WeakMap;$0=new WeakMap;Sf=new WeakMap;G0=new WeakMap;Af=new WeakMap;K0=new WeakMap;W0=new WeakMap;sc=new WeakMap;Tu=new WeakMap;Q0=new WeakMap;Cf=new WeakMap;$_.create=(n,e)=>{const t=new $_(n);return r=>(t.run(r),t.toString(e))};let aq=$_;const $5=65535,G5=Math.pow(2,16);function uq(n,e){return n+e*G5}function A3(n){return n&$5}function lq(n){return(n-(n&$5))/G5}const K5=1,W5=2,Y0=4,Q5=8;class G_{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Q5)>0}get deletedBefore(){return(this.delInfo&(K5|Y0))>0}get deletedAfter(){return(this.delInfo&(W5|Y0))>0}get deletedAcross(){return(this.delInfo&Y0)>0}}class Nr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Nr.empty)return Nr.empty}recover(e){let t=0,r=A3(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+lq(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let h=this.ranges[l]-(this.inverted?i:0);if(h>e)break;let f=this.ranges[l+s],p=this.ranges[l+a],y=h+f;if(e<=y){let _=f?e==h?-1:e==y?1:t:t,v=h+i+(_<0?0:p);if(r)return v;let w=e==(t<0?h:y)?null:uq(l/3,e-h),R=e==h?W5:e==y?K5:Y0;return(t<0?e!=h:e!=y)&&(R|=Q5),new G_(v,R,w)}i+=p-f}return r?e+i:new G_(e+i,0,null)}touches(e,t){let r=0,i=A3(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let h=this.ranges[l]-(this.inverted?r:0);if(h>e)break;let f=this.ranges[l+s],p=h+f;if(e<=p&&l==i*3)return!0;r+=this.ranges[l+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],l=a-(this.inverted?s:0),h=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(l,l+f,h,h+p),s+=p-f}}invert(){return new Nr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Nr.empty:new Nr(e<0?[0,-e,0]:[0,0,e])}}Nr.empty=new Nr([]);class sd{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new sd(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new sd;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],l=a.mapResult(e,t);if(l.recover!=null){let h=this.getMirror(s);if(h!=null&&h>s&&h<this.to){s=h,e=this._maps[h].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new G_(e,i,null)}}const Tb=Object.create(null);class Qn{getMap(){return Nr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Tb[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Tb)throw new RangeError("Duplicate use of step JSON ID "+e);return Tb[e]=t,t.prototype.jsonID=e,t}}class on{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new on(e,null)}static fail(e){return new on(null,e)}static fromReplace(e,t,r,i){try{return on.ok(e.replace(t,r,i))}catch(s){if(s instanceof Lm)return on.fail(s.message);throw s}}}function Mx(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Mx(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return ye.fromArray(r)}class eo extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Se(Mx(t.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return on.fromReplace(e,this.from,this.to,s)}invert(){return new is(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new eo(t.pos,r.pos,this.mark)}merge(e){return e instanceof eo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new eo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new eo(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("addMark",eo);class is extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Se(Mx(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return on.fromReplace(e,this.from,this.to,r)}invert(){return new eo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new is(t.pos,r.pos,this.mark)}merge(e){return e instanceof is&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new is(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new is(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("removeMark",is);class ma extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return on.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return on.fromReplace(e,this.pos,this.pos+1,new Se(ye.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new ma(this.pos,t.marks[i]);return new ma(this.pos,this.mark)}}return new Wu(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ma(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ma(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("addNodeMark",ma);class Wu extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return on.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return on.fromReplace(e,this.pos,this.pos+1,new Se(ye.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ma(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Wu(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Wu(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("removeNodeMark",Wu);class Mn extends Qn{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&K_(e,this.from,this.to)?on.fail("Structure replace would overwrite content"):on.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Nr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Mn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Mn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Mn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Se.empty:new Se(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Mn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Se.empty:new Se(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Mn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Mn(t.from,t.to,Se.fromJSON(e,t.slice),!!t.structure)}}Qn.jsonID("replace",Mn);class Kn extends Qn{constructor(e,t,r,i,s,a,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(K_(e,this.from,this.gapFrom)||K_(e,this.gapTo,this.to)))return on.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return on.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?on.fromReplace(e,this.from,this.to,r):on.fail("Content does not fit in gap")}getMap(){return new Nr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Kn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Kn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kn(t.from,t.to,t.gapFrom,t.gapTo,Se.fromJSON(e,t.slice),t.insert,!!t.structure)}}Qn.jsonID("replaceAround",Kn);function K_(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function cq(n,e,t,r){let i=[],s=[],a,l;n.doc.nodesBetween(e,t,(h,f,p)=>{if(!h.isInline)return;let y=h.marks;if(!r.isInSet(y)&&p.type.allowsMarkType(r.type)){let _=Math.max(f,e),v=Math.min(f+h.nodeSize,t),w=r.addToSet(y);for(let R=0;R<y.length;R++)y[R].isInSet(w)||(a&&a.to==_&&a.mark.eq(y[R])?a.to=v:i.push(a=new is(_,v,y[R])));l&&l.to==_?l.to=v:s.push(l=new eo(_,v,r))}}),i.forEach(h=>n.step(h)),s.forEach(h=>n.step(h))}function hq(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,l)=>{if(!a.isInline)return;s++;let h=null;if(r instanceof kg){let f=a.marks,p;for(;p=r.isInSet(f);)(h||(h=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(h=[r]):h=a.marks;if(h&&h.length){let f=Math.min(l+a.nodeSize,t);for(let p=0;p<h.length;p++){let y=h[p],_;for(let v=0;v<i.length;v++){let w=i[v];w.step==s-1&&y.eq(i[v].style)&&(_=w)}_?(_.to=f,_.step=s):i.push({style:y,from:Math.max(l,e),to:f,step:s})}}}),i.forEach(a=>n.step(new is(a.from,a.to,a.style)))}function Ox(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],l=e+1;for(let h=0;h<s.childCount;h++){let f=s.child(h),p=l+f.nodeSize,y=r.matchType(f.type);if(!y)a.push(new Mn(l,p,Se.empty));else{r=y;for(let _=0;_<f.marks.length;_++)t.allowsMarkType(f.marks[_].type)||n.step(new is(l,p,f.marks[_]));if(i&&f.isText&&t.whitespace!="pre"){let _,v=/\r?\n|\r/g,w;for(;_=v.exec(f.text);)w||(w=new Se(ye.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new Mn(l+_.index,l+_.index+_[0].length,w))}}l=p}if(!r.validEnd){let h=r.fillBefore(ye.empty,!0);n.replace(l,l,new Se(h,0,0))}for(let h=a.length-1;h>=0;h--)n.step(a[h])}function fq(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Ag(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!fq(i,s,a))break}return null}function dq(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),l=i.after(s+1),h=a,f=l,p=ye.empty,y=0;for(let w=s,R=!1;w>t;w--)R||r.index(w)>0?(R=!0,p=ye.from(r.node(w).copy(p)),y++):h--;let _=ye.empty,v=0;for(let w=s,R=!1;w>t;w--)R||i.after(w+1)<i.end(w)?(R=!0,_=ye.from(i.node(w).copy(_)),v++):f++;n.step(new Kn(h,f,a,l,new Se(p.append(_),y,v),p.size-y,!0))}function Lx(n,e,t=null,r=n){let i=pq(n,e),s=i&&mq(r,e);return s?i.map(C3).concat({type:e,attrs:t}).concat(s.map(C3)):null}function C3(n){return{type:n,attrs:null}}function pq(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function mq(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let h=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;h&&f<i;f++)h=h.matchType(t.child(f).type);return!h||!h.validEnd?null:a}function gq(n,e,t){let r=ye.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let l=t[a].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ye.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Kn(i,s,i,s,new Se(r,0,0),t.length,!0))}function yq(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,l)=>{let h=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,h)&&bq(n.doc,n.mapping.slice(s).map(l),r)){let f=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?f=!1:!v&&w&&(f=!0)}f===!1&&X5(n,a,l,s),Ox(n,n.mapping.slice(s).map(l,1),r,void 0,f===null);let p=n.mapping.slice(s),y=p.map(l,1),_=p.map(l+a.nodeSize,1);return n.step(new Kn(y,_,y+1,_-1,new Se(ye.from(r.create(h,null,a.marks)),0,0),1,!0)),f===!0&&Y5(n,a,l,s),!1}})}function Y5(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(i.text);){let h=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function X5(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function bq(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function _q(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Kn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Se(ye.from(a),0,0),1,!0))}function $f(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let y=i.node(f),_=i.index(f);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(_,y.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let R=r&&r[p]||y;if(!y.canReplace(_+1,y.childCount)||!R.type.validContent(v))return!1}let l=i.indexAfter(s),h=r&&r[0];return i.node(s).canReplaceWith(l,l,h?h.type:i.node(s+1).type)}function vq(n,e,t=1,r){let i=n.doc.resolve(e),s=ye.empty,a=ye.empty;for(let l=i.depth,h=i.depth-t,f=t-1;l>h;l--,f--){s=ye.from(i.node(l).copy(s));let p=r&&r[f];a=ye.from(p?p.type.create(p.attrs,a):i.node(l).copy(a))}n.step(new Mn(e,e,new Se(s.append(a),t,t),!0))}function Cg(n,e){let t=n.resolve(e),r=t.index();return Eq(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function xq(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function Eq(n,e){return!!(n&&e&&!n.isLeaf&&xq(n,e))}function wq(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",y=!!a.contentMatch.matchType(i);p&&!y?r=!1:!p&&y&&(r=!0)}let l=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);X5(n,p.node(),p.before(),l)}a.inlineContent&&Ox(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let h=n.mapping.slice(l),f=h.map(e-t);if(n.step(new Mn(f,h.map(e+t,-1),Se.empty,!0)),r===!0){let p=n.doc.resolve(f);Y5(n,p.node(),p.before(),n.steps.length)}return n}function kq(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Tq(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,h=r.index(a)+(l>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(h,h,i);else{let y=f.contentMatchAt(h).findWrapping(i.firstChild.type);p=y&&f.canReplaceWith(h,h,y[0])}if(p)return l==0?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function Px(n,e,t=e,r=Se.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Z5(i,s,r)?new Mn(e,t,r):new Sq(i,s,r).fit()}function Z5(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Sq{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ye.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ye.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,l=i.depth;for(;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;let h=new Se(s,a,l);return e>-1?new Kn(r.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||r.pos!=this.$to.pos?new Mn(r.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Sb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:h,match:f}=this.frontier[l],p,y=null;if(t==1&&(a?f.matchType(a.type)||(y=f.fillBefore(ye.from(a),!1)):s&&h.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:y};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Sb(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Se(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Sb(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new Se(Rf(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new Se(Rf(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let R=0;R<s.length;R++)this.openFrontierNode(s[R]);let a=this.unplaced,l=r?r.content:a.content,h=a.openStart-e,f=0,p=[],{match:y,type:_}=this.frontier[t];if(i){for(let R=0;R<i.childCount;R++)p.push(i.child(R));y=y.matchFragment(i)}let v=l.size+e-(a.content.size-a.openEnd);for(;f<l.childCount;){let R=l.child(f),D=y.matchType(R.type);if(!D)break;f++,(f>1||h==0||R.content.size)&&(y=D,p.push(J5(R.mark(_.allowedMarks(R.marks)),f==1?h:0,f==l.childCount?v:-1)))}let w=f==l.childCount;w||(v=-1),this.placed=If(this.placed,t,ye.from(p)),this.frontier[t].match=y,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let R=0,D=l;R<v;R++){let V=D.lastChild;this.frontier.push({type:V.type,match:V.contentMatchAt(V.childCount)}),D=V.content}this.unplaced=w?e==0?Se.empty:new Se(Rf(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new Se(Rf(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ab(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Ab(e,t,i,r,s);if(a){for(let l=t-1;l>=0;l--){let{match:h,type:f}=this.frontier[l],p=Ab(e,l,f,h,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=If(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=If(this.placed,this.depth,ye.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ye.empty,!0);t.childCount&&(this.placed=If(this.placed,this.frontier.length,t))}}function Rf(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Rf(n.firstChild.content,e-1,t)))}function If(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(If(n.lastChild.content,e-1,t)))}function Sb(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function J5(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,J5(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ye.empty,!0)))),n.copy(r)}function Ab(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,a);return l&&!Aq(t,s.content,a)?l:null}function Aq(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Cq(n){return n.spec.defining||n.spec.definingForContent}function Rq(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Z5(i,s,r))return n.step(new Mn(e,t,r));let a=tR(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let l=-(i.depth+1);a.unshift(l);for(let _=i.depth,v=i.pos-1;_>0;_--,v--){let w=i.node(_).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;a.indexOf(_)>-1?l=_:i.before(_)==v&&a.splice(1,0,-_)}let h=a.indexOf(l),f=[],p=r.openStart;for(let _=r.content,v=0;;v++){let w=_.firstChild;if(f.push(w),v==r.openStart)break;_=w.content}for(let _=p-1;_>=0;_--){let v=f[_],w=Cq(v.type);if(w&&!v.sameMarkup(i.node(Math.abs(l)-1)))p=_;else if(w||!v.type.isTextblock)break}for(let _=r.openStart;_>=0;_--){let v=(_+p+1)%(r.openStart+1),w=f[v];if(w)for(let R=0;R<a.length;R++){let D=a[(R+h)%a.length],V=!0;D<0&&(V=!1,D=-D);let W=i.node(D-1),G=i.index(D-1);if(W.canReplaceWith(G,G,w.type,w.marks))return n.replace(i.before(D),V?s.after(D):t,new Se(eR(r.content,0,r.openStart,v),v,r.openEnd))}}let y=n.steps.length;for(let _=a.length-1;_>=0&&(n.replace(e,t,r),!(n.steps.length>y));_--){let v=a[_];v<0||(e=i.before(v),t=s.after(v))}}function eR(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(eR(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(ye.empty,!0))}return n}function Iq(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=kq(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Se(ye.from(r),0,0))}function Dq(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=tR(r,i);for(let a=0;a<s.length;a++){let l=s[a],h=a==s.length-1;if(h&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(h||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function tR(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class bc extends Qn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return on.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return on.fromReplace(e,this.pos,this.pos+1,new Se(ye.from(i),0,t.isLeaf?0:1))}getMap(){return Nr.empty}invert(e){return new bc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new bc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new bc(t.pos,t.attr,t.value)}}Qn.jsonID("attr",bc);class od extends Qn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return on.ok(r)}getMap(){return Nr.empty}invert(e){return new od(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new od(t.attr,t.value)}}Qn.jsonID("docAttr",od);let Pc=class extends Error{};Pc=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Pc.prototype=Object.create(Error.prototype);Pc.prototype.constructor=Pc;Pc.prototype.name="TransformError";class Nq{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new sd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Pc(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Se.empty){let i=Px(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Se(ye.from(r),0,0))}delete(e,t){return this.replace(e,t,Se.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Rq(this,e,t,r),this}replaceRangeWith(e,t,r){return Iq(this,e,t,r),this}deleteRange(e,t){return Dq(this,e,t),this}lift(e,t){return dq(this,e,t),this}join(e,t=1){return wq(this,e,t),this}wrap(e,t){return gq(this,e,t),this}setBlockType(e,t=e,r,i=null){return yq(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return _q(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new bc(e,t,r)),this}setDocAttribute(e,t){return this.step(new od(e,t)),this}addNodeMark(e,t){return this.step(new ma(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof dt)t.isInSet(r.marks)&&this.step(new Wu(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Wu(e,s)),i=s.removeFromSet(i);for(let l=a.length-1;l>=0;l--)this.step(a[l])}return this}split(e,t=1,r){return vq(this,e,t,r),this}addMark(e,t,r){return cq(this,e,t,r),this}removeMark(e,t,r){return hq(this,e,t,r),this}clearIncompatible(e,t,r){return Ox(this,e,t,r),this}}const Cb=Object.create(null);class pt{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Mq(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Se.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:h,$to:f}=a[l],p=e.mapping.slice(s);e.replaceRange(p.map(h.pos),p.map(f.pos),l?Se.empty:t),l==0&&D3(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],h=e.mapping.slice(r),f=h.map(a.pos),p=h.map(l.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),D3(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new _t(e):oc(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?oc(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):oc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Pr(e.node(0))}static atStart(e){return oc(e,e,0,0,1)||new Pr(e)}static atEnd(e){return oc(e,e,e.content.size,e.childCount,-1)||new Pr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Cb[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Cb)throw new RangeError("Duplicate use of selection JSON ID "+e);return Cb[e]=t,t.prototype.jsonID=e,t}getBookmark(){return _t.between(this.$anchor,this.$head).getBookmark()}}pt.prototype.visible=!0;class Mq{constructor(e,t){this.$from=e,this.$to=t}}let R3=!1;function I3(n){!R3&&!n.parent.inlineContent&&(R3=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class _t extends pt{constructor(e,t=e){I3(e),I3(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return pt.near(r);let i=e.resolve(t.map(this.anchor));return new _t(i.parent.inlineContent?i:r,r)}replace(e,t=Se.empty){if(super.replace(e,t),t==Se.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Rg(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _t(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=pt.findFrom(t,r,!0)||pt.findFrom(t,-r,!0);if(s)t=s.$head;else return pt.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(pt.findFrom(e,-r,!0)||pt.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new _t(e,t)}}pt.jsonID("text",_t);class Rg{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Rg(e.map(this.anchor),e.map(this.head))}resolve(e){return _t.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ge extends pt{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?pt.near(s):new Ge(s)}content(){return new Se(ye.from(this.node),0,0)}eq(e){return e instanceof Ge&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bx(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ge(e.resolve(t.anchor))}static create(e,t){return new Ge(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ge.prototype.visible=!1;pt.jsonID("node",Ge);class Bx{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Rg(r,r):new Bx(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ge.isSelectable(r)?new Ge(t):pt.near(t)}}class Pr extends pt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Se.empty){if(t==Se.empty){e.delete(0,e.doc.content.size);let r=pt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Pr(e)}map(e){return new Pr(e)}eq(e){return e instanceof Pr}getBookmark(){return Oq}}pt.jsonID("all",Pr);const Oq={map(){return this},resolve(n){return new Pr(n)}};function oc(n,e,t,r,i,s=!1){if(e.inlineContent)return _t.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let l=e.child(a);if(l.isAtom){if(!s&&Ge.isSelectable(l))return Ge.create(n,t-(i<0?l.nodeSize:0))}else{let h=oc(n,l,t+i,i<0?l.childCount:0,i,s);if(h)return h}t+=l.nodeSize*i}return null}function D3(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Mn||i instanceof Kn))return;let s=n.mapping.maps[r],a;s.forEach((l,h,f,p)=>{a==null&&(a=p)}),n.setSelection(pt.near(n.doc.resolve(a),t))}const N3=1,M3=2,O3=4;class Lq extends Nq{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|N3)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&N3)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=M3,this}ensureMarks(e){return dt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&M3)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||dt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(pt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=O3,this}get scrolledIntoView(){return(this.updated&O3)>0}}function L3(n,e){return!e||!n?n:n.bind(e)}class Df{constructor(e,t,r){this.name=e,this.init=L3(t.init,r),this.apply=L3(t.apply,r)}}const Pq=[new Df("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Df("selection",{init(n,e){return n.selection||pt.atStart(e.doc)},apply(n){return n.selection}}),new Df("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Df("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Rb{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pq.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Df(r.key,r.spec.state,r))})}}class fc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let h=i?i[a].n:0,f=i?i[a].state:this,p=h<t.length&&l.spec.appendTransaction.call(l,h?t.slice(h):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let y=0;y<this.config.plugins.length;y++)i.push(y<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new fc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new Lq(this)}static create(e){let t=new Rb(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new fc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Rb(this.schema,e.plugins),r=t.fields,i=new fc(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Rb(e.schema,e.plugins),s=new fc(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=ui.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=pt.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let h=r[l],f=h.spec.state;if(h.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[a.name]=f.fromJSON.call(h,e,t[l],s);return}}s[a.name]=a.init(e,s)}}),s}}function nR(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=nR(i,e,{})),t[r]=i}return t}class Ci{constructor(e){this.spec=e,this.props={},e.props&&nR(e.props,this,this.props),this.key=e.key?e.key.key:rR("plugin")}getState(e){return e[this.key]}}const Ib=Object.create(null);function rR(n){return n in Ib?n+"$"+ ++Ib[n]:(Ib[n]=0,n+"$")}class Ri{constructor(e="key"){this.key=rR(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Fx=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Bq(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const iR=(n,e,t)=>{let r=Bq(n,t);if(!r)return!1;let i=oR(r);if(!i){let a=r.blockRange(),l=a&&Ag(a);return l==null?!1:(e&&e(n.tr.lift(a,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(uR(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Bc(s,"end")||Ge.isSelectable(s)))for(let a=r.depth;;a--){let l=Px(n.doc,r.before(a),r.after(a),Se.empty);if(l&&l.slice.size<l.to-l.from){if(e){let h=n.tr.step(l);h.setSelection(Bc(s,"end")?pt.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):Ge.create(h.doc,i.pos-s.nodeSize)),e(h.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function Bc(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const sR=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=oR(r)}let a=s&&s.nodeBefore;return!a||!Ge.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Ge.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function oR(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Fq(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Vq=(n,e,t)=>{let r=Fq(n,t);if(!r)return!1;let i=aR(r);if(!i)return!1;let s=i.nodeAfter;if(uR(n,i,e,1))return!0;if(r.parent.content.size==0&&(Bc(s,"start")||Ge.isSelectable(s))){let a=Px(n.doc,r.before(),r.after(),Se.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Bc(s,"start")?pt.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Ge.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Uq=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=aR(r)}let a=s&&s.nodeAfter;return!a||!Ge.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Ge.create(n.doc,s.pos)).scrollIntoView()),!0)};function aR(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const zq=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Vx(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const jq=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=Vx(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let l=t.after(),h=n.tr.replaceWith(l,l,a.createAndFill());h.setSelection(pt.near(h.doc.resolve(l),1)),e(h.scrollIntoView())}return!0},qq=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Pr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Vx(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(a,s.createAndFill());l.setSelection(_t.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},Hq=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if($f(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Ag(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function $q(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ge&&e.selection.node.isBlock)return!r.parentOffset||!$f(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,l,h=!1,f=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){h=r.end(v)==r.pos+(r.depth-v),f=r.start(v)==r.pos-(r.depth-v),l=Vx(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),s.unshift(h&&l?{type:l}:null),a=v;break}else{if(v==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof _t||e.selection instanceof Pr)&&p.deleteSelection();let y=p.mapping.map(r.pos),_=$f(p.doc,y,s.length,s);if(_||(s[0]=l?{type:l}:null,_=$f(p.doc,y,s.length,s)),!_)return!1;if(p.split(y,s.length,s),!h&&f&&r.node(a).type!=l){let v=p.mapping.map(r.before(a)),w=p.doc.resolve(v);l&&r.node(a-1).canReplaceWith(w.index(),w.index()+1,l)&&p.setNodeMarkup(p.mapping.map(r.before(a)),l)}return t&&t(p.scrollIntoView()),!0}}const Gq=$q(),Kq=(n,e)=>(e&&e(n.tr.setSelection(new Pr(n.doc))),!0);function Wq(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Cg(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function uR(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,l,h=i.type.spec.isolating||s.type.spec.isolating;if(!h&&Wq(n,e,t))return!0;let f=!h&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(a[0]||s.type).validEnd){if(t){let v=e.pos+s.nodeSize,w=ye.empty;for(let V=a.length-1;V>=0;V--)w=ye.from(a[V].create(null,w));w=ye.from(i.copy(w));let R=n.tr.step(new Kn(e.pos-1,v,e.pos,v,new Se(w,1,0),a.length,!0)),D=R.doc.resolve(v+2*a.length);D.nodeAfter&&D.nodeAfter.type==i.type&&Cg(R.doc,D.pos)&&R.join(D.pos),t(R.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&h?null:pt.findFrom(e,1),y=p&&p.$from.blockRange(p.$to),_=y&&Ag(y);if(_!=null&&_>=e.depth)return t&&t(n.tr.lift(y,_).scrollIntoView()),!0;if(f&&Bc(s,"start",!0)&&Bc(i,"end")){let v=i,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let R=s,D=1;for(;!R.isTextblock;R=R.firstChild)D++;if(v.canReplace(v.childCount,v.childCount,R.content)){if(t){let V=ye.empty;for(let G=w.length-1;G>=0;G--)V=ye.from(w[G].copy(V));let W=n.tr.step(new Kn(e.pos-w.length,e.pos+s.nodeSize,e.pos+D,e.pos+s.nodeSize-D,new Se(V,w.length,0),0,!0));t(W.scrollIntoView())}return!0}}return!1}function lR(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(_t.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const Qq=lR(-1),Yq=lR(1);function Ux(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),l=a&&Lx(a,n,e);return l?(r&&r(t.tr.wrap(a,l).scrollIntoView()),!0):!1}}function ad(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(a,l,(h,f)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let p=t.doc.resolve(f),y=p.index();i=p.parent.canReplaceWith(y,y+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:h}}=t.selection.ranges[a];s.setBlockType(l,h,n,e)}r(s.scrollIntoView())}return!0}}function Xq(n,e,t,r){for(let i=0;i<e.length;i++){let{$from:s,$to:a}=e[i],l=s.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(s.pos,a.pos,(h,f)=>{if(l)return!1;l=h.inlineContent&&h.type.allowsMarkType(t)}),l)return!0}return!1}function zx(n,e=null,t){return function(r,i){let{empty:s,$cursor:a,ranges:l}=r.selection;if(s&&!a||!Xq(r.doc,l,n))return!1;if(i)if(a)n.isInSet(r.storedMarks||a.marks())?i(r.tr.removeStoredMark(n)):i(r.tr.addStoredMark(n.create(e)));else{let h,f=r.tr;h=!l.some(p=>r.doc.rangeHasMark(p.$from.pos,p.$to.pos,n));for(let p=0;p<l.length;p++){let{$from:y,$to:_}=l[p];if(!h)f.removeMark(y.pos,_.pos,n);else{let v=y.pos,w=_.pos,R=y.nodeAfter,D=_.nodeBefore,V=R&&R.isText?/^\s*/.exec(R.text)[0].length:0,W=D&&D.isText?/\s*$/.exec(D.text)[0].length:0;v+V<w&&(v+=V,w-=W),f.addMark(v,w,n.create(e))}}i(f.scrollIntoView())}return!0}}function Md(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Db=Md(Fx,iR,sR),P3=Md(Fx,Vq,Uq);const Ys={Enter:Md(zq,qq,Hq,Gq),"Mod-Enter":jq,Backspace:Db,"Mod-Backspace":Db,"Shift-Backspace":Db,Delete:P3,"Mod-Delete":P3,"Mod-a":Kq},cR={"Ctrl-h":Ys.Backspace,"Alt-Backspace":Ys["Mod-Backspace"],"Ctrl-d":Ys.Delete,"Ctrl-Alt-Backspace":Ys["Mod-Delete"],"Alt-Delete":Ys["Mod-Delete"],"Alt-d":Ys["Mod-Delete"],"Ctrl-a":Qq,"Ctrl-e":Yq};for(let n in Ys)cR[n]=Ys[n];const Zq=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Jq=Zq?cR:Ys;class Ii{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?eH(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function eH(n){return function(e,t,r,i){let s=n;if(t[1]){let a=t[0].lastIndexOf(t[1]);s+=t[0].slice(a+t[1].length),r+=a;let l=r-i;l>0&&(s=t[0].slice(a-l,a)+s,r=i)}return e.tr.insertText(s,r,i)}}const tH=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){let a=n.tr,l=s.transform;for(let h=l.steps.length-1;h>=0;h--)a.step(l.steps[h].invert(l.docs[h]));if(s.text){let h=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,h))}else a.delete(s.from,s.to);e(a)}return!0}}return!1};new Ii(/--$/,"",{inCodeMark:!1});new Ii(/\.\.\.$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Ii(/"$/,"",{inCodeMark:!1});new Ii(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Ii(/'$/,"",{inCodeMark:!1});function jx(n,e,t=null,r){return new Ii(n,(i,s,a,l)=>{let h=t instanceof Function?t(s):t,f=i.tr.delete(a,l),p=f.doc.resolve(a),y=p.blockRange(),_=y&&Lx(y,e,h);if(!_)return null;f.wrap(y,_);let v=f.doc.resolve(a-1).nodeBefore;return v&&v.type==e&&Cg(f.doc,a-1)&&(!r||r(s,v))&&f.join(a-1),f})}function hR(n,e,t=null){return new Ii(n,(r,i,s,a)=>{let l=r.doc.resolve(s),h=t instanceof Function?t(i):t;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?r.tr.delete(s,a).setBlockType(s,s,e,h):null})}const Pa=typeof navigator<"u"?navigator:null,B3=typeof document<"u"?document:null,il=Pa&&Pa.userAgent||"",W_=/Edge\/(\d+)/.exec(il),fR=/MSIE \d/.exec(il),Q_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(il),qx=!!(fR||Q_||W_);fR?document.documentMode:Q_?+Q_[1]:W_&&+W_[1];const nH=!qx&&/gecko\/(\d+)/i.test(il);nH&&+(/Firefox\/(\d+)/.exec(il)||[0,0])[1];const F3=!qx&&/Chrome\/(\d+)/.exec(il);F3&&+F3[1];const rH=!qx&&!!Pa&&/Apple Computer/.test(Pa.vendor),iH=rH&&(/Mobile\/\w+/.test(il)||!!Pa&&Pa.maxTouchPoints>2);iH||Pa&&/Mac/.test(Pa.platform);const sH=!!B3&&"webkitFontSmoothing"in B3.documentElement.style;sH&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];function Nb(n,e,t,r,i,s){if(n.composing)return!1;const a=n.state,l=a.doc.resolve(e);if(l.parent.type.spec.code)return!1;const h=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,void 0,"")+r;for(let f of i){const p=f,y=p.match.exec(h),_=y&&y[0]&&p.handler(a,y,e-(y[0].length-r.length),t);if(_)return p.undoable!==!1&&_.setMeta(s,{transform:_,from:e,to:t,text:r}),n.dispatch(_),!0}return!1}const oH=new Ri("MILKDOWN_CUSTOM_INPUTRULES");function aH({rules:n}){const e=new Ci({key:oH,isInputRules:!0,state:{init(){return null},apply(t,r){const i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,s){return Nb(t,r,i,s,n,e)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:r}=t.state.selection;r&&Nb(t,r.pos,r.pos,"",n,e)}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;const{$cursor:i}=t.state.selection;return i?Nb(t,i.pos,i.pos,`
`,n,e):!1}}});return e}function Ig(n,e,t={}){return new Ii(n,(r,i,s,a)=>{var l,h,f,p;const{tr:y}=r,_=i.length;let v=i[_-1],w=i[0],R=[],D=a;const V={group:v,fullMatch:w,start:s,end:a},W=(l=t.updateCaptured)==null?void 0:l.call(t,V);if(Object.assign(V,W),{group:v,fullMatch:w,start:s,end:a}=V,w===null||(v==null?void 0:v.trim())==="")return null;if(v){const G=w.search(/\S/),te=s+w.indexOf(v),Y=te+v.length;R=(h=y.storedMarks)!=null?h:[],Y<a&&y.delete(Y,a),te>s&&y.delete(s+G,te),D=s+G+v.length;const $=(f=t.getAttr)==null?void 0:f.call(t,i);y.addMark(s,D,e.create($)),y.setStoredMarks(R),(p=t.beforeDispatch)==null||p.call(t,{match:i,start:s,end:a,tr:y})}return y})}function uH(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function lH(n,e){if(!(n instanceof Ge))return;const{node:t,$from:r}=n;if(uH(e,t))return{node:t,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const cH=(n,e)=>{const{selection:t,doc:r}=n;if(t instanceof Ge)return{hasNode:t.node.type===e,pos:t.from,target:t.node};const{from:i,to:s}=t;let a=!1,l=-1,h=null;return r.nodesBetween(i,s,(f,p)=>h?!1:f.type===e?(a=!0,l=p,h=f,!1):!0),{hasNode:a,pos:l,target:h}};var Ba={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Um={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hH=typeof navigator<"u"&&/Mac/.test(navigator.platform),fH=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var On=0;On<10;On++)Ba[48+On]=Ba[96+On]=String(On);for(var On=1;On<=24;On++)Ba[On+111]="F"+On;for(var On=65;On<=90;On++)Ba[On]=String.fromCharCode(On+32),Um[On]=String.fromCharCode(On);for(var Mb in Ba)Um.hasOwnProperty(Mb)||(Um[Mb]=Ba[Mb]);function dH(n){var e=hH&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||fH&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Um:Ba)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const pH=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),mH=typeof navigator<"u"&&/Win/.test(navigator.platform);function gH(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let l=0;l<e.length-1;l++){let h=e[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))pH?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function yH(n){let e=Object.create(null);for(let t in n)e[gH(t)]=n[t];return e}function Ob(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function dR(n){return new Ci({props:{handleKeyDown:bH(n)}})}function bH(n){let e=yH(n);return function(t,r){let i=dH(r),s,a=e[Ob(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Ob(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(mH&&r.ctrlKey&&r.altKey)&&(s=Ba[r.keyCode])&&s!=i){let l=e[Ob(s,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const Ln=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Fc=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Y_=null;const Qs=function(n,e,t){let r=Y_||(Y_=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},_H=function(){Y_=null},Qu=function(n,e,t,r){return t&&(V3(n,e,t,r,-1)||V3(n,e,t,r,1))},vH=/^(img|br|input|textarea|hr)$/i;function V3(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:oi(n))){let a=n.parentNode;if(!a||a.nodeType!=1||Od(n)||vH.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ln(n)+(i<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=a,e=i<0?oi(n):0}else return!1}}function oi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function xH(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=oi(n)}else if(n.parentNode&&!Od(n))e=Ln(n),n=n.parentNode;else return null}}function EH(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Od(n))e=Ln(n)+1,n=n.parentNode;else return null}}function wH(n,e,t){for(let r=e==0,i=e==oi(n);r||i;){if(n==t)return!0;let s=Ln(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==oi(n)}}function Od(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Dg=function(n){return n.focusNode&&Qu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Au(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function kH(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function TH(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(oi(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(oi(r.startContainer),r.startOffset)}}}const ys=typeof navigator<"u"?navigator:null,U3=typeof document<"u"?document:null,qa=ys&&ys.userAgent||"",X_=/Edge\/(\d+)/.exec(qa),pR=/MSIE \d/.exec(qa),Z_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qa),yr=!!(pR||Z_||X_),wa=pR?document.documentMode:Z_?+Z_[1]:X_?+X_[1]:0,Ai=!yr&&/gecko\/(\d+)/i.test(qa);Ai&&+(/Firefox\/(\d+)/.exec(qa)||[0,0])[1];const J_=!yr&&/Chrome\/(\d+)/.exec(qa),Gn=!!J_,mR=J_?+J_[1]:0,rr=!yr&&!!ys&&/Apple Computer/.test(ys.vendor),Vc=rr&&(/Mobile\/\w+/.test(qa)||!!ys&&ys.maxTouchPoints>2),ri=Vc||(ys?/Mac/.test(ys.platform):!1),SH=ys?/Win/.test(ys.platform):!1,to=/Android \d/.test(qa),Ld=!!U3&&"webkitFontSmoothing"in U3.documentElement.style,AH=Ld?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function CH(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ks(n,e){return typeof n=="number"?n:n[e]}function RH(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function z3(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=Fc(a);continue}let l=a,h=l==s.body,f=h?CH(s):RH(l),p=0,y=0;if(e.top<f.top+Ks(r,"top")?y=-(f.top-e.top+Ks(i,"top")):e.bottom>f.bottom-Ks(r,"bottom")&&(y=e.bottom-e.top>f.bottom-f.top?e.top+Ks(i,"top")-f.top:e.bottom-f.bottom+Ks(i,"bottom")),e.left<f.left+Ks(r,"left")?p=-(f.left-e.left+Ks(i,"left")):e.right>f.right-Ks(r,"right")&&(p=e.right-f.right+Ks(i,"right")),p||y)if(h)s.defaultView.scrollBy(p,y);else{let v=l.scrollLeft,w=l.scrollTop;y&&(l.scrollTop+=y),p&&(l.scrollLeft+=p);let R=l.scrollLeft-v,D=l.scrollTop-w;e={left:e.left-R,top:e.top-D,right:e.right-R,bottom:e.bottom-D}}let _=h?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(_))break;a=_=="absolute"?a.offsetParent:Fc(a)}}function IH(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=n.root.elementFromPoint(s,a);if(!l||l==n.dom||!n.dom.contains(l))continue;let h=l.getBoundingClientRect();if(h.top>=t-20){r=l,i=h.top;break}}return{refDOM:r,refTop:i,stack:gR(n.dom)}}function gR(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Fc(r));return e}function DH({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;yR(t,r==0?0:r-e)}function yR(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ql=null;function NH(n){if(n.setActive)return n.setActive();if(Ql)return n.focus(Ql);let e=gR(n);n.focus(Ql==null?{get preventScroll(){return Ql={preventScroll:!0},!0}}:void 0),Ql||(Ql=!1,yR(e,0))}function bR(n,e){let t,r=2e8,i,s=0,a=e.top,l=e.top,h,f;for(let p=n.firstChild,y=0;p;p=p.nextSibling,y++){let _;if(p.nodeType==1)_=p.getClientRects();else if(p.nodeType==3)_=Qs(p).getClientRects();else continue;for(let v=0;v<_.length;v++){let w=_[v];if(w.top<=a&&w.bottom>=l){a=Math.max(w.bottom,a),l=Math.min(w.top,l);let R=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(R<r){t=p,r=R,i=R&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&R&&(s=y+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!h&&w.left<=e.left&&w.right>=e.left&&(h=p,f={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(s=y+1)}}return!t&&h&&(t=h,i=f,r=0),t&&t.nodeType==3?MH(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:bR(t,i)}function MH(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=ta(r,1);if(s.top!=s.bottom&&Hx(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Hx(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function OH(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function LH(n,e,t){let{node:r,offset:i}=bR(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function PH(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0),h;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((h=l.dom.getBoundingClientRect()).width||h.height)&&(l.node.isBlock&&l.parent&&(!a&&h.left>r.left||h.top>r.top?i=l.posBefore:(!a&&h.right<r.left||h.bottom<r.top)&&(i=l.posAfter),a=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(h.top+h.bottom)/2:r.left<(h.left+h.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function _R(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let l=a.getClientRects();for(let h=0;h<l.length;h++){let f=l[h];if(Hx(e,f))return _R(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function BH(n,e){let t=n.dom.ownerDocument,r,i=0,s=TH(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!Hx(e,f)||(a=_R(n.dom,e,f),!a))return null}if(rr)for(let f=a;r&&f;f=Fc(f))f.draggable&&(r=void 0);if(a=OH(a,e),r){if(Ai&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],y;p.nodeName=="IMG"&&(y=p.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&i++}let f;Ld&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=PH(n,r,i,e))}l==null&&(l=LH(n,a,e));let h=n.docView.nearestDesc(a,!0);return{pos:l,inside:h?h.posAtStart-h.border:-1}}function j3(n){return n.top<n.bottom||n.left<n.right}function ta(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(j3(r))return r}return Array.prototype.find.call(t,j3)||n.getBoundingClientRect()}const FH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function vR(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Ld||Ai;if(r.nodeType==3)if(a&&(FH.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let h=ta(Qs(r,i,i),t);if(Ai&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=ta(Qs(r,i-1,i-1),-1);if(f.top==h.top){let p=ta(Qs(r,i,i+1),-1);if(p.top!=h.top)return cf(p,p.left<f.left)}}return h}else{let h=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(h--,p=1):t<0?h--:f++,cf(ta(Qs(r,h,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==oi(r))){let h=r.childNodes[i-1];if(h.nodeType==1)return Lb(h.getBoundingClientRect(),!1)}if(s==null&&i<oi(r)){let h=r.childNodes[i];if(h.nodeType==1)return Lb(h.getBoundingClientRect(),!0)}return Lb(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==oi(r))){let h=r.childNodes[i-1],f=h.nodeType==3?Qs(h,oi(h)-(a?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(f)return cf(ta(f,1),!1)}if(s==null&&i<oi(r)){let h=r.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let f=h?h.nodeType==3?Qs(h,0,a?0:1):h.nodeType==1?h:null:null;if(f)return cf(ta(f,-1),!0)}return cf(ta(r.nodeType==3?Qs(r):r,-t),t>=0)}function cf(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Lb(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function xR(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function VH(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return xR(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=vR(n,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let h;if(l.nodeType==1)h=l.getClientRects();else if(l.nodeType==3)h=Qs(l,0,l.nodeValue.length).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const UH=/[\u0590-\u08ac]/;function zH(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,l=n.domSelection();return l?!UH.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:a:xR(n,e,()=>{let{focusNode:h,focusOffset:f,anchorNode:p,anchorOffset:y}=n.domSelectionRange(),_=l.caretBidiLevel;l.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:R}=n.domSelectionRange(),D=w&&!v.contains(w.nodeType==1?w:w.parentNode)||h==w&&f==R;try{l.collapse(p,y),h&&(h!=p||f!=y)&&l.extend&&l.extend(h,f)}catch{}return _!=null&&(l.caretBidiLevel=_),D}):r.pos==r.start()||r.pos==r.end()}let q3=null,H3=null,$3=!1;function jH(n,e,t){return q3==e&&H3==t?$3:(q3=e,H3=t,$3=t=="up"||t=="down"?VH(n,e,t):zH(n,e,t))}const li=0,G3=1,Iu=2,bs=3;class Pd{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=li,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Ln(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let l=i.children[a];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],l=s+a.size;if(l>e||a instanceof wR){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof ER&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Ln(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Ln(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,l=0;;l++){let h=this.children[l],f=a+h.size;if(i==-1&&e<=f){let p=a+h.border;if(e>=p&&t<=f-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,p);e=a;for(let y=l;y>0;y--){let _=this.children[y-1];if(_.size&&_.dom.parentNode==this.contentDOM&&!_.emptyChildAt(1)){i=Ln(_.dom)+1;break}e-=_.size}i==-1&&(i=0)}if(i>-1&&(f>t||l==this.children.length-1)){t=f;for(let p=l+1;p<this.children.length;p++){let y=this.children[p];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){s=Ln(y.dom);break}t+=y.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let R=this.children[v],D=w+R.size;if(s>w&&a<D)return R.setSelection(e-w-R.border,t-w-R.border,r,i);w=D}let l=this.domFromPos(e,e?-1:1),h=t==e?l:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),y=!1;if((Ai||rr)&&e==t){let{node:v,offset:w}=l;if(v.nodeType==3){if(y=!!(w&&v.nodeValue[w-1]==`
`),y&&w==v.nodeValue.length)for(let R=v,D;R;R=R.parentNode){if(D=R.nextSibling){D.nodeName=="BR"&&(l=h={node:D.parentNode,offset:Ln(D)+1});break}let V=R.pmViewDesc;if(V&&V.node&&V.node.isBlock)break}}else{let R=v.childNodes[w-1];y=R&&(R.nodeName=="BR"||R.contentEditable=="false")}}if(Ai&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||y&&rr)&&Qu(l.node,l.offset,p.anchorNode,p.anchorOffset)&&Qu(h.node,h.offset,p.focusNode,p.focusOffset))return;let _=!1;if((f.extend||e==t)&&!y){f.collapse(l.node,l.offset);try{e!=t&&f.extend(h.node,h.offset),_=!0}catch{}}if(!_){if(e>t){let w=l;l=h,h=w}let v=document.createRange();v.setEnd(h.node,h.offset),v.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let l=r+s.border,h=a-s.border;if(e>=l&&t<=h){this.dirty=e==r||t==a?Iu:G3,e==l&&t==h&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=bs:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Iu:bs}r=a}this.dirty=Iu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Iu:G3;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class ER extends Pd{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class qH extends Pd{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Yu extends Pd{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Wc.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Yu(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&bs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=bs&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=li){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=li}}slice(e,t,r){let i=Yu.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=tv(s,t,a,r)),e>0&&(s=tv(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ka extends Pd{constructor(e,t,r,i,s,a,l,h,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,t,r,i,s,a){let l=s.nodeViews[t.type.name],h,f=l&&l(t,s,()=>{if(!h)return a;if(h.parent)return h.parent.posBeforeChild(h)},r,i),p=f&&f.dom,y=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:y}=Wc.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let _=p;return p=SR(p,r,t),f?h=new HH(e,t,r,i,p,y||null,_,f,s,a+1):t.isText?new Ng(e,t,r,i,p,_,s):new ka(e,t,r,i,p,y||null,_,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ye.empty)}return e}matchesNode(e,t,r){return this.dirty==li&&e.eq(this.node)&&zm(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,h=new GH(this,a&&a.node,e);QH(this.node,this.innerDeco,(f,p,y)=>{f.spec.marks?h.syncToMarks(f.spec.marks,r,e):f.type.side>=0&&!y&&h.syncToMarks(p==this.node.childCount?dt.none:this.node.child(p).marks,r,e),h.placeWidget(f,e,i)},(f,p,y,_)=>{h.syncToMarks(f.marks,r,e);let v;h.findNodeMatch(f,p,y,_)||l&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(v=h.findIndexWithChild(s.node))>-1&&h.updateNodeAt(f,p,y,v,e)||h.updateNextNode(f,p,y,e,_,i)||h.addNode(f,p,y,e,i),i+=f.nodeSize}),h.syncToMarks([],r,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==Iu)&&(a&&this.protectLocalComposition(e,a),kR(this.contentDOM,this.children,e),Vc&&YH(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _t)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=XH(this.node.content,a,r-t,i-t);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new qH(this,s,t,i);e.input.compositionNodes.push(a),this.children=tv(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==bs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=li}updateOuterDeco(e){if(zm(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=TR(this.dom,this.nodeDOM,ev(this.outerDeco,this.node,t),ev(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function K3(n,e,t,r,i){SR(r,e,n);let s=new ka(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Ng extends ka{constructor(e,t,r,i,s,a,l){super(e,t,r,i,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==bs||this.dirty!=li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=li,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new Ng(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=bs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class wR extends Pd{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class HH extends ka{constructor(e,t,r,i,s,a,l,h,f,p){super(e,t,r,i,s,a,l,f,p),this.spec=h}update(e,t,r,i){if(this.dirty==bs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function kR(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==n){for(;l!=r;)r=W3(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(a instanceof Yu){let h=r?r.previousSibling:n.lastChild;kR(a.contentDOM,a.children,t),r=h?h.nextSibling:n.firstChild}}for(;r;)r=W3(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Gf=function(n){n&&(this.nodeName=n)};Gf.prototype=Object.create(null);const Du=[new Gf];function ev(n,e,t){if(n.length==0)return Du;let r=t?Du[0]:new Gf,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new Gf(a.nodeName));for(let l in a){let h=a[l];h!=null&&(t&&i.length==1&&i.push(r=new Gf(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+h:l=="style"?r.style=(r.style?r.style+";":"")+h:l!="nodeName"&&(r[l]=h))}}}return i}function TR(n,e,t,r){if(t==Du&&r==Du)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],l=t[s];if(s){let h;l&&l.nodeName==a.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==a.nodeName||(h=document.createElement(a.nodeName),h.pmIsDeco=!0,h.appendChild(i),l=Du[0]),i=h}$H(i,l||Du[0],a)}return i}function $H(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function SR(n,e,t){return TR(n,n,Du,ev(e,t,n.nodeType!=1))}function zm(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function W3(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class GH{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=KH(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=li,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let f=this.top.children[h];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){l=h;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let h=Yu.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,h=Math.min(this.top.children.length,l+5);l<h;l++){let f=this.top.children[l];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==bs&&a.dom==a.contentDOM&&(a.dirty=Iu),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let l=this.index;l<this.top.children.length;l++){let h=this.top.children[l];if(h instanceof ka){let f=this.preMatch.matched.get(h);if(f!=null&&f!=s)return!1;let p=h.dom,y,_=this.isLocked(p)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=bs&&zm(t,h.outerDeco));if(!_&&h.update(e,t,r,i))return this.destroyBetween(this.index,l),h.dom!=p&&(this.changed=!0),this.index++,!0;if(!_&&(y=this.recreateWrapper(h,e,t,r,i,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Iu,y.updateChildren(i,a+1),y.dirty=li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!zm(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=ka.create(this.top,t,r,i,s,a);if(l.contentDOM){l.children=e.children,e.children=[];for(let h of l.children)h.parent=l}return e.destroy(),l}addNode(e,t,r,i,s){let a=ka.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new ER(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Yu;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Ng)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rr||Gn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new wR(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function KH(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let l;for(;;)if(r){let f=t.children[r-1];if(f instanceof Yu)t=f,r=f.children.length;else{l=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let h=l.node;if(h){if(h!=n.child(i-1))break;--i,s.set(l,i),a.push(l)}}return{index:i,matched:s,matches:a.reverse()}}function WH(n,e){return n.type.side-e.type.side}function QH(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,l=[],h=null;for(let f=0;;){let p,y;for(;a<i.length&&i[a].to==s;){let D=i[a++];D.widget&&(p?(y||(y=[p])).push(D):p=D)}if(p)if(y){y.sort(WH);for(let D=0;D<y.length;D++)t(y[D],f,!!h)}else t(p,f,!!h);let _,v;if(h)v=-1,_=h,h=null;else if(f<n.childCount)v=f,_=n.child(f++);else break;for(let D=0;D<l.length;D++)l[D].to<=s&&l.splice(D--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)l.push(i[a++]);let w=s+_.nodeSize;if(_.isText){let D=w;a<i.length&&i[a].from<D&&(D=i[a].from);for(let V=0;V<l.length;V++)l[V].to<D&&(D=l[V].to);D<w&&(h=_.cut(D-s),_=_.cut(0,D-s),w=D,v=-1)}else for(;a<i.length&&i[a].to<w;)a++;let R=_.isInline&&!_.isLeaf?l.filter(D=>!D.inline):l.slice();r(_,R,e.forChild(s,_),v),s=w}}function YH(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function XH(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),l=s;if(s+=a.nodeSize,!a.isText)continue;let h=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;h+=f.text}if(s>=t){if(s>=r&&h.slice(r-e.length-l,r-l)==e)return r-e.length;let f=l<r?h.lastIndexOf(e,r-l-1):-1;if(f>=0&&f+e.length+l>=t)return l+f;if(t==r&&h.length>=r+e.length-l&&h.slice(r-l,r-l+e.length)==e)return r}}return-1}function tv(n,e,t,r,i){let s=[];for(let a=0,l=0;a<n.length;a++){let h=n[a],f=l,p=l+=h.size;f>=t||p<=e?s.push(h):(f<e&&s.push(h.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(h.slice(t-f,h.size,r)))}return s}function $x(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let l=r.resolve(a),h,f;if(Dg(t)){for(h=a;i&&!i.node;)i=i.parent;let y=i.node;if(i&&y.isAtom&&Ge.isSelectable(y)&&i.parent&&!(y.isInline&&wH(t.focusNode,t.focusOffset,i.dom))){let _=i.posBefore;f=new Ge(a==_?l:r.resolve(_))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=a,_=a;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),_=Math.max(_,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(y<0)return null;[h,a]=_==n.state.selection.anchor?[_,y]:[y,_],l=r.resolve(a)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let p=r.resolve(h);if(!f){let y=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;f=Gx(n,p,l,y)}return f}function AR(n){return n.editable?n.hasFocus():RR(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function io(n,e=!1){let t=n.state.selection;if(CR(n,t),!!AR(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Gn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Qu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)JH(n);else{let{anchor:r,head:i}=t,s,a;Q3&&!(t instanceof _t)&&(t.$from.parent.inlineContent||(s=Y3(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=Y3(n,t.to))),n.docView.setSelection(r,i,n,e),Q3&&(s&&X3(s),a&&X3(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ZH(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Q3=rr||Gn&&mR<63;function Y3(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(rr&&i&&i.contentEditable=="false")return Pb(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Pb(i);if(s)return Pb(s)}}function Pb(n){return n.contentEditable="true",rr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function X3(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function ZH(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!AR(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function JH(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Ln(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&yr&&wa<=11&&(r.disabled=!0,r.disabled=!1)}function CR(n,e){if(e instanceof Ge){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Z3(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Z3(n)}function Z3(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Gx(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||_t.between(e,t,r)}function J3(n){return n.editable&&!n.hasFocus()?!1:RR(n)}function RR(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function e$(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Qu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function nv(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&pt.findFrom(s,e)}function ia(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function eA(n,e,t){let r=n.state.selection;if(r instanceof _t)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ia(n,new _t(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=nv(n.state,e);return i&&i instanceof Ge?ia(n,i):!1}else if(!(ri&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(l))&&!a.contentDOM?Ge.isSelectable(s)?ia(n,new Ge(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Ld?ia(n,new _t(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ge&&r.node.isInline)return ia(n,new _t(e>0?r.$to:r.$from));{let i=nv(n.state,e);return i?ia(n,i):!1}}}function jm(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Kf(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Yl(n,e){return e<0?t$(n):n$(n)}function t$(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Ai&&t.nodeType==1&&r<jm(t)&&Kf(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(Kf(l,-1))i=t,s=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(IR(t))break;{let l=t.previousSibling;for(;l&&Kf(l,-1);)i=t.parentNode,s=Ln(l),l=l.previousSibling;if(l)t=l,r=jm(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?rv(n,t,r):i&&rv(n,i,s)}function n$(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=jm(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(Kf(l,1))s=t,a=++r;else break}else{if(IR(t))break;{let l=t.nextSibling;for(;l&&Kf(l,1);)s=l.parentNode,a=Ln(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=jm(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&rv(n,s,a)}function IR(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function r$(n,e){for(;n&&e==n.childNodes.length&&!Od(n);)e=Ln(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function i$(n,e){for(;n&&!e&&!Od(n);)e=Ln(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function rv(n,e,t){if(e.nodeType!=3){let s,a;(a=r$(e,t))?(e=a,t=0):(s=i$(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Dg(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&io(n)},50)}function tA(n,e){let t=n.state.doc.resolve(e);if(!(Gn||SH)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function nA(n,e,t){let r=n.state.selection;if(r instanceof _t&&!r.empty||t.indexOf("s")>-1||ri&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=nv(n.state,e);if(a&&a instanceof Ge)return ia(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,l=r instanceof Pr?pt.near(a,e):pt.findFrom(a,e);return l?ia(n,l):!1}return!1}function rA(n,e){if(!(n.state.selection instanceof _t))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function iA(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function s$(n){if(!rr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;iA(n,r,"true"),setTimeout(()=>iA(n,r,"false"),20)}return!1}function o$(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function a$(n,e){let t=e.keyCode,r=o$(e);if(t==8||ri&&t==72&&r=="c")return rA(n,-1)||Yl(n,-1);if(t==46&&!e.shiftKey||ri&&t==68&&r=="c")return rA(n,1)||Yl(n,1);if(t==13||t==27)return!0;if(t==37||ri&&t==66&&r=="c"){let i=t==37?tA(n,n.state.selection.from)=="ltr"?-1:1:-1;return eA(n,i,r)||Yl(n,i)}else if(t==39||ri&&t==70&&r=="c"){let i=t==39?tA(n,n.state.selection.from)=="ltr"?1:-1:1;return eA(n,i,r)||Yl(n,i)}else{if(t==38||ri&&t==80&&r=="c")return nA(n,-1,r)||Yl(n,-1);if(t==40||ri&&t==78&&r=="c")return s$(n)||nA(n,1,r)||Yl(n,1);if(r==(ri?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Kx(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let a=n.someProp("clipboardSerializer")||Wc.fromSchema(n.state.schema),l=PR(),h=l.createElement("div");h.appendChild(a.serializeFragment(r,{document:l}));let f=h.firstChild,p,y=0;for(;f&&f.nodeType==1&&(p=LR[f.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=l.createElement(p[v]);for(;h.firstChild;)w.appendChild(h.firstChild);h.appendChild(w),y++}f=h.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${y?` -${y}`:""} ${JSON.stringify(t)}`);let _=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:_,slice:e}}function DR(n,e,t,r,i){let s=i.parent.type.spec.code,a,l;if(!t&&!e)return null;let h=e&&(r||s||!t);if(h){if(n.someProp("transformPastedText",_=>{e=_(e,s||r,n)}),s)return e?new Se(ye.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Se.empty;let y=n.someProp("clipboardTextParser",_=>_(e,i,r,n));if(y)l=y;else{let _=i.marks(),{schema:v}=n.state,w=Wc.fromSchema(v);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(R=>{let D=a.appendChild(document.createElement("p"));R&&D.appendChild(w.serializeNode(v.text(R,_)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),a=h$(t),Ld&&f$(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let y=+p[3];y>0;y--){let _=a.firstChild;for(;_&&_.nodeType!=1;)_=_.nextSibling;if(!_)break;a=_}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Lc.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(h||p),context:i,ruleFromNode(_){return _.nodeName=="BR"&&!_.nextSibling&&_.parentNode&&!u$.test(_.parentNode.nodeName)?{ignore:!0}:null}})),p)l=d$(sA(l,+p[1],+p[2]),p[4]);else if(l=Se.maxOpen(l$(l.content,i),!0),l.openStart||l.openEnd){let y=0,_=0;for(let v=l.content.firstChild;y<l.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=l.content.lastChild;_<l.openEnd&&!v.type.spec.isolating;_++,v=v.lastChild);l=sA(l,y,_)}return n.someProp("transformPasted",y=>{l=y(l,n)}),l}const u$=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function l$(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(l=>{if(!a)return;let h=i.findWrapping(l.type),f;if(!h)return a=null;if(f=a.length&&s.length&&MR(h,s,l,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=OR(a[a.length-1],s.length));let p=NR(l,h);a.push(p),i=i.matchType(p.type),s=h}}),a)return ye.from(a)}return n}function NR(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ye.from(n));return n}function MR(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=MR(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ye.from(NR(t,n,i+1))))}}function OR(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,OR(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ye.empty,!0);return n.copy(t.append(r))}function iv(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,l=a.content;return n.childCount>1&&(s=0),i<r-1&&(l=iv(l,e,t,r,i+1,s)),i>=t&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(ye.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(l))}function sA(n,e,t){return e<n.openStart&&(n=new Se(iv(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Se(iv(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const LR={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let oA=null;function PR(){return oA||(oA=document.implementation.createHTMLDocument("title"))}let Bb=null;function c$(n){let e=window.trustedTypes;return e?(Bb||(Bb=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Bb.createHTML(n)):n}function h$(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=PR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&LR[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=c$(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function f$(n){let e=n.querySelectorAll(Gn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function d$(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let l=r.length-2;l>=0;l-=2){let h=t.nodes[r[l]];if(!h||h.hasRequiredAttrs())break;i=ye.from(h.create(r[l+1],i)),s++,a++}return new Se(i,s,a)}const ir={},sr={},p$={touchstart:!0,touchmove:!0};class m${constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function g$(n){for(let e in ir){let t=ir[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{b$(n,r)&&!Wx(n,r)&&(n.editable||!(r.type in sr))&&t(n,r)},p$[e]?{passive:!0}:void 0)}rr&&n.dom.addEventListener("input",()=>null),sv(n)}function ga(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function y$(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function sv(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Wx(n,r))})}function Wx(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function b$(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function _$(n,e){!Wx(n,e)&&ir[e.type]&&(n.editable||!(e.type in sr))&&ir[e.type](n,e)}sr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!FR(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(to&&Gn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Vc&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Au(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||a$(n,t)?t.preventDefault():ga(n,"key")};sr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};sr.keypress=(n,e)=>{let t=e;if(FR(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||ri&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof _t)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function Mg(n){return{left:n.clientX,top:n.clientY}}function v$(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Qx(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,l=>a>s.depth?l(n,t,s.nodeAfter,s.before(a),i,!0):l(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function _c(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function x$(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ge.isSelectable(r)?(_c(n,new Ge(t)),!0):!1}function E$(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Ge&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(Ge.isSelectable(l)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(_c(n,Ge.create(n.state.doc,i)),!0):!1}function w$(n,e,t,r,i){return Qx(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?E$(n,t):x$(n,t))}function k$(n,e,t,r){return Qx(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function T$(n,e,t,r){return Qx(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||S$(n,t,r)}function S$(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(_c(n,_t.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(a.inlineContent)_c(n,_t.create(r,l+1,l+1+a.content.size));else if(Ge.isSelectable(a))_c(n,Ge.create(r,l));else continue;return!0}}function Yx(n){return qm(n)}const BR=ri?"metaKey":"ctrlKey";ir.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Yx(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&v$(t,n.input.lastClick)&&!t[BR]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let a=n.posAtCoords(Mg(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new A$(n,a,t,!!r)):(s=="doubleClick"?k$:T$)(n,a.pos,a.inside,t)?t.preventDefault():ga(n,"pointer"))};class A${constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[BR],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const l=i?null:r.target,h=l?e.docView.nearestDesc(l,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof Ge&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ai&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ga(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>io(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Mg(e))),this.updateAllowDefault(e),this.allowDefault||!t?ga(this.view,"pointer"):w$(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rr&&this.mightDrag&&!this.mightDrag.node.isAtom||Gn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(_c(this.view,pt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ga(this.view,"pointer")}move(e){this.updateAllowDefault(e),ga(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ir.touchstart=n=>{n.input.lastTouch=Date.now(),Yx(n),ga(n,"pointer")};ir.touchmove=n=>{n.input.lastTouch=Date.now(),ga(n,"pointer")};ir.contextmenu=n=>Yx(n);function FR(n,e){return n.composing?!0:rr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const C$=to?5e3:-1;sr.compositionstart=sr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof _t&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),qm(n,!0),n.markCursor=null;else if(qm(n,!e.selection.empty),Ai&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let l=n.domSelection();l&&l.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}VR(n,C$)};sr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,VR(n,20))};function VR(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>qm(n),e))}function UR(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=I$());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function R$(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=xH(e.focusNode,e.focusOffset),r=EH(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function I$(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function qm(n,e=!1){if(!(to&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),UR(n),e||n.docView&&n.docView.dirty){let t=$x(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function D$(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ud=yr&&wa<15||Vc&&AH<604;ir.copy=sr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=ud?null:t.clipboardData,a=r.content(),{dom:l,text:h}=Kx(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",h)):D$(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function N$(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function M$(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ld(n,r.value,null,i,e):ld(n,r.textContent,r.innerHTML,i,e)},50)}function ld(n,e,t,r,i){let s=DR(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,s||Se.empty)))return!0;if(!s)return!1;let a=N$(s),l=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function zR(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}sr.paste=(n,e)=>{let t=e;if(n.composing&&!to)return;let r=ud?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ld(n,zR(r),r.getData("text/html"),i,t)?t.preventDefault():M$(n,t)};class jR{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const O$=ri?"altKey":"ctrlKey";function qR(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[O$]}ir.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Mg(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ge?i.to-1:i.to))){if(r&&r.mightDrag)a=Ge.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(a=Ge.create(n.state.doc,y.posBefore))}}let l=(a||n.state.selection).content(),{dom:h,text:f,slice:p}=Kx(n,l);(!t.dataTransfer.files.length||!Gn||mR>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ud?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",ud||t.dataTransfer.setData("text/plain",f),n.dragging=new jR(p,qR(n,t),a)};ir.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};sr.dragover=sr.dragenter=(n,e)=>e.preventDefault();sr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Mg(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",w=>{a=w(a,n)}):a=DR(n,zR(t.dataTransfer),ud?null:t.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&qR(n,t));if(n.someProp("handleDrop",w=>w(n,t,a||Se.empty,l))){t.preventDefault();return}if(!a)return;t.preventDefault();let h=a?Tq(n.state.doc,s.pos,a):s.pos;h==null&&(h=s.pos);let f=n.state.tr;if(l){let{node:w}=r;w?w.replace(f):f.deleteSelection()}let p=f.mapping.map(h),y=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,_=f.doc;if(y?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(_))return;let v=f.doc.resolve(p);if(y&&Ge.isSelectable(a.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new Ge(v));else{let w=f.mapping.map(h);f.mapping.maps[f.mapping.maps.length-1].forEach((R,D,V,W)=>w=W),f.setSelection(Gx(n,v,f.doc.resolve(w)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))};ir.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&io(n)},20))};ir.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};ir.beforeinput=(n,e)=>{if(Gn&&to&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Au(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in sr)ir[n]=sr[n];function cd(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Hm{constructor(e,t){this.toDOM=e,this.spec=t||Pu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Lr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Hm&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&cd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ta{constructor(e,t){this.attrs=e,this.spec=t||Pu}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Lr(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ta&&cd(this.attrs,e.attrs)&&cd(this.spec,e.spec)}static is(e){return e.type instanceof Ta}destroy(){}}class Xx{constructor(e,t){this.attrs=e,this.spec=t||Pu}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Lr(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Xx&&cd(this.attrs,e.attrs)&&cd(this.spec,e.spec)}destroy(){}}class Lr{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Lr(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Lr(e,e,new Hm(t,r))}static inline(e,t,r,i){return new Lr(e,t,new Ta(r,i))}static node(e,t,r,i){return new Lr(e,t,new Xx(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ta}get widget(){return this.type instanceof Hm}}const ac=[],Pu={};class sn{constructor(e,t){this.local=e.length?e:ac,this.children=t.length?t:ac}static create(e,t){return t.length?$m(t,e,0,Pu):qn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,r,i+l,s)}}map(e,t,r){return this==qn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Pu)}mapInner(e,t,r,i,s){let a;for(let l=0;l<this.local.length;l++){let h=this.local[l].map(e,r,i);h&&h.type.valid(t,h)?(a||(a=[])).push(h):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?L$(this.children,a||[],e,t,r,i,s):a?new sn(a.sort(Bu),ac):qn}add(e,t){return t.length?this==qn?sn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((l,h)=>{let f=h+r,p;if(p=$R(t,l,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<h;)s+=3;i[s]==h?i[s+2]=i[s+2].addInner(l,p,f+1):i.splice(s,0,h,h+l.nodeSize,$m(p,l,f+1,Pu)),s+=3}});let a=HR(s?GR(t):t,-r);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new sn(a.length?this.local.concat(a).sort(Bu):this.local,i||this.children)}remove(e){return e.length==0||this==qn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,l=r[s]+t,h=r[s+1]+t;for(let p=0,y;p<e.length;p++)(y=e[p])&&y.from>l&&y.to<h&&(e[p]=null,(a||(a=[])).push(y));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,l+1);f!=qn?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let l=0;l<i.length;l++)i[l].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new sn(i,r):qn}forChild(e,t){if(this==qn)return this;if(t.isLeaf)return sn.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,a=s+t.content.size;for(let l=0;l<this.local.length;l++){let h=this.local[l];if(h.from<a&&h.to>s&&h.type instanceof Ta){let f=Math.max(s,h.from)-s,p=Math.min(a,h.to)-s;f<p&&(i||(i=[])).push(h.copy(f,p))}}if(i){let l=new sn(i.sort(Bu),ac);return r?new fa([l,r]):l}return r||qn}eq(e){if(this==e)return!0;if(!(e instanceof sn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Zx(this.localsInner(e))}localsInner(e){if(this==qn)return ac;if(e.inlineContent||!this.local.some(Ta.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ta||t.push(this.local[r]);return t}forEachSet(e){e(this)}}sn.empty=new sn([],[]);sn.removeOverlap=Zx;const qn=sn.empty;class fa{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Pu));return fa.from(r)}forChild(e,t){if(t.isLeaf)return sn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=qn&&(s instanceof fa?r=r.concat(s.members):r.push(s))}return fa.from(r)}eq(e){if(!(e instanceof fa)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?Zx(r?t:t.sort(Bu)):ac}static from(e){switch(e.length){case 0:return qn;case 1:return e[0];default:return new fa(e.every(t=>t instanceof sn)?e:e.reduce((t,r)=>t.concat(r instanceof sn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function L$(n,e,t,r,i,s,a){let l=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let y=0;t.maps[f].forEach((_,v,w,R)=>{let D=R-w-(v-_);for(let V=0;V<l.length;V+=3){let W=l[V+1];if(W<0||_>W+p-y)continue;let G=l[V]+p-y;v>=G?l[V+1]=_<=G?-2:-1:_>=p&&D&&(l[V]+=D,l[V+1]+=D)}y+=D}),p=t.maps[f].map(p,-1)}let h=!1;for(let f=0;f<l.length;f+=3)if(l[f+1]<0){if(l[f+1]==-2){h=!0,l[f+1]=-1;continue}let p=t.map(n[f]+s),y=p-i;if(y<0||y>=r.content.size){h=!0;continue}let _=t.map(n[f+1]+s,-1),v=_-i,{index:w,offset:R}=r.content.findIndex(y),D=r.maybeChild(w);if(D&&R==y&&R+D.nodeSize==v){let V=l[f+2].mapInner(t,D,p+1,n[f]+s+1,a);V!=qn?(l[f]=y,l[f+1]=v,l[f+2]=V):(l[f+1]=-2,h=!0)}else h=!0}if(h){let f=P$(l,n,e,t,i,s,a),p=$m(f,r,0,a);e=p.local;for(let y=0;y<l.length;y+=3)l[y+1]<0&&(l.splice(y,3),y-=3);for(let y=0,_=0;y<p.children.length;y+=3){let v=p.children[y];for(;_<l.length&&l[_]<v;)_+=3;l.splice(_,0,p.children[y],p.children[y+1],p.children[y+2])}}return new sn(e.sort(Bu),l)}function HR(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Lr(i.from+e,i.to+e,i.type))}return t}function P$(n,e,t,r,i,s,a){function l(h,f){for(let p=0;p<h.local.length;p++){let y=h.local[p].map(r,i,f);y?t.push(y):a.onRemove&&a.onRemove(h.local[p].spec)}for(let p=0;p<h.children.length;p+=3)l(h.children[p+2],h.children[p]+f+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&l(n[h+2],e[h]+s+1);return t}function $R(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function GR(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function $m(n,e,t,r){let i=[],s=!1;e.forEach((l,h)=>{let f=$R(n,l,h+t);if(f){s=!0;let p=$m(f,l,t+h+1,r);p!=qn&&i.push(h,h+l.nodeSize,p)}});let a=HR(s?GR(n):n,-t).sort(Bu);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(r.onRemove&&r.onRemove(a[l].spec),a.splice(l--,1));return a.length||i.length?new sn(a,i):qn}function Bu(n,e){return n.from-e.from||n.to-e.to}function Zx(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),aA(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),aA(e,i,r.copy(s.from,r.to)));break}}}return e}function aA(n,e,t){for(;e<n.length&&Bu(t,n[e])>0;)e++;n.splice(e,0,t)}function Fb(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=qn&&e.push(r)}),n.cursorWrapper&&e.push(sn.create(n.state.doc,[n.cursorWrapper.deco])),fa.from(e)}const B$={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},F$=yr&&wa<=11;class V${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class U${constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new V$,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);yr&&wa<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),F$&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,B$)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(J3(this.view)){if(this.suppressingSelectionUpdates)return io(this.view);if(yr&&wa<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Fc(s))t.add(s);for(let s=e.anchorNode;s;s=Fc(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&J3(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,l=!1,h=[];if(e.editable)for(let p=0;p<t.length;p++){let y=this.registerMutation(t[p],h);y&&(s=s<0?y.from:Math.min(y.from,s),a=a<0?y.to:Math.max(y.to,a),y.typeOver&&(l=!0))}if(Ai&&h.length){let p=h.filter(y=>y.nodeName=="BR");if(p.length==2){let[y,_]=p;y.parentNode&&y.parentNode.parentNode==_.parentNode?_.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let _ of p){let v=_.parentNode;v&&v.nodeName=="LI"&&(!y||q$(e,y)!=v)&&_.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Dg(r)&&(f=$x(e))&&f.eq(pt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,io(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),z$(e)),this.handleDOMChange(s,a,l,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||io(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let y=e.addedNodes[p];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(yr&&wa<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:y,nextSibling:_}=e.addedNodes[p];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y),(!_||Array.prototype.indexOf.call(e.addedNodes,_)<0)&&(s=_)}let a=i&&i.parentNode==e.target?Ln(i)+1:0,l=r.localPosFromDOM(e.target,a,-1),h=s&&s.parentNode==e.target?Ln(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,h,1);return{from:l,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let uA=new WeakMap,lA=!1;function z$(n){if(!uA.has(n)&&(uA.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Ai,lA)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),lA=!0}}function cA(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Qu(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function j$(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return cA(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?cA(n,t):null}function q$(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function H$(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:l}=n.docView.parseRange(e,t),h=n.domSelectionRange(),f,p=h.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:h.anchorOffset}],Dg(h)||f.push({node:h.focusNode,offset:h.focusOffset})),Gn&&n.input.lastKeyCode===8)for(let D=s;D>i;D--){let V=r.childNodes[D-1],W=V.pmViewDesc;if(V.nodeName=="BR"&&!W){s=D;break}if(!W||W.size)break}let y=n.state.doc,_=n.someProp("domParser")||Lc.fromSchema(n.state.schema),v=y.resolve(a),w=null,R=_.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:s,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:$$,context:v});if(f&&f[0].pos!=null){let D=f[0].pos,V=f[1]&&f[1].pos;V==null&&(V=D),w={anchor:D+a,head:V+a}}return{doc:R,sel:w,from:a,to:l}}function $$(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(rr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||rr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const G$=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function K$(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,N=$x(n,I);if(N&&!n.state.selection.eq(N)){if(Gn&&to&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",j=>j(n,Au(13,"Enter"))))return;let F=n.state.tr.setSelection(N);I=="pointer"?F.setMeta("pointer",!0):I=="key"&&F.scrollIntoView(),s&&F.setMeta("composition",s),n.dispatch(F)}return}let a=n.state.doc.resolve(e),l=a.sharedDepth(t);e=a.before(l+1),t=n.state.doc.resolve(t).after(l+1);let h=n.state.selection,f=H$(n,e,t),p=n.state.doc,y=p.slice(f.from,f.to),_,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(_=n.state.selection.to,v="end"):(_=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=Y$(y.content,f.doc.content,f.from,_,v);if(w&&n.input.domChangeCount++,(Vc&&n.input.lastIOSEnter>Date.now()-225||to)&&i.some(I=>I.nodeType==1&&!G$.test(I.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",I=>I(n,Au(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&h instanceof _t&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))w={start:h.from,endA:h.to,endB:h.to};else{if(f.sel){let I=hA(n,n.state.doc,f.sel);if(I&&!I.eq(n.state.selection)){let N=n.state.tr.setSelection(I);s&&N.setMeta("composition",s),n.dispatch(N)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof _t&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),yr&&wa<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>f.from&&f.doc.textBetween(w.start-f.from-1,w.start-f.from+1)==" "&&(w.start--,w.endA--,w.endB--);let R=f.doc.resolveNoCache(w.start-f.from),D=f.doc.resolveNoCache(w.endB-f.from),V=p.resolve(w.start),W=R.sameParent(D)&&R.parent.inlineContent&&V.end()>=w.endA,G;if((Vc&&n.input.lastIOSEnter>Date.now()-225&&(!W||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!W&&R.pos<f.doc.content.size&&(!R.sameParent(D)||!R.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(R.pos,D.pos,"",""))&&(G=pt.findFrom(f.doc.resolve(R.pos+1),1,!0))&&G.head>R.pos)&&n.someProp("handleKeyDown",I=>I(n,Au(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&Q$(p,w.start,w.endA,R,D)&&n.someProp("handleKeyDown",I=>I(n,Au(8,"Backspace")))){to&&Gn&&n.domObserver.suppressSelectionUpdates();return}Gn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),to&&!W&&R.start()!=D.start()&&D.parentOffset==0&&R.depth==D.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==w.endA&&(w.endB-=2,D=f.doc.resolveNoCache(w.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,Au(13,"Enter"))})},20));let te=w.start,Y=w.endA,$=I=>{let N=I||n.state.tr.replace(te,Y,f.doc.slice(w.start-f.from,w.endB-f.from));if(f.sel){let F=hA(n,N.doc,f.sel);F&&!(Gn&&n.composing&&F.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(F.head==te||F.head==N.mapping.map(Y)-1)||yr&&F.empty&&F.head==te)&&N.setSelection(F)}return s&&N.setMeta("composition",s),N.scrollIntoView()},U;if(W){if(R.pos==D.pos){yr&&wa<=11&&R.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>io(n),20));let I=$(n.state.tr.delete(te,Y)),N=p.resolve(w.start).marksAcross(p.resolve(w.endA));N&&I.ensureMarks(N),n.dispatch(I)}else if(w.endA==w.endB&&(U=W$(R.parent.content.cut(R.parentOffset,D.parentOffset),V.parent.content.cut(V.parentOffset,w.endA-V.start())))){let I=$(n.state.tr);U.type=="add"?I.addMark(te,Y,U.mark):I.removeMark(te,Y,U.mark),n.dispatch(I)}else if(R.parent.child(R.index()).isText&&R.index()==D.index()-(D.textOffset?0:1)){let I=R.parent.textBetween(R.parentOffset,D.parentOffset),N=()=>$(n.state.tr.insertText(I,te,Y));n.someProp("handleTextInput",F=>F(n,te,Y,I,N))||n.dispatch(N())}}else n.dispatch($())}function hA(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Gx(n,e.resolve(t.anchor),e.resolve(t.head))}function W$(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,l,h;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],a="add",h=p=>p.mark(l.addToSet(p.marks));else if(i.length==0&&s.length==1)l=s[0],a="remove",h=p=>p.mark(l.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(h(e.child(p)));if(ye.from(f).eq(n))return{mark:l,type:a}}function Q$(n,e,t,r,i){if(t-e<=i.pos-r.pos||Vb(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&t==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(Vb(s,!0,!0));return!a.parent.isTextblock||a.pos>t||Vb(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Vb(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Y$(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,s-Math.min(a,l));r-=a+h-s}if(a<s&&n.size<e.size){let h=r<=s&&r>=a?s-r:0;s-=h,s&&s<e.size&&fA(e.textBetween(s-1,s+1))&&(s+=h?1:-1),l=s+(l-a),a=s}else if(l<s){let h=r<=s&&r>=l?s-r:0;s-=h,s&&s<n.size&&fA(n.textBetween(s-1,s+1))&&(s+=h?1:-1),a=s+(a-l),l=s}return{start:s,endA:a,endB:l}}function fA(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class KR{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new m$,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(yA),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mA(this),pA(this),this.nodeViews=gA(this),this.docView=K3(this.state.doc,dA(this),Fb(this),this.dom,this),this.domObserver=new U$(this,(r,i,s,a)=>K$(this,r,i,s,a)),this.domObserver.start(),g$(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&sv(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(yA),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(UR(this),a=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=gA(this);Z$(v,this.nodeViews)&&(this.nodeViews=v,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&sv(this),this.editable=mA(this),pA(this);let h=Fb(this),f=dA(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",y=s||!this.docView.matchesNode(e.doc,f,h);(y||!e.selection.eq(i.selection))&&(a=!0);let _=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&IH(this);if(a){this.domObserver.stop();let v=y&&(yr||Gn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&X$(i.selection,e.selection);if(y){let w=Gn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=R$(this)),(s||!this.docView.update(e.doc,f,h,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=K3(e.doc,f,h,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&e$(this))?io(this,v):(CR(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():_&&DH(_)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ge){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&z3(this,t.getBoundingClientRect(),e)}else z3(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new jR(e.slice,e.move,i<0?void 0:Ge.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(yr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&NH(this.dom),io(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return BH(this,e)}coordsAtPos(e,t=1){return vR(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return jH(this,t||this.state,e)}pasteHTML(e,t){return ld(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ld(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Kx(this,e)}destroy(){this.docView&&(y$(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_H())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return _$(this,e)}domSelectionRange(){let e=this.domSelection();return e?rr&&this.root.nodeType===11&&kH(this.dom.ownerDocument)==this.dom&&j$(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}KR.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function dA(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Lr.node(0,n.state.doc.content.size,e)]}function pA(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Lr.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function mA(n){return!n.someProp("editable",e=>e(n.state)===!1)}function X$(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function gA(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Z$(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function yA(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var WR=n=>{throw TypeError(n)},QR=(n,e,t)=>e.has(n)||WR("Cannot "+t),Me=(n,e,t)=>(QR(n,e,"read from private field"),t?t.call(n):e.get(n)),In=(n,e,t)=>e.has(n)?WR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Vt=(n,e,t,r)=>(QR(n,e,"write to private field"),e.set(n,t),t),uc,xi,lc,ni,na,Nf,X0,Z0,Dr,ra,cc,J0,hc,Mf,em,Su,Of;function Ha(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const YR={strong:(n,e,t,r)=>{const i=n.marker||t.options.strong||"*",s=t.enter("strong"),a=t.createTracker(r);let l=a.move(i+i);return l+=a.move(t.containerPhrasing(n,{before:l,after:i,...a.current()})),l+=a.move(i+i),s(),l},emphasis:(n,e,t,r)=>{const i=n.marker||t.options.emphasis||"*",s=t.enter("emphasis"),a=t.createTracker(r);let l=a.move(i);return l+=a.move(t.containerPhrasing(n,{before:l,after:i,...a.current()})),l+=a.move(i),s(),l}},Sa=vt({},"editorView"),Lf=vt({},"editorState"),Ub=vt([],"initTimer"),bA=vt({},"editor"),hd=vt([],"inputRules"),_s=vt([],"prosePlugins"),fd=vt([],"remarkPlugins"),ov=vt([],"nodeView"),av=vt([],"markView"),Fu=vt(j_().use(L_).use(V_),"remark"),Wf=vt({handlers:YR},"remarkStringifyOptions"),tm=za("ConfigReady");function J$(n){const e=t=>(t.record(tm),async()=>(await n(t),t.done(tm),()=>{t.clearTimer(tm)}));return Ha(e,{displayName:"Config"}),e}const Vu=za("InitReady");function eG(n){const e=t=>(t.inject(bA,n).inject(_s,[]).inject(fd,[]).inject(hd,[]).inject(ov,[]).inject(av,[]).inject(Wf,{handlers:YR}).inject(Fu,j_().use(L_).use(V_)).inject(Ub,[tm]).record(Vu),async()=>{await t.waitTimers(Ub);const r=t.get(Wf);return t.set(Fu,j_().use(L_).use(V_,r)),t.done(Vu),()=>{t.remove(bA).remove(_s).remove(fd).remove(hd).remove(ov).remove(av).remove(Wf).remove(Fu).remove(Ub).clearTimer(Vu)}});return Ha(e,{displayName:"Init"}),e}const fs=za("SchemaReady"),zb=vt([],"schemaTimer"),Aa=vt({},"schema"),vc=vt([],"nodes"),xc=vt([],"marks");function _A(n){var e;return{...n,parseDOM:(e=n.parseDOM)==null?void 0:e.map(t=>({priority:n.priority,...t}))}}const XR=n=>(n.inject(Aa,{}).inject(vc,[]).inject(xc,[]).inject(zb,[Vu]).record(fs),async()=>{await n.waitTimers(zb);const e=n.get(Fu),r=n.get(fd).reduce((l,h)=>l.use(h.plugin,h.options),e);n.set(Fu,r);const i=Object.fromEntries(n.get(vc).map(([l,h])=>[l,_A(h)])),s=Object.fromEntries(n.get(xc).map(([l,h])=>[l,_A(h)])),a=new xV({nodes:i,marks:s});return n.set(Aa,a),n.done(fs),()=>{n.remove(Aa).remove(vc).remove(xc).remove(zb).clearTimer(fs)}});Ha(XR,{displayName:"Schema"});class ZR{constructor(){In(this,uc),In(this,xi),Vt(this,uc,new G4),Vt(this,xi,null),this.setCtx=e=>{Vt(this,xi,e)},this.chain=()=>{if(Me(this,xi)==null)throw fb();const e=Me(this,xi),t=[],r=this.get,i={run:()=>{const a=Md(...t),l=e.get(Sa);return a(l.state,l.dispatch,l)},inline:a=>(t.push(a),i),pipe:s};function s(a,l){const h=r(a);return t.push(h(l)),i}return i}}get ctx(){return Me(this,xi)}create(e,t){const r=e.create(Me(this,uc).sliceMap);return r.set(t),r}get(e){return Me(this,uc).get(e).get()}remove(e){return Me(this,uc).remove(e)}call(e,t){if(Me(this,xi)==null)throw fb();const i=this.get(e)(t),s=Me(this,xi).get(Sa);return i(s.state,s.dispatch,s)}inline(e){if(Me(this,xi)==null)throw fb();const t=Me(this,xi).get(Sa);return e(t.state,t.dispatch,t)}}uc=new WeakMap;xi=new WeakMap;function tG(n="cmdKey"){return vt(()=>()=>!1,n)}const At=vt(new ZR,"commands"),jb=vt([fs],"commandsTimer"),Qf=za("CommandsReady"),JR=n=>{const e=new ZR;return e.setCtx(n),n.inject(At,e).inject(jb,[fs]).record(Qf),async()=>(await n.waitTimers(jb),n.done(Qf),()=>{n.remove(At).remove(jb).clearTimer(Qf)})};Ha(JR,{displayName:"Commands"});const nm=za("ParserReady"),eI=()=>{throw wx()},rm=vt(eI,"parser"),qb=vt([],"parserTimer"),tI=n=>(n.inject(rm,eI).inject(qb,[fs]).record(nm),async()=>{await n.waitTimers(qb);const e=n.get(Fu),t=n.get(Aa);return n.set(rm,sq.create(t,e)),n.done(nm),()=>{n.remove(rm).remove(qb).clearTimer(nm)}});Ha(tI,{displayName:"Parser"});const Yf=za("SerializerReady"),Hb=vt([],"serializerTimer"),nI=()=>{throw wx()},im=vt(nI,"serializer"),rI=n=>(n.inject(im,nI).inject(Hb,[fs]).record(Yf),async()=>{await n.waitTimers(Hb);const e=n.get(Fu),t=n.get(Aa);return n.set(im,aq.create(t,e)),n.done(Yf),()=>{n.remove(im).remove(Hb).clearTimer(Yf)}});Ha(rI,{displayName:"Serializer"});const sm=vt("","defaultValue"),$b=vt(n=>n,"stateOptions"),Gb=vt([],"editorStateTimer"),om=za("EditorStateReady");function nG(n,e,t){if(typeof n=="string")return e(n);if(n.type==="html")return Lc.fromSchema(t).parse(n.dom);if(n.type==="json")return ui.fromJSON(t,n.value);throw qF(n)}const rG=new Ri("MILKDOWN_STATE_TRACKER");function iG(n){const e=Md(tH,Fx,iR,sR);return n.Backspace=e,n}const iI=n=>(n.inject(sm,"").inject(Lf,{}).inject($b,e=>e).inject(Gb,[nm,Yf,Qf]).record(om),async()=>{await n.waitTimers(Gb);const e=n.get(Aa),t=n.get(rm),r=n.get(hd),i=n.get($b),s=n.get(_s),a=n.get(sm),l=nG(a,t,e),h=[...s,new Ci({key:rG,state:{init:()=>{},apply:(y,_,v,w)=>{n.set(Lf,w)}}}),aH({rules:r}),dR(iG(Jq))];n.set(_s,h);const f=i({schema:e,doc:l,plugins:h}),p=fc.create(f);return n.set(Lf,p),n.done(om),()=>{n.remove(sm).remove(Lf).remove($b).remove(Gb).clearTimer(om)}});Ha(iI,{displayName:"EditorState"});const am=za("EditorViewReady"),Kb=vt([],"editorViewTimer"),um=vt({},"editorViewOptions"),lm=vt(null,"root"),uv=vt(null,"rootDOM"),lv=vt({},"rootAttrs");function sG(n,e){const t=document.createElement("div");t.className="milkdown",n.appendChild(t),e.set(uv,t);const r=e.get(lv);return Object.entries(r).forEach(([i,s])=>t.setAttribute(i,s)),t}function oG(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const aG=new Ri("MILKDOWN_VIEW_CLEAR"),sI=n=>(n.inject(lm,document.body).inject(Sa,{}).inject(um,{}).inject(uv,null).inject(lv,{}).inject(Kb,[om]).record(am),async()=>{await n.wait(Vu);const e=n.get(lm)||document.body,t=typeof e=="string"?document.querySelector(e):e;n.update(_s,h=>[new Ci({key:aG,view:f=>{const p=t?sG(t,n):void 0;return(()=>{if(p&&t){const _=f.dom;t.replaceChild(p,_),p.appendChild(_)}})(),{destroy:()=>{p!=null&&p.parentNode&&(p==null||p.parentNode.replaceChild(f.dom,p)),p==null||p.remove()}}}}),...h]),await n.waitTimers(Kb);const r=n.get(Lf),i=n.get(um),s=Object.fromEntries(n.get(ov)),a=Object.fromEntries(n.get(av)),l=new KR(t,{state:r,nodeViews:s,markViews:a,...i});return oG(l.dom),n.set(Sa,l),n.done(am),()=>{l==null||l.destroy(),n.remove(lm).remove(Sa).remove(um).remove(uv).remove(lv).remove(Kb).clearTimer(am)}});Ha(sI,{displayName:"EditorView"});const uG=class oI{constructor(){In(this,lc),In(this,ni),In(this,na),In(this,Nf),In(this,X0),In(this,Z0),In(this,Dr),In(this,ra),In(this,cc),In(this,J0),In(this,hc),In(this,Mf),In(this,em),In(this,Su),In(this,Of),Vt(this,lc,!1),Vt(this,ni,"Idle"),Vt(this,na,[]),Vt(this,Nf,()=>{}),Vt(this,X0,new G4),Vt(this,Z0,new nV),Vt(this,Dr,new Map),Vt(this,ra,new Map),Vt(this,cc,new tV(Me(this,X0),Me(this,Z0))),Vt(this,J0,()=>{const e=J$(async r=>{await Promise.all(Me(this,na).map(i=>i(r)))}),t=[XR,tI,rI,JR,iI,sI,eG(this),e];Me(this,hc).call(this,t,Me(this,ra))}),Vt(this,hc,(e,t)=>{e.forEach(r=>{const i=Me(this,cc).produce(Me(this,lc)?r.meta:void 0),s=r(i);t.set(r,{ctx:i,handler:s,cleanup:void 0})})}),Vt(this,Mf,(e,t=!1)=>Promise.all([e].flat().map(r=>{const i=Me(this,Dr).get(r),s=i==null?void 0:i.cleanup;return t?Me(this,Dr).delete(r):Me(this,Dr).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s}))),Vt(this,em,async()=>{await Promise.all([...Me(this,ra).entries()].map(([e,{cleanup:t}])=>typeof t=="function"?t():t)),Me(this,ra).clear()}),Vt(this,Su,e=>{Vt(this,ni,e),Me(this,Nf).call(this,e)}),Vt(this,Of,e=>[...e.entries()].map(async([t,r])=>{const{ctx:i,handler:s}=r;if(!s)return;const a=await s();e.set(t,{ctx:i,handler:s,cleanup:a})})),this.enableInspector=(e=!0)=>(Vt(this,lc,e),this),this.onStatusChange=e=>(Vt(this,Nf,e),this),this.config=e=>(Me(this,na).push(e),this),this.removeConfig=e=>(Vt(this,na,Me(this,na).filter(t=>t!==e)),this),this.use=e=>{const t=[e].flat();return t.flat().forEach(r=>{Me(this,Dr).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),Me(this,ni)==="Created"&&Me(this,hc).call(this,t,Me(this,Dr)),this},this.remove=async e=>Me(this,ni)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await Me(this,Mf).call(this,[e].flat(),!0),this),this.create=async()=>Me(this,ni)==="OnCreate"?this:(Me(this,ni)==="Created"&&await this.destroy(),Me(this,Su).call(this,"OnCreate"),Me(this,J0).call(this),Me(this,hc).call(this,[...Me(this,Dr).keys()],Me(this,Dr)),await Promise.all([Me(this,Of).call(this,Me(this,ra)),Me(this,Of).call(this,Me(this,Dr))].flat()),Me(this,Su).call(this,"Created"),this),this.destroy=async(e=!1)=>Me(this,ni)==="Destroyed"||Me(this,ni)==="OnDestroy"?this:Me(this,ni)==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&Vt(this,na,[]),Me(this,Su).call(this,"OnDestroy"),await Me(this,Mf).call(this,[...Me(this,Dr).keys()],e),await Me(this,em).call(this),Me(this,Su).call(this,"Destroyed"),this),this.action=e=>e(Me(this,cc)),this.inspect=()=>Me(this,lc)?[...Me(this,ra).values(),...Me(this,Dr).values()].map(({ctx:e})=>{var t;return(t=e==null?void 0:e.inspector)==null?void 0:t.read()}).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new oI}get ctx(){return Me(this,cc)}get status(){return Me(this,ni)}};lc=new WeakMap;ni=new WeakMap;na=new WeakMap;Nf=new WeakMap;X0=new WeakMap;Z0=new WeakMap;Dr=new WeakMap;ra=new WeakMap;cc=new WeakMap;J0=new WeakMap;hc=new WeakMap;Mf=new WeakMap;em=new WeakMap;Su=new WeakMap;Of=new WeakMap;let lG=uG;function kt(n,e){const t=tG(n),r=i=>async()=>{r.key=t,await i.wait(Qf);const s=e(i);return i.get(At).create(t,s),r.run=a=>i.get(At).call(n,a),()=>{i.get(At).remove(t)}};return r}function Di(n){const e=t=>async()=>{await t.wait(fs);const r=n(t);return t.update(hd,i=>[...i,r]),e.inputRule=r,()=>{t.update(hd,i=>i.filter(s=>s!==r))}};return e}function cG(n,e){const t=r=>async()=>{const i=e(r);return r.update(xc,s=>[...s.filter(a=>a[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(xc,s=>s.filter(([a])=>a!==n))}};return t.type=r=>{const i=r.get(Aa).marks[n];if(!i)throw YF(n);return i},t}function Jx(n,e){const t=r=>async()=>{const i=e(r);return r.update(vc,s=>[...s.filter(a=>a[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(vc,s=>s.filter(([a])=>a!==n))}};return t.type=r=>{const i=r.get(Aa).nodes[n];if(!i)throw QF(n);return i},t}function Yc(n){let e;const t=r=>async()=>(await r.wait(fs),e=n(r),r.update(_s,i=>[...i,e]),()=>{r.update(_s,i=>i.filter(s=>s!==e))});return t.plugin=()=>e,t.key=()=>e.spec.key,t}function hG(n){const e=t=>async()=>{await t.wait(fs);const r=n(t),i=dR(r);return t.update(_s,s=>[...s,i]),e.keymap=r,()=>{t.update(_s,s=>s.filter(a=>a!==i))}};return e}function po(n,e){const t=vt(n,e),r=i=>(i.inject(t),()=>()=>{i.remove(t)});return r.key=t,r}function Ni(n,e){const t=po(e,n),r=Jx(n,s=>s.get(t.key)(s)),i=[t,r];return i.id=r.id,i.node=r,i.type=s=>r.type(s),i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=s=>a=>()=>{const l=a.get(t.key),f=s(l)(a);a.update(vc,p=>[...p.filter(y=>y[0]!==n),[n,f]]),i.schema=f},i}function Og(n,e){const t=po(e,n),r=cG(n,s=>s.get(t.key)(s)),i=[t,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=s=>a=>()=>{const l=a.get(t.key),f=s(l)(a);a.update(xc,p=>[...p.filter(y=>y[0]!==n),[n,f]]),i.schema=f},i}function hi(n,e){const t=Object.fromEntries(Object.entries(e).map(([a,{shortcuts:l}])=>[a,l])),r=po(t,`${n}Keymap`),i=hG(a=>{const l=a.get(r.key),h=Object.entries(e).flatMap(([f,{command:p}])=>[l[f]].flat().map(_=>[_,p(a)]));return Object.fromEntries(h)}),s=[r,i];return s.ctx=r,s.shortcuts=i,s.key=r.key,s.keymap=i.keymap,s}const Mi=(n,e=()=>({}))=>po(e,`${n}Attr`),Lg=(n,e=()=>({}))=>po(e,`${n}Attr`);function Xc(n,e,t){const r=po({},n),i=a=>async()=>{await a.wait(Vu);const h={plugin:e(a),options:a.get(r.key)};return a.update(fd,f=>[...f,h]),()=>{a.update(fd,f=>f.filter(p=>p!==h))}},s=[r,i];return s.id=n,s.plugin=i,s.options=r,s}function fG(n,e){return function(t,r){let{$from:i,$to:s,node:a}=t.selection;if(a&&a.isBlock||i.depth<2||!i.sameParent(s))return!1;let l=i.node(-1);if(l.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let y=ye.empty,_=i.index(-1)?1:i.index(-2)?2:3;for(let V=i.depth-_;V>=i.depth-3;V--)y=ye.from(i.node(V).copy(y));let v=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;y=y.append(ye.from(n.createAndFill()));let w=i.before(i.depth-(_-1)),R=t.tr.replace(w,i.after(-v),new Se(y,4-_,0)),D=-1;R.doc.nodesBetween(w,R.doc.content.size,(V,W)=>{if(D>-1)return!1;V.isTextblock&&V.content.size==0&&(D=W+1)}),D>-1&&R.setSelection(pt.near(R.doc.resolve(D))),r(R.scrollIntoView())}return!0}let h=s.pos==i.end()?l.contentMatchAt(0).defaultType:null,f=t.tr.delete(i.pos,s.pos),p=h?[null,{type:h}]:void 0;return $f(f.doc,i.pos,2,p)?(r&&r(f.split(i.pos,2,p).scrollIntoView()),!0):!1}}function aI(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?dG(e,t,n,s):pG(e,t,s):!0:!1}}function dG(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Kn(s-1,a,s,a,new Se(ye.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new t5(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const l=Ag(r);if(l==null)return!1;i.lift(r,l);let h=i.doc.resolve(i.mapping.map(s,-1)-1);return Cg(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function pG(n,e,t){let r=n.tr,i=t.parent;for(let v=t.end,w=t.endIndex-1,R=t.startIndex;w>R;w--)v-=i.child(w).nodeSize,r.delete(v-1,v+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,h=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(l?0:1),p+1,a.content.append(h?ye.empty:ye.from(i))))return!1;let y=s.pos,_=y+a.nodeSize;return r.step(new Kn(y-(l?1:0),_+(h?1:0),y+1,_-1,new Se((l?ye.empty:ye.from(i.copy(ye.empty))).append(h?ye.empty:ye.from(i.copy(ye.empty))),l?0:1,h?0:1),l?0:1)),e(r.scrollIntoView()),!0}function mG(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let l=s.parent,h=l.child(a-1);if(h.type!=n)return!1;if(t){let f=h.lastChild&&h.lastChild.type==l.type,p=ye.from(f?n.create():null),y=new Se(ye.from(n.create(null,ye.from(l.type.create(null,p)))),f?3:1,0),_=s.start,v=s.end;t(e.tr.step(new Kn(_-(f?3:1),v,_,v,y,1,!0)).scrollIntoView())}return!0}}function gG(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return Qc(n,"definition",function(r){const i=vA(r.identifier);i&&!e.get(i)&&e.set(i,r)}),t;function t(r){const i=vA(r);return e.get(i)}}function vA(n){return String(n||"").toUpperCase()}function yG(){return function(n){const e=gG(n);Qc(n,function(t,r,i){if(t.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[F_,r];if(t.type==="imageReference"||t.type==="linkReference"){const s=e(t.identifier);if(s&&i&&typeof r=="number")return i.children[r]=t.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:t.alt}:{type:"link",url:s.url,title:s.title,children:t.children},[F_,r]}})}}function uI(n,e){var t;if(!(e.childCount>=1&&((t=e.lastChild)==null?void 0:t.type.name)==="hardbreak")){n.next(e.content);return}const i=[];e.content.forEach((s,a,l)=>{l!==e.childCount-1&&i.push(s)}),n.next(ye.fromArray(i))}function he(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const eE=Lg("emphasis");he(eE,{displayName:"Attr<emphasis>",group:"Emphasis"});const Zc=Og("emphasis",n=>({attrs:{marker:{default:n.get(Wf).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(eE.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));he(Zc.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});he(Zc.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const Pg=kt("ToggleEmphasis",n=>()=>zx(Zc.type(n)));he(Pg,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const lI=Di(n=>Ig(/(?:^|[^*])\*([^*]+)\*$/,Zc.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));he(lI,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const cI=Di(n=>Ig(/(?:^|[^_])_([^_]+)_$/,Zc.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));he(cI,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const tE=hi("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(At);return()=>e.call(Pg.key)}}});he(tE.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});he(tE.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const nE=Lg("strong");he(nE,{displayName:"Attr<strong>",group:"Strong"});const Bd=Og("strong",n=>({attrs:{marker:{default:n.get(Wf).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",n.get(nE.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));he(Bd.mark,{displayName:"MarkSchema<strong>",group:"Strong"});he(Bd.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Bg=kt("ToggleStrong",n=>()=>zx(Bd.type(n)));he(Bg,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const hI=Di(n=>Ig(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,Bd.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));he(hI,{displayName:"InputRule<strong>",group:"Strong"});const rE=hi("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(At);return()=>e.call(Bg.key)}}});he(rE.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});he(rE.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const iE=Lg("inlineCode");he(iE,{displayName:"Attr<inlineCode>",group:"InlineCode"});const ya=Og("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(iE.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,t,r)=>{e.openMark(r),e.addText(t.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,t,r)=>{e.withMark(t,"inlineCode",r.text||"")}}}));he(ya.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});he(ya.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const sE=kt("ToggleInlineCode",n=>()=>(e,t)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:s,to:a}=r;return e.doc.rangeHasMark(s,a,ya.type(n))?(t==null||t(i.removeMark(s,a,ya.type(n))),!0):(Object.keys(e.schema.marks).filter(f=>f!==ya.type.name).map(f=>e.schema.marks[f]).forEach(f=>{i.removeMark(s,a,f)}),t==null||t(i.addMark(s,a,ya.type(n).create())),!0)});he(sE,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const fI=Di(n=>Ig(/(?:`)([^`]+)(?:`)$/,ya.type(n)));he(fI,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const oE=hi("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(At);return()=>e.call(sE.key)}}});he(oE.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});he(oE.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const aE=Lg("link");he(aE,{displayName:"Attr<link>",group:"Link"});const Ec=Og("link",n=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get(aE.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,t,r)=>{const i=t.url,s=t.title;e.openMark(r,{href:i,title:s}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));he(Ec.mark,{displayName:"MarkSchema<link>",group:"Link"});const dI=kt("ToggleLink",n=>(e={})=>zx(Ec.type(n),e));he(dI,{displayName:"Command<toggleLinkCommand>",group:"Link"});const pI=kt("UpdateLink",n=>(e={})=>(t,r)=>{if(!r)return!1;let i,s=-1;const{selection:a}=t,{from:l,to:h}=a;if(t.doc.nodesBetween(l,l===h?h+1:h,(w,R)=>{if(Ec.type(n).isInSet(w.marks))return i=w,s=R,!1}),!i)return!1;const f=i.marks.find(({type:w})=>w===Ec.type(n));if(!f)return!1;const p=s,y=s+i.nodeSize,{tr:_}=t,v=Ec.type(n).create({...f.attrs,...e});return v?(r(_.removeMark(p,y,f).addMark(p,y,v).setSelection(new _t(_.selection.$anchor)).scrollIntoView()),!0):!1});he(pI,{displayName:"Command<updateLinkCommand>",group:"Link"});const mI=Jx("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,t)=>{n.injectRoot(e,t)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));he(mI,{displayName:"NodeSchema<doc>",group:"Doc"});function bG(n){return I5(n,e=>{var t;return e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((t=e.value)==null?void 0:t.trim())},(e,t)=>{if(!t.length)return;const r=t[t.length-1];if(!r)return;const i=r.children.indexOf(e);i!==-1&&r.children.splice(i,1)},!0)}const Fg=Xc("remark-preserve-empty-line",()=>()=>bG);he(Fg.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});he(Fg.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const uE=Mi("paragraph");he(uE,{displayName:"Attr<paragraph>",group:"Paragraph"});const sl=Ni("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(uE.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,t,r)=>{e.openNode(r),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,t)=>{var r;const s=(r=n.get(Sa).state)==null?void 0:r.doc.lastChild;e.openNode("paragraph"),(!t.content||t.content.size===0)&&t!==s&&_G(n)?e.addNode("html",void 0,"<br />"):uI(e,t),e.closeNode()}}}));function _G(n){let e=!1;try{n.get(Fg.id),e=!0}catch{e=!1}return e}he(sl.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});he(sl.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const lE=kt("TurnIntoText",n=>()=>ad(sl.type(n)));he(lE,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const cE=hi("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(At);return()=>e.call(lE.key)}}});he(cE.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});he(cE.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const vG=Array(6).fill(0).map((n,e)=>e+1);function xG(n){return n.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const Vg=po(xG,"headingIdGenerator");he(Vg,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const hE=Mi("heading");he(hE,{displayName:"Attr<heading>",group:"Heading"});const ol=Ni("heading",n=>{const e=n.get(Vg.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:vG.map(t=>({tag:`h${t}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw rl(r);return{level:t,id:r.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...n.get(hE.key)(t),id:t.attrs.id||e(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,r,i)=>{const s=r.depth;t.openNode(i,{level:s}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,r)=>{t.openNode("heading",void 0,{depth:r.attrs.level}),uI(t,r),t.closeNode()}}}});he(ol.node,{displayName:"NodeSchema<heading>",group:"Heading"});he(ol.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const gI=Di(n=>hR(/^(?<hashes>#+)\s$/,ol.type(n),e=>{var t,r;const i=((r=(t=e.groups)==null?void 0:t.hashes)==null?void 0:r.length)||0,s=n.get(Sa),{$from:a}=s.state.selection,l=a.node();if(l.type.name==="heading"){let h=Number(l.attrs.level)+Number(i);return h>6&&(h=6),{level:h}}return{level:i}}));he(gI,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const sa=kt("WrapInHeading",n=>e=>(e??(e=1),e<1?ad(sl.type(n)):ad(ol.type(n),{level:e})));he(sa,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const fE=kt("DowngradeHeading",n=>()=>(e,t,r)=>{const{$from:i}=e.selection,s=i.node();if(s.type!==ol.type(n)||!e.selection.empty||i.parentOffset!==0)return!1;const a=s.attrs.level-1;return a?(t==null||t(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:a})),!0):ad(sl.type(n))(e,t,r)});he(fE,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const dE=hi("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(At);return()=>e.call(sa.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(At);return()=>e.call(sa.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(At);return()=>e.call(sa.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(At);return()=>e.call(sa.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(At);return()=>e.call(sa.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(At);return()=>e.call(sa.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(At);return()=>e.call(fE.key)}}});he(dE.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});he(dE.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const pE=Mi("blockquote");he(pE,{displayName:"Attr<blockquote>",group:"Blockquote"});const Fd=Ni("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(pE.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,t,r)=>{e.openNode(r).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));he(Fd.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});he(Fd.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const yI=Di(n=>jx(/^\s*>\s$/,Fd.type(n)));he(yI,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const mE=kt("WrapInBlockquote",n=>()=>Ux(Fd.type(n)));he(mE,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const gE=hi("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(At);return()=>e.call(mE.key)}}});he(gE.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});he(gE.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const yE=Mi("codeBlock",()=>({pre:{},code:{}}));he(yE,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Vd=Ni("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{language:e.dataset.language}}}],toDOM:e=>{const t=n.get(yE.key)(e),r=e.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...t.pre,...i},["code",t.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,t,r)=>{const i=t.lang??"",s=t.value;e.openNode(r,{language:i}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,t)=>{var r;e.addNode("code",void 0,((r=t.content.firstChild)==null?void 0:r.text)||"",{lang:t.attrs.language})}}}));he(Vd.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});he(Vd.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const bI=Di(n=>hR(/^```(?<language>[a-z]*)?[\s\n]$/,Vd.type(n),e=>{var t;return{language:((t=e.groups)==null?void 0:t.language)??""}}));he(bI,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const bE=kt("CreateCodeBlock",n=>(e="")=>ad(Vd.type(n),{language:e}));he(bE,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const EG=kt("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(t,r)=>n>=0?(r==null||r(t.tr.setNodeAttribute(n,"language",e)),!0):!1);he(EG,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const _E=hi("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(At);return()=>e.call(bE.key)}}});he(_E.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});he(_E.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const vE=Mi("image");he(vE,{displayName:"Attr<image>",group:"Image"});const Jc=Ni("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(vE.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,t,r)=>{const i=t.url,s=t.alt,a=t.title;e.addNode(r,{src:i,alt:s,title:a})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));he(Jc.node,{displayName:"NodeSchema<image>",group:"Image"});he(Jc.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const _I=kt("InsertImage",n=>(e={})=>(t,r)=>{if(!r)return!0;const{src:i="",alt:s="",title:a=""}=e,l=Jc.type(n).create({src:i,alt:s,title:a});return l&&r(t.tr.replaceSelectionWith(l).scrollIntoView()),!0});he(_I,{displayName:"Command<insertImageCommand>",group:"Image"});const vI=kt("UpdateImage",n=>(e={})=>(t,r)=>{const i=lH(t.selection,Jc.type(n));if(!i)return!1;const{node:s,pos:a}=i,l={...s.attrs},{src:h,alt:f,title:p}=e;return h!==void 0&&(l.src=h),f!==void 0&&(l.alt=f),p!==void 0&&(l.title=p),r==null||r(t.tr.setNodeMarkup(a,void 0,l).scrollIntoView()),!0});he(vI,{displayName:"Command<updateImageCommand>",group:"Image"});const wG=Di(n=>new Ii(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,t,r,i)=>{const[s,a,l="",h]=t;return s?e.tr.replaceWith(r,i,Jc.type(n).create({src:l,alt:a,title:h})):null}));he(wG,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const Gm=Mi("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));he(Gm,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Uu=Ni("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(Gm.key)(e)," "]:["br",n.get(Gm.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,t,r)=>{var i;e.addNode(r,{isInline:!!((i=t.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));he(Uu.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});he(Uu.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const xE=kt("InsertHardbreak",n=>()=>(e,t)=>{var r;const{selection:i,tr:s}=e;if(!(i instanceof _t))return!1;if(i.empty){const a=i.$from.node();if(a.childCount>0&&((r=a.lastChild)==null?void 0:r.type.name)==="hardbreak")return t==null||t(s.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection(pt.near(s.doc.resolve(i.to))).scrollIntoView()),!0}return t==null||t(s.setMeta("hardbreak",!0).replaceSelectionWith(Uu.type(n).create()).scrollIntoView()),!0});he(xE,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const EE=hi("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(At);return()=>e.call(xE.key)}}});he(EE.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});he(EE.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const wE=Mi("hr");he(wE,{displayName:"Attr<hr>",group:"Hr"});const Ud=Ni("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(wE.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,t,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));he(Ud.node,{displayName:"NodeSchema<hr>",group:"Hr"});he(Ud.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const xI=Di(n=>new Ii(/^(?:---|___\s|\*\*\*\s)$/,(e,t,r,i)=>{const{tr:s}=e;return t[0]&&s.replaceWith(r-1,i,Ud.type(n).create()),s}));he(xI,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const EI=kt("InsertHr",n=>()=>(e,t)=>{if(!t)return!0;const r=sl.node.type(n).create(),{tr:i,selection:s}=e,{from:a}=s,l=Ud.type(n).create();if(!l)return!0;const h=i.replaceSelectionWith(l).insert(a,r),f=pt.findFrom(h.doc.resolve(a),1,!0);return f&&t(h.setSelection(f).scrollIntoView()),!0});he(EI,{displayName:"Command<insertHrCommand>",group:"Hr"});const kE=Mi("bulletList");he(kE,{displayName:"Attr<bulletList>",group:"BulletList"});const eh=Ni("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...n.get(kE.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"false";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread}).next(t.content).closeNode()}}}));he(eh.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});he(eh.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const wI=Di(n=>jx(/^\s*([-+*])\s$/,eh.type(n)));he(wI,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const Ug=kt("WrapInBulletList",n=>()=>Ux(eh.type(n)));he(Ug,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const TE=hi("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(At);return()=>e.call(Ug.key)}}});he(TE.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});he(TE.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const SE=Mi("orderedList");he(SE,{displayName:"Attr<orderedList>",group:"OrderedList"});const th=Ni("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(SE.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));he(th.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});he(th.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const kI=Di(n=>jx(/^\s*(\d+)\.\s$/,th.type(n),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));he(kI,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const zg=kt("WrapInOrderedList",n=>()=>Ux(th.type(n)));he(zg,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const AE=hi("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(At);return()=>e.call(zg.key)}}});he(AE.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});he(AE.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const CE=Mi("listItem");he(CE,{displayName:"Attr<listItem>",group:"ListItem"});const fo=Ni("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw rl(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...n.get(CE.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,t,r)=>{const i=t.label!=null?`${t.label}.`:"",s=t.label!=null?"ordered":"bullet",a=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:a}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread}),e.next(t.content),e.closeNode()}}}));he(fo.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});he(fo.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const RE=kt("SinkListItem",n=>()=>mG(fo.type(n)));he(RE,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const IE=kt("LiftListItem",n=>()=>aI(fo.type(n)));he(IE,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const DE=kt("SplitListItem",n=>()=>fG(fo.type(n)));he(DE,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function kG(n){return(e,t,r)=>{const{selection:i}=e;if(!(i instanceof _t))return!1;const{empty:s,$from:a}=i;if(!s||a.parentOffset!==0)return!1;const l=a.node(-1);return l.type!==fo.type(n)||l.firstChild!==a.node()||a.node(-2).childCount>1?!1:aI(fo.type(n))(e,t,r)}}const NE=kt("LiftFirstListItem",n=>()=>kG(n));he(NE,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const ME=hi("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(At);return()=>e.call(DE.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(At);return()=>e.call(RE.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(At);return()=>e.call(IE.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(At);return()=>e.call(NE.key)}}});he(ME.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});he(ME.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const TI=Jx("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));he(TI,{displayName:"NodeSchema<text>",group:"Text"});const OE=Mi("html");he(OE,{displayName:"Attr<html>",group:"Html"});const LE=Ni("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const t=document.createElement("span"),r={...n.get(OE.key)(e),"data-value":e.attrs.value,"data-type":"html"};return t.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,t,r)=>{e.addNode(r,{value:t.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));he(LE.node,{displayName:"NodeSchema<html>",group:"Html"});he(LE.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const TG=[mI,uE,sl,Vg,hE,ol,Gm,Uu,pE,Fd,yE,Vd,wE,Ud,vE,Jc,kE,eh,SE,th,CE,fo,eE,Zc,nE,Bd,iE,ya,aE,Ec,OE,LE,TI].flat(),SG=[yI,wI,kI,bI,xI,gI].flat(),AG=[lI,cI,fI,hI],CG=kt("IsMarkSelected",()=>n=>e=>{if(!n)return!1;const{doc:t,selection:r}=e;return t.rangeHasMark(r.from,r.to,n)}),RG=kt("IsNoteSelected",()=>n=>e=>n?cH(e,n).hasNode:!1),IG=kt("ClearTextInCurrentBlock",()=>()=>(n,e)=>{let t=n.tr;const{$from:r,$to:i}=t.selection,{pos:s}=r,{pos:a}=i,l=s-r.node().content.size;return l<0?!1:(t=t.deleteRange(l,a),e==null||e(t),!0)}),DG=kt("SetBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const s=e.tr,{from:a,to:l}=s.selection;try{s.setBlockType(a,l,r,i)}catch{return!1}return t==null||t(s),!0}),NG=kt("WrapInBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;let s=e.tr;try{const{$from:a,$to:l}=s.selection,h=a.blockRange(l),f=h&&Lx(h,r,i);if(!f)return!1;s=s.wrap(h,f)}catch{return!1}return t==null||t(s),!0}),MG=kt("AddBlockType",()=>n=>(e,t)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const s=e.tr;try{const a=r instanceof ui?r:r.createAndFill(i);if(!a)return!1;s.replaceSelectionWith(a)}catch{return!1}return t==null||t(s),!0}),OG=kt("SelectTextNearPos",()=>n=>(e,t)=>{const{pos:r}=n??{};if(r==null)return!1;const i=(a,l,h)=>Math.min(Math.max(a,l),h),s=e.tr;try{const a=e.doc.resolve(i(r,0,e.doc.content.size));s.setSelection(_t.near(a))}catch{return!1}return t==null||t(s.scrollIntoView()),!0}),LG=[lE,mE,sa,fE,bE,xE,EI,_I,vI,zg,Ug,RE,DE,IE,NE,Pg,sE,Bg,dI,pI,CG,RG,IG,DG,NG,MG,OG],PG=[gE,_E,EE,dE,ME,AE,TE,cE,tE,oE,rE].flat(),PE=Xc("remarkAddOrderInList",()=>()=>n=>{Qc(n,"list",e=>{if(e.ordered){const t=e.start??1;e.children.forEach((r,i)=>{r.label=i+t})}})});he(PE.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});he(PE.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const BE=Xc("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;Qc(n,"text",(t,r,i)=>{if(!t.value||typeof t.value!="string")return;const s=[];let a=0;e.lastIndex=0;let l=e.exec(t.value);for(;l;){const f=l.index;a!==f&&s.push({type:"text",value:t.value.slice(a,f)}),s.push({type:"break",data:{isInline:!0}}),a=f+l[0].length,l=e.exec(t.value)}if(s.length>0&&i&&typeof r=="number")return a<t.value.length&&s.push({type:"text",value:t.value.slice(a)}),i.children.splice(r,1,...s),r+s.length})});he(BE.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});he(BE.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const FE=Xc("remarkInlineLink",()=>yG);he(FE.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});he(FE.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const BG=n=>!!n.children,FG=n=>n.type==="html";function VG(n,e){return t(n,0,null)[0];function t(r,i,s){if(BG(r)){const a=[];for(let l=0,h=r.children.length;l<h;l++){const f=r.children[l];if(f){const p=t(f,l,r);if(p)for(let y=0,_=p.length;y<_;y++){const v=p[y];v&&a.push(v)}}}r.children=a}return e(r,i,s)}}const VE=Xc("remarkHTMLTransformer",()=>()=>n=>{VG(n,(e,t,r)=>FG(e)?((r==null?void 0:r.type)==="root"&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});he(VE.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});he(VE.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const UE=Xc("remarkMarker",()=>()=>(n,e)=>{const t=r=>e.value.charAt(r.position.start.offset);Qc(n,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=t(r)})});he(UE.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});he(UE.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const SI=Yc(()=>{let n=!1;const e=new Ri("MILKDOWN_INLINE_NODES_CURSOR"),t=new Ci({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,s=i.nodeBefore,a=i.nodeAfter;return!!(s&&a&&s.isInline&&!s.isText&&a.isInline&&!a.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>n?(n=!1,requestAnimationFrame(()=>{if(t.getState(r.state)){const a=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",a))}}),!0):!1,compositionstart:r=>(t.getState(r.state)&&(n=!0),!1),beforeinput:(r,i)=>{if(t.getState(r.state)&&i instanceof InputEvent&&i.data&&!n){const a=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",a)),!0}return!1}},decorations(r){if(t.getState(r)){const a=r.selection.$from.pos,l=document.createElement("span"),h=Lr.widget(a,l,{side:-1}),f=document.createElement("span"),p=Lr.widget(a,f);return setTimeout(()=>{l.contentEditable="true",f.contentEditable="true"}),sn.create(r.doc,[h,p])}return sn.empty}}});return t});he(SI,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const AI=Yc(n=>new Ci({key:new Ri("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,t,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof Mn))return;const{from:h}=s;return r.tr.setNodeMarkup(h,Uu.type(n),void 0,[])}if(s instanceof eo){let h=r.tr;const{from:f,to:p}=s;return r.doc.nodesBetween(f,p,(y,_)=>{y.type===Uu.type(n)&&(h=h.setNodeMarkup(_,Uu.type(n),void 0,[]))}),h}}}));he(AI,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const zE=po(["table","code_block"],"hardbreakFilterNodes");he(zE,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const CI=Yc(n=>{const e=n.get(zE.key);return new Ci({key:new Ri("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,r)=>{const i=t.getMeta("hardbreak"),[s]=t.steps;if(i&&s){const{from:a}=s,l=r.doc.resolve(a);let h=l.depth,f=!0;for(;h>0;)e.includes(l.node(h).type.name)&&(f=!1),h--;return f}return!0}})});he(CI,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const RI=Yc(n=>{const e=new Ri("MILKDOWN_HEADING_ID"),t=r=>{if(r.composing)return;const i=n.get(Vg.key),s=r.state.tr.setMeta("addToHistory",!1);let a=!1;const l={};r.state.doc.descendants((h,f)=>{if(h.type===ol.type(n)){if(h.textContent.trim().length===0)return;const p=h.attrs;let y=i(h);l[y]?(l[y]+=1,y+=`-#${l[y]}`):l[y]=1,p.id!==y&&(a=!0,s.setMeta(e,!0).setNodeMarkup(f,void 0,{...p,id:y}))}}),a&&r.dispatch(s)};return new Ci({key:e,view:r=>(t(r),{update:(i,s)=>{i.state.doc.eq(s.doc)||t(i)}})})});he(RI,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const II=Yc(n=>{const e=t=>{if(t.composing||!t.editable)return;const r=th.type(n),i=eh.type(n),s=fo.type(n),a=t.state,l=(p,y)=>{let _=!1;const v=`${y+1}.`;return p.label!==v&&(p.label=v,_=!0),_};let h=a.tr,f=!1;a.doc.descendants((p,y,_,v)=>{if(p.type===i){const w=p.maybeChild(0);(w==null?void 0:w.type)===s&&w.attrs.listType==="ordered"&&(f=!0,h.setNodeMarkup(y,r,{spread:"true"}),p.descendants((R,D,V,W)=>{if(R.type===s){const G={...R.attrs};l(G,W)&&(h=h.setNodeMarkup(D,void 0,G))}return!1}))}else if(p.type===s&&(_==null?void 0:_.type)===r){const w={...p.attrs};let R=!1;w.listType!=="ordered"&&(w.listType="ordered",R=!0),(_==null?void 0:_.maybeChild(0))&&(R=l(w,v)),R&&(h=h.setNodeMarkup(y,void 0,w),f=!0)}}),f&&t.dispatch(h.setMeta("addToHistory",!1))};return new Ci({key:new Ri("MILKDOWN_KEEP_LIST_ORDER"),view:t=>(e(t),{update:r=>{e(r)}})})});he(II,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const UG=[AI,zE,CI,SI,PE,FE,BE,VE,UE,Fg,RI,II].flat(),zG=[TG,SG,AG,LG,PG,UG].flat();var Km=200,Tn=function(){};Tn.prototype.append=function(e){return e.length?(e=Tn.from(e),!this.length&&e||e.length<Km&&this.leafAppend(e)||this.length<Km&&e.leafPrepend(this)||this.appendInner(e)):this};Tn.prototype.prepend=function(e){return e.length?Tn.from(e).append(this):this};Tn.prototype.appendInner=function(e){return new jG(this,e)};Tn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Tn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};Tn.from=function(e){return e instanceof Tn?e:e&&e.length?new DI(e):Tn.empty};var DI=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,l){for(var h=s;h<a;h++)if(i(this.values[h],l+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,l){for(var h=s-1;h>=a;h--)if(i(this.values[h],l+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Km)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Km)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Tn);Tn.empty=new DI([]);var jG=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),a)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,a+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Tn);const qG=500;class wi{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,l,h,f=[],p=[];return this.items.forEach((y,_)=>{if(!y.step){i||(i=this.remapping(r,_+1),s=i.maps.length),s--,p.push(y);return}if(i){p.push(new es(y.map));let v=y.step.map(i.slice(s)),w;v&&a.maybeStep(v).doc&&(w=a.mapping.maps[a.mapping.maps.length-1],f.push(new es(w,void 0,void 0,f.length+p.length))),s--,w&&i.appendMap(w,s)}else a.maybeStep(y.step);if(y.selection)return l=i?y.selection.map(i.slice(s)):y.selection,h=new wi(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:a,selection:l}}addTransform(e,t,r,i){let s=[],a=this.eventCount,l=this.items,h=!i&&l.length?l.get(l.length-1):null;for(let p=0;p<e.steps.length;p++){let y=e.steps[p].invert(e.docs[p]),_=new es(e.mapping.maps[p],y,t),v;(v=h&&h.merge(_))&&(_=v,p?s.pop():l=l.slice(0,l.length-1)),s.push(_),t&&(a++,t=void 0),i||(h=_)}let f=a-r.depth;return f>$G&&(l=HG(l,f),a-=f),new wi(l.append(s),a)}remapping(e,t){let r=new sd;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new wi(this.items.append(e.map(t=>new es(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,l=this.eventCount;this.items.forEach(_=>{_.selection&&l--},i);let h=t;this.items.forEach(_=>{let v=s.getMirror(--h);if(v==null)return;a=Math.min(a,v);let w=s.maps[v];if(_.step){let R=e.steps[v].invert(e.docs[v]),D=_.selection&&_.selection.map(s.slice(h+1,v));D&&l++,r.push(new es(w,R,D))}else r.push(new es(w))},i);let f=[];for(let _=t;_<a;_++)f.push(new es(s.maps[_]));let p=this.items.slice(0,i).append(f).append(r),y=new wi(p,l);return y.emptyItemCount()>qG&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,l)=>{if(l>=e)i.push(a),a.selection&&s++;else if(a.step){let h=a.step.map(t.slice(r)),f=h&&h.getMap();if(r--,f&&t.appendMap(f,r),h){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let y=new es(f.invert(),h,p),_,v=i.length-1;(_=i.length&&i[v].merge(y))?i[v]=_:i.push(y)}}else a.map&&r--},this.items.length,0),new wi(Tn.from(i.reverse()),s)}}wi.empty=new wi(Tn.empty,0);function HG(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class es{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new es(t.getMap().invert(),t,this.selection)}}}class oa{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const $G=20;function GG(n,e,t,r){let i=t.getMeta(zu),s;if(i)return i.historyState;t.getMeta(QG)&&(n=new oa(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(zu))return a.getMeta(zu).redo?new oa(n.done.addTransform(t,void 0,r,cm(e)),n.undone,xA(t.mapping.maps),n.prevTime,n.prevComposition):new oa(n.done,n.undone.addTransform(t,void 0,r,cm(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),h=n.prevTime==0||!a&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-r.newGroupDelay||!KG(t,n.prevRanges)),f=a?Wb(n.prevRanges,t.mapping):xA(t.mapping.maps);return new oa(n.done.addTransform(t,h?e.selection.getBookmark():void 0,r,cm(e)),wi.empty,f,t.time,l??n.prevComposition)}else return(s=t.getMeta("rebased"))?new oa(n.done.rebased(t,s),n.undone.rebased(t,s),Wb(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new oa(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Wb(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function KG(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function xA(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function Wb(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function WG(n,e,t){let r=cm(e),i=zu.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),l=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),h=new oa(t?l:s.remaining,t?s.remaining:l,null,0,-1);return s.transform.setSelection(a).setMeta(zu,{redo:t,historyState:h})}let Qb=!1,EA=null;function cm(n){let e=n.plugins;if(EA!=e){Qb=!1,EA=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Qb=!0;break}}return Qb}const zu=new Ri("history"),QG=new Ri("closeHistory");function YG(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ci({key:zu,state:{init(){return new oa(wi.empty,wi.empty,null,0,-1)},apply(e,t,r){return GG(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?MI:r=="historyRedo"?OI:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function NI(n,e){return(t,r)=>{let i=zu.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=WG(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const MI=NI(!1,!0),OI=NI(!0,!0);function nh(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const jg=kt("Undo",()=>()=>MI);nh(jg,{displayName:"Command<undo>"});const qg=kt("Redo",()=>()=>OI);nh(qg,{displayName:"Command<redo>"});const jE=po({},"historyProviderConfig");nh(jE,{displayName:"Ctx<historyProviderConfig>"});const LI=Yc(n=>YG(n.get(jE.key)));nh(LI,{displayName:"Ctx<historyProviderPlugin>"});const qE=hi("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(At);return()=>e.call(jg.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(At);return()=>e.call(qg.key)}}});nh(qE.ctx,{displayName:"KeymapCtx<history>"});nh(qE.shortcuts,{displayName:"Keymap<history>"});const XG=[jE,LI,qE,jg,qg].flat();var Yb,wA;function ZG(){if(wA)return Yb;wA=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,h=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,f=typeof self=="object"&&self&&self.Object===Object&&self,p=h||f||Function("return this")(),y=Object.prototype,_=y.toString,v=Math.max,w=Math.min,R=function(){return p.Date.now()};function D(Y,$,U){var I,N,F,j,H,P,xe=0,Ee=!1,pe=!1,we=!0;if(typeof Y!="function")throw new TypeError(n);$=te($)||0,V(U)&&(Ee=!!U.leading,pe="maxWait"in U,F=pe?v(te(U.maxWait)||0,$):F,we="trailing"in U?!!U.trailing:we);function ke(Ve){var Ne=I,Je=N;return I=N=void 0,xe=Ve,j=Y.apply(Je,Ne),j}function Ke(Ve){return xe=Ve,H=setTimeout(be,$),Ee?ke(Ve):j}function C(Ve){var Ne=Ve-P,Je=Ve-xe,Xe=$-Ne;return pe?w(Xe,F-Je):Xe}function ue(Ve){var Ne=Ve-P,Je=Ve-xe;return P===void 0||Ne>=$||Ne<0||pe&&Je>=F}function be(){var Ve=R();if(ue(Ve))return B(Ve);H=setTimeout(be,C(Ve))}function B(Ve){return H=void 0,we&&I?ke(Ve):(I=N=void 0,j)}function _e(){H!==void 0&&clearTimeout(H),xe=0,I=P=N=H=void 0}function Pe(){return H===void 0?j:B(R())}function Ae(){var Ve=R(),Ne=ue(Ve);if(I=arguments,N=this,P=Ve,Ne){if(H===void 0)return Ke(P);if(pe)return H=setTimeout(be,$),ke(P)}return H===void 0&&(H=setTimeout(be,$)),j}return Ae.cancel=_e,Ae.flush=Pe,Ae}function V(Y){var $=typeof Y;return!!Y&&($=="object"||$=="function")}function W(Y){return!!Y&&typeof Y=="object"}function G(Y){return typeof Y=="symbol"||W(Y)&&_.call(Y)==t}function te(Y){if(typeof Y=="number")return Y;if(G(Y))return e;if(V(Y)){var $=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=V($)?$+"":$}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(r,"");var U=s.test(Y);return U||a.test(Y)?l(Y.slice(2),U?2:8):i.test(Y)?e:+Y}return Yb=D,Yb}var JG=ZG();const eK=yd(JG);class PI{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const cv=vt(new PI,"listener"),tK=new Ri("MILKDOWN_LISTENER"),BI=n=>(n.inject(cv,new PI),async()=>{await n.wait(Vu);const e=n.get(cv),{listeners:t}=e;t.beforeMount.forEach(h=>h(n)),await n.wait(Yf);const r=n.get(im);let i=null,s=null,a=null;const l=new Ci({key:tK,view:()=>({destroy:()=>{t.destroy.forEach(h=>h(n))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(h=>h(n)),!1),blur:()=>(t.blur.forEach(h=>h(n)),!1)}},state:{init:(h,f)=>{i=f.doc,s=r(f.doc)},apply:h=>{const f=h.selection;return(!a&&f||a&&!f.eq(a))&&(t.selectionUpdated.forEach(y=>{y(n,f,a)}),a=f),!h.docChanged||h.getMeta("addToHistory")===!1?void 0:eK(()=>{const{doc:y}=h;if(t.updated.length>0&&i&&!i.eq(y)&&t.updated.forEach(_=>{_(n,y,i)}),t.markdownUpdated.length>0&&i&&!i.eq(y)){const _=r(y);t.markdownUpdated.forEach(v=>{v(n,_,s)}),s=_}i=y},200)()}}});n.update(_s,h=>h.concat(l)),await n.wait(am),t.mounted.forEach(h=>h(n))});BI.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};function FI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=FI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function nK(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=FI(n))&&(r&&(r+=" "),r+=e);return r}function rK(n){n.update(um,e=>{const t=e.attributes;return{...e,attributes:r=>{const i=typeof t=="function"?t(r):t;return{...i,class:nK("prose dark:prose-invert",(i==null?void 0:i.class)||"","milkdown-theme-nord")}}}})}function iK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M7.793 2.232a.75.75 0 0 1-.025 1.06L3.622 7.25h10.003a5.375 5.375 0 0 1 0 10.75H10.75a.75.75 0 0 1 0-1.5h2.875a3.875 3.875 0 0 0 0-7.75H3.622l4.146 3.957a.75.75 0 0 1-1.036 1.085l-5.5-5.25a.75.75 0 0 1 0-1.085l5.5-5.25a.75.75 0 0 1 1.06.025Z",clipRule:"evenodd"}))}const sK=Q.forwardRef(iK);function oK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M12.207 2.232a.75.75 0 0 0 .025 1.06l4.146 3.958H6.375a5.375 5.375 0 0 0 0 10.75H9.25a.75.75 0 0 0 0-1.5H6.375a3.875 3.875 0 0 1 0-7.75h10.003l-4.146 3.957a.75.75 0 0 0 1.036 1.085l5.5-5.25a.75.75 0 0 0 0-1.085l-5.5-5.25a.75.75 0 0 0-1.06.025Z",clipRule:"evenodd"}))}const aK=Q.forwardRef(oK);function uK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M4 3a1 1 0 0 1 1-1h6a4.5 4.5 0 0 1 3.274 7.587A4.75 4.75 0 0 1 11.25 18H5a1 1 0 0 1-1-1V3Zm2.5 5.5v-4H11a2 2 0 1 1 0 4H6.5Zm0 2.5v4.5h4.75a2.25 2.25 0 0 0 0-4.5H6.5Z",clipRule:"evenodd"}))}const lK=Q.forwardRef(uK);function cK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M8 2.75A.75.75 0 0 1 8.75 2h7.5a.75.75 0 0 1 0 1.5h-3.215l-4.483 13h2.698a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1 0-1.5h3.215l4.483-13H8.75A.75.75 0 0 1 8 2.75Z",clipRule:"evenodd"}))}const hK=Q.forwardRef(cK);function fK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M6 4.75A.75.75 0 0 1 6.75 4h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.75ZM6 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 10Zm0 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM1.99 4.75a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 15.25a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1v-.01ZM1.99 10a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v.01a1 1 0 0 1-1 1h-.01a1 1 0 0 1-1-1V10Z",clipRule:"evenodd"}))}const dK=Q.forwardRef(fK);function pK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{d:"M3 1.25a.75.75 0 0 0 0 1.5h.25v2.5a.75.75 0 0 0 1.5 0V2A.75.75 0 0 0 4 1.25H3ZM2.97 8.654a3.5 3.5 0 0 1 1.524-.12.034.034 0 0 1-.012.012L2.415 9.579A.75.75 0 0 0 2 10.25v1c0 .414.336.75.75.75h2.5a.75.75 0 0 0 0-1.5H3.927l1.225-.613c.52-.26.848-.79.848-1.371 0-.647-.429-1.327-1.193-1.451a5.03 5.03 0 0 0-2.277.155.75.75 0 0 0 .44 1.434ZM7.75 3a.75.75 0 0 0 0 1.5h9.5a.75.75 0 0 0 0-1.5h-9.5ZM7.75 9.25a.75.75 0 0 0 0 1.5h9.5a.75.75 0 0 0 0-1.5h-9.5ZM7.75 15.5a.75.75 0 0 0 0 1.5h9.5a.75.75 0 0 0 0-1.5h-9.5ZM2.625 13.875a.75.75 0 0 0 0 1.5h1.5a.125.125 0 0 1 0 .25H3.5a.75.75 0 0 0 0 1.5h.625a.125.125 0 0 1 0 .25h-1.5a.75.75 0 0 0 0 1.5h1.5a1.625 1.625 0 0 0 1.37-2.5 1.625 1.625 0 0 0-1.37-2.5h-1.5Z"}))}const mK=Q.forwardRef(pK),gK=({value:n,onChange:e})=>{UF(i=>lG.make().config(s=>{s.set(lm,i),s.set(sm,n),s.get(cv).markdownUpdated((a,l)=>{e(l)})}).use(zG).use(XG).use(BI).config(rK),[]);const[,t]=zF(),r=i=>{const s=t();s&&s.action(a=>{a.get(At).call(i.key)})};return z.jsxs("div",{className:"flex flex-col flex-1 mt-4 min-h-0",children:[z.jsxs("div",{className:"flex gap-2 mb-2",children:[z.jsx("button",{type:"button",onClick:()=>r(Bg),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(lK,{className:"w-5 h-5"})}),z.jsx("button",{type:"button",onClick:()=>r(Pg),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(hK,{className:"w-5 h-5"})}),z.jsx("button",{type:"button",onClick:()=>r(zg),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(mK,{className:"w-5 h-5"})}),z.jsx("button",{type:"button",onClick:()=>r(Ug),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(dK,{className:"w-5 h-5"})}),z.jsx("button",{type:"button",onClick:()=>r(jg),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(sK,{className:"w-5 h-5"})}),z.jsx("button",{type:"button",onClick:()=>r(qg),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:z.jsx(aK,{className:"w-5 h-5"})})]}),z.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-md p-2 flex-1 overflow-y-auto min-h-0",children:z.jsx(FF,{})})]})},yK=({value:n,onChange:e})=>z.jsx(VF,{children:z.jsx(gK,{value:n,onChange:e})}),VI=({name:n,setName:e,customDescription:t,setCustomDescription:r,selectedTags:i,setSelectedTags:s,children:a})=>z.jsxs("div",{className:"w-full sm:w-4/7 flex flex-col px-6 h-full",children:[z.jsx("input",{type:"text",placeholder:" ",value:n,onChange:l=>e(l.target.value),className:"w-full p-2 mt-4 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-neonBlue",required:!0}),z.jsx(yK,{value:t,onChange:r}),z.jsxs("div",{className:"mt-auto flex flex-col",children:[z.jsx(PF,{selectedTags:i,setSelectedTags:s}),a]})]});function bK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M9 1.5H5.625c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5Zm6.61 10.936a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 14.47a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}),Q.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const _K=Q.forwardRef(bK);function vK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z",clipRule:"evenodd"}))}const xK=Q.forwardRef(vK);function EK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const UI=Q.forwardRef(EK);function wK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const HE=Q.forwardRef(wK);function kK({title:n,titleId:e,...t},r){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?Q.createElement("title",{id:e},n):null,Q.createElement("path",{d:"M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"}))}const TK=Q.forwardRef(kK),zI=({draft:n,setDraft:e})=>{const t=n?"":"translate-x-8";return z.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[z.jsx("input",{type:"checkbox",className:"sr-only",checked:!n,onChange:()=>e(!n)}),z.jsxs("div",{className:"relative w-16 h-8 bg-gray-300 dark:bg-gray-600 rounded-full transition-colors",children:[z.jsx(UI,{className:"absolute left-1 top-1 w-5 h-5 text-gray-700 dark:text-gray-200"}),z.jsx(_K,{className:"absolute right-1 top-1 w-5 h-5 text-green-700"}),z.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${t}`})]}),z.jsx("span",{className:"text-sm",children:n?" (  )":" ( )"})]})},$E=({open:n,message:e="   ",onClose:t,onSuccess:r})=>{if(!n)return null;const i=async()=>{const s=new Ei;await P4(nd,s),t(),r&&r()};return z.jsx("div",{role:"button",tabIndex:-1,className:"fixed inset-0 z-[60] p-5  bg-gray-500 dark:bg-black flex items-center justify-center",onClick:t,children:z.jsxs("div",{role:"dialog",onClick:s=>s.stopPropagation(),className:"relative bg-white dark:bg-gray-900 rounded-2xl w-full max-w-sm p-6 flex flex-col items-center gap-4",children:[z.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-300 hover:text-white cursor-pointer",children:z.jsx(nl,{className:"w-5 h-5"})}),z.jsx("p",{children:e}),z.jsx("button",{onClick:i,className:"px-4 py-2 bg-neonBlue text-darkBg font-semibold rounded hover:bg-opacity-80 transition cursor-pointer",children:"  Google"})]})})},SK=()=>{const[n,e]=Q.useState(!1),[t,r]=Q.useState(!1),[i,s]=Q.useState(""),[a,l]=Q.useState(""),[h,f]=Q.useState([]),[p,y]=Q.useState(""),[_,v]=Q.useState(""),[w,R]=Q.useState(!0),D=tl(),V=Q.useRef(null),W=async G=>{if(G.preventDefault(),!D)return;const te={name:i,customDescription:a,tags:h,imageURL:p,imageURL2:_,authorUid:D.uid,likedBy:[],createdAt:new Date().toISOString(),...w?{draft:!0}:{}};await q7(V4,te),e(!1),s(""),l(""),f([]),y(""),v(""),R(!0)};return Q.useEffect(()=>{const G=Y=>{V.current&&!V.current.contains(Y.target)&&e(!1)},te=Y=>{Y.key==="Escape"&&e(!1)};return n&&(document.addEventListener("mousedown",G),document.addEventListener("keydown",te)),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",te)}},[n]),t?z.jsx($E,{open:t,onClose:()=>r(!1),onSuccess:()=>e(!0),message:"    "}):n?z.jsx("div",{role:"button",tabIndex:-1,className:"fixed inset-0 z-50 p-5  bg-gray-500 dark:bg-black flex items-center justify-center",onClick:()=>e(!1),children:z.jsxs("div",{role:"dialog",onClick:G=>G.stopPropagation(),className:"relative bg-white dark:bg-gray-900 rounded-2xl w-full max-w-7xl flex flex-col sm:flex-row shadow-lg overflow-hidden h-full",children:[z.jsxs("form",{ref:V,onSubmit:W,className:"flex flex-col sm:flex-row w-full h-full",children:[z.jsx(Mm,{imageURL:p,setImageURL:y,ownerUid:(D==null?void 0:D.uid)||""}),z.jsx(VI,{name:i,setName:s,customDescription:a,setCustomDescription:l,selectedTags:h,setSelectedTags:f,children:z.jsxs("div",{className:"flex items-center gap-4 py-4",children:[z.jsx(zI,{draft:w,setDraft:R}),z.jsxs("button",{type:"submit",disabled:!D,className:"flex-1 flex items-center justify-center gap-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-500 transition cursor-pointer",children:[z.jsx(CF,{className:"w-5 h-5"}),""]})]})}),z.jsx(Mm,{imageURL:_,setImageURL:v,ownerUid:(D==null?void 0:D.uid)||"",placeholder:"/eotv-enemy-location-placeholder.png"})]}),z.jsx("button",{type:"button",onClick:()=>e(!1),className:"absolute top-2 right-2 text-gray-300 hover:text-white cursor-pointer",children:z.jsx(nl,{className:"w-6 h-6"})})]})}):z.jsxs("div",{role:"button",tabIndex:0,className:"group relative flex flex-col items-center justify-center bg-white text-gray-900 dark:bg-gray-800 dark:text-white p-4 rounded-xl shadow-lg cursor-pointer w-full sm:w-40 sm:h-56 aspect-[2/3] hover:scale-110 transition-all duration-300 ease-in-out",onClick:()=>{D?(R(!0),e(!0)):r(!0)},onKeyDown:G=>{G.key==="Enter"&&(D?(R(!0),e(!0)):r(!0))},children:[z.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-neonBlue rounded-full transform transition-transform duration-300 group-hover:rotate-90",children:z.jsx("span",{className:"text-3xl font-bold text-darkBg",children:"+"})}),z.jsx("p",{className:"mt-2 text-lg",children:""}),!D&&z.jsx("span",{className:"text-xs text-gray-400",children:" "})]})},AK=({index:n,enemy:e,author:t,onClick:r})=>{var y;const i=Q.useRef(null),s=tl(),a=Ex(),[l,h]=Q.useState(!1),f=!!s&&((y=e.likedBy)==null?void 0:y.includes(s.uid)),p=async _=>{if(_.stopPropagation(),!s||!e.id){h(!0);return}const v=lo(Si,"eotv-enemies",e.id);await nx(v,{likedBy:f?P6(s.uid):L6(s.uid)})};return z.jsxs(z.Fragment,{children:[l&&z.jsx($E,{open:l,onClose:()=>h(!1),message:"   "}),z.jsxs("div",{ref:i,className:"bg-white text-gray-900 dark:bg-gray-800 dark:text-white shadow-lg cursor-pointer  overflow-hidden relative w-full sm:w-40 sm:h-56 aspect-[2/3] hover:scale-110 flex flex-col rounded-xl transition-all duration-300 ease-in-out",onClick:()=>r(n),children:[e.draft&&z.jsx(UI,{className:"w-5 h-5 absolute top-2 left-2 text-gray-400",title:""}),z.jsx("img",{src:e.imageURL||"/eotv-enemy-placeholder.png",alt:e.name,className:"w-full h-1/2 sm:h-32 object-cover"}),z.jsx("button",{onClick:p,title:f?"":"",className:"absolute top-2 right-2 text-blue-300 hover:scale-110 transition",children:f?z.jsx(HE,{className:"w-5 h-5"}):z.jsx(xx,{className:"w-5 h-5"})}),z.jsxs("div",{className:"p-2 flex flex-col",children:[z.jsx("p",{className:"text-sm text-center font-bold",children:e.name}),z.jsx("div",{className:"absolute bottom-4 left-4 flex flex-col items-end gap-2",children:z.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.filter(_=>a.includes(_)).map((_,v)=>z.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs drop-shadow-2xl",children:_},v))})}),z.jsx("div",{className:"absolute items-center gap-2 mt-1 right-4 bottom-4",children:z.jsx("img",{src:t==null?void 0:t.photoURL,alt:"Avatar",className:"w-6 h-6 rounded-full",title:(t==null?void 0:t.displayName)||"Unknown"})})]}),e.imageURL2&&z.jsx("img",{src:e.imageURL2,alt:"Extra",className:"hidden"})]},e.id)]})},CK=({enemies:n,users:e,onSelect:t})=>z.jsxs("div",{className:"grid sm:flex sm:flex-wrap grid-cols-2 gap-4 justify-center relative",children:[z.jsx(SK,{}),n.map((r,i)=>z.jsx(AK,{index:i,enemy:r,author:e[r.authorUid],onClick:()=>t(i)},r.id))]}),kA={};function RK(n){let e=kA[n];if(e)return e;e=kA[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Uc(n,e){typeof e!="string"&&(e=Uc.defaultChars);const t=RK(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,a=r.length;s<a;s+=3){const l=parseInt(r.slice(s+1,s+3),16);if(l<128){i+=t[l];continue}if((l&224)===192&&s+3<a){const h=parseInt(r.slice(s+4,s+6),16);if((h&192)===128){const f=l<<6&1984|h&63;f<128?i+="":i+=String.fromCharCode(f),s+=3;continue}}if((l&240)===224&&s+6<a){const h=parseInt(r.slice(s+4,s+6),16),f=parseInt(r.slice(s+7,s+9),16);if((h&192)===128&&(f&192)===128){const p=l<<12&61440|h<<6&4032|f&63;p<2048||p>=55296&&p<=57343?i+="":i+=String.fromCharCode(p),s+=6;continue}}if((l&248)===240&&s+9<a){const h=parseInt(r.slice(s+4,s+6),16),f=parseInt(r.slice(s+7,s+9),16),p=parseInt(r.slice(s+10,s+12),16);if((h&192)===128&&(f&192)===128&&(p&192)===128){let y=l<<18&1835008|h<<12&258048|f<<6&4032|p&63;y<65536||y>1114111?i+="":(y-=65536,i+=String.fromCharCode(55296+(y>>10),56320+(y&1023))),s+=9;continue}}i+=""}return i})}Uc.defaultChars=";/?:@&=+$,#";Uc.componentChars="";const TA={};function IK(n){let e=TA[n];if(e)return e;e=TA[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function zd(n,e,t){typeof e!="string"&&(t=e,e=zd.defaultChars),typeof t>"u"&&(t=!0);const r=IK(e);let i="";for(let s=0,a=n.length;s<a;s++){const l=n.charCodeAt(s);if(t&&l===37&&s+2<a&&/^[0-9a-f]{2}$/i.test(n.slice(s+1,s+3))){i+=n.slice(s,s+3),s+=2;continue}if(l<128){i+=r[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&s+1<a){const h=n.charCodeAt(s+1);if(h>=56320&&h<=57343){i+=encodeURIComponent(n[s]+n[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[s])}return i}zd.defaultChars=";/?:@&=+$,-_.!~*'()#";zd.componentChars="-_.!~*'()";function GE(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function Wm(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const DK=/^([a-z0-9.+-]+:)/i,NK=/:[0-9]*$/,MK=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,OK=["<",">",'"',"`"," ","\r",`
`,"	"],LK=["{","}","|","\\","^","`"].concat(OK),PK=["'"].concat(LK),SA=["%","/","?",";","#"].concat(PK),AA=["/","?","#"],BK=255,CA=/^[+a-z0-9A-Z_-]{0,63}$/,FK=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,RA={javascript:!0,"javascript:":!0},IA={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function KE(n,e){if(n&&n instanceof Wm)return n;const t=new Wm;return t.parse(n,e),t}Wm.prototype.parse=function(n,e){let t,r,i,s=n;if(s=s.trim(),!e&&n.split("#").length===1){const f=MK.exec(s);if(f)return this.pathname=f[1],f[2]&&(this.search=f[2]),this}let a=DK.exec(s);if(a&&(a=a[0],t=a.toLowerCase(),this.protocol=a,s=s.substr(a.length)),(e||a||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(a&&RA[a])&&(s=s.substr(2),this.slashes=!0)),!RA[a]&&(i||a&&!IA[a])){let f=-1;for(let w=0;w<AA.length;w++)r=s.indexOf(AA[w]),r!==-1&&(f===-1||r<f)&&(f=r);let p,y;f===-1?y=s.lastIndexOf("@"):y=s.lastIndexOf("@",f),y!==-1&&(p=s.slice(0,y),s=s.slice(y+1),this.auth=p),f=-1;for(let w=0;w<SA.length;w++)r=s.indexOf(SA[w]),r!==-1&&(f===-1||r<f)&&(f=r);f===-1&&(f=s.length),s[f-1]===":"&&f--;const _=s.slice(0,f);s=s.slice(f),this.parseHost(_),this.hostname=this.hostname||"";const v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v){const w=this.hostname.split(/\./);for(let R=0,D=w.length;R<D;R++){const V=w[R];if(V&&!V.match(CA)){let W="";for(let G=0,te=V.length;G<te;G++)V.charCodeAt(G)>127?W+="x":W+=V[G];if(!W.match(CA)){const G=w.slice(0,R),te=w.slice(R+1),Y=V.match(FK);Y&&(G.push(Y[1]),te.unshift(Y[2])),te.length&&(s=te.join(".")+s),this.hostname=G.join(".");break}}}}this.hostname.length>BK&&(this.hostname=""),v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=s.indexOf("#");l!==-1&&(this.hash=s.substr(l),s=s.slice(0,l));const h=s.indexOf("?");return h!==-1&&(this.search=s.substr(h),s=s.slice(0,h)),s&&(this.pathname=s),IA[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Wm.prototype.parseHost=function(n){let e=NK.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const VK=Object.freeze(Object.defineProperty({__proto__:null,decode:Uc,encode:zd,format:GE,parse:KE},Symbol.toStringTag,{value:"Module"})),jI=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qI=/[\0-\x1F\x7F-\x9F]/,UK=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,WE=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,HI=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,$I=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,zK=Object.freeze(Object.defineProperty({__proto__:null,Any:jI,Cc:qI,Cf:UK,P:WE,S:HI,Z:$I},Symbol.toStringTag,{value:"Module"})),jK=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),qK=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var Xb;const HK=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),$K=(Xb=String.fromCodePoint)!==null&&Xb!==void 0?Xb:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function GK(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=HK.get(n))!==null&&e!==void 0?e:n}var kn;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(kn||(kn={}));const KK=32;var ba;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(ba||(ba={}));function hv(n){return n>=kn.ZERO&&n<=kn.NINE}function WK(n){return n>=kn.UPPER_A&&n<=kn.UPPER_F||n>=kn.LOWER_A&&n<=kn.LOWER_F}function QK(n){return n>=kn.UPPER_A&&n<=kn.UPPER_Z||n>=kn.LOWER_A&&n<=kn.LOWER_Z||hv(n)}function YK(n){return n===kn.EQUALS||QK(n)}var En;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(En||(En={}));var da;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(da||(da={}));class XK{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=En.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=da.Strict}startEntity(e){this.decodeMode=e,this.state=En.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case En.EntityStart:return e.charCodeAt(t)===kn.NUM?(this.state=En.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=En.NamedEntity,this.stateNamedEntity(e,t));case En.NumericStart:return this.stateNumericStart(e,t);case En.NumericDecimal:return this.stateNumericDecimal(e,t);case En.NumericHex:return this.stateNumericHex(e,t);case En.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|KK)===kn.LOWER_X?(this.state=En.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=En.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const s=r-t;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(t,s),i),this.consumed+=s}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(hv(i)||WK(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(hv(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===kn.SEMI)this.consumed+=1;else if(this.decodeMode===da.Strict)return 0;return this.emitCodePoint(GK(this.result),this.consumed),this.errors&&(e!==kn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&ba.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const a=e.charCodeAt(t);if(this.treeIndex=ZK(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===da.Attribute&&(s===0||YK(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&ba.VALUE_LENGTH)>>14,s!==0){if(a===kn.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==da.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&ba.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~ba.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case En.NamedEntity:return this.result!==0&&(this.decodeMode!==da.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case En.NumericDecimal:return this.emitNumericEntity(0,2);case En.NumericHex:return this.emitNumericEntity(0,3);case En.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case En.EntityStart:return 0}}}function GI(n){let e="";const t=new XK(n,r=>e+=$K(r));return function(i,s){let a=0,l=0;for(;(l=i.indexOf("&",l))>=0;){e+=i.slice(a,l),t.startEntity(s);const f=t.write(i,l+1);if(f<0){a=l+t.end();break}a=l+f,l=f===0?a+1:a}const h=e+i.slice(a);return e="",h}}function ZK(n,e,t,r){const i=(e&ba.BRANCH_LENGTH)>>7,s=e&ba.JUMP_TABLE;if(i===0)return s!==0&&r===s?t:-1;if(s){const h=r-s;return h<0||h>=i?-1:n[t+h]-1}let a=t,l=a+i-1;for(;a<=l;){const h=a+l>>>1,f=n[h];if(f<r)a=h+1;else if(f>r)l=h-1;else return n[h+i]}return-1}const JK=GI(jK);GI(qK);function KI(n,e=da.Legacy){return JK(n,e)}function eW(n){return Object.prototype.toString.call(n)}function QE(n){return eW(n)==="[object String]"}const tW=Object.prototype.hasOwnProperty;function nW(n,e){return tW.call(n,e)}function Hg(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function WI(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function YE(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function Qm(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const QI=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,rW=/&([a-z#][a-z0-9]{1,31});/gi,iW=new RegExp(QI.source+"|"+rW.source,"gi"),sW=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function oW(n,e){if(e.charCodeAt(0)===35&&sW.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return YE(r)?Qm(r):n}const t=KI(n);return t!==n?t:n}function aW(n){return n.indexOf("\\")<0?n:n.replace(QI,"$1")}function zc(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(iW,function(e,t,r){return t||oW(e,r)})}const uW=/[&<>"]/,lW=/[&<>"]/g,cW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function hW(n){return cW[n]}function Fa(n){return uW.test(n)?n.replace(lW,hW):n}const fW=/[.?*+^$[\]\\(){}|-]/g;function dW(n){return n.replace(fW,"\\$&")}function Nt(n){switch(n){case 9:case 32:return!0}return!1}function dd(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function pd(n){return WE.test(n)||HI.test(n)}function md(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function $g(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const pW={mdurl:VK,ucmicro:zK},mW=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:WI,assign:Hg,escapeHtml:Fa,escapeRE:dW,fromCodePoint:Qm,has:nW,isMdAsciiPunct:md,isPunctChar:pd,isSpace:Nt,isString:QE,isValidEntityCode:YE,isWhiteSpace:dd,lib:pW,normalizeReference:$g,unescapeAll:zc,unescapeMd:aW},Symbol.toStringTag,{value:"Module"}));function gW(n,e,t){let r,i,s,a;const l=n.posMax,h=n.pos;for(n.pos=e+1,r=1;n.pos<l;){if(s=n.src.charCodeAt(n.pos),s===93&&(r--,r===0)){i=!0;break}if(a=n.pos,n.md.inline.skipToken(n),s===91){if(a===n.pos-1)r++;else if(t)return n.pos=h,-1}}let f=-1;return i&&(f=n.pos),n.pos=h,f}function yW(n,e,t){let r,i=e;const s={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=zc(n.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<t){i+=2;continue}i++}return s}let a=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(a++,a>32))return s;if(r===41){if(a===0)break;a--}i++}return e===i||a!==0||(s.str=zc(n.slice(e,i)),s.pos=i,s.ok=!0),s}function bW(n,e,t,r){let i,s=e;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(s>=t)return a;let l=n.charCodeAt(s);if(l!==34&&l!==39&&l!==40)return a;e++,s++,l===40&&(l=41),a.marker=l}for(;s<t;){if(i=n.charCodeAt(s),i===a.marker)return a.pos=s+1,a.str+=zc(n.slice(e,s)),a.ok=!0,a;if(i===40&&a.marker===41)return a;i===92&&s+1<t&&s++,s++}return a.can_continue=!0,a.str+=zc(n.slice(e,s)),a}const _W=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:yW,parseLinkLabel:gW,parseLinkTitle:bW},Symbol.toStringTag,{value:"Module"})),xs={};xs.code_inline=function(n,e,t,r,i){const s=n[e];return"<code"+i.renderAttrs(s)+">"+Fa(s.content)+"</code>"};xs.code_block=function(n,e,t,r,i){const s=n[e];return"<pre"+i.renderAttrs(s)+"><code>"+Fa(n[e].content)+`</code></pre>
`};xs.fence=function(n,e,t,r,i){const s=n[e],a=s.info?zc(s.info).trim():"";let l="",h="";if(a){const p=a.split(/(\s+)/g);l=p[0],h=p.slice(2).join("")}let f;if(t.highlight?f=t.highlight(s.content,l,h)||Fa(s.content):f=Fa(s.content),f.indexOf("<pre")===0)return f+`
`;if(a){const p=s.attrIndex("class"),y=s.attrs?s.attrs.slice():[];p<0?y.push(["class",t.langPrefix+l]):(y[p]=y[p].slice(),y[p][1]+=" "+t.langPrefix+l);const _={attrs:y};return`<pre><code${i.renderAttrs(_)}>${f}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${f}</code></pre>
`};xs.image=function(n,e,t,r,i){const s=n[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,t,r),i.renderToken(n,e,t)};xs.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};xs.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};xs.text=function(n,e){return Fa(n[e].content)};xs.html_block=function(n,e){return n[e].content};xs.html_inline=function(n,e){return n[e].content};function rh(){this.rules=Hg({},xs)}rh.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+Fa(e.attrs[t][0])+'="'+Fa(e.attrs[t][1])+'"';return i};rh.prototype.renderToken=function(e,t,r){const i=e[t];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let a=!1;if(i.block&&(a=!0,i.nesting===1&&t+1<e.length)){const l=e[t+1];(l.type==="inline"||l.hidden||l.nesting===-1&&l.tag===i.tag)&&(a=!1)}return s+=a?`>
`:">",s};rh.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let s=0,a=n.length;s<a;s++){const l=n[s].type;typeof i[l]<"u"?r+=i[l](n,s,e,t,this):r+=this.renderToken(n,s,e)}return r};rh.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,s=n.length;i<s;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};rh.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let s=0,a=n.length;s<a;s++){const l=n[s].type;l==="inline"?r+=this.renderInline(n[s].children,e,t):typeof i[l]<"u"?r+=i[l](n,s,e,t,this):r+=this.renderToken(n,s,e,t)}return r};function br(){this.__rules__=[],this.__cache__=null}br.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};br.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};br.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};br.prototype.before=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};br.prototype.after=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};br.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};br.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};br.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};br.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};br.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function Oi(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Oi.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};Oi.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Oi.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};Oi.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};Oi.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function YI(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}YI.prototype.Token=Oi;const vW=/\r\n?|\n/g,xW=/\0/g;function EW(n){let e;e=n.src.replace(vW,`
`),e=e.replace(xW,""),n.src=e}function wW(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function kW(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function TW(n){return/^<a[>\s]/i.test(n)}function SW(n){return/^<\/a\s*>/i.test(n)}function AW(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,s=0;for(let a=i.length-1;a>=0;a--){const l=i[a];if(l.type==="link_close"){for(a--;i[a].level!==l.level&&i[a].type!=="link_open";)a--;continue}if(l.type==="html_inline"&&(TW(l.content)&&s>0&&s--,SW(l.content)&&s++),!(s>0)&&l.type==="text"&&n.md.linkify.test(l.content)){const h=l.content;let f=n.md.linkify.match(h);const p=[];let y=l.level,_=0;f.length>0&&f[0].index===0&&a>0&&i[a-1].type==="text_special"&&(f=f.slice(1));for(let v=0;v<f.length;v++){const w=f[v].url,R=n.md.normalizeLink(w);if(!n.md.validateLink(R))continue;let D=f[v].text;f[v].schema?f[v].schema==="mailto:"&&!/^mailto:/i.test(D)?D=n.md.normalizeLinkText("mailto:"+D).replace(/^mailto:/,""):D=n.md.normalizeLinkText(D):D=n.md.normalizeLinkText("http://"+D).replace(/^http:\/\//,"");const V=f[v].index;if(V>_){const Y=new n.Token("text","",0);Y.content=h.slice(_,V),Y.level=y,p.push(Y)}const W=new n.Token("link_open","a",1);W.attrs=[["href",R]],W.level=y++,W.markup="linkify",W.info="auto",p.push(W);const G=new n.Token("text","",0);G.content=D,G.level=y,p.push(G);const te=new n.Token("link_close","a",-1);te.level=--y,te.markup="linkify",te.info="auto",p.push(te),_=f[v].lastIndex}if(_<h.length){const v=new n.Token("text","",0);v.content=h.slice(_),v.level=y,p.push(v)}e[t].children=i=WI(i,a,p)}}}}const XI=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,CW=/\((c|tm|r)\)/i,RW=/\((c|tm|r)\)/ig,IW={c:"",r:"",tm:""};function DW(n,e){return IW[e.toLowerCase()]}function NW(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(RW,DW)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function MW(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&XI.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function OW(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(CW.test(n.tokens[e].content)&&NW(n.tokens[e].children),XI.test(n.tokens[e].content)&&MW(n.tokens[e].children))}const LW=/['"]/,DA=/['"]/g,NA="";function x0(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function PW(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const s=n[i],a=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=a);t--);if(r.length=t+1,s.type!=="text")continue;let l=s.content,h=0,f=l.length;e:for(;h<f;){DA.lastIndex=h;const p=DA.exec(l);if(!p)break;let y=!0,_=!0;h=p.index+1;const v=p[0]==="'";let w=32;if(p.index-1>=0)w=l.charCodeAt(p.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){w=n[t].content.charCodeAt(n[t].content.length-1);break}let R=32;if(h<f)R=l.charCodeAt(h);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){R=n[t].content.charCodeAt(0);break}const D=md(w)||pd(String.fromCharCode(w)),V=md(R)||pd(String.fromCharCode(R)),W=dd(w),G=dd(R);if(G?y=!1:V&&(W||D||(y=!1)),W?_=!1:D&&(G||V||(_=!1)),R===34&&p[0]==='"'&&w>=48&&w<=57&&(_=y=!1),y&&_&&(y=D,_=V),!y&&!_){v&&(s.content=x0(s.content,p.index,NA));continue}if(_)for(t=r.length-1;t>=0;t--){let te=r[t];if(r[t].level<a)break;if(te.single===v&&r[t].level===a){te=r[t];let Y,$;v?(Y=e.md.options.quotes[2],$=e.md.options.quotes[3]):(Y=e.md.options.quotes[0],$=e.md.options.quotes[1]),s.content=x0(s.content,p.index,$),n[te.token].content=x0(n[te.token].content,te.pos,Y),h+=$.length-1,te.token===i&&(h+=Y.length-1),l=s.content,f=l.length,r.length=t;continue e}}y?r.push({token:i,pos:p.index,single:v,level:a}):_&&v&&(s.content=x0(s.content,p.index,NA))}}}function BW(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!LW.test(n.tokens[e].content)||PW(n.tokens[e].children,n)}function FW(n){let e,t;const r=n.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const a=r[s].children,l=a.length;for(e=0;e<l;e++)a[e].type==="text_special"&&(a[e].type="text");for(e=t=0;e<l;e++)a[e].type==="text"&&e+1<l&&a[e+1].type==="text"?a[e+1].content=a[e].content+a[e+1].content:(e!==t&&(a[t]=a[e]),t++);e!==t&&(a.length=t)}}const Zb=[["normalize",EW],["block",wW],["inline",kW],["linkify",AW],["replacements",OW],["smartquotes",BW],["text_join",FW]];function XE(){this.ruler=new br;for(let n=0;n<Zb.length;n++)this.ruler.push(Zb[n][0],Zb[n][1])}XE.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};XE.prototype.State=YI;function Es(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,a=0,l=0,h=0,f=i.length,p=!1;a<f;a++){const y=i.charCodeAt(a);if(!p)if(Nt(y)){l++,y===9?h+=4-h%4:h++;continue}else p=!0;(y===10||a===f-1)&&(y!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(h),this.bsCount.push(0),p=!1,l=0,h=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Es.prototype.push=function(n,e,t){const r=new Oi(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Es.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Es.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Es.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Nt(r))break}return e};Es.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Nt(this.src.charCodeAt(--e)))return e+1;return e};Es.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Es.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Es.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const s=new Array(t-e);for(let a=0,l=e;l<t;l++,a++){let h=0;const f=this.bMarks[l];let p=f,y;for(l+1<t||i?y=this.eMarks[l]+1:y=this.eMarks[l];p<y&&h<r;){const _=this.src.charCodeAt(p);if(Nt(_))_===9?h+=4-(h+this.bsCount[l])%4:h++;else if(p-f<this.tShift[l])h++;else break;p++}h>r?s[a]=new Array(h-r+1).join(" ")+this.src.slice(p,y):s[a]=this.src.slice(p,y)}return s.join("")};Es.prototype.Token=Oi;const VW=65536;function Jb(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function MA(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),s=!1,a=0,l="";for(;r<t;)i===124&&(s?(l+=n.substring(a,r-1),a=r):(e.push(l+n.substring(a,r)),l="",a=r+1)),s=i===92,r++,i=n.charCodeAt(r);return e.push(l+n.substring(a)),e}function UW(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let s=n.bMarks[i]+n.tShift[i];if(s>=n.eMarks[i])return!1;const a=n.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58||s>=n.eMarks[i])return!1;const l=n.src.charCodeAt(s++);if(l!==124&&l!==45&&l!==58&&!Nt(l)||a===45&&Nt(l))return!1;for(;s<n.eMarks[i];){const te=n.src.charCodeAt(s);if(te!==124&&te!==45&&te!==58&&!Nt(te))return!1;s++}let h=Jb(n,e+1),f=h.split("|");const p=[];for(let te=0;te<f.length;te++){const Y=f[te].trim();if(!Y){if(te===0||te===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(Y))return!1;Y.charCodeAt(Y.length-1)===58?p.push(Y.charCodeAt(0)===58?"center":"right"):Y.charCodeAt(0)===58?p.push("left"):p.push("")}if(h=Jb(n,e).trim(),h.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;f=MA(h),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop();const y=f.length;if(y===0||y!==p.length)return!1;if(r)return!0;const _=n.parentType;n.parentType="table";const v=n.md.block.ruler.getRules("blockquote"),w=n.push("table_open","table",1),R=[e,0];w.map=R;const D=n.push("thead_open","thead",1);D.map=[e,e+1];const V=n.push("tr_open","tr",1);V.map=[e,e+1];for(let te=0;te<f.length;te++){const Y=n.push("th_open","th",1);p[te]&&(Y.attrs=[["style","text-align:"+p[te]]]);const $=n.push("inline","",0);$.content=f[te].trim(),$.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let W,G=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let te=!1;for(let $=0,U=v.length;$<U;$++)if(v[$](n,i,t,!0)){te=!0;break}if(te||(h=Jb(n,i).trim(),!h)||n.sCount[i]-n.blkIndent>=4||(f=MA(h),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),G+=y-f.length,G>VW))break;if(i===e+2){const $=n.push("tbody_open","tbody",1);$.map=W=[e+2,0]}const Y=n.push("tr_open","tr",1);Y.map=[i,i+1];for(let $=0;$<y;$++){const U=n.push("td_open","td",1);p[$]&&(U.attrs=[["style","text-align:"+p[$]]]);const I=n.push("inline","",0);I.content=f[$]?f[$].trim():"",I.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return W&&(n.push("tbody_close","tbody",-1),W[1]=i),n.push("table_close","table",-1),R[1]=i,n.parentType=_,n.line=i,!0}function zW(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const s=n.push("code_block","code",0);return s.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,s.map=[e,n.line],!0}function jW(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>s)return!1;const a=n.src.charCodeAt(i);if(a!==126&&a!==96)return!1;let l=i;i=n.skipChars(i,a);let h=i-l;if(h<3)return!1;const f=n.src.slice(l,i),p=n.src.slice(i,s);if(a===96&&p.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let y=e,_=!1;for(;y++,!(y>=t||(i=l=n.bMarks[y]+n.tShift[y],s=n.eMarks[y],i<s&&n.sCount[y]<n.blkIndent));)if(n.src.charCodeAt(i)===a&&!(n.sCount[y]-n.blkIndent>=4)&&(i=n.skipChars(i,a),!(i-l<h)&&(i=n.skipSpaces(i),!(i<s)))){_=!0;break}h=n.sCount[e],n.line=y+(_?1:0);const v=n.push("fence","code",0);return v.info=p,v.content=n.getLines(e+1,y,h,!0),v.markup=f,v.map=[e,n.line],!0}function qW(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];const a=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const l=[],h=[],f=[],p=[],y=n.md.block.ruler.getRules("blockquote"),_=n.parentType;n.parentType="blockquote";let v=!1,w;for(w=e;w<t;w++){const G=n.sCount[w]<n.blkIndent;if(i=n.bMarks[w]+n.tShift[w],s=n.eMarks[w],i>=s)break;if(n.src.charCodeAt(i++)===62&&!G){let Y=n.sCount[w]+1,$,U;n.src.charCodeAt(i)===32?(i++,Y++,U=!1,$=!0):n.src.charCodeAt(i)===9?($=!0,(n.bsCount[w]+Y)%4===3?(i++,Y++,U=!1):U=!0):$=!1;let I=Y;for(l.push(n.bMarks[w]),n.bMarks[w]=i;i<s;){const N=n.src.charCodeAt(i);if(Nt(N))N===9?I+=4-(I+n.bsCount[w]+(U?1:0))%4:I++;else break;i++}v=i>=s,h.push(n.bsCount[w]),n.bsCount[w]=n.sCount[w]+1+($?1:0),f.push(n.sCount[w]),n.sCount[w]=I-Y,p.push(n.tShift[w]),n.tShift[w]=i-n.bMarks[w];continue}if(v)break;let te=!1;for(let Y=0,$=y.length;Y<$;Y++)if(y[Y](n,w,t,!0)){te=!0;break}if(te){n.lineMax=w,n.blkIndent!==0&&(l.push(n.bMarks[w]),h.push(n.bsCount[w]),p.push(n.tShift[w]),f.push(n.sCount[w]),n.sCount[w]-=n.blkIndent);break}l.push(n.bMarks[w]),h.push(n.bsCount[w]),p.push(n.tShift[w]),f.push(n.sCount[w]),n.sCount[w]=-1}const R=n.blkIndent;n.blkIndent=0;const D=n.push("blockquote_open","blockquote",1);D.markup=">";const V=[e,0];D.map=V,n.md.block.tokenize(n,e,w);const W=n.push("blockquote_close","blockquote",-1);W.markup=">",n.lineMax=a,n.parentType=_,V[1]=n.line;for(let G=0;G<p.length;G++)n.bMarks[G+e]=l[G],n.tShift[G+e]=p[G],n.sCount[G+e]=f[G],n.bsCount[G+e]=h[G];return n.blkIndent=R,!0}function HW(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.bMarks[e]+n.tShift[e];const a=n.src.charCodeAt(s++);if(a!==42&&a!==45&&a!==95)return!1;let l=1;for(;s<i;){const f=n.src.charCodeAt(s++);if(f!==a&&!Nt(f))return!1;f===a&&l++}if(l<3)return!1;if(r)return!0;n.line=e+1;const h=n.push("hr","hr",0);return h.map=[e,n.line],h.markup=Array(l+1).join(String.fromCharCode(a)),!0}function OA(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const s=n.src.charCodeAt(r);if(!Nt(s))return-1}return r}function LA(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let s=n.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=n.src.charCodeAt(i++),s>=48&&s<=57){if(i-t>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=n.src.charCodeAt(i),!Nt(s))?-1:i}function $W(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function GW(n,e,t,r){let i,s,a,l,h=e,f=!0;if(n.sCount[h]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[h]-n.listIndent>=4&&n.sCount[h]<n.blkIndent)return!1;let p=!1;r&&n.parentType==="paragraph"&&n.sCount[h]>=n.blkIndent&&(p=!0);let y,_,v;if((v=LA(n,h))>=0){if(y=!0,a=n.bMarks[h]+n.tShift[h],_=Number(n.src.slice(a,v-1)),p&&_!==1)return!1}else if((v=OA(n,h))>=0)y=!1;else return!1;if(p&&n.skipSpaces(v)>=n.eMarks[h])return!1;if(r)return!0;const w=n.src.charCodeAt(v-1),R=n.tokens.length;y?(l=n.push("ordered_list_open","ol",1),_!==1&&(l.attrs=[["start",_]])):l=n.push("bullet_list_open","ul",1);const D=[h,0];l.map=D,l.markup=String.fromCharCode(w);let V=!1;const W=n.md.block.ruler.getRules("list"),G=n.parentType;for(n.parentType="list";h<t;){s=v,i=n.eMarks[h];const te=n.sCount[h]+v-(n.bMarks[h]+n.tShift[h]);let Y=te;for(;s<i;){const Ee=n.src.charCodeAt(s);if(Ee===9)Y+=4-(Y+n.bsCount[h])%4;else if(Ee===32)Y++;else break;s++}const $=s;let U;$>=i?U=1:U=Y-te,U>4&&(U=1);const I=te+U;l=n.push("list_item_open","li",1),l.markup=String.fromCharCode(w);const N=[h,0];l.map=N,y&&(l.info=n.src.slice(a,v-1));const F=n.tight,j=n.tShift[h],H=n.sCount[h],P=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=I,n.tight=!0,n.tShift[h]=$-n.bMarks[h],n.sCount[h]=Y,$>=i&&n.isEmpty(h+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,h,t,!0),(!n.tight||V)&&(f=!1),V=n.line-h>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=P,n.tShift[h]=j,n.sCount[h]=H,n.tight=F,l=n.push("list_item_close","li",-1),l.markup=String.fromCharCode(w),h=n.line,N[1]=h,h>=t||n.sCount[h]<n.blkIndent||n.sCount[h]-n.blkIndent>=4)break;let xe=!1;for(let Ee=0,pe=W.length;Ee<pe;Ee++)if(W[Ee](n,h,t,!0)){xe=!0;break}if(xe)break;if(y){if(v=LA(n,h),v<0)break;a=n.bMarks[h]+n.tShift[h]}else if(v=OA(n,h),v<0)break;if(w!==n.src.charCodeAt(v-1))break}return y?l=n.push("ordered_list_close","ol",-1):l=n.push("bullet_list_close","ul",-1),l.markup=String.fromCharCode(w),D[1]=h,n.line=h,n.parentType=G,f&&$W(n,R),!0}function KW(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e],a=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function l(W){const G=n.lineMax;if(W>=G||n.isEmpty(W))return null;let te=!1;if(n.sCount[W]-n.blkIndent>3&&(te=!0),n.sCount[W]<0&&(te=!0),!te){const U=n.md.block.ruler.getRules("reference"),I=n.parentType;n.parentType="reference";let N=!1;for(let F=0,j=U.length;F<j;F++)if(U[F](n,W,G,!0)){N=!0;break}if(n.parentType=I,N)return null}const Y=n.bMarks[W]+n.tShift[W],$=n.eMarks[W];return n.src.slice(Y,$+1)}let h=n.src.slice(i,s+1);s=h.length;let f=-1;for(i=1;i<s;i++){const W=h.charCodeAt(i);if(W===91)return!1;if(W===93){f=i;break}else if(W===10){const G=l(a);G!==null&&(h+=G,s=h.length,a++)}else if(W===92&&(i++,i<s&&h.charCodeAt(i)===10)){const G=l(a);G!==null&&(h+=G,s=h.length,a++)}}if(f<0||h.charCodeAt(f+1)!==58)return!1;for(i=f+2;i<s;i++){const W=h.charCodeAt(i);if(W===10){const G=l(a);G!==null&&(h+=G,s=h.length,a++)}else if(!Nt(W))break}const p=n.md.helpers.parseLinkDestination(h,i,s);if(!p.ok)return!1;const y=n.md.normalizeLink(p.str);if(!n.md.validateLink(y))return!1;i=p.pos;const _=i,v=a,w=i;for(;i<s;i++){const W=h.charCodeAt(i);if(W===10){const G=l(a);G!==null&&(h+=G,s=h.length,a++)}else if(!Nt(W))break}let R=n.md.helpers.parseLinkTitle(h,i,s);for(;R.can_continue;){const W=l(a);if(W===null)break;h+=W,i=s,s=h.length,a++,R=n.md.helpers.parseLinkTitle(h,i,s,R)}let D;for(i<s&&w!==i&&R.ok?(D=R.str,i=R.pos):(D="",i=_,a=v);i<s;){const W=h.charCodeAt(i);if(!Nt(W))break;i++}if(i<s&&h.charCodeAt(i)!==10&&D)for(D="",i=_,a=v;i<s;){const W=h.charCodeAt(i);if(!Nt(W))break;i++}if(i<s&&h.charCodeAt(i)!==10)return!1;const V=$g(h.slice(1,f));return V?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[V]>"u"&&(n.env.references[V]={title:D,href:y}),n.line=a),!0):!1}const WW=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],QW="[a-zA-Z_:][a-zA-Z0-9:._-]*",YW="[^\"'=<>`\\x00-\\x20]+",XW="'[^']*'",ZW='"[^"]*"',JW="(?:"+YW+"|"+XW+"|"+ZW+")",eQ="(?:\\s+"+QW+"(?:\\s*=\\s*"+JW+")?)",ZI="<[A-Za-z][A-Za-z0-9\\-]*"+eQ+"*\\s*\\/?>",JI="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",tQ="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",nQ="<[?][\\s\\S]*?[?]>",rQ="<![A-Za-z][^>]*>",iQ="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",sQ=new RegExp("^(?:"+ZI+"|"+JI+"|"+tQ+"|"+nQ+"|"+rQ+"|"+iQ+")"),oQ=new RegExp("^(?:"+ZI+"|"+JI+")"),Xl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+WW.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(oQ.source+"\\s*$"),/^$/,!1]];function aQ(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let a=n.src.slice(i,s),l=0;for(;l<Xl.length&&!Xl[l][0].test(a);l++);if(l===Xl.length)return!1;if(r)return Xl[l][2];let h=e+1;if(!Xl[l][1].test(a)){for(;h<t&&!(n.sCount[h]<n.blkIndent);h++)if(i=n.bMarks[h]+n.tShift[h],s=n.eMarks[h],a=n.src.slice(i,s),Xl[l][1].test(a)){a.length!==0&&h++;break}}n.line=h;const f=n.push("html_block","",0);return f.map=[e,h],f.content=n.getLines(e,h,n.blkIndent,!0),!0}function uQ(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let a=n.src.charCodeAt(i);if(a!==35||i>=s)return!1;let l=1;for(a=n.src.charCodeAt(++i);a===35&&i<s&&l<=6;)l++,a=n.src.charCodeAt(++i);if(l>6||i<s&&!Nt(a))return!1;if(r)return!0;s=n.skipSpacesBack(s,i);const h=n.skipCharsBack(s,35,i);h>i&&Nt(n.src.charCodeAt(h-1))&&(s=h),n.line=e+1;const f=n.push("heading_open","h"+String(l),1);f.markup="########".slice(0,l),f.map=[e,n.line];const p=n.push("inline","",0);p.content=n.src.slice(i,s).trim(),p.map=[e,n.line],p.children=[];const y=n.push("heading_close","h"+String(l),-1);return y.markup="########".slice(0,l),!0}function lQ(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let s=0,a,l=e+1;for(;l<t&&!n.isEmpty(l);l++){if(n.sCount[l]-n.blkIndent>3)continue;if(n.sCount[l]>=n.blkIndent){let v=n.bMarks[l]+n.tShift[l];const w=n.eMarks[l];if(v<w&&(a=n.src.charCodeAt(v),(a===45||a===61)&&(v=n.skipChars(v,a),v=n.skipSpaces(v),v>=w))){s=a===61?1:2;break}}if(n.sCount[l]<0)continue;let _=!1;for(let v=0,w=r.length;v<w;v++)if(r[v](n,l,t,!0)){_=!0;break}if(_)break}if(!s)return!1;const h=n.getLines(e,l,n.blkIndent,!1).trim();n.line=l+1;const f=n.push("heading_open","h"+String(s),1);f.markup=String.fromCharCode(a),f.map=[e,n.line];const p=n.push("inline","",0);p.content=h,p.map=[e,n.line-1],p.children=[];const y=n.push("heading_close","h"+String(s),-1);return y.markup=String.fromCharCode(a),n.parentType=i,!0}function cQ(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let s=e+1;for(n.parentType="paragraph";s<t&&!n.isEmpty(s);s++){if(n.sCount[s]-n.blkIndent>3||n.sCount[s]<0)continue;let f=!1;for(let p=0,y=r.length;p<y;p++)if(r[p](n,s,t,!0)){f=!0;break}if(f)break}const a=n.getLines(e,s,n.blkIndent,!1).trim();n.line=s;const l=n.push("paragraph_open","p",1);l.map=[e,n.line];const h=n.push("inline","",0);return h.content=a,h.map=[e,n.line],h.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const E0=[["table",UW,["paragraph","reference"]],["code",zW],["fence",jW,["paragraph","reference","blockquote","list"]],["blockquote",qW,["paragraph","reference","blockquote","list"]],["hr",HW,["paragraph","reference","blockquote","list"]],["list",GW,["paragraph","reference","blockquote"]],["reference",KW],["html_block",aQ,["paragraph","reference","blockquote"]],["heading",uQ,["paragraph","reference","blockquote"]],["lheading",lQ],["paragraph",cQ]];function Gg(){this.ruler=new br;for(let n=0;n<E0.length;n++)this.ruler.push(E0[n][0],E0[n][1],{alt:(E0[n][2]||[]).slice()})}Gg.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,s=n.md.options.maxNesting;let a=e,l=!1;for(;a<t&&(n.line=a=n.skipEmptyLines(a),!(a>=t||n.sCount[a]<n.blkIndent));){if(n.level>=s){n.line=t;break}const h=n.line;let f=!1;for(let p=0;p<i;p++)if(f=r[p](n,a,t,!1),f){if(h>=n.line)throw new Error("block rule didn't increment state.line");break}if(!f)throw new Error("none of the block rules matched");n.tight=!l,n.isEmpty(n.line-1)&&(l=!0),a=n.line,a<t&&n.isEmpty(a)&&(l=!0,a++,n.line=a)}};Gg.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};Gg.prototype.State=Es;function jd(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}jd.prototype.pushPending=function(){const n=new Oi("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};jd.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new Oi(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};jd.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let s=n;for(;s<t&&this.src.charCodeAt(s)===r;)s++;const a=s-n,l=s<t?this.src.charCodeAt(s):32,h=md(i)||pd(String.fromCharCode(i)),f=md(l)||pd(String.fromCharCode(l)),p=dd(i),y=dd(l),_=!y&&(!f||p||h),v=!p&&(!h||y||f);return{can_open:_&&(e||!v||h),can_close:v&&(e||!_||f),length:a}};jd.prototype.Token=Oi;function hQ(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function fQ(n,e){let t=n.pos;for(;t<n.posMax&&!hQ(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const dQ=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function pQ(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match(dQ);if(!i)return!1;const s=i[1],a=n.md.linkify.matchAtStart(n.src.slice(t-s.length));if(!a)return!1;let l=a.url;if(l.length<=s.length)return!1;l=l.replace(/\*+$/,"");const h=n.md.normalizeLink(l);if(!n.md.validateLink(h))return!1;if(!e){n.pending=n.pending.slice(0,-s.length);const f=n.push("link_open","a",1);f.attrs=[["href",h]],f.markup="linkify",f.info="auto";const p=n.push("text","",0);p.content=n.md.normalizeLinkText(l);const y=n.push("link_close","a",-1);y.markup="linkify",y.info="auto"}return n.pos+=l.length-s.length,!0}function mQ(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&n.pending.charCodeAt(s-1)===32;)s--;n.pending=n.pending.slice(0,s),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&Nt(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const ZE=[];for(let n=0;n<256;n++)ZE.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){ZE[n.charCodeAt(0)]=1});function gQ(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!Nt(i));)t++;return n.pos=t,!0}let s=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const l=n.src.charCodeAt(t+1);l>=56320&&l<=57343&&(s+=n.src[t+1],t++)}const a="\\"+s;if(!e){const l=n.push("text_special","",0);i<256&&ZE[i]!==0?l.content=s:l.content=a,l.markup=a,l.info="escape"}return n.pos=t+1,!0}function yQ(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const s=n.posMax;for(;t<s&&n.src.charCodeAt(t)===96;)t++;const a=n.src.slice(i,t),l=a.length;if(n.backticksScanned&&(n.backticks[l]||0)<=i)return e||(n.pending+=a),n.pos+=l,!0;let h=t,f;for(;(f=n.src.indexOf("`",h))!==-1;){for(h=f+1;h<s&&n.src.charCodeAt(h)===96;)h++;const p=h-f;if(p===l){if(!e){const y=n.push("code_inline","code",0);y.markup=a,y.content=n.src.slice(t,f).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=h,!0}n.backticks[p]=f}return n.backticksScanned=!0,e||(n.pending+=a),n.pos+=l,!0}function bQ(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let s=i.length;const a=String.fromCharCode(r);if(s<2)return!1;let l;s%2&&(l=n.push("text","",0),l.content=a,s--);for(let h=0;h<s;h+=2)l=n.push("text","",0),l.content=a+a,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function PA(n,e){let t;const r=[],i=e.length;for(let s=0;s<i;s++){const a=e[s];if(a.marker!==126||a.end===-1)continue;const l=e[a.end];t=n.tokens[a.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[l.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[l.token-1].type==="text"&&n.tokens[l.token-1].content==="~"&&r.push(l.token-1)}for(;r.length;){const s=r.pop();let a=s+1;for(;a<n.tokens.length&&n.tokens[a].type==="s_close";)a++;a--,s!==a&&(t=n.tokens[a],n.tokens[a]=n.tokens[s],n.tokens[s]=t)}}function _Q(n){const e=n.tokens_meta,t=n.tokens_meta.length;PA(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&PA(n,e[r].delimiters)}const eD={tokenize:bQ,postProcess:_Q};function vQ(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let s=0;s<i.length;s++){const a=n.push("text","",0);a.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function BA(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],a=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,l=String.fromCharCode(i.marker),h=n.tokens[i.token];h.type=a?"strong_open":"em_open",h.tag=a?"strong":"em",h.nesting=1,h.markup=a?l+l:l,h.content="";const f=n.tokens[s.token];f.type=a?"strong_close":"em_close",f.tag=a?"strong":"em",f.nesting=-1,f.markup=a?l+l:l,f.content="",a&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function xQ(n){const e=n.tokens_meta,t=n.tokens_meta.length;BA(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&BA(n,e[r].delimiters)}const tD={tokenize:vQ,postProcess:xQ};function EQ(n,e){let t,r,i,s,a="",l="",h=n.pos,f=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const p=n.pos,y=n.posMax,_=n.pos+1,v=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(v<0)return!1;let w=v+1;if(w<y&&n.src.charCodeAt(w)===40){for(f=!1,w++;w<y&&(t=n.src.charCodeAt(w),!(!Nt(t)&&t!==10));w++);if(w>=y)return!1;if(h=w,i=n.md.helpers.parseLinkDestination(n.src,w,n.posMax),i.ok){for(a=n.md.normalizeLink(i.str),n.md.validateLink(a)?w=i.pos:a="",h=w;w<y&&(t=n.src.charCodeAt(w),!(!Nt(t)&&t!==10));w++);if(i=n.md.helpers.parseLinkTitle(n.src,w,n.posMax),w<y&&h!==w&&i.ok)for(l=i.str,w=i.pos;w<y&&(t=n.src.charCodeAt(w),!(!Nt(t)&&t!==10));w++);}(w>=y||n.src.charCodeAt(w)!==41)&&(f=!0),w++}if(f){if(typeof n.env.references>"u")return!1;if(w<y&&n.src.charCodeAt(w)===91?(h=w+1,w=n.md.helpers.parseLinkLabel(n,w),w>=0?r=n.src.slice(h,w++):w=v+1):w=v+1,r||(r=n.src.slice(_,v)),s=n.env.references[$g(r)],!s)return n.pos=p,!1;a=s.href,l=s.title}if(!e){n.pos=_,n.posMax=v;const R=n.push("link_open","a",1),D=[["href",a]];R.attrs=D,l&&D.push(["title",l]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=w,n.posMax=y,!0}function wQ(n,e){let t,r,i,s,a,l,h,f,p="";const y=n.pos,_=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const v=n.pos+2,w=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(w<0)return!1;if(s=w+1,s<_&&n.src.charCodeAt(s)===40){for(s++;s<_&&(t=n.src.charCodeAt(s),!(!Nt(t)&&t!==10));s++);if(s>=_)return!1;for(f=s,l=n.md.helpers.parseLinkDestination(n.src,s,n.posMax),l.ok&&(p=n.md.normalizeLink(l.str),n.md.validateLink(p)?s=l.pos:p=""),f=s;s<_&&(t=n.src.charCodeAt(s),!(!Nt(t)&&t!==10));s++);if(l=n.md.helpers.parseLinkTitle(n.src,s,n.posMax),s<_&&f!==s&&l.ok)for(h=l.str,s=l.pos;s<_&&(t=n.src.charCodeAt(s),!(!Nt(t)&&t!==10));s++);else h="";if(s>=_||n.src.charCodeAt(s)!==41)return n.pos=y,!1;s++}else{if(typeof n.env.references>"u")return!1;if(s<_&&n.src.charCodeAt(s)===91?(f=s+1,s=n.md.helpers.parseLinkLabel(n,s),s>=0?i=n.src.slice(f,s++):s=w+1):s=w+1,i||(i=n.src.slice(v,w)),a=n.env.references[$g(i)],!a)return n.pos=y,!1;p=a.href,h=a.title}if(!e){r=n.src.slice(v,w);const R=[];n.md.inline.parse(r,n.md,n.env,R);const D=n.push("image","img",0),V=[["src",p],["alt",""]];D.attrs=V,D.children=R,D.content=r,h&&V.push(["title",h])}return n.pos=s,n.posMax=_,!0}const kQ=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,TQ=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function SQ(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const a=n.src.charCodeAt(t);if(a===60)return!1;if(a===62)break}const s=n.src.slice(r+1,t);if(TQ.test(s)){const a=n.md.normalizeLink(s);if(!n.md.validateLink(a))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",a]],l.markup="autolink",l.info="auto";const h=n.push("text","",0);h.content=n.md.normalizeLinkText(s);const f=n.push("link_close","a",-1);f.markup="autolink",f.info="auto"}return n.pos+=s.length+2,!0}if(kQ.test(s)){const a=n.md.normalizeLink("mailto:"+s);if(!n.md.validateLink(a))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",a]],l.markup="autolink",l.info="auto";const h=n.push("text","",0);h.content=n.md.normalizeLinkText(s);const f=n.push("link_close","a",-1);f.markup="autolink",f.info="auto"}return n.pos+=s.length+2,!0}return!1}function AQ(n){return/^<a[>\s]/i.test(n)}function CQ(n){return/^<\/a\s*>/i.test(n)}function RQ(n){const e=n|32;return e>=97&&e<=122}function IQ(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!RQ(i))return!1;const s=n.src.slice(r).match(sQ);if(!s)return!1;if(!e){const a=n.push("html_inline","",0);a.content=s[0],AQ(a.content)&&n.linkLevel++,CQ(a.content)&&n.linkLevel--}return n.pos+=s[0].length,!0}const DQ=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,NQ=/^&([a-z][a-z0-9]{1,31});/i;function MQ(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const s=n.src.slice(t).match(DQ);if(s){if(!e){const a=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),l=n.push("text_special","",0);l.content=YE(a)?Qm(a):Qm(65533),l.markup=s[0],l.info="entity"}return n.pos+=s[0].length,!0}}else{const s=n.src.slice(t).match(NQ);if(s){const a=KI(s[0]);if(a!==s[0]){if(!e){const l=n.push("text_special","",0);l.content=a,l.markup=s[0],l.info="entity"}return n.pos+=s[0].length,!0}}}return!1}function FA(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const s=[];for(let a=0;a<t;a++){const l=n[a];if(s.push(0),(n[r].marker!==l.marker||i!==l.token-1)&&(r=a),i=l.token,l.length=l.length||0,!l.close)continue;e.hasOwnProperty(l.marker)||(e[l.marker]=[-1,-1,-1,-1,-1,-1]);const h=e[l.marker][(l.open?3:0)+l.length%3];let f=r-s[r]-1,p=f;for(;f>h;f-=s[f]+1){const y=n[f];if(y.marker===l.marker&&y.open&&y.end<0){let _=!1;if((y.close||l.open)&&(y.length+l.length)%3===0&&(y.length%3!==0||l.length%3!==0)&&(_=!0),!_){const v=f>0&&!n[f-1].open?s[f-1]+1:0;s[a]=a-f+v,s[f]=v,l.open=!1,y.end=a,y.close=!1,p=-1,i=-2;break}}}p!==-1&&(e[l.marker][(l.open?3:0)+(l.length||0)%3]=p)}}function OQ(n){const e=n.tokens_meta,t=n.tokens_meta.length;FA(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&FA(e[r].delimiters)}function LQ(n){let e,t,r=0;const i=n.tokens,s=n.tokens.length;for(e=t=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const e_=[["text",fQ],["linkify",pQ],["newline",mQ],["escape",gQ],["backticks",yQ],["strikethrough",eD.tokenize],["emphasis",tD.tokenize],["link",EQ],["image",wQ],["autolink",SQ],["html_inline",IQ],["entity",MQ]],t_=[["balance_pairs",OQ],["strikethrough",eD.postProcess],["emphasis",tD.postProcess],["fragments_join",LQ]];function qd(){this.ruler=new br;for(let n=0;n<e_.length;n++)this.ruler.push(e_[n][0],e_[n][1]);this.ruler2=new br;for(let n=0;n<t_.length;n++)this.ruler2.push(t_[n][0],t_[n][1])}qd.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,s=n.cache;if(typeof s[e]<"u"){n.pos=s[e];return}let a=!1;if(n.level<i){for(let l=0;l<r;l++)if(n.level++,a=t[l](n,!0),n.level--,a){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;a||n.pos++,s[e]=n.pos};qd.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const s=n.pos;let a=!1;if(n.level<i){for(let l=0;l<t;l++)if(a=e[l](n,!1),a){if(s>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};qd.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const s=this.ruler2.getRules(""),a=s.length;for(let l=0;l<a;l++)s[l](i)};qd.prototype.State=jd;function PQ(n){const e={};n=n||{},e.src_Any=jI.source,e.src_Cc=qI.source,e.src_Z=$I.source,e.src_P=WE.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function fv(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function Kg(n){return Object.prototype.toString.call(n)}function BQ(n){return Kg(n)==="[object String]"}function FQ(n){return Kg(n)==="[object Object]"}function VQ(n){return Kg(n)==="[object RegExp]"}function VA(n){return Kg(n)==="[object Function]"}function UQ(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const nD={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function zQ(n){return Object.keys(n||{}).reduce(function(e,t){return e||nD.hasOwnProperty(t)},!1)}const jQ={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},qQ="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",HQ="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function $Q(n){n.__index__=-1,n.__text_cache__=""}function GQ(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function UA(){return function(n,e){e.normalize(n)}}function Ym(n){const e=n.re=PQ(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(qQ),t.push(e.src_xn),e.src_tlds=t.join("|");function r(l){return l.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function s(l,h){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+h)}Object.keys(n.__schemas__).forEach(function(l){const h=n.__schemas__[l];if(h===null)return;const f={validate:null,link:null};if(n.__compiled__[l]=f,FQ(h)){VQ(h.validate)?f.validate=GQ(h.validate):VA(h.validate)?f.validate=h.validate:s(l,h),VA(h.normalize)?f.normalize=h.normalize:h.normalize?s(l,h):f.normalize=UA();return}if(BQ(h)){i.push(l);return}s(l,h)}),i.forEach(function(l){n.__compiled__[n.__schemas__[l]]&&(n.__compiled__[l].validate=n.__compiled__[n.__schemas__[l]].validate,n.__compiled__[l].normalize=n.__compiled__[n.__schemas__[l]].normalize)}),n.__compiled__[""]={validate:null,normalize:UA()};const a=Object.keys(n.__compiled__).filter(function(l){return l.length>0&&n.__compiled__[l]}).map(UQ).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),$Q(n)}function KQ(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function dv(n,e){const t=new KQ(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function Br(n,e){if(!(this instanceof Br))return new Br(n,e);e||zQ(n)&&(e=n,n={}),this.__opts__=fv({},nD,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=fv({},jQ,n),this.__compiled__={},this.__tlds__=HQ,this.__tlds_replaced__=!1,this.re={},Ym(this)}Br.prototype.add=function(e,t){return this.__schemas__[e]=t,Ym(this),this};Br.prototype.set=function(e){return this.__opts__=fv(this.__opts__,e),this};Br.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,s,a,l,h,f,p;if(this.re.schema_test.test(e)){for(h=this.re.schema_search,h.lastIndex=0;(t=h.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],h.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(f=e.search(this.re.host_fuzzy_test),f>=0&&(this.__index__<0||f<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=e.indexOf("@"),p>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,l=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=l))),this.__index__>=0};Br.prototype.pretest=function(e){return this.re.pretest.test(e)};Br.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};Br.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(dv(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(dv(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};Br.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,dv(this,0)):null};Br.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),Ym(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Ym(this),this)};Br.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Br.prototype.onCompile=function(){};const wc=2147483647,ss=36,JE=1,gd=26,WQ=38,QQ=700,rD=72,iD=128,sD="-",YQ=/^xn--/,XQ=/[^\0-\x7F]/,ZQ=/[\x2E\u3002\uFF0E\uFF61]/g,JQ={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},n_=ss-JE,as=Math.floor,r_=String.fromCharCode;function aa(n){throw new RangeError(JQ[n])}function eY(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function oD(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(ZQ,".");const i=n.split("."),s=eY(i,e).join(".");return r+s}function aD(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const tY=n=>String.fromCodePoint(...n),nY=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:ss},zA=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},uD=function(n,e,t){let r=0;for(n=t?as(n/QQ):n>>1,n+=as(n/e);n>n_*gd>>1;r+=ss)n=as(n/n_);return as(r+(n_+1)*n/(n+WQ))},lD=function(n){const e=[],t=n.length;let r=0,i=iD,s=rD,a=n.lastIndexOf(sD);a<0&&(a=0);for(let l=0;l<a;++l)n.charCodeAt(l)>=128&&aa("not-basic"),e.push(n.charCodeAt(l));for(let l=a>0?a+1:0;l<t;){const h=r;for(let p=1,y=ss;;y+=ss){l>=t&&aa("invalid-input");const _=nY(n.charCodeAt(l++));_>=ss&&aa("invalid-input"),_>as((wc-r)/p)&&aa("overflow"),r+=_*p;const v=y<=s?JE:y>=s+gd?gd:y-s;if(_<v)break;const w=ss-v;p>as(wc/w)&&aa("overflow"),p*=w}const f=e.length+1;s=uD(r-h,f,h==0),as(r/f)>wc-i&&aa("overflow"),i+=as(r/f),r%=f,e.splice(r++,0,i)}return String.fromCodePoint(...e)},cD=function(n){const e=[];n=aD(n);const t=n.length;let r=iD,i=0,s=rD;for(const h of n)h<128&&e.push(r_(h));const a=e.length;let l=a;for(a&&e.push(sD);l<t;){let h=wc;for(const p of n)p>=r&&p<h&&(h=p);const f=l+1;h-r>as((wc-i)/f)&&aa("overflow"),i+=(h-r)*f,r=h;for(const p of n)if(p<r&&++i>wc&&aa("overflow"),p===r){let y=i;for(let _=ss;;_+=ss){const v=_<=s?JE:_>=s+gd?gd:_-s;if(y<v)break;const w=y-v,R=ss-v;e.push(r_(zA(v+w%R,0))),y=as(w/R)}e.push(r_(zA(y,0))),s=uD(i,f,l===a),i=0,++l}++i,++r}return e.join("")},rY=function(n){return oD(n,function(e){return YQ.test(e)?lD(e.slice(4).toLowerCase()):e})},iY=function(n){return oD(n,function(e){return XQ.test(e)?"xn--"+cD(e):e})},hD={version:"2.3.1",ucs2:{decode:aD,encode:tY},decode:lD,encode:cD,toASCII:iY,toUnicode:rY},sY={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},oY={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},aY={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},uY={default:sY,zero:oY,commonmark:aY},lY=/^(vbscript|javascript|file|data):/,cY=/^data:image\/(gif|png|jpeg|webp);/;function hY(n){const e=n.trim().toLowerCase();return lY.test(e)?cY.test(e):!0}const fD=["http:","https:","mailto:"];function fY(n){const e=KE(n,!0);if(e.hostname&&(!e.protocol||fD.indexOf(e.protocol)>=0))try{e.hostname=hD.toASCII(e.hostname)}catch{}return zd(GE(e))}function dY(n){const e=KE(n,!0);if(e.hostname&&(!e.protocol||fD.indexOf(e.protocol)>=0))try{e.hostname=hD.toUnicode(e.hostname)}catch{}return Uc(GE(e),Uc.defaultChars+"%")}function _r(n,e){if(!(this instanceof _r))return new _r(n,e);e||QE(n)||(e=n||{},n="default"),this.inline=new qd,this.block=new Gg,this.core=new XE,this.renderer=new rh,this.linkify=new Br,this.validateLink=hY,this.normalizeLink=fY,this.normalizeLinkText=dY,this.utils=mW,this.helpers=Hg({},_W),this.options={},this.configure(n),e&&this.set(e)}_r.prototype.set=function(n){return Hg(this.options,n),this};_r.prototype.configure=function(n){const e=this;if(QE(n)){const t=n;if(n=uY[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};_r.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};_r.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};_r.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};_r.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};_r.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};_r.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};_r.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const or=new _r("commonmark",{html:!1,linkify:!1,breaks:!1}).disable(["image","link","linkify","html_block","html_inline","fence","code","blockquote","table","hr"]);or.renderer.rules.paragraph_open=()=>'<p class="text-sm mt-2">';or.renderer.rules.paragraph_close=()=>"</p>";or.renderer.rules.strong_open=()=>'<strong class="font-bold">';or.renderer.rules.strong_close=()=>"</strong>";or.renderer.rules.em_open=()=>'<em class="italic">';or.renderer.rules.em_close=()=>"</em>";or.renderer.rules.bullet_list_open=()=>'<ul class="list-disc list-inside mt-2">';or.renderer.rules.bullet_list_close=()=>"</ul>";or.renderer.rules.ordered_list_open=()=>'<ol class="list-decimal list-inside mt-2">';or.renderer.rules.ordered_list_close=()=>"</ol>";or.renderer.rules.list_item_open=()=>'<li class="ml-4">';or.renderer.rules.list_item_close=()=>"</li>";or.renderer.rules.heading_open=(n,e)=>{const t=n[e].tag.slice(1),r={1:"text-2xl",2:"text-xl",3:"text-lg",4:"text-base",5:"text-sm",6:"text-xs"}[t]||"text-base";return`<h${t} class="font-bold mt-2 ${r}">`};or.renderer.rules.heading_close=(n,e)=>`</${n[e].tag}>`;const pY=n=>or.render(n),dD=(n,e)=>{const t=`
    @page { size: A4 landscape; margin: 1cm; }
    body { font-family: sans-serif; padding: 0; font-size: 14px; }
    .page { display: flex; align-items: stretch; page-break-after: always; height: calc(100vh - 2cm); }
    .page:last-child { page-break-after: auto; }
    .side { width: 20%; overflow: hidden; }
    .side img { width: 100%; height: 100%; object-fit: cover; object-position: center; }
    .content { width: 60%; padding: 0 10px; box-sizing: border-box; }
    h1 { text-align: center; margin: 0 0 10px; }
    .desc { margin-bottom: 10px; }
    .desc p { margin: 0 0 4px; }
    .tags { margin-bottom: 10px; }
    .tags span { background: #eee; padding: 2px 4px; margin-right: 4px; border-radius: 3px; }
    .author { text-align: right; }
  `,r=new _r({html:!1,breaks:!0}),i=n.map(l=>{const h=e[l.authorUid],f=l.tags.map(y=>`<span>${y}</span>`).join(" "),p=r.render(l.customDescription);return`
        <div class="page">
          <div class="side"><img src="${l.imageURL||"/eotv-enemy-placeholder.png"}" /></div>
          <div class="content">
            <h1>${l.name}</h1>
            <div class="desc">${p}</div>
            <div class="tags">${f}</div>
            <div class="author">${h?h.displayName:""}</div>
          </div>
          <div class="side">${l.imageURL2?`<img src="${l.imageURL2}" />`:""}</div>
        </div>`}).join(""),s=`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Print</title>
  <style>${t}</style>
</head>
<body onload="window.print()">
${i}
</body>
</html>`,a=window.open("","_blank");a&&(a.document.write(s),a.document.close())},mY=({enemy:n,onClose:e})=>{const[t,r]=Q.useState(n.name),[i,s]=Q.useState(n.customDescription),[a,l]=Q.useState(n.tags||[]),[h,f]=Q.useState(n.imageURL||""),[p,y]=Q.useState(n.imageURL2||""),[_,v]=Q.useState(n.draft??!1),w=Q.useRef(!0),R=Q.useCallback(async()=>{const D=lo(Si,"eotv-enemies",n.id),V={name:t,customDescription:i,tags:a,imageURL:h,imageURL2:p,..._?{draft:!0}:{draft:$7()}};n.createdAt||(V.createdAt=new Date().toISOString()),await nx(D,V)},[n.id,t,i,a,h,p,_]);return Q.useEffect(()=>{if(w.current){w.current=!1;return}const D=setTimeout(()=>{R()},800);return()=>clearTimeout(D)},[t,i,a,h,p,_,R]),z.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl w-full flex flex-col sm:flex-row shadow-lg h-full max-w-7xl overflow-hidden",children:[z.jsx(Mm,{imageURL:h,setImageURL:f,ownerUid:n.authorUid}),z.jsx(VI,{name:t,setName:r,customDescription:i,setCustomDescription:s,selectedTags:a,setSelectedTags:l,children:z.jsx("div",{className:"py-2",children:z.jsx(zI,{draft:_,setDraft:v})})}),z.jsx(Mm,{imageURL:p,setImageURL:y,ownerUid:n.authorUid,placeholder:"/eotv-enemy-location-placeholder.png"}),z.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-300 hover:text-white cursor-pointer",children:z.jsx(nl,{className:"w-6 h-6"})})]})},gY=({user:n,anchor:e,onClose:t})=>{const r=Q.useRef(null),[i,s]=Q.useState({top:e.top,left:e.left}),a=Q.useRef(new _r({linkify:!0,breaks:!0}));return Q.useEffect(()=>{const l=a.current,h=l.renderer.rules.link_open||((f,p,y,_,v)=>v.renderToken(f,p,y));l.renderer.rules.link_open=(f,p,y,_,v)=>(f[p].attrPush(["target","_blank"]),f[p].attrPush(["rel","noopener noreferrer"]),h(f,p,y,_,v))},[]),Q.useLayoutEffect(()=>{if(r.current){const l=r.current.getBoundingClientRect(),h=Math.max(0,e.top-l.height-4);s({top:h,left:e.left})}},[e]),Q.useEffect(()=>{const l=f=>{r.current&&!r.current.contains(f.target)&&t()},h=f=>{f.key==="Escape"&&t()};return document.addEventListener("mousedown",l),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("keydown",h)}},[t]),z.jsxs("div",{ref:r,role:"dialog",className:"fixed z-50 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md p-4 shadow-lg",style:{top:i.top,left:i.left},children:[z.jsx("button",{onClick:t,className:"absolute top-1 right-1 text-gray-400 hover:text-gray-700",children:z.jsx(nl,{className:"w-4 h-4"})}),z.jsx("h3",{className:"text-sm font-bold mb-2",children:n.displayName}),z.jsx("div",{className:"text-xs max-w-xs whitespace-pre-line [&_a]:text-blue-600 [&_a]:underline hover:[&_a]:underline",dangerouslySetInnerHTML:{__html:a.current.render(n.about||"")}})]})},yY=({enemy:n,author:e,onPrev:t,onNext:r,close:i,onDelete:s})=>{var U;const a=tl(),l=Q.useRef(null),[h,f]=Q.useState(!1),[p,y]=Q.useState(!1),[_,v]=Q.useState(!1),[w,R]=Q.useState(!1),[D,V]=Q.useState(null),W=!!a&&((U=n.likedBy)==null?void 0:U.includes(a.uid)),G=async()=>{if(!a||!n.id){y(!0);return}const I=lo(Si,"eotv-enemies",n.id);await nx(I,{likedBy:W?P6(a.uid):L6(a.uid)})},te=async()=>{if(!n.id)return;const I=`${window.location.origin}${window.location.pathname}?enemy=${n.id}`;try{await navigator.clipboard.writeText(I),v(!0),setTimeout(()=>v(!1),2e3)}catch(N){console.error("Failed to copy link",N)}},Y=()=>{const I={};e&&(I[n.authorUid]=e),dD([n],I)};Q.useEffect(()=>{const I=N=>{N.key==="Escape"?w?R(!1):h?f(!1):i():!h&&!w&&N.key==="ArrowLeft"?t():!h&&!w&&N.key==="ArrowRight"&&r()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[h,w,i,t,r]);const $=I=>{l.current===I.target&&(w?R(!1):(i(),f(!1)))};return z.jsxs(z.Fragment,{children:[p&&z.jsx($E,{open:p,onClose:()=>y(!1),message:"   "}),z.jsx("div",{ref:l,onClick:$,className:"text-gray-900 dark:text-white shadow-lg cursor-pointer  overflow-hidden fixed z-40 inset-0 p-5  bg-gray-500 dark:bg-black flex justify-center items-center",children:h?z.jsx(mY,{enemy:n,onClose:()=>f(!1)}):z.jsx(z.Fragment,{children:z.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl w-full flex flex-col sm:flex-row shadow-lg h-full max-w-7xl overflow-hidden",children:[z.jsx("img",{src:n.imageURL||"/eotv-enemy-placeholder.png",alt:n.name,className:"w-full sm:w-3/14 h-40 sm:h-auto object-cover"}),z.jsxs("div",{className:"sm:w-4/7 w-full flex flex-col px-6 overflow-y-auto",children:[z.jsx("h2",{className:"text-2xl font-bold text-center p-6 pt-10",children:n.name}),z.jsx("div",{className:"prose dark:prose-invert text-sm",dangerouslySetInnerHTML:{__html:pY(n.customDescription)}})]}),n.imageURL2&&z.jsx("img",{src:n.imageURL2,alt:"Extra",className:"w-full sm:w-3/14 h-40 sm:h-auto object-cover"}),z.jsx("div",{className:"absolute bottom-4 left-4 flex flex-col items-end gap-2",children:z.jsx("div",{className:"flex flex-wrap gap-1",children:n.tags.map((I,N)=>z.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs drop-shadow-2xl",children:I},N))})}),z.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:[z.jsx("span",{className:"text-sm hover:underline cursor-pointer",onClick:I=>{V(I.currentTarget.getBoundingClientRect()),R(!0)},children:(e==null?void 0:e.displayName)||"Unknown"}),z.jsx("img",{src:e==null?void 0:e.photoURL,alt:"Avatar",className:"w-8 h-8 rounded-full border border-gray-500"})]}),z.jsxs("div",{className:"absolute top-2 right-10 flex gap-2",children:[z.jsx("button",{onClick:G,title:W?"":"",className:"text-gray-300 hover:scale-110 transition",children:W?z.jsx(HE,{className:"w-6 h-6"}):z.jsx(xx,{className:"w-6 h-6"})}),z.jsx("button",{onClick:te,title:"",className:"text-gray-300 hover:scale-110 transition",children:z.jsx(kF,{className:"w-6 h-6"})}),z.jsx("button",{onClick:Y,title:"",className:"text-gray-300 hover:scale-110 transition",children:z.jsx(z4,{className:"w-6 h-6"})}),a&&a.uid===n.authorUid&&z.jsxs(z.Fragment,{children:[z.jsx("button",{onClick:()=>f(!0),className:"text-gray-300 hover:text-white cursor-pointer drop-shadow-md",children:z.jsx(SF,{className:"w-6 h-6"})}),z.jsx("button",{onClick:s,className:"text-gray-300 hover:text-white cursor-pointer drop-shadow-md",children:z.jsx(NF,{className:"w-6 h-6"})})]})]}),_&&z.jsx("div",{className:"absolute top-10 right-10 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white text-xs px-2 py-1 rounded-md shadow",children:" "}),z.jsx("button",{onClick:i,className:"absolute top-2 right-2 text-gray-300 hover:text-white cursor-pointer drop-shadow-xl",children:z.jsx(nl,{className:"w-6 h-6"})}),z.jsx("button",{className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-200 dark:bg-gray-700 p-2 rounded-full cursor-pointer hover:scale-110 transition-all duration-300 ease-in-out",onClick:t,children:z.jsx(gF,{className:"w-5 h-5 text-gray-900 dark:text-white"})}),z.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-200 dark:bg-gray-700 p-2 rounded-full cursor-pointer hover:scale-110 transition-all duration-300 ease-in-out",onClick:r,children:z.jsx(bF,{className:"w-5 h-5 text-gray-900 dark:text-white"})})]})})},n.id),e&&w&&D&&z.jsx(gY,{user:e,anchor:D,onClose:()=>R(!1)})]})},ew=()=>z.jsxs("footer",{className:"text-center text-gray-600 dark:text-gray-400 p-4 flex items-center justify-center gap-2",children:[z.jsx("span",{children:"Eugen Zha"}),z.jsxs("a",{href:"https://t.me/d320stories",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 link",children:[z.jsx("img",{src:"/telegram.svg",alt:"Telegram",className:"w-5 h-5"}),"t.me/d320stories"]}),z.jsxs("a",{href:"https://github.com/nightskylark/d320",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 link",children:[z.jsx("img",{src:"/github.svg",alt:"GItHub",className:"w-5 h-5"}),"github.com/nightskylark/d320"]})]}),bY=(n,e,t,r)=>{const i=s4(F4,`avatars/${n}/${e.name}`),s=r4(i,e);s.on("state_changed",a=>{const l=a.bytesTransferred/a.totalBytes*100;r(l)},a=>{console.error(" :",a)},async()=>{const a=await i4(s.snapshot.ref);t(a)})},_Y=({avatarURL:n,setAvatarURL:e,ownerUid:t,className:r})=>{const[i,s]=Q.useState(0),a=h=>{h&&bY(t,h,e,s)},l=h=>{h.preventDefault(),a(h.dataTransfer.files[0])};return z.jsxs("div",{className:`flex items-center justify-center bg-gray-200 dark:bg-gray-800 relative overflow-hidden group ${r||""}`,onDrop:l,onDragOver:h=>h.preventDefault(),children:[n&&z.jsx("img",{src:n,className:"object-cover w-full h-full",alt:""}),z.jsx("input",{type:"file",accept:"image/*",onChange:h=>a(h.target.files&&h.target.files[0]),className:"absolute inset-0 opacity-0 cursor-pointer"}),z.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center text-gray-300 bg-black/40 opacity-100 pointer-events-none z-10",children:[z.jsx(U4,{className:"w-8 h-8"}),z.jsx("span",{className:"text-xs",children:"   "})]}),i>0&&i<100&&z.jsxs("span",{className:"absolute bottom-2 left-10 text-xs bg-black/60 px-1 rounded",children:[i.toFixed(0),"%"]})]})},vY=({onClose:n})=>{const e=tl(),t=hF(),[r,i]=Q.useState((e==null?void 0:e.displayName)||""),[s,a]=Q.useState((e==null?void 0:e.photoURL)||""),[l,h]=Q.useState(""),f=Q.useRef(null);Q.useEffect(()=>{const y=v=>{f.current&&!f.current.contains(v.target)&&n()},_=v=>{v.key==="Escape"&&n()};return document.addEventListener("mousedown",y),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("keydown",_)}},[n]),Q.useEffect(()=>{(async()=>{if(!e)return;const _=await N6(lo(Si,"users",e.uid));if(_.exists()){const v=_.data();h(v.about||"")}})()},[e]);const p=async()=>{if(!e)return;await $P(e,{displayName:r,photoURL:s}),await e.reload();const y=nd.currentUser,_=y&&Object.assign(Object.create(Object.getPrototypeOf(y)),y);t(_),await M6(lo(Si,"users",e.uid),{displayName:r,photoURL:s,about:l},{merge:!0}),n()};return e?z.jsx("div",{role:"button",tabIndex:-1,className:"fixed inset-0 z-50 p-5 bg-gray-500 dark:bg-black flex items-center justify-center",onClick:n,children:z.jsxs("div",{ref:f,role:"dialog",onClick:y=>y.stopPropagation(),className:"relative bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md flex flex-col shadow-lg overflow-hidden p-6 items-center",children:[z.jsx(_Y,{avatarURL:s,setAvatarURL:a,ownerUid:e.uid,className:"w-32 h-32 rounded-full"}),z.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),className:"w-full p-2 mt-4 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-neonBlue"}),z.jsx("textarea",{value:l,onChange:y=>h(y.target.value),placeholder:" ",className:"w-full p-2 mt-4 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-neonBlue"}),z.jsxs("div",{className:"flex gap-4 mt-6 w-full",children:[z.jsxs("button",{type:"button",onClick:n,className:"flex-1 flex items-center justify-center gap-1 px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-900 dark:text-white rounded hover:bg-gray-200 dark:hover:bg-gray-500 transition cursor-pointer",children:[z.jsx(nl,{className:"w-5 h-5"}),""]}),z.jsx("button",{type:"button",onClick:p,className:"flex-1 flex items-center justify-center gap-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-500 transition cursor-pointer",children:""})]})]})}):null},xY=dg(Si,"users"),EY=()=>{const n=tl(),[e,t]=Q.useState(!1),[r,i]=Q.useState(!1),s=Q.useRef(null);Q.useEffect(()=>{if(!n)return;const f=lo(xY,n.uid);M6(f,{displayName:n.displayName||"Unknown",photoURL:n.photoURL||""},{merge:!0})},[n]),Q.useEffect(()=>{const f=p=>{s.current&&!s.current.contains(p.target)&&t(!1)};return e&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[e]);const a=async()=>{const f=new Ei;await P4(nd,f)},l=async()=>{await QP(nd)},h=()=>{i(!0),t(!1)};return z.jsx("div",{className:"relative flex items-center gap-4",children:n?z.jsxs(z.Fragment,{children:[z.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 focus:outline-none hover:bg-gray-200 dark:hover:bg-gray-700 rounded px-2 py-1 cursor-pointer",children:[z.jsx("img",{src:n.photoURL||"https://firebasestorage.googleapis.com/v0/b/d320-971d2.firebasestorage.app/o/images%2Fphoto-placeholder.webp?alt=media&token=e80d935b-9ded-4684-b359-38434c0f6d26",alt:"Avatar",className:"w-8 h-8 rounded-full border border-gray-600 shadow"}),z.jsx("span",{className:"text-sm",children:n.displayName||"Unknown"})]}),e&&z.jsxs("div",{ref:s,className:"absolute right-0 top-full mt-2 w-40 bg-white dark:bg-gray-800 rounded shadow-lg text-sm",children:[z.jsxs("button",{onClick:h,className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",children:[z.jsx(vF,{className:"w-5 h-5"}),""]}),z.jsxs("button",{onClick:l,className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-red-400 cursor-pointer",children:[z.jsx(dF,{className:"w-5 h-5"}),""]})]}),r&&z.jsx(vY,{onClose:()=>i(!1)})]}):z.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-700 dark:bg-sky-300 hover:bg-blue-500 dark:hover:bg-sky-200 text-white dark:text-black font-semibold rounded transition cursor-pointer",children:"  Google"})})},wY=()=>{const[n,e]=Q.useState(()=>localStorage.getItem("theme")!=="light");Q.useEffect(()=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]);const t=()=>{e(i=>!i)},r=n?"translate-x-6":"";return z.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[z.jsx("input",{type:"checkbox",className:"sr-only peer",checked:!n,onChange:t}),z.jsxs("div",{className:"w-12 h-6 bg-gray-300 rounded-full peer-focus:ring-2 peer-focus:ring-blue-700 dark:peer-focus:ring-sky-300 dark:bg-gray-600",children:[z.jsx(TK,{className:"absolute left-1 top-1 w-4 h-4 text-yellow-400"}),z.jsx(xK,{className:"absolute right-1 top-1 w-4 h-4 text-blue-700"}),z.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${r}`})]})]})},tw=()=>z.jsx("header",{className:"text-gray-900 dark:text-sky-300",children:z.jsx("div",{className:"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:z.jsxs("div",{className:"flex h-16 items-center justify-between",children:[z.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[z.jsx("img",{src:"/logo.png",alt:"d320",className:"w-10 h-10"}),z.jsx("h1",{className:"text-2xl font-bold text-blue-700 dark:text-sky-300",children:"d320"})]}),z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsx(wY,{}),z.jsx(EY,{})]})]})})}),kY=({search:n,setSearch:e,tag:t,setTag:r,liked:i,setLiked:s,author:a,setAuthor:l,sort:h,setSort:f,draft:p,setDraft:y,authors:_,onPrint:v,count:w,onRandom:R})=>{const D=Ex(),V=tl(),[W,G]=Q.useState(!1),te=Q.useRef(null),Y=a?_[a]:void 0;return Q.useEffect(()=>{if(!W)return;const $=I=>{te.current&&!te.current.contains(I.target)&&G(!1)},U=I=>{I.key==="Escape"&&G(!1)};return document.addEventListener("mousedown",$),document.addEventListener("keydown",U),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("keydown",U)}},[W]),z.jsxs("div",{className:"flex flex-wrap gap-4 mx-2 my-4 items-center",children:[z.jsx("input",{type:"text",placeholder:"",value:n,onChange:$=>e($.target.value),className:"p-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white flex-1 h-10"}),V&&z.jsxs("button",{type:"button",title:"",onClick:()=>s(!i),className:"text-blue-700 dark:text-sky-300 hover:text-blue-500 dark:hover:text-sky-200 transition flex items-center gap-1 h-10 px-2 cursor-pointer",children:[i?z.jsx(HE,{className:"w-5 h-5"}):z.jsx(xx,{className:"w-5 h-5"}),z.jsx("span",{className:"text-sm",children:""})]}),z.jsxs("select",{value:t,onChange:$=>r($.target.value),className:"p-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white h-10 hover:bg-gray-100 dark:hover:bg-gray-500 transition cursor-pointer",children:[z.jsx("option",{value:"",children:" "}),D.map($=>z.jsx("option",{value:$,children:$},$))]}),z.jsxs("div",{className:"relative",children:[z.jsxs("button",{type:"button",onClick:()=>G($=>!$),className:"p-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white flex items-center gap-2 h-10 hover:bg-gray-100 dark:hover:bg-gray-500 transition cursor-pointer",children:[Y&&z.jsx("img",{src:Y.photoURL,alt:"avatar",className:"w-6 h-6 rounded-full"}),z.jsx("span",{children:Y?Y.displayName:""})]}),W&&z.jsxs("div",{ref:te,className:"absolute left-0 z-10 bg-white dark:bg-gray-800 rounded shadow p-2 mt-1 max-h-60 overflow-y-auto w-48",children:[z.jsx("div",{className:"cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-700 p-1 flex items-center gap-2",onClick:()=>{l(""),G(!1)},children:z.jsx("span",{children:" "})}),Object.entries(_).map(([$,U])=>z.jsxs("div",{className:"cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-700 p-1 flex items-center gap-2",onClick:()=>{l($),G(!1)},children:[z.jsx("img",{src:U.photoURL,alt:U.displayName,className:"w-6 h-6 rounded-full"}),z.jsx("span",{children:U.displayName})]},$))]})]}),V&&z.jsxs("select",{value:p,onChange:$=>y($.target.value),className:"p-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white h-10 hover:bg-gray-100 dark:hover:bg-gray-500 transition cursor-pointer",children:[z.jsx("option",{value:"all",children:" "}),z.jsx("option",{value:"draft",children:""}),z.jsx("option",{value:"published",children:""})]}),z.jsxs("button",{type:"button",onClick:()=>{e(""),r(""),s(!1),l(""),f("name"),y("all")},className:"flex items-center gap-1 p-2 rounded border text-blue-700 dark:text-sky-300 hover:text-blue-500 dark:hover:text-sky-200 border-blue-700 dark:border-sky-300 hover:border-blue-500 dark:hover:border-sky-200 transition h-10 cursor-pointer",children:[z.jsx(nl,{className:"w-5 h-5"})," "]}),z.jsx("span",{className:"text-sm",children:":"}),z.jsxs("select",{value:h,onChange:$=>f($.target.value),className:"p-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white h-10 hover:bg-gray-100 dark:hover:bg-gray-500 transition cursor-pointer",children:[z.jsx("option",{value:"name",children:" "}),z.jsx("option",{value:"date",children:" "})]}),z.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[z.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-300",children:[": ",w]}),z.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 p-2 rounded border text-blue-700 dark:text-sky-300 hover:text-blue-500 dark:hover:text-sky-200 border-blue-700 dark:border-sky-300 hover:border-blue-500 dark:hover:border-sky-200 transition h-10 cursor-pointer",children:[z.jsx(EF,{className:"w-6 h-6"}),""]}),z.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-1 p-2 rounded border text-blue-700 dark:text-sky-300 hover:text-blue-500 dark:hover:text-sky-200 border-blue-700 dark:border-sky-300 hover:border-blue-500 dark:hover:border-sky-200 transition h-10 cursor-pointer",children:[z.jsx(z4,{className:"w-6 h-6"}),""]})]})]})},TY=async n=>{const e={};return await Promise.all(n.map(async t=>{const r=await N6(lo(Si,"users",t));r.exists()&&(e[t]=r.data())})),e},SY=()=>{const[n,e]=Q.useState([]),[t,r]=Q.useState({}),[i,s]=Q.useState(null),[a,l]=Q.useState(null),[h,f]=Q.useState(""),[p,y]=Q.useState(""),[_,v]=Q.useState(!1),[w,R]=Q.useState(""),[D,V]=Q.useState("name"),[W,G]=Q.useState("all"),te=tl();Q.useEffect(()=>H7(V4,xe=>{const Ee=xe.docs.map(pe=>({id:pe.id,...pe.data()}));e(Ee)}),[]),Q.useEffect(()=>{const xe=new URLSearchParams(window.location.search).get("enemy");xe&&l(xe)},[]),Q.useEffect(()=>{const P=[...new Set(n.map(xe=>xe.authorUid))];TY(P).then(r)},[n,te]);const Y=async P=>{te&&window.confirm("  ?")&&(await j7(lo(Si,"eotv-enemies",P)),s(null))},$=()=>{dD(I,t)},U=h.toLowerCase();let I=n.filter(P=>(!P.draft||te&&P.authorUid===te.uid)&&(P.name.toLowerCase().includes(U)||P.customDescription.toLowerCase().includes(U)||P.tags.some(xe=>xe.toLowerCase().includes(U))));p&&(I=I.filter(P=>P.tags.includes(p))),_&&te&&(I=I.filter(P=>{var xe;return(xe=P.likedBy)==null?void 0:xe.includes(te.uid)})),w&&(I=I.filter(P=>P.authorUid===w)),W==="draft"?I=I.filter(P=>P.draft):W==="published"&&(I=I.filter(P=>!P.draft)),I=[...I],D==="name"?I.sort((P,xe)=>P.name.localeCompare(xe.name)):I.sort((P,xe)=>{const Ee=P.createdAt?new Date(P.createdAt).getTime():0;return(xe.createdAt?new Date(xe.createdAt).getTime():0)-Ee}),Q.useEffect(()=>{if(!a)return;const P=I.findIndex(xe=>xe.id===a);P!==-1&&(s(P),l(null))},[I,a]);const N=()=>{!I.length||i===null||s((i+1)%I.length)},F=()=>{if(!I.length)return;const P=Math.floor(Math.random()*I.length);s(P)},j=()=>{!I.length||i===null||s((i-1+I.length)%I.length)},H=i!==null?I[i]:null;return Q.useEffect(()=>{if(H===null)return;const P=xe=>{const Ee=xe.target;Ee&&(Ee.closest("input")||Ee.closest("textarea")||Ee.closest("[contenteditable]"))||(xe.key==="ArrowLeft"?j():xe.key==="ArrowRight"?N():xe.key==="Escape"&&s(null))};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[H,j,N]),Q.useEffect(()=>{const P=new URLSearchParams(window.location.search);H?P.set("enemy",H.id):P.delete("enemy");const xe=P.toString(),Ee=xe?`${window.location.pathname}?${xe}`:window.location.pathname;window.history.replaceState(null,"",Ee)},[H]),z.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-sky-200",children:[z.jsx(tw,{}),z.jsxs("main",{className:"flex-1 p-6 max-w-screen-xl mx-auto",children:[z.jsx("h2",{className:"text-3xl font-bold text-center",children:"     "}),z.jsxs("p",{className:"text-center text-gray-400 p-4",children:["  : ",z.jsxs("a",{className:"link",href:"http://eotvrpg.ru/",target:"_blank",children:[z.jsx("img",{src:"/eotv-logo.png",alt:"EOTV",className:"w-5 h-5 inline-block"}),"eotvrpg.ru"]})]}),z.jsx(kY,{search:h,setSearch:f,tag:p,setTag:y,liked:_,setLiked:v,author:w,setAuthor:R,draft:W,setDraft:G,sort:D,setSort:V,authors:t,onPrint:$,count:I.length,onRandom:F}),z.jsx(CK,{enemies:I,users:t,onSelect:s})]}),H&&z.jsx(yY,{enemy:H,author:t[H.authorUid],onPrev:j,onNext:N,close:()=>s(null),onDelete:()=>Y(H.id)}),z.jsx(ew,{})]})},AY=()=>z.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-sky-200",children:[z.jsx(tw,{}),z.jsxs("main",{className:"flex-1 p-6 max-w-screen-xl mx-auto flex flex-col sm:flex-row gap-6 justify-center items-center",children:[z.jsx("a",{href:"/eotv-enemies/",className:"block w-full sm:w-80 h-56 hover:scale-110 rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out",children:z.jsx("img",{src:"/eotv-enemies.png",alt:" ",className:"object-cover w-full h-full"})}),z.jsx("a",{href:"/eotv-generators/",className:"block w-full sm:w-80 h-56 hover:scale-110 rounded-lg overflow-hidden shadow-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center transition-all duration-300 ease-in-out",children:z.jsx("span",{className:"text-center px-4 font-bold",children:"   "})})]}),z.jsx(ew,{})]}),CY=()=>z.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-sky-200",children:[z.jsx(tw,{}),z.jsxs("main",{className:"flex-1 p-6 max-w-screen-xl mx-auto",children:[z.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"   "}),z.jsx("p",{className:"text-center",children:" "})]}),z.jsx(ew,{})]}),RY=t8.createRoot(document.getElementById("root")),jA=window.location.pathname;let hm;jA.startsWith("/eotv-enemies")?hm=z.jsx(LF,{children:z.jsx(SY,{})}):jA.startsWith("/eotv-generators")?hm=z.jsx(CY,{}):hm=z.jsx(AY,{});RY.render(z.jsx(mv.StrictMode,{children:z.jsx(cF,{children:hm})}));
